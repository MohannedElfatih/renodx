#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _14 = float((int)(frame_consts.vp_dim.x));
  float _15 = float((int)(frame_consts.vp_dim.y));
  float _47;
  float _48;
  float _49;
  float _50;
  float _213;
  float _224;
  float _235;
  float _258;
  float _259;
  float _260;
  float _360;
  float _361;
  float _362;
  float _403;
  float _404;
  float _405;
  float _554;
  float _555;
  float _556;
  float _564;
  float _1832;
  float _1833;
  float _1834;
  float _1843;
  float _1844;
  float _1845;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _22 = abs(O_Uv.x + -0.5f);
    float _23 = abs(O_Uv.y + -0.5f);
    float _27 = (rsqrt(dot(float2(_22, _23), float2(_22, _23))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _28 = _27 * _22;
    float _29 = _27 * _23;
    float4 _32 = tex.SampleLevel(sampler_nearest, float2((_28 + O_Uv.x), (_29 + O_Uv.y)), 0.0f);
    float4 _34 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    float4 _38 = tex.SampleLevel(sampler_nearest, float2((O_Uv.x - _28), (O_Uv.y - _29)), 0.0f);
    _47 = _32.x;
    _48 = _34.y;
    _49 = _38.z;
    _50 = 0.5f;
  } else {
    float4 _41 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    _47 = _41.x;
    _48 = _41.y;
    _49 = _41.z;
    _50 = _41.w;
  }
  float3 untonemapped = float3(_47, _48, _49);

  float3 _51 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _66 = max((((1.0f - (_47 * 0.2125999927520752f)) - (_48 * 0.7152000069618225f)) - (_49 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _70 = (_47 / _66) + (frame_consts.params.bloom.intensity * _51.x);
  float _71 = (_48 / _66) + (frame_consts.params.bloom.intensity * _51.y);
  float _72 = (_49 / _66) + (frame_consts.params.bloom.intensity * _51.z);
  float _78 = (((_70 * 0.2125999927520752f) + 1.0f) + (_71 * 0.7152000069618225f)) + (_72 * 0.0722000002861023f);
  float _82 = saturate(_70 / _78);
  float _83 = saturate(_71 / _78);
  float _84 = saturate(_72 / _78);
  if (!(frame_consts.glitch == 0)) {
    float _92 = float((int)(int((_14 / _15) * 1080.0f)));
    float _93 = _92 * O_Uv.x;
    float _94 = O_Uv.y * 1080.0f;
    float _95 = _92 * 0.5f;
    float _98 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _105 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _111 = ((_105 * 3.0f) * exp2(1.4426950216293335f - (_105 * 4.328084945678711f))) + ((_98 * 5.0f) * exp2(1.4426950216293335f - (_98 * 7.213475227355957f)));
    float _112 = _111 * 15.0f;
    float _113 = _112 + 30.0f;
    float _115 = (_111 * 20.0f) + 80.0f;
    float _119 = abs(_92 * (O_Uv.x + -0.5f));
    float _120 = abs(_94 + -540.0f);
    float _123 = ((_119 - _95) + _113) + _115;
    float _126 = ((_120 + -510.0f) + _112) + _115;
    float _129 = max(_123, 0.0f);
    float _130 = max(_126, 0.0f);
    float _144 = _119 - (_95 - _113);
    float _145 = _120 - (510.0f - _112);
    float _146 = max(_144, 0.0f);
    float _147 = max(_145, 0.0f);
    float _163 = max(max(0.0f, (1.0f - saturate(abs((min(max(_123, _126), 0.0f) - _115) + sqrt((_130 * _130) + (_129 * _129))) + -0.5f))), ((1.0f - saturate(abs(min(max(_144, _145), 0.0f) + sqrt((_147 * _147) + (_146 * _146))) + -0.5f)) * (1.0f - saturate(_111 * 1.6666666269302368f))));
    float _174 = frac((_93 + _94) * 0.0012499999720603228f) + -0.5f;
    float _175 = frac((_94 - _93) * 0.0012499999720603228f) + -0.5f;
    float _187 = saturate((sin((((_93 * 0.0003124999930150807f) + (O_Uv.y * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _191 = (_187 * _187) * (3.0f - (_187 * 2.0f));
    float _193 = saturate(sqrt((_175 * _175) + (_174 * _174)) * 2.0f);
    float _198 = _191 * 0.20000000298023224f;
    float _200 = ((_193 * 0.12156862020492554f) + 0.7450979948043823f) + _198;
    float _201 = ((_193 * 0.3333333134651184f) + 0.34117645025253296f) + _198;
    do {
      if (!(!((_198 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _213 = ((_191 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _213 = exp2(log2((_191 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_200 <= 0.040449999272823334f))) {
          _224 = (_200 * 0.07739938050508499f);
        } else {
          _224 = exp2(log2((_200 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_201 <= 0.040449999272823334f))) {
            _235 = (_201 * 0.07739938050508499f);
          } else {
            _235 = exp2(log2((_201 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _241 = (((_213 * 0.2125999927520752f) + 1.0f) + (_224 * 0.7152000069618225f)) + (_235 * 0.0722000002861023f);
          _258 = (((saturate(_213 / _241) - _82) * _163) + _82);
          _259 = (((saturate(_224 / _241) - _83) * _163) + _83);
          _260 = (((saturate(_235 / _241) - _84) * _163) + _84);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _258 = _82;
    _259 = _83;
    _260 = _84;
  }
  float _266 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _270 = 10000.0f / ((_266.x * 19999.5f) + 0.5f);
  float _275 = (_270 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _277 = (_270 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _278 = -0.0f - _270;
  float _302 = mad((frame_consts.paper_xf[2].z), _278, mad((frame_consts.paper_xf[1].z), _277, (_275 * (frame_consts.paper_xf[0].z))));
  float _314 = exp2(round(log2(max(5.0f, (-0.0f - (_302 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _316 = min((1.0f / _314), 0.20000000298023224f);
  float _317 = frame_consts.game_plane_blend.x - _314;
  float _324 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_317 * (mad((frame_consts.paper_xf[2].x), _278, mad((frame_consts.paper_xf[1].x), _277, (_275 * (frame_consts.paper_xf[0].x)))) / _302)) + (frame_consts.paper_xf[3].x)) * _316), (((_317 * (mad((frame_consts.paper_xf[2].y), _278, mad((frame_consts.paper_xf[1].y), _277, (_275 * (frame_consts.paper_xf[0].y)))) / _302)) + (frame_consts.paper_xf[3].y)) * _316)), 0.0f);
  float _329 = (1.0f - _324.x) * frame_consts.paper_mult;
  float _333 = _258 - (_329 * _258);
  float _334 = _259 - (_329 * _259);
  float _335 = _260 - (_329 * _260);
  if (!(frame_consts.death_screen == 0)) {
    float _358 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _50), _50);
    _360 = _358;
    _361 = _358;
    _362 = _358;
  } else {
    _360 = (lerp(_333, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _361 = (lerp(_334, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _362 = (lerp(_335, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _370 = _14 * O_Uv.x;
    float _371 = _15 * O_Uv.y;
    float _372 = _370 * 0.06666667014360428f;
    float _373 = _371 * 0.038490019738674164f;
    float _375 = ceil(_372 - _373);
    float _377 = floor(_371 * 0.07698003947734833f);
    float _378 = _377 + 1.0f;
    float _381 = ceil((-0.0f - _372) - _373);
    float _383 = (_375 - _381) * 7.5f;
    float _384 = _375 * 0.28867512941360474f;
    float _385 = _378 * 0.5773502588272095f;
    float _386 = _385 - _384;
    float _387 = _381 * 0.28867512941360474f;
    float _390 = _383 / _14;
    float _391 = ((_386 - _387) * 15.0f) / _15;
    do {
      if (((_378 + _375) + _381) == 2.0f) {
        _403 = (_375 + 1.0f);
        _404 = (_377 + 2.0f);
        _405 = (_381 + 1.0f);
      } else {
        _403 = (_375 + -1.0f);
        _404 = _377;
        _405 = (_381 + -1.0f);
      }
      float _406 = _403 - _381;
      float _409 = _385 - (_403 * 0.28867512941360474f);
      float _410 = _409 - _387;
      float _413 = (_404 * 0.5773502588272095f) - _384;
      float _414 = _413 - _387;
      float _416 = _375 - _405;
      float _419 = _386 - (_405 * 0.28867512941360474f);
      float _423 = (_409 - _413) * 15.0f;
      float _424 = (_403 - _375) * -7.5f;
      float _426 = rsqrt(dot(float2(_423, _424), float2(_423, _424)));
      float _435 = (_414 - _419) * 15.0f;
      float _436 = (_405 - _381) * -7.5f;
      float _438 = rsqrt(dot(float2(_435, _436), float2(_435, _436)));
      float _447 = (_419 - _410) * 15.0f;
      float _448 = (_416 - _406) * -7.5f;
      float _450 = rsqrt(dot(float2(_447, _448), float2(_447, _448)));
      float _463 = _390 + -0.5f;
      float _464 = _391 + -0.5f;
      float _511 = O_Uv.x + -0.5f;
      float _512 = O_Uv.y + -0.5f;
      float _519 = ((frame_consts.time - sqrt((_512 * _512) + (_511 * _511))) + (frac(sin(dot(float2((_390 * 5.0f), (_391 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _523 = frac(abs(_519));
      float _527 = max((select((_519 >= (-0.0f - _519)), _523, (-0.0f - _523)) * 18.0f), 0.0f);
      float _543 = min(max((1.0f - (((((_527 * 1.600000023841858f) * exp2(1.4426950216293335f - (_527 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_464 * _464) + (_463 * _463)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_390 * 3.0f), (_391 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_390, _391), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_390 * 2.0f), (_391 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _549 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_406 * 7.5f) - _370), ((_410 * 15.0f) - _371)), float2((_423 * _426), (_426 * _424))))), abs(dot(float2((_383 - _370), ((_414 * 15.0f) - _371)), float2((_438 * _435), (_438 * _436))))), abs(dot(float2(((_416 * 7.5f) - _370), ((_419 * 15.0f) - _371)), float2((_450 * _447), (_450 * _448))))) * 0.2309400886297226f)) - _543) / ((_543 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _554 = (_549 * _360);
      _555 = (_549 * _361);
      _556 = (_549 * _362);
    } while (false);
  } else {
    _554 = _360;
    _555 = _361;
    _556 = _362;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _564 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _564 = 0.0f;
  }
  float _571 = frame_consts.params.vignette.intensity + _564;
  float _574 = _14 / _15;
  float _586 = exp2(log2(saturate((_571 * abs(O_Uv.x + -0.5f)) * (((_574 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _587 = exp2(log2(saturate(_571 * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _593 = exp2(log2(saturate(1.0f - dot(float2(_586, _587), float2(_586, _587)))) * 6.0f);
  float _598 = 1.0f - _593;
  float _600 = 1.0f - (_598 * 0.8500000238418579f);
  float _607 = (_600 * (_554 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _608 = (_600 * (_555 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _609 = (_600 * (_556 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _613 = _14 * O_Uv.x;
  float _614 = _15 * O_Uv.y;
  float _615 = _613 + _614;
  float _621 = frac(_615 * 0.0033333334140479565f) + -0.5f;
  float _622 = frac((_614 - _613) * 0.0033333334140479565f) + -0.5f;
  float _628 = saturate(sqrt((_622 * _622) + (_621 * _621)) * 2.0f);
  float _639 = saturate((sin((_615 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _644 = ((_639 * _639) * 0.2199999988079071f) * (3.0f - (_639 * 2.0f));
  float _645 = _644 + 0.9777389168739319f;
  float _646 = ((_628 * 0.13274884223937988f) + 0.7175776362419128f) + _644;
  float _647 = ((_628 * 0.3335757553577423f) + 0.30871906876564026f) + _644;
  float _652 = (O_Uv.x * 1080.0f) * _574;
  float _653 = O_Uv.y * 1080.0f;
  float _654 = _652 * 0.04444444552063942f;
  float _655 = O_Uv.y * 27.712812423706055f;
  float _657 = ceil(_654 - _655);
  float _660 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _663 = ceil((-0.0f - _655) - _654);
  float _665 = (_660 + _657) + _663;
  float _667 = (_665 * 22.5f) + -33.75f;
  float _668 = _657 - _663;
  float _670 = _668 * 11.25f;
  float _676 = (((_660 * 0.5773502588272095f) - (_657 * 0.28867512941360474f)) - (_663 * 0.28867512941360474f)) * 22.5f;
  float _679 = _667 + _670;
  float _680 = _676 + (19.485570907592773f - (_665 * 12.990381240844727f));
  float _683 = ((_665 * 25.980762481689453f) + -38.97114181518555f) + _676;
  float _684 = _670 - _667;
  float _685 = _679 - _652;
  float _686 = _680 - _653;
  float _689 = _670 - _652;
  float _690 = _683 - _653;
  float _695 = _686 * _686;
  float _702 = _684 - _652;
  float _706 = _680 * 2.5f;
  float _707 = frame_consts.time * 1.5f;
  float _711 = _680 * 0.004444444552063942f;
  float _712 = frame_consts.time * 0.15000000596046448f;
  float _713 = (_679 * 0.04444444552063942f) - _712;
  float _714 = _711 - _712;
  float _715 = frame_consts.time * 0.02500000037252903f;
  float _716 = dot(float3(_713, _714, _715), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _720 = floor(_716 + _713);
  float _721 = floor(_716 + _714);
  float _722 = floor(_716 + _715);
  float _726 = dot(float3(_720, _721, _722), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _727 = _726 + (_713 - _720);
  float _728 = _726 + (_714 - _721);
  float _729 = (_715 - _722) + _726;
  float _733 = select((_727 < _728), 0.0f, 1.0f);
  float _734 = select((_728 < _729), 0.0f, 1.0f);
  float _735 = select((_729 < _727), 0.0f, 1.0f);
  float _736 = 1.0f - _733;
  float _737 = 1.0f - _734;
  float _738 = 1.0f - _735;
  float _739 = min(_733, _738);
  float _740 = min(_734, _736);
  float _741 = min(_735, _737);
  float _742 = max(_733, _738);
  float _743 = max(_734, _736);
  float _744 = max(_735, _737);
  float _748 = (_727 - _739) + 0.1666666716337204f;
  float _749 = (_728 - _740) + 0.1666666716337204f;
  float _750 = (_729 - _741) + 0.1666666716337204f;
  float _754 = (_727 - _742) + 0.3333333432674408f;
  float _755 = (_728 - _743) + 0.3333333432674408f;
  float _756 = (_729 - _744) + 0.3333333432674408f;
  float _757 = _727 + -0.5f;
  float _758 = _728 + -0.5f;
  float _759 = _729 + -0.5f;
  float _769 = _720 - (floor(_720 * 0.0034602077212184668f) * 289.0f);
  float _770 = _721 - (floor(_721 * 0.0034602077212184668f) * 289.0f);
  float _771 = _722 - (floor(_722 * 0.0034602077212184668f) * 289.0f);
  float _772 = _771 + _741;
  float _773 = _771 + _744;
  float _774 = _771 + 1.0f;
  float _783 = ((_771 * 34.0f) + 1.0f) * _771;
  float _784 = ((_772 * 34.0f) + 1.0f) * _772;
  float _785 = ((_773 * 34.0f) + 1.0f) * _773;
  float _786 = ((_774 * 34.0f) + 1.0f) * _774;
  float _800 = (_783 - (floor(_783 * 0.0034602077212184668f) * 289.0f)) + _770;
  float _803 = ((_770 + _740) - (floor(_784 * 0.0034602077212184668f) * 289.0f)) + _784;
  float _806 = ((_770 + _743) - (floor(_785 * 0.0034602077212184668f) * 289.0f)) + _785;
  float _809 = ((_770 + 1.0f) - (floor(_786 * 0.0034602077212184668f) * 289.0f)) + _786;
  float _818 = ((_800 * 34.0f) + 1.0f) * _800;
  float _819 = ((_803 * 34.0f) + 1.0f) * _803;
  float _820 = ((_806 * 34.0f) + 1.0f) * _806;
  float _821 = ((_809 * 34.0f) + 1.0f) * _809;
  float _835 = (_818 - (floor(_818 * 0.0034602077212184668f) * 289.0f)) + _769;
  float _838 = ((_769 + _739) - (floor(_819 * 0.0034602077212184668f) * 289.0f)) + _819;
  float _841 = ((_769 + _742) - (floor(_820 * 0.0034602077212184668f) * 289.0f)) + _820;
  float _844 = ((_769 + 1.0f) - (floor(_821 * 0.0034602077212184668f) * 289.0f)) + _821;
  float _853 = ((_835 * 34.0f) + 1.0f) * _835;
  float _854 = ((_838 * 34.0f) + 1.0f) * _838;
  float _855 = ((_841 * 34.0f) + 1.0f) * _841;
  float _856 = ((_844 * 34.0f) + 1.0f) * _844;
  float _869 = _853 - (floor(_853 * 0.0034602077212184668f) * 289.0f);
  float _870 = _854 - (floor(_854 * 0.0034602077212184668f) * 289.0f);
  float _871 = _855 - (floor(_855 * 0.0034602077212184668f) * 289.0f);
  float _872 = _856 - (floor(_856 * 0.0034602077212184668f) * 289.0f);
  float _885 = _869 - (floor(_869 * 0.020408164709806442f) * 49.0f);
  float _886 = _870 - (floor(_870 * 0.020408164709806442f) * 49.0f);
  float _887 = _871 - (floor(_871 * 0.020408164709806442f) * 49.0f);
  float _888 = _872 - (floor(_872 * 0.020408164709806442f) * 49.0f);
  float _893 = floor(_885 * 0.1428571492433548f);
  float _894 = floor(_886 * 0.1428571492433548f);
  float _895 = floor(_887 * 0.1428571492433548f);
  float _896 = floor(_888 * 0.1428571492433548f);
  float _913 = (_893 * 0.2857142984867096f) + -0.9285714030265808f;
  float _914 = (_894 * 0.2857142984867096f) + -0.9285714030265808f;
  float _915 = (_895 * 0.2857142984867096f) + -0.9285714030265808f;
  float _916 = (_896 * 0.2857142984867096f) + -0.9285714030265808f;
  float _921 = (floor(_885 - (_893 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _922 = (floor(_886 - (_894 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _923 = (floor(_887 - (_895 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _924 = (floor(_888 - (_896 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _937 = (1.0f - abs(_913)) - abs(_921);
  float _938 = (1.0f - abs(_914)) - abs(_922);
  float _939 = (1.0f - abs(_915)) - abs(_923);
  float _940 = (1.0f - abs(_916)) - abs(_924);
  float _969 = select((_937 > 0.0f), -0.0f, -1.0f);
  float _970 = select((_938 > 0.0f), -0.0f, -1.0f);
  float _971 = select((_939 > 0.0f), -0.0f, -1.0f);
  float _972 = select((_940 > 0.0f), -0.0f, -1.0f);
  float _977 = (((floor(_913) * 2.0f) + 1.0f) * _969) + _913;
  float _978 = (((floor(_921) * 2.0f) + 1.0f) * _969) + _921;
  float _979 = (((floor(_914) * 2.0f) + 1.0f) * _970) + _914;
  float _980 = (((floor(_922) * 2.0f) + 1.0f) * _970) + _922;
  float _985 = (((floor(_915) * 2.0f) + 1.0f) * _971) + _915;
  float _986 = (((floor(_923) * 2.0f) + 1.0f) * _971) + _923;
  float _987 = (((floor(_916) * 2.0f) + 1.0f) * _972) + _916;
  float _988 = (((floor(_924) * 2.0f) + 1.0f) * _972) + _924;
  float _997 = 1.7928400039672852f - (dot(float3(_977, _978, _937), float3(_977, _978, _937)) * 0.8537350296974182f);
  float _998 = 1.7928400039672852f - (dot(float3(_979, _980, _938), float3(_979, _980, _938)) * 0.8537350296974182f);
  float _999 = 1.7928400039672852f - (dot(float3(_985, _986, _939), float3(_985, _986, _939)) * 0.8537350296974182f);
  float _1000 = 1.7928400039672852f - (dot(float3(_987, _988, _940), float3(_987, _988, _940)) * 0.8537350296974182f);
  float _1021 = max((0.6000000238418579f - dot(float3(_727, _728, _729), float3(_727, _728, _729))), 0.0f);
  float _1022 = max((0.6000000238418579f - dot(float3(_748, _749, _750), float3(_748, _749, _750))), 0.0f);
  float _1023 = max((0.6000000238418579f - dot(float3(_754, _755, _756), float3(_754, _755, _756))), 0.0f);
  float _1024 = max((0.6000000238418579f - dot(float3(_757, _758, _759), float3(_757, _758, _759))), 0.0f);
  float _1025 = _1021 * _1021;
  float _1026 = _1022 * _1022;
  float _1027 = _1023 * _1023;
  float _1028 = _1024 * _1024;
  float _1043 = saturate((((sin(_706 - _707) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1025 * _1025), (_1026 * _1026), (_1027 * _1027), (_1028 * _1028)), float4(dot(float3((_997 * _977), (_997 * _978), (_997 * _937)), float3(_727, _728, _729)), dot(float3((_998 * _979), (_998 * _980), (_998 * _938)), float3(_748, _749, _750)), dot(float3((_999 * _985), (_999 * _986), (_999 * _939)), float3(_754, _755, _756)), dot(float3((_1000 * _987), (_1000 * _988), (_1000 * _940)), float3(_757, _758, _759)))) * 21.0f)) * 4.0f);
  float _1047 = (_1043 * _1043) * (3.0f - (_1043 * 2.0f));
  float _1049 = (_1047 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1054 = (_668 * 0.5f) - _712;
  float _1055 = (_683 * 0.004444444552063942f) - _712;
  float _1056 = dot(float3(_1054, _1055, _715), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1060 = floor(_1056 + _1054);
  float _1061 = floor(_1056 + _1055);
  float _1062 = floor(_1056 + _715);
  float _1066 = dot(float3(_1060, _1061, _1062), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1067 = _1066 + (_1054 - _1060);
  float _1068 = _1066 + (_1055 - _1061);
  float _1069 = (_715 - _1062) + _1066;
  float _1073 = select((_1067 < _1068), 0.0f, 1.0f);
  float _1074 = select((_1068 < _1069), 0.0f, 1.0f);
  float _1075 = select((_1069 < _1067), 0.0f, 1.0f);
  float _1076 = 1.0f - _1073;
  float _1077 = 1.0f - _1074;
  float _1078 = 1.0f - _1075;
  float _1079 = min(_1073, _1078);
  float _1080 = min(_1074, _1076);
  float _1081 = min(_1075, _1077);
  float _1082 = max(_1073, _1078);
  float _1083 = max(_1074, _1076);
  float _1084 = max(_1075, _1077);
  float _1088 = (_1067 - _1079) + 0.1666666716337204f;
  float _1089 = (_1068 - _1080) + 0.1666666716337204f;
  float _1090 = (_1069 - _1081) + 0.1666666716337204f;
  float _1094 = (_1067 - _1082) + 0.3333333432674408f;
  float _1095 = (_1068 - _1083) + 0.3333333432674408f;
  float _1096 = (_1069 - _1084) + 0.3333333432674408f;
  float _1097 = _1067 + -0.5f;
  float _1098 = _1068 + -0.5f;
  float _1099 = _1069 + -0.5f;
  float _1109 = _1060 - (floor(_1060 * 0.0034602077212184668f) * 289.0f);
  float _1110 = _1061 - (floor(_1061 * 0.0034602077212184668f) * 289.0f);
  float _1111 = _1062 - (floor(_1062 * 0.0034602077212184668f) * 289.0f);
  float _1112 = _1111 + _1081;
  float _1113 = _1111 + _1084;
  float _1114 = _1111 + 1.0f;
  float _1123 = ((_1111 * 34.0f) + 1.0f) * _1111;
  float _1124 = ((_1112 * 34.0f) + 1.0f) * _1112;
  float _1125 = ((_1113 * 34.0f) + 1.0f) * _1113;
  float _1126 = ((_1114 * 34.0f) + 1.0f) * _1114;
  float _1140 = (_1123 - (floor(_1123 * 0.0034602077212184668f) * 289.0f)) + _1110;
  float _1143 = ((_1110 + _1080) - (floor(_1124 * 0.0034602077212184668f) * 289.0f)) + _1124;
  float _1146 = ((_1110 + _1083) - (floor(_1125 * 0.0034602077212184668f) * 289.0f)) + _1125;
  float _1149 = ((_1110 + 1.0f) - (floor(_1126 * 0.0034602077212184668f) * 289.0f)) + _1126;
  float _1158 = ((_1140 * 34.0f) + 1.0f) * _1140;
  float _1159 = ((_1143 * 34.0f) + 1.0f) * _1143;
  float _1160 = ((_1146 * 34.0f) + 1.0f) * _1146;
  float _1161 = ((_1149 * 34.0f) + 1.0f) * _1149;
  float _1175 = (_1158 - (floor(_1158 * 0.0034602077212184668f) * 289.0f)) + _1109;
  float _1178 = ((_1109 + _1079) - (floor(_1159 * 0.0034602077212184668f) * 289.0f)) + _1159;
  float _1181 = ((_1109 + _1082) - (floor(_1160 * 0.0034602077212184668f) * 289.0f)) + _1160;
  float _1184 = ((_1109 + 1.0f) - (floor(_1161 * 0.0034602077212184668f) * 289.0f)) + _1161;
  float _1193 = ((_1175 * 34.0f) + 1.0f) * _1175;
  float _1194 = ((_1178 * 34.0f) + 1.0f) * _1178;
  float _1195 = ((_1181 * 34.0f) + 1.0f) * _1181;
  float _1196 = ((_1184 * 34.0f) + 1.0f) * _1184;
  float _1209 = _1193 - (floor(_1193 * 0.0034602077212184668f) * 289.0f);
  float _1210 = _1194 - (floor(_1194 * 0.0034602077212184668f) * 289.0f);
  float _1211 = _1195 - (floor(_1195 * 0.0034602077212184668f) * 289.0f);
  float _1212 = _1196 - (floor(_1196 * 0.0034602077212184668f) * 289.0f);
  float _1225 = _1209 - (floor(_1209 * 0.020408164709806442f) * 49.0f);
  float _1226 = _1210 - (floor(_1210 * 0.020408164709806442f) * 49.0f);
  float _1227 = _1211 - (floor(_1211 * 0.020408164709806442f) * 49.0f);
  float _1228 = _1212 - (floor(_1212 * 0.020408164709806442f) * 49.0f);
  float _1233 = floor(_1225 * 0.1428571492433548f);
  float _1234 = floor(_1226 * 0.1428571492433548f);
  float _1235 = floor(_1227 * 0.1428571492433548f);
  float _1236 = floor(_1228 * 0.1428571492433548f);
  float _1253 = (_1233 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1254 = (_1234 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1255 = (_1235 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1256 = (_1236 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1261 = (floor(_1225 - (_1233 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1262 = (floor(_1226 - (_1234 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1263 = (floor(_1227 - (_1235 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1264 = (floor(_1228 - (_1236 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1277 = (1.0f - abs(_1253)) - abs(_1261);
  float _1278 = (1.0f - abs(_1254)) - abs(_1262);
  float _1279 = (1.0f - abs(_1255)) - abs(_1263);
  float _1280 = (1.0f - abs(_1256)) - abs(_1264);
  float _1309 = select((_1277 > 0.0f), -0.0f, -1.0f);
  float _1310 = select((_1278 > 0.0f), -0.0f, -1.0f);
  float _1311 = select((_1279 > 0.0f), -0.0f, -1.0f);
  float _1312 = select((_1280 > 0.0f), -0.0f, -1.0f);
  float _1317 = (((floor(_1253) * 2.0f) + 1.0f) * _1309) + _1253;
  float _1318 = (((floor(_1261) * 2.0f) + 1.0f) * _1309) + _1261;
  float _1319 = (((floor(_1254) * 2.0f) + 1.0f) * _1310) + _1254;
  float _1320 = (((floor(_1262) * 2.0f) + 1.0f) * _1310) + _1262;
  float _1325 = (((floor(_1255) * 2.0f) + 1.0f) * _1311) + _1255;
  float _1326 = (((floor(_1263) * 2.0f) + 1.0f) * _1311) + _1263;
  float _1327 = (((floor(_1256) * 2.0f) + 1.0f) * _1312) + _1256;
  float _1328 = (((floor(_1264) * 2.0f) + 1.0f) * _1312) + _1264;
  float _1337 = 1.7928400039672852f - (dot(float3(_1317, _1318, _1277), float3(_1317, _1318, _1277)) * 0.8537350296974182f);
  float _1338 = 1.7928400039672852f - (dot(float3(_1319, _1320, _1278), float3(_1319, _1320, _1278)) * 0.8537350296974182f);
  float _1339 = 1.7928400039672852f - (dot(float3(_1325, _1326, _1279), float3(_1325, _1326, _1279)) * 0.8537350296974182f);
  float _1340 = 1.7928400039672852f - (dot(float3(_1327, _1328, _1280), float3(_1327, _1328, _1280)) * 0.8537350296974182f);
  float _1361 = max((0.6000000238418579f - dot(float3(_1067, _1068, _1069), float3(_1067, _1068, _1069))), 0.0f);
  float _1362 = max((0.6000000238418579f - dot(float3(_1088, _1089, _1090), float3(_1088, _1089, _1090))), 0.0f);
  float _1363 = max((0.6000000238418579f - dot(float3(_1094, _1095, _1096), float3(_1094, _1095, _1096))), 0.0f);
  float _1364 = max((0.6000000238418579f - dot(float3(_1097, _1098, _1099), float3(_1097, _1098, _1099))), 0.0f);
  float _1365 = _1361 * _1361;
  float _1366 = _1362 * _1362;
  float _1367 = _1363 * _1363;
  float _1368 = _1364 * _1364;
  float _1383 = saturate((((sin((_683 * 2.5f) - _707) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1365 * _1365), (_1366 * _1366), (_1367 * _1367), (_1368 * _1368)), float4(dot(float3((_1337 * _1317), (_1337 * _1318), (_1337 * _1277)), float3(_1067, _1068, _1069)), dot(float3((_1338 * _1319), (_1338 * _1320), (_1338 * _1278)), float3(_1088, _1089, _1090)), dot(float3((_1339 * _1325), (_1339 * _1326), (_1339 * _1279)), float3(_1094, _1095, _1096)), dot(float3((_1340 * _1327), (_1340 * _1328), (_1340 * _1280)), float3(_1097, _1098, _1099)))) * 21.0f)) * 4.0f);
  float _1387 = (_1383 * _1383) * (3.0f - (_1383 * 2.0f));
  float _1389 = (_1387 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1396 = frame_consts.time * 0.15000000596046448f;
  float _1397 = (_684 * 0.04444444552063942f) - _1396;
  float _1398 = _711 - _1396;
  float _1399 = frame_consts.time * 0.02500000037252903f;
  float _1400 = dot(float3(_1397, _1398, _1399), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1404 = floor(_1397 + _1400);
  float _1405 = floor(_1398 + _1400);
  float _1406 = floor(_1399 + _1400);
  float _1410 = dot(float3(_1404, _1405, _1406), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1411 = _1410 + (_1397 - _1404);
  float _1412 = _1410 + (_1398 - _1405);
  float _1413 = (_1399 - _1406) + _1410;
  float _1417 = select((_1411 < _1412), 0.0f, 1.0f);
  float _1418 = select((_1412 < _1413), 0.0f, 1.0f);
  float _1419 = select((_1413 < _1411), 0.0f, 1.0f);
  float _1420 = 1.0f - _1417;
  float _1421 = 1.0f - _1418;
  float _1422 = 1.0f - _1419;
  float _1423 = min(_1417, _1422);
  float _1424 = min(_1418, _1420);
  float _1425 = min(_1419, _1421);
  float _1426 = max(_1417, _1422);
  float _1427 = max(_1418, _1420);
  float _1428 = max(_1419, _1421);
  float _1432 = (_1411 - _1423) + 0.1666666716337204f;
  float _1433 = (_1412 - _1424) + 0.1666666716337204f;
  float _1434 = (_1413 - _1425) + 0.1666666716337204f;
  float _1438 = (_1411 - _1426) + 0.3333333432674408f;
  float _1439 = (_1412 - _1427) + 0.3333333432674408f;
  float _1440 = (_1413 - _1428) + 0.3333333432674408f;
  float _1441 = _1411 + -0.5f;
  float _1442 = _1412 + -0.5f;
  float _1443 = _1413 + -0.5f;
  float _1453 = _1404 - (floor(_1404 * 0.0034602077212184668f) * 289.0f);
  float _1454 = _1405 - (floor(_1405 * 0.0034602077212184668f) * 289.0f);
  float _1455 = _1406 - (floor(_1406 * 0.0034602077212184668f) * 289.0f);
  float _1456 = _1455 + _1425;
  float _1457 = _1455 + _1428;
  float _1458 = _1455 + 1.0f;
  float _1467 = ((_1455 * 34.0f) + 1.0f) * _1455;
  float _1468 = ((_1456 * 34.0f) + 1.0f) * _1456;
  float _1469 = ((_1457 * 34.0f) + 1.0f) * _1457;
  float _1470 = ((_1458 * 34.0f) + 1.0f) * _1458;
  float _1484 = (_1467 - (floor(_1467 * 0.0034602077212184668f) * 289.0f)) + _1454;
  float _1487 = ((_1454 + _1424) - (floor(_1468 * 0.0034602077212184668f) * 289.0f)) + _1468;
  float _1490 = ((_1454 + _1427) - (floor(_1469 * 0.0034602077212184668f) * 289.0f)) + _1469;
  float _1493 = ((_1454 + 1.0f) - (floor(_1470 * 0.0034602077212184668f) * 289.0f)) + _1470;
  float _1502 = ((_1484 * 34.0f) + 1.0f) * _1484;
  float _1503 = ((_1487 * 34.0f) + 1.0f) * _1487;
  float _1504 = ((_1490 * 34.0f) + 1.0f) * _1490;
  float _1505 = ((_1493 * 34.0f) + 1.0f) * _1493;
  float _1519 = (_1502 - (floor(_1502 * 0.0034602077212184668f) * 289.0f)) + _1453;
  float _1522 = ((_1453 + _1423) - (floor(_1503 * 0.0034602077212184668f) * 289.0f)) + _1503;
  float _1525 = ((_1453 + _1426) - (floor(_1504 * 0.0034602077212184668f) * 289.0f)) + _1504;
  float _1528 = ((_1453 + 1.0f) - (floor(_1505 * 0.0034602077212184668f) * 289.0f)) + _1505;
  float _1537 = ((_1519 * 34.0f) + 1.0f) * _1519;
  float _1538 = ((_1522 * 34.0f) + 1.0f) * _1522;
  float _1539 = ((_1525 * 34.0f) + 1.0f) * _1525;
  float _1540 = ((_1528 * 34.0f) + 1.0f) * _1528;
  float _1553 = _1537 - (floor(_1537 * 0.0034602077212184668f) * 289.0f);
  float _1554 = _1538 - (floor(_1538 * 0.0034602077212184668f) * 289.0f);
  float _1555 = _1539 - (floor(_1539 * 0.0034602077212184668f) * 289.0f);
  float _1556 = _1540 - (floor(_1540 * 0.0034602077212184668f) * 289.0f);
  float _1569 = _1553 - (floor(_1553 * 0.020408164709806442f) * 49.0f);
  float _1570 = _1554 - (floor(_1554 * 0.020408164709806442f) * 49.0f);
  float _1571 = _1555 - (floor(_1555 * 0.020408164709806442f) * 49.0f);
  float _1572 = _1556 - (floor(_1556 * 0.020408164709806442f) * 49.0f);
  float _1577 = floor(_1569 * 0.1428571492433548f);
  float _1578 = floor(_1570 * 0.1428571492433548f);
  float _1579 = floor(_1571 * 0.1428571492433548f);
  float _1580 = floor(_1572 * 0.1428571492433548f);
  float _1597 = (_1577 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1598 = (_1578 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1599 = (_1579 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1600 = (_1580 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1605 = (floor(_1569 - (_1577 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1606 = (floor(_1570 - (_1578 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1607 = (floor(_1571 - (_1579 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1608 = (floor(_1572 - (_1580 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1621 = (1.0f - abs(_1597)) - abs(_1605);
  float _1622 = (1.0f - abs(_1598)) - abs(_1606);
  float _1623 = (1.0f - abs(_1599)) - abs(_1607);
  float _1624 = (1.0f - abs(_1600)) - abs(_1608);
  float _1653 = select((_1621 > 0.0f), -0.0f, -1.0f);
  float _1654 = select((_1622 > 0.0f), -0.0f, -1.0f);
  float _1655 = select((_1623 > 0.0f), -0.0f, -1.0f);
  float _1656 = select((_1624 > 0.0f), -0.0f, -1.0f);
  float _1661 = (((floor(_1597) * 2.0f) + 1.0f) * _1653) + _1597;
  float _1662 = (((floor(_1605) * 2.0f) + 1.0f) * _1653) + _1605;
  float _1663 = (((floor(_1598) * 2.0f) + 1.0f) * _1654) + _1598;
  float _1664 = (((floor(_1606) * 2.0f) + 1.0f) * _1654) + _1606;
  float _1669 = (((floor(_1599) * 2.0f) + 1.0f) * _1655) + _1599;
  float _1670 = (((floor(_1607) * 2.0f) + 1.0f) * _1655) + _1607;
  float _1671 = (((floor(_1600) * 2.0f) + 1.0f) * _1656) + _1600;
  float _1672 = (((floor(_1608) * 2.0f) + 1.0f) * _1656) + _1608;
  float _1681 = 1.7928400039672852f - (dot(float3(_1661, _1662, _1621), float3(_1661, _1662, _1621)) * 0.8537350296974182f);
  float _1682 = 1.7928400039672852f - (dot(float3(_1663, _1664, _1622), float3(_1663, _1664, _1622)) * 0.8537350296974182f);
  float _1683 = 1.7928400039672852f - (dot(float3(_1669, _1670, _1623), float3(_1669, _1670, _1623)) * 0.8537350296974182f);
  float _1684 = 1.7928400039672852f - (dot(float3(_1671, _1672, _1624), float3(_1671, _1672, _1624)) * 0.8537350296974182f);
  float _1705 = max((0.6000000238418579f - dot(float3(_1411, _1412, _1413), float3(_1411, _1412, _1413))), 0.0f);
  float _1706 = max((0.6000000238418579f - dot(float3(_1432, _1433, _1434), float3(_1432, _1433, _1434))), 0.0f);
  float _1707 = max((0.6000000238418579f - dot(float3(_1438, _1439, _1440), float3(_1438, _1439, _1440))), 0.0f);
  float _1708 = max((0.6000000238418579f - dot(float3(_1441, _1442, _1443), float3(_1441, _1442, _1443))), 0.0f);
  float _1709 = _1705 * _1705;
  float _1710 = _1706 * _1706;
  float _1711 = _1707 * _1707;
  float _1712 = _1708 * _1708;
  float _1727 = saturate((((sin(_706 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1709 * _1709), (_1710 * _1710), (_1711 * _1711), (_1712 * _1712)), float4(dot(float3((_1681 * _1661), (_1681 * _1662), (_1681 * _1621)), float3(_1411, _1412, _1413)), dot(float3((_1682 * _1663), (_1682 * _1664), (_1682 * _1622)), float3(_1432, _1433, _1434)), dot(float3((_1683 * _1669), (_1683 * _1670), (_1683 * _1623)), float3(_1438, _1439, _1440)), dot(float3((_1684 * _1671), (_1684 * _1672), (_1684 * _1624)), float3(_1441, _1442, _1443)))) * 21.0f)) * 4.0f);
  float _1731 = (_1727 * _1727) * (3.0f - (_1727 * 2.0f));
  float _1733 = (_1731 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1755 = saturate(_1049);
  float _1756 = saturate(_1389);
  float _1778 = (((_593 * 1.2000000476837158f) * _598) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_690 * _690) + (_689 * _689)) / ((_1387 * 0.039000000804662704f) + 0.08100000768899918f))) * _1389) + (saturate(11.0f - (sqrt((_685 * _685) + _695) / ((_1047 * 0.039000000804662704f) + 0.08100000768899918f))) * _1049)) + (saturate(11.0f - (sqrt((_702 * _702) + _695) / ((_1731 * 0.039000000804662704f) + 0.08100000768899918f))) * _1733)) + (((((saturate(1.0f - (abs(_686) * 0.8333333134651184f)) * _1755) + (saturate(1.0f - (abs(dot(float2(_689, _690), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1756)) * saturate(_1733)) + ((_1755 * saturate(1.0f - (abs(dot(float2(_685, _686), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1756)) * 0.5f));
  float _1785 = (_1778 * ((_645 * _645) - _607)) + _607;
  float _1786 = (_1778 * ((_646 * _646) - _608)) + _608;
  float _1787 = (_1778 * ((_647 * _647) - _609)) + _609;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1796 = ((_1785 * 0.3930000066757202f) + (_1786 * 0.7689999938011169f)) + (_1787 * 0.1889999955892563f);
    float _1801 = ((_1785 * 0.3490000069141388f) + (_1786 * 0.6859999895095825f)) + (_1787 * 0.1679999977350235f);
    float _1806 = ((_1785 * 0.2720000147819519f) + (_1786 * 0.5339999794960022f)) + (_1787 * 0.13099999725818634f);
    float _1807 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1812 = ((_1785 * 0.2125999927520752f) + (_1786 * 0.7152000069618225f)) + (_1787 * 0.0722000002861023f);
    _1832 = ((((_1796 - _1785) + ((_1812 - _1796) * 0.6499999761581421f)) * _1807) + _1785);
    _1833 = ((((_1801 - _1786) + ((_1812 - _1801) * 0.6499999761581421f)) * _1807) + _1786);
    _1834 = ((((_1806 - _1787) + ((_1812 - _1806) * 0.6499999761581421f)) * _1807) + _1787);
  } else {
    _1832 = _1785;
    _1833 = _1786;
    _1834 = _1787;
  }
  if (!(frame_consts.invert == 0)) {
    _1843 = (1.0f - _1832);
    _1844 = (1.0f - _1833);
    _1845 = (1.0f - _1834);
  } else {
    _1843 = _1832;
    _1844 = _1833;
    _1845 = _1834;
  }
  SV_Target.x = _1843;
  SV_Target.y = _1844;
  SV_Target.z = _1845;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
