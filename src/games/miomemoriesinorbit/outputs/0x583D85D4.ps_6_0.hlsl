#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

Texture2D<float3> color_correct_lut : register(t8);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float _48;
  float _49;
  float _50;
  float _51;
  float _99;
  float _110;
  float _121;
  float _287;
  float _298;
  float _309;
  float _332;
  float _333;
  float _334;
  float _459;
  float _460;
  float _461;
  float _502;
  float _503;
  float _504;
  float _653;
  float _654;
  float _655;
  float _663;
  float _1931;
  float _1932;
  float _1933;
  float _1942;
  float _1943;
  float _1944;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _23 = abs(O_Uv.x + -0.5f);
    float _24 = abs(O_Uv.y + -0.5f);
    float _28 = (rsqrt(dot(float2(_23, _24), float2(_23, _24))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _29 = _28 * _23;
    float _30 = _28 * _24;
    float4 _33 = tex.SampleLevel(sampler_nearest, float2((_29 + O_Uv.x), (_30 + O_Uv.y)), 0.0f);
    float4 _35 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    float4 _39 = tex.SampleLevel(sampler_nearest, float2((O_Uv.x - _29), (O_Uv.y - _30)), 0.0f);
    _48 = _33.x;
    _49 = _35.y;
    _50 = _39.z;
    _51 = 0.5f;
  } else {
    float4 _42 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    _48 = _42.x;
    _49 = _42.y;
    _50 = _42.z;
    _51 = _42.w;
  }
  float3 untonemapped = float3(_48, _49, _50);

  float3 _52 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _67 = max((((1.0f - (_48 * 0.2125999927520752f)) - (_49 * 0.7152000069618225f)) - (_50 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _71 = (_48 / _67) + (frame_consts.params.bloom.intensity * _52.x);
  float _72 = (_49 / _67) + (frame_consts.params.bloom.intensity * _52.y);
  float _73 = (_50 / _67) + (frame_consts.params.bloom.intensity * _52.z);
  float _79 = (((_71 * 0.2125999927520752f) + 1.0f) + (_72 * 0.7152000069618225f)) + (_73 * 0.0722000002861023f);
  float _83 = saturate(_71 / _79);
  float _84 = saturate(_72 / _79);
  float _85 = saturate(_73 / _79);
  uint2 _86; color_correct_lut.GetDimensions(_86.x, _86.y);
  if (!(!(_83 <= 0.0031308000907301903f))) {
    _99 = (_83 * 12.920000076293945f);
  } else {
    _99 = (((pow(_83, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_84 <= 0.0031308000907301903f))) {
    _110 = (_84 * 12.920000076293945f);
  } else {
    _110 = (((pow(_84, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_85 <= 0.0031308000907301903f))) {
    _121 = (_85 * 12.920000076293945f);
  } else {
    _121 = (((pow(_85, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  float _124 = float((uint)(_86.y + -1u));
  float _127 = _121 * _124;
  float _128 = frac(_127);
  float _130 = float((uint)_86.y);
  float _132 = (_99 * _124) + 0.5f;
  float _135 = float((uint)_86.x);
  float _137 = (lerp(_110, 1.0f, _124)) / _130;
  float3 _138 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((ceil(_127) * _130) + _132) / _135), _137), 0.0f);
  float3 _146 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((floor(_127) * _130) + _132) / _135), _137), 0.0f);
  float _156 = ((_138.x - _146.x) * _128) + _146.x;
  float _157 = ((_138.y - _146.y) * _128) + _146.y;
  float _158 = ((_138.z - _146.z) * _128) + _146.z;
  if (!(frame_consts.glitch == 0)) {
    float _166 = float((int)(int((_15 / _16) * 1080.0f)));
    float _167 = _166 * O_Uv.x;
    float _168 = O_Uv.y * 1080.0f;
    float _169 = _166 * 0.5f;
    float _172 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _179 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _185 = ((_179 * 3.0f) * exp2(1.4426950216293335f - (_179 * 4.328084945678711f))) + ((_172 * 5.0f) * exp2(1.4426950216293335f - (_172 * 7.213475227355957f)));
    float _186 = _185 * 15.0f;
    float _187 = _186 + 30.0f;
    float _189 = (_185 * 20.0f) + 80.0f;
    float _193 = abs(_166 * (O_Uv.x + -0.5f));
    float _194 = abs(_168 + -540.0f);
    float _197 = ((_193 - _169) + _187) + _189;
    float _200 = ((_194 + -510.0f) + _186) + _189;
    float _203 = max(_197, 0.0f);
    float _204 = max(_200, 0.0f);
    float _218 = _193 - (_169 - _187);
    float _219 = _194 - (510.0f - _186);
    float _220 = max(_218, 0.0f);
    float _221 = max(_219, 0.0f);
    float _237 = max(max(0.0f, (1.0f - saturate(abs((min(max(_197, _200), 0.0f) - _189) + sqrt((_204 * _204) + (_203 * _203))) + -0.5f))), ((1.0f - saturate(abs(min(max(_218, _219), 0.0f) + sqrt((_221 * _221) + (_220 * _220))) + -0.5f)) * (1.0f - saturate(_185 * 1.6666666269302368f))));
    float _248 = frac((_167 + _168) * 0.0012499999720603228f) + -0.5f;
    float _249 = frac((_168 - _167) * 0.0012499999720603228f) + -0.5f;
    float _261 = saturate((sin((((_167 * 0.0003124999930150807f) + (O_Uv.y * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _265 = (_261 * _261) * (3.0f - (_261 * 2.0f));
    float _267 = saturate(sqrt((_249 * _249) + (_248 * _248)) * 2.0f);
    float _272 = _265 * 0.20000000298023224f;
    float _274 = ((_267 * 0.12156862020492554f) + 0.7450979948043823f) + _272;
    float _275 = ((_267 * 0.3333333134651184f) + 0.34117645025253296f) + _272;
    do {
      if (!(!((_272 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _287 = ((_265 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _287 = exp2(log2((_265 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_274 <= 0.040449999272823334f))) {
          _298 = (_274 * 0.07739938050508499f);
        } else {
          _298 = exp2(log2((_274 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_275 <= 0.040449999272823334f))) {
            _309 = (_275 * 0.07739938050508499f);
          } else {
            _309 = exp2(log2((_275 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _315 = (((_287 * 0.2125999927520752f) + 1.0f) + (_298 * 0.7152000069618225f)) + (_309 * 0.0722000002861023f);
          _332 = (((saturate(_287 / _315) - _156) * _237) + _156);
          _333 = (((saturate(_298 / _315) - _157) * _237) + _157);
          _334 = (((saturate(_309 / _315) - _158) * _237) + _158);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _332 = _156;
    _333 = _157;
    _334 = _158;
  }
  float _340 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _344 = 10000.0f / ((_340.x * 19999.5f) + 0.5f);
  float _349 = (_344 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _351 = (_344 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _352 = -0.0f - _344;
  float _376 = mad((frame_consts.paper_xf[2].z), _352, mad((frame_consts.paper_xf[1].z), _351, (_349 * (frame_consts.paper_xf[0].z))));
  float _377 = mad((frame_consts.paper_xf[2].x), _352, mad((frame_consts.paper_xf[1].x), _351, (_349 * (frame_consts.paper_xf[0].x)))) / _376;
  float _378 = mad((frame_consts.paper_xf[2].y), _352, mad((frame_consts.paper_xf[1].y), _351, (_349 * (frame_consts.paper_xf[0].y)))) / _376;
  float _390 = exp2(round(log2(max(5.0f, (-0.0f - (_376 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _392 = min((1.0f / _390), 0.20000000298023224f);
  float _393 = frame_consts.game_plane_blend.x - _390;
  float _400 = frame_consts.game_plane_blend.x + 10.0f;
  float _408 = exp2(round(log2(max(5.0f, (-0.0f - (_376 - _400)))) * 10.0f) * 0.10000000149011612f);
  float _410 = min((1.0f / _408), 0.20000000298023224f);
  float _411 = _400 - _408;
  float _418 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_393 * _377) + (frame_consts.paper_xf[3].x)) * _392), (((_393 * _378) + (frame_consts.paper_xf[3].y)) * _392)), 0.0f);
  float _421 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_411 * _377) + (frame_consts.paper_xf[3].x)) * _410), (((_411 * _378) + (frame_consts.paper_xf[3].y)) * _410)), 0.0f);
  float _428 = ((1.0f - (_418.x * (1.0f - frame_consts.game_plane_blend.y))) - (_421.x * frame_consts.game_plane_blend.y)) * frame_consts.paper_mult;
  float _432 = _332 - (_428 * _332);
  float _433 = _333 - (_428 * _333);
  float _434 = _334 - (_428 * _334);
  if (!(frame_consts.death_screen == 0)) {
    float _457 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _51), _51);
    _459 = _457;
    _460 = _457;
    _461 = _457;
  } else {
    _459 = (lerp(_432, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _460 = (lerp(_433, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _461 = (lerp(_434, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _469 = _15 * O_Uv.x;
    float _470 = _16 * O_Uv.y;
    float _471 = _469 * 0.06666667014360428f;
    float _472 = _470 * 0.038490019738674164f;
    float _474 = ceil(_471 - _472);
    float _476 = floor(_470 * 0.07698003947734833f);
    float _477 = _476 + 1.0f;
    float _480 = ceil((-0.0f - _471) - _472);
    float _482 = (_474 - _480) * 7.5f;
    float _483 = _474 * 0.28867512941360474f;
    float _484 = _477 * 0.5773502588272095f;
    float _485 = _484 - _483;
    float _486 = _480 * 0.28867512941360474f;
    float _489 = _482 / _15;
    float _490 = ((_485 - _486) * 15.0f) / _16;
    do {
      if (((_477 + _474) + _480) == 2.0f) {
        _502 = (_474 + 1.0f);
        _503 = (_476 + 2.0f);
        _504 = (_480 + 1.0f);
      } else {
        _502 = (_474 + -1.0f);
        _503 = _476;
        _504 = (_480 + -1.0f);
      }
      float _505 = _502 - _480;
      float _508 = _484 - (_502 * 0.28867512941360474f);
      float _509 = _508 - _486;
      float _512 = (_503 * 0.5773502588272095f) - _483;
      float _513 = _512 - _486;
      float _515 = _474 - _504;
      float _518 = _485 - (_504 * 0.28867512941360474f);
      float _522 = (_508 - _512) * 15.0f;
      float _523 = (_502 - _474) * -7.5f;
      float _525 = rsqrt(dot(float2(_522, _523), float2(_522, _523)));
      float _534 = (_513 - _518) * 15.0f;
      float _535 = (_504 - _480) * -7.5f;
      float _537 = rsqrt(dot(float2(_534, _535), float2(_534, _535)));
      float _546 = (_518 - _509) * 15.0f;
      float _547 = (_515 - _505) * -7.5f;
      float _549 = rsqrt(dot(float2(_546, _547), float2(_546, _547)));
      float _562 = _489 + -0.5f;
      float _563 = _490 + -0.5f;
      float _610 = O_Uv.x + -0.5f;
      float _611 = O_Uv.y + -0.5f;
      float _618 = ((frame_consts.time - sqrt((_611 * _611) + (_610 * _610))) + (frac(sin(dot(float2((_489 * 5.0f), (_490 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _622 = frac(abs(_618));
      float _626 = max((select((_618 >= (-0.0f - _618)), _622, (-0.0f - _622)) * 18.0f), 0.0f);
      float _642 = min(max((1.0f - (((((_626 * 1.600000023841858f) * exp2(1.4426950216293335f - (_626 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_563 * _563) + (_562 * _562)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_489 * 3.0f), (_490 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_489, _490), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_489 * 2.0f), (_490 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _648 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_505 * 7.5f) - _469), ((_509 * 15.0f) - _470)), float2((_522 * _525), (_525 * _523))))), abs(dot(float2((_482 - _469), ((_513 * 15.0f) - _470)), float2((_537 * _534), (_537 * _535))))), abs(dot(float2(((_515 * 7.5f) - _469), ((_518 * 15.0f) - _470)), float2((_549 * _546), (_549 * _547))))) * 0.2309400886297226f)) - _642) / ((_642 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _653 = (_648 * _459);
      _654 = (_648 * _460);
      _655 = (_648 * _461);
    } while (false);
  } else {
    _653 = _459;
    _654 = _460;
    _655 = _461;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _663 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _663 = 0.0f;
  }
  float _670 = frame_consts.params.vignette.intensity + _663;
  float _673 = _15 / _16;
  float _685 = exp2(log2(saturate((_670 * abs(O_Uv.x + -0.5f)) * (((_673 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _686 = exp2(log2(saturate(_670 * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _692 = exp2(log2(saturate(1.0f - dot(float2(_685, _686), float2(_685, _686)))) * 6.0f);
  float _697 = 1.0f - _692;
  float _699 = 1.0f - (_697 * 0.8500000238418579f);
  float _706 = (_699 * (_653 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _707 = (_699 * (_654 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _708 = (_699 * (_655 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _712 = _15 * O_Uv.x;
  float _713 = _16 * O_Uv.y;
  float _714 = _712 + _713;
  float _720 = frac(_714 * 0.0033333334140479565f) + -0.5f;
  float _721 = frac((_713 - _712) * 0.0033333334140479565f) + -0.5f;
  float _727 = saturate(sqrt((_721 * _721) + (_720 * _720)) * 2.0f);
  float _738 = saturate((sin((_714 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _743 = ((_738 * _738) * 0.2199999988079071f) * (3.0f - (_738 * 2.0f));
  float _744 = _743 + 0.9777389168739319f;
  float _745 = ((_727 * 0.13274884223937988f) + 0.7175776362419128f) + _743;
  float _746 = ((_727 * 0.3335757553577423f) + 0.30871906876564026f) + _743;
  float _751 = (O_Uv.x * 1080.0f) * _673;
  float _752 = O_Uv.y * 1080.0f;
  float _753 = _751 * 0.04444444552063942f;
  float _754 = O_Uv.y * 27.712812423706055f;
  float _756 = ceil(_753 - _754);
  float _759 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _762 = ceil((-0.0f - _754) - _753);
  float _764 = (_759 + _756) + _762;
  float _766 = (_764 * 22.5f) + -33.75f;
  float _767 = _756 - _762;
  float _769 = _767 * 11.25f;
  float _775 = (((_759 * 0.5773502588272095f) - (_756 * 0.28867512941360474f)) - (_762 * 0.28867512941360474f)) * 22.5f;
  float _778 = _766 + _769;
  float _779 = _775 + (19.485570907592773f - (_764 * 12.990381240844727f));
  float _782 = ((_764 * 25.980762481689453f) + -38.97114181518555f) + _775;
  float _783 = _769 - _766;
  float _784 = _778 - _751;
  float _785 = _779 - _752;
  float _788 = _769 - _751;
  float _789 = _782 - _752;
  float _794 = _785 * _785;
  float _801 = _783 - _751;
  float _805 = _779 * 2.5f;
  float _806 = frame_consts.time * 1.5f;
  float _810 = _779 * 0.004444444552063942f;
  float _811 = frame_consts.time * 0.15000000596046448f;
  float _812 = (_778 * 0.04444444552063942f) - _811;
  float _813 = _810 - _811;
  float _814 = frame_consts.time * 0.02500000037252903f;
  float _815 = dot(float3(_812, _813, _814), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _819 = floor(_815 + _812);
  float _820 = floor(_815 + _813);
  float _821 = floor(_815 + _814);
  float _825 = dot(float3(_819, _820, _821), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _826 = _825 + (_812 - _819);
  float _827 = _825 + (_813 - _820);
  float _828 = (_814 - _821) + _825;
  float _832 = select((_826 < _827), 0.0f, 1.0f);
  float _833 = select((_827 < _828), 0.0f, 1.0f);
  float _834 = select((_828 < _826), 0.0f, 1.0f);
  float _835 = 1.0f - _832;
  float _836 = 1.0f - _833;
  float _837 = 1.0f - _834;
  float _838 = min(_832, _837);
  float _839 = min(_833, _835);
  float _840 = min(_834, _836);
  float _841 = max(_832, _837);
  float _842 = max(_833, _835);
  float _843 = max(_834, _836);
  float _847 = (_826 - _838) + 0.1666666716337204f;
  float _848 = (_827 - _839) + 0.1666666716337204f;
  float _849 = (_828 - _840) + 0.1666666716337204f;
  float _853 = (_826 - _841) + 0.3333333432674408f;
  float _854 = (_827 - _842) + 0.3333333432674408f;
  float _855 = (_828 - _843) + 0.3333333432674408f;
  float _856 = _826 + -0.5f;
  float _857 = _827 + -0.5f;
  float _858 = _828 + -0.5f;
  float _868 = _819 - (floor(_819 * 0.0034602077212184668f) * 289.0f);
  float _869 = _820 - (floor(_820 * 0.0034602077212184668f) * 289.0f);
  float _870 = _821 - (floor(_821 * 0.0034602077212184668f) * 289.0f);
  float _871 = _870 + _840;
  float _872 = _870 + _843;
  float _873 = _870 + 1.0f;
  float _882 = ((_870 * 34.0f) + 1.0f) * _870;
  float _883 = ((_871 * 34.0f) + 1.0f) * _871;
  float _884 = ((_872 * 34.0f) + 1.0f) * _872;
  float _885 = ((_873 * 34.0f) + 1.0f) * _873;
  float _899 = (_882 - (floor(_882 * 0.0034602077212184668f) * 289.0f)) + _869;
  float _902 = ((_869 + _839) - (floor(_883 * 0.0034602077212184668f) * 289.0f)) + _883;
  float _905 = ((_869 + _842) - (floor(_884 * 0.0034602077212184668f) * 289.0f)) + _884;
  float _908 = ((_869 + 1.0f) - (floor(_885 * 0.0034602077212184668f) * 289.0f)) + _885;
  float _917 = ((_899 * 34.0f) + 1.0f) * _899;
  float _918 = ((_902 * 34.0f) + 1.0f) * _902;
  float _919 = ((_905 * 34.0f) + 1.0f) * _905;
  float _920 = ((_908 * 34.0f) + 1.0f) * _908;
  float _934 = (_917 - (floor(_917 * 0.0034602077212184668f) * 289.0f)) + _868;
  float _937 = ((_868 + _838) - (floor(_918 * 0.0034602077212184668f) * 289.0f)) + _918;
  float _940 = ((_868 + _841) - (floor(_919 * 0.0034602077212184668f) * 289.0f)) + _919;
  float _943 = ((_868 + 1.0f) - (floor(_920 * 0.0034602077212184668f) * 289.0f)) + _920;
  float _952 = ((_934 * 34.0f) + 1.0f) * _934;
  float _953 = ((_937 * 34.0f) + 1.0f) * _937;
  float _954 = ((_940 * 34.0f) + 1.0f) * _940;
  float _955 = ((_943 * 34.0f) + 1.0f) * _943;
  float _968 = _952 - (floor(_952 * 0.0034602077212184668f) * 289.0f);
  float _969 = _953 - (floor(_953 * 0.0034602077212184668f) * 289.0f);
  float _970 = _954 - (floor(_954 * 0.0034602077212184668f) * 289.0f);
  float _971 = _955 - (floor(_955 * 0.0034602077212184668f) * 289.0f);
  float _984 = _968 - (floor(_968 * 0.020408164709806442f) * 49.0f);
  float _985 = _969 - (floor(_969 * 0.020408164709806442f) * 49.0f);
  float _986 = _970 - (floor(_970 * 0.020408164709806442f) * 49.0f);
  float _987 = _971 - (floor(_971 * 0.020408164709806442f) * 49.0f);
  float _992 = floor(_984 * 0.1428571492433548f);
  float _993 = floor(_985 * 0.1428571492433548f);
  float _994 = floor(_986 * 0.1428571492433548f);
  float _995 = floor(_987 * 0.1428571492433548f);
  float _1012 = (_992 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1013 = (_993 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1014 = (_994 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1015 = (_995 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1020 = (floor(_984 - (_992 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1021 = (floor(_985 - (_993 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1022 = (floor(_986 - (_994 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1023 = (floor(_987 - (_995 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1036 = (1.0f - abs(_1012)) - abs(_1020);
  float _1037 = (1.0f - abs(_1013)) - abs(_1021);
  float _1038 = (1.0f - abs(_1014)) - abs(_1022);
  float _1039 = (1.0f - abs(_1015)) - abs(_1023);
  float _1068 = select((_1036 > 0.0f), -0.0f, -1.0f);
  float _1069 = select((_1037 > 0.0f), -0.0f, -1.0f);
  float _1070 = select((_1038 > 0.0f), -0.0f, -1.0f);
  float _1071 = select((_1039 > 0.0f), -0.0f, -1.0f);
  float _1076 = (((floor(_1012) * 2.0f) + 1.0f) * _1068) + _1012;
  float _1077 = (((floor(_1020) * 2.0f) + 1.0f) * _1068) + _1020;
  float _1078 = (((floor(_1013) * 2.0f) + 1.0f) * _1069) + _1013;
  float _1079 = (((floor(_1021) * 2.0f) + 1.0f) * _1069) + _1021;
  float _1084 = (((floor(_1014) * 2.0f) + 1.0f) * _1070) + _1014;
  float _1085 = (((floor(_1022) * 2.0f) + 1.0f) * _1070) + _1022;
  float _1086 = (((floor(_1015) * 2.0f) + 1.0f) * _1071) + _1015;
  float _1087 = (((floor(_1023) * 2.0f) + 1.0f) * _1071) + _1023;
  float _1096 = 1.7928400039672852f - (dot(float3(_1076, _1077, _1036), float3(_1076, _1077, _1036)) * 0.8537350296974182f);
  float _1097 = 1.7928400039672852f - (dot(float3(_1078, _1079, _1037), float3(_1078, _1079, _1037)) * 0.8537350296974182f);
  float _1098 = 1.7928400039672852f - (dot(float3(_1084, _1085, _1038), float3(_1084, _1085, _1038)) * 0.8537350296974182f);
  float _1099 = 1.7928400039672852f - (dot(float3(_1086, _1087, _1039), float3(_1086, _1087, _1039)) * 0.8537350296974182f);
  float _1120 = max((0.6000000238418579f - dot(float3(_826, _827, _828), float3(_826, _827, _828))), 0.0f);
  float _1121 = max((0.6000000238418579f - dot(float3(_847, _848, _849), float3(_847, _848, _849))), 0.0f);
  float _1122 = max((0.6000000238418579f - dot(float3(_853, _854, _855), float3(_853, _854, _855))), 0.0f);
  float _1123 = max((0.6000000238418579f - dot(float3(_856, _857, _858), float3(_856, _857, _858))), 0.0f);
  float _1124 = _1120 * _1120;
  float _1125 = _1121 * _1121;
  float _1126 = _1122 * _1122;
  float _1127 = _1123 * _1123;
  float _1142 = saturate((((sin(_805 - _806) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1124 * _1124), (_1125 * _1125), (_1126 * _1126), (_1127 * _1127)), float4(dot(float3((_1096 * _1076), (_1096 * _1077), (_1096 * _1036)), float3(_826, _827, _828)), dot(float3((_1097 * _1078), (_1097 * _1079), (_1097 * _1037)), float3(_847, _848, _849)), dot(float3((_1098 * _1084), (_1098 * _1085), (_1098 * _1038)), float3(_853, _854, _855)), dot(float3((_1099 * _1086), (_1099 * _1087), (_1099 * _1039)), float3(_856, _857, _858)))) * 21.0f)) * 4.0f);
  float _1146 = (_1142 * _1142) * (3.0f - (_1142 * 2.0f));
  float _1148 = (_1146 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1153 = (_767 * 0.5f) - _811;
  float _1154 = (_782 * 0.004444444552063942f) - _811;
  float _1155 = dot(float3(_1153, _1154, _814), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1159 = floor(_1155 + _1153);
  float _1160 = floor(_1155 + _1154);
  float _1161 = floor(_1155 + _814);
  float _1165 = dot(float3(_1159, _1160, _1161), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1166 = _1165 + (_1153 - _1159);
  float _1167 = _1165 + (_1154 - _1160);
  float _1168 = (_814 - _1161) + _1165;
  float _1172 = select((_1166 < _1167), 0.0f, 1.0f);
  float _1173 = select((_1167 < _1168), 0.0f, 1.0f);
  float _1174 = select((_1168 < _1166), 0.0f, 1.0f);
  float _1175 = 1.0f - _1172;
  float _1176 = 1.0f - _1173;
  float _1177 = 1.0f - _1174;
  float _1178 = min(_1172, _1177);
  float _1179 = min(_1173, _1175);
  float _1180 = min(_1174, _1176);
  float _1181 = max(_1172, _1177);
  float _1182 = max(_1173, _1175);
  float _1183 = max(_1174, _1176);
  float _1187 = (_1166 - _1178) + 0.1666666716337204f;
  float _1188 = (_1167 - _1179) + 0.1666666716337204f;
  float _1189 = (_1168 - _1180) + 0.1666666716337204f;
  float _1193 = (_1166 - _1181) + 0.3333333432674408f;
  float _1194 = (_1167 - _1182) + 0.3333333432674408f;
  float _1195 = (_1168 - _1183) + 0.3333333432674408f;
  float _1196 = _1166 + -0.5f;
  float _1197 = _1167 + -0.5f;
  float _1198 = _1168 + -0.5f;
  float _1208 = _1159 - (floor(_1159 * 0.0034602077212184668f) * 289.0f);
  float _1209 = _1160 - (floor(_1160 * 0.0034602077212184668f) * 289.0f);
  float _1210 = _1161 - (floor(_1161 * 0.0034602077212184668f) * 289.0f);
  float _1211 = _1210 + _1180;
  float _1212 = _1210 + _1183;
  float _1213 = _1210 + 1.0f;
  float _1222 = ((_1210 * 34.0f) + 1.0f) * _1210;
  float _1223 = ((_1211 * 34.0f) + 1.0f) * _1211;
  float _1224 = ((_1212 * 34.0f) + 1.0f) * _1212;
  float _1225 = ((_1213 * 34.0f) + 1.0f) * _1213;
  float _1239 = (_1222 - (floor(_1222 * 0.0034602077212184668f) * 289.0f)) + _1209;
  float _1242 = ((_1209 + _1179) - (floor(_1223 * 0.0034602077212184668f) * 289.0f)) + _1223;
  float _1245 = ((_1209 + _1182) - (floor(_1224 * 0.0034602077212184668f) * 289.0f)) + _1224;
  float _1248 = ((_1209 + 1.0f) - (floor(_1225 * 0.0034602077212184668f) * 289.0f)) + _1225;
  float _1257 = ((_1239 * 34.0f) + 1.0f) * _1239;
  float _1258 = ((_1242 * 34.0f) + 1.0f) * _1242;
  float _1259 = ((_1245 * 34.0f) + 1.0f) * _1245;
  float _1260 = ((_1248 * 34.0f) + 1.0f) * _1248;
  float _1274 = (_1257 - (floor(_1257 * 0.0034602077212184668f) * 289.0f)) + _1208;
  float _1277 = ((_1208 + _1178) - (floor(_1258 * 0.0034602077212184668f) * 289.0f)) + _1258;
  float _1280 = ((_1208 + _1181) - (floor(_1259 * 0.0034602077212184668f) * 289.0f)) + _1259;
  float _1283 = ((_1208 + 1.0f) - (floor(_1260 * 0.0034602077212184668f) * 289.0f)) + _1260;
  float _1292 = ((_1274 * 34.0f) + 1.0f) * _1274;
  float _1293 = ((_1277 * 34.0f) + 1.0f) * _1277;
  float _1294 = ((_1280 * 34.0f) + 1.0f) * _1280;
  float _1295 = ((_1283 * 34.0f) + 1.0f) * _1283;
  float _1308 = _1292 - (floor(_1292 * 0.0034602077212184668f) * 289.0f);
  float _1309 = _1293 - (floor(_1293 * 0.0034602077212184668f) * 289.0f);
  float _1310 = _1294 - (floor(_1294 * 0.0034602077212184668f) * 289.0f);
  float _1311 = _1295 - (floor(_1295 * 0.0034602077212184668f) * 289.0f);
  float _1324 = _1308 - (floor(_1308 * 0.020408164709806442f) * 49.0f);
  float _1325 = _1309 - (floor(_1309 * 0.020408164709806442f) * 49.0f);
  float _1326 = _1310 - (floor(_1310 * 0.020408164709806442f) * 49.0f);
  float _1327 = _1311 - (floor(_1311 * 0.020408164709806442f) * 49.0f);
  float _1332 = floor(_1324 * 0.1428571492433548f);
  float _1333 = floor(_1325 * 0.1428571492433548f);
  float _1334 = floor(_1326 * 0.1428571492433548f);
  float _1335 = floor(_1327 * 0.1428571492433548f);
  float _1352 = (_1332 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1353 = (_1333 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1354 = (_1334 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1355 = (_1335 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1360 = (floor(_1324 - (_1332 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1361 = (floor(_1325 - (_1333 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1362 = (floor(_1326 - (_1334 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1363 = (floor(_1327 - (_1335 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1376 = (1.0f - abs(_1352)) - abs(_1360);
  float _1377 = (1.0f - abs(_1353)) - abs(_1361);
  float _1378 = (1.0f - abs(_1354)) - abs(_1362);
  float _1379 = (1.0f - abs(_1355)) - abs(_1363);
  float _1408 = select((_1376 > 0.0f), -0.0f, -1.0f);
  float _1409 = select((_1377 > 0.0f), -0.0f, -1.0f);
  float _1410 = select((_1378 > 0.0f), -0.0f, -1.0f);
  float _1411 = select((_1379 > 0.0f), -0.0f, -1.0f);
  float _1416 = (((floor(_1352) * 2.0f) + 1.0f) * _1408) + _1352;
  float _1417 = (((floor(_1360) * 2.0f) + 1.0f) * _1408) + _1360;
  float _1418 = (((floor(_1353) * 2.0f) + 1.0f) * _1409) + _1353;
  float _1419 = (((floor(_1361) * 2.0f) + 1.0f) * _1409) + _1361;
  float _1424 = (((floor(_1354) * 2.0f) + 1.0f) * _1410) + _1354;
  float _1425 = (((floor(_1362) * 2.0f) + 1.0f) * _1410) + _1362;
  float _1426 = (((floor(_1355) * 2.0f) + 1.0f) * _1411) + _1355;
  float _1427 = (((floor(_1363) * 2.0f) + 1.0f) * _1411) + _1363;
  float _1436 = 1.7928400039672852f - (dot(float3(_1416, _1417, _1376), float3(_1416, _1417, _1376)) * 0.8537350296974182f);
  float _1437 = 1.7928400039672852f - (dot(float3(_1418, _1419, _1377), float3(_1418, _1419, _1377)) * 0.8537350296974182f);
  float _1438 = 1.7928400039672852f - (dot(float3(_1424, _1425, _1378), float3(_1424, _1425, _1378)) * 0.8537350296974182f);
  float _1439 = 1.7928400039672852f - (dot(float3(_1426, _1427, _1379), float3(_1426, _1427, _1379)) * 0.8537350296974182f);
  float _1460 = max((0.6000000238418579f - dot(float3(_1166, _1167, _1168), float3(_1166, _1167, _1168))), 0.0f);
  float _1461 = max((0.6000000238418579f - dot(float3(_1187, _1188, _1189), float3(_1187, _1188, _1189))), 0.0f);
  float _1462 = max((0.6000000238418579f - dot(float3(_1193, _1194, _1195), float3(_1193, _1194, _1195))), 0.0f);
  float _1463 = max((0.6000000238418579f - dot(float3(_1196, _1197, _1198), float3(_1196, _1197, _1198))), 0.0f);
  float _1464 = _1460 * _1460;
  float _1465 = _1461 * _1461;
  float _1466 = _1462 * _1462;
  float _1467 = _1463 * _1463;
  float _1482 = saturate((((sin((_782 * 2.5f) - _806) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1464 * _1464), (_1465 * _1465), (_1466 * _1466), (_1467 * _1467)), float4(dot(float3((_1436 * _1416), (_1436 * _1417), (_1436 * _1376)), float3(_1166, _1167, _1168)), dot(float3((_1437 * _1418), (_1437 * _1419), (_1437 * _1377)), float3(_1187, _1188, _1189)), dot(float3((_1438 * _1424), (_1438 * _1425), (_1438 * _1378)), float3(_1193, _1194, _1195)), dot(float3((_1439 * _1426), (_1439 * _1427), (_1439 * _1379)), float3(_1196, _1197, _1198)))) * 21.0f)) * 4.0f);
  float _1486 = (_1482 * _1482) * (3.0f - (_1482 * 2.0f));
  float _1488 = (_1486 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1495 = frame_consts.time * 0.15000000596046448f;
  float _1496 = (_783 * 0.04444444552063942f) - _1495;
  float _1497 = _810 - _1495;
  float _1498 = frame_consts.time * 0.02500000037252903f;
  float _1499 = dot(float3(_1496, _1497, _1498), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1503 = floor(_1496 + _1499);
  float _1504 = floor(_1497 + _1499);
  float _1505 = floor(_1498 + _1499);
  float _1509 = dot(float3(_1503, _1504, _1505), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1510 = _1509 + (_1496 - _1503);
  float _1511 = _1509 + (_1497 - _1504);
  float _1512 = (_1498 - _1505) + _1509;
  float _1516 = select((_1510 < _1511), 0.0f, 1.0f);
  float _1517 = select((_1511 < _1512), 0.0f, 1.0f);
  float _1518 = select((_1512 < _1510), 0.0f, 1.0f);
  float _1519 = 1.0f - _1516;
  float _1520 = 1.0f - _1517;
  float _1521 = 1.0f - _1518;
  float _1522 = min(_1516, _1521);
  float _1523 = min(_1517, _1519);
  float _1524 = min(_1518, _1520);
  float _1525 = max(_1516, _1521);
  float _1526 = max(_1517, _1519);
  float _1527 = max(_1518, _1520);
  float _1531 = (_1510 - _1522) + 0.1666666716337204f;
  float _1532 = (_1511 - _1523) + 0.1666666716337204f;
  float _1533 = (_1512 - _1524) + 0.1666666716337204f;
  float _1537 = (_1510 - _1525) + 0.3333333432674408f;
  float _1538 = (_1511 - _1526) + 0.3333333432674408f;
  float _1539 = (_1512 - _1527) + 0.3333333432674408f;
  float _1540 = _1510 + -0.5f;
  float _1541 = _1511 + -0.5f;
  float _1542 = _1512 + -0.5f;
  float _1552 = _1503 - (floor(_1503 * 0.0034602077212184668f) * 289.0f);
  float _1553 = _1504 - (floor(_1504 * 0.0034602077212184668f) * 289.0f);
  float _1554 = _1505 - (floor(_1505 * 0.0034602077212184668f) * 289.0f);
  float _1555 = _1554 + _1524;
  float _1556 = _1554 + _1527;
  float _1557 = _1554 + 1.0f;
  float _1566 = ((_1554 * 34.0f) + 1.0f) * _1554;
  float _1567 = ((_1555 * 34.0f) + 1.0f) * _1555;
  float _1568 = ((_1556 * 34.0f) + 1.0f) * _1556;
  float _1569 = ((_1557 * 34.0f) + 1.0f) * _1557;
  float _1583 = (_1566 - (floor(_1566 * 0.0034602077212184668f) * 289.0f)) + _1553;
  float _1586 = ((_1553 + _1523) - (floor(_1567 * 0.0034602077212184668f) * 289.0f)) + _1567;
  float _1589 = ((_1553 + _1526) - (floor(_1568 * 0.0034602077212184668f) * 289.0f)) + _1568;
  float _1592 = ((_1553 + 1.0f) - (floor(_1569 * 0.0034602077212184668f) * 289.0f)) + _1569;
  float _1601 = ((_1583 * 34.0f) + 1.0f) * _1583;
  float _1602 = ((_1586 * 34.0f) + 1.0f) * _1586;
  float _1603 = ((_1589 * 34.0f) + 1.0f) * _1589;
  float _1604 = ((_1592 * 34.0f) + 1.0f) * _1592;
  float _1618 = (_1601 - (floor(_1601 * 0.0034602077212184668f) * 289.0f)) + _1552;
  float _1621 = ((_1552 + _1522) - (floor(_1602 * 0.0034602077212184668f) * 289.0f)) + _1602;
  float _1624 = ((_1552 + _1525) - (floor(_1603 * 0.0034602077212184668f) * 289.0f)) + _1603;
  float _1627 = ((_1552 + 1.0f) - (floor(_1604 * 0.0034602077212184668f) * 289.0f)) + _1604;
  float _1636 = ((_1618 * 34.0f) + 1.0f) * _1618;
  float _1637 = ((_1621 * 34.0f) + 1.0f) * _1621;
  float _1638 = ((_1624 * 34.0f) + 1.0f) * _1624;
  float _1639 = ((_1627 * 34.0f) + 1.0f) * _1627;
  float _1652 = _1636 - (floor(_1636 * 0.0034602077212184668f) * 289.0f);
  float _1653 = _1637 - (floor(_1637 * 0.0034602077212184668f) * 289.0f);
  float _1654 = _1638 - (floor(_1638 * 0.0034602077212184668f) * 289.0f);
  float _1655 = _1639 - (floor(_1639 * 0.0034602077212184668f) * 289.0f);
  float _1668 = _1652 - (floor(_1652 * 0.020408164709806442f) * 49.0f);
  float _1669 = _1653 - (floor(_1653 * 0.020408164709806442f) * 49.0f);
  float _1670 = _1654 - (floor(_1654 * 0.020408164709806442f) * 49.0f);
  float _1671 = _1655 - (floor(_1655 * 0.020408164709806442f) * 49.0f);
  float _1676 = floor(_1668 * 0.1428571492433548f);
  float _1677 = floor(_1669 * 0.1428571492433548f);
  float _1678 = floor(_1670 * 0.1428571492433548f);
  float _1679 = floor(_1671 * 0.1428571492433548f);
  float _1696 = (_1676 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1697 = (_1677 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1698 = (_1678 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1699 = (_1679 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1704 = (floor(_1668 - (_1676 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1705 = (floor(_1669 - (_1677 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1706 = (floor(_1670 - (_1678 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1707 = (floor(_1671 - (_1679 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1720 = (1.0f - abs(_1696)) - abs(_1704);
  float _1721 = (1.0f - abs(_1697)) - abs(_1705);
  float _1722 = (1.0f - abs(_1698)) - abs(_1706);
  float _1723 = (1.0f - abs(_1699)) - abs(_1707);
  float _1752 = select((_1720 > 0.0f), -0.0f, -1.0f);
  float _1753 = select((_1721 > 0.0f), -0.0f, -1.0f);
  float _1754 = select((_1722 > 0.0f), -0.0f, -1.0f);
  float _1755 = select((_1723 > 0.0f), -0.0f, -1.0f);
  float _1760 = (((floor(_1696) * 2.0f) + 1.0f) * _1752) + _1696;
  float _1761 = (((floor(_1704) * 2.0f) + 1.0f) * _1752) + _1704;
  float _1762 = (((floor(_1697) * 2.0f) + 1.0f) * _1753) + _1697;
  float _1763 = (((floor(_1705) * 2.0f) + 1.0f) * _1753) + _1705;
  float _1768 = (((floor(_1698) * 2.0f) + 1.0f) * _1754) + _1698;
  float _1769 = (((floor(_1706) * 2.0f) + 1.0f) * _1754) + _1706;
  float _1770 = (((floor(_1699) * 2.0f) + 1.0f) * _1755) + _1699;
  float _1771 = (((floor(_1707) * 2.0f) + 1.0f) * _1755) + _1707;
  float _1780 = 1.7928400039672852f - (dot(float3(_1760, _1761, _1720), float3(_1760, _1761, _1720)) * 0.8537350296974182f);
  float _1781 = 1.7928400039672852f - (dot(float3(_1762, _1763, _1721), float3(_1762, _1763, _1721)) * 0.8537350296974182f);
  float _1782 = 1.7928400039672852f - (dot(float3(_1768, _1769, _1722), float3(_1768, _1769, _1722)) * 0.8537350296974182f);
  float _1783 = 1.7928400039672852f - (dot(float3(_1770, _1771, _1723), float3(_1770, _1771, _1723)) * 0.8537350296974182f);
  float _1804 = max((0.6000000238418579f - dot(float3(_1510, _1511, _1512), float3(_1510, _1511, _1512))), 0.0f);
  float _1805 = max((0.6000000238418579f - dot(float3(_1531, _1532, _1533), float3(_1531, _1532, _1533))), 0.0f);
  float _1806 = max((0.6000000238418579f - dot(float3(_1537, _1538, _1539), float3(_1537, _1538, _1539))), 0.0f);
  float _1807 = max((0.6000000238418579f - dot(float3(_1540, _1541, _1542), float3(_1540, _1541, _1542))), 0.0f);
  float _1808 = _1804 * _1804;
  float _1809 = _1805 * _1805;
  float _1810 = _1806 * _1806;
  float _1811 = _1807 * _1807;
  float _1826 = saturate((((sin(_805 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1808 * _1808), (_1809 * _1809), (_1810 * _1810), (_1811 * _1811)), float4(dot(float3((_1780 * _1760), (_1780 * _1761), (_1780 * _1720)), float3(_1510, _1511, _1512)), dot(float3((_1781 * _1762), (_1781 * _1763), (_1781 * _1721)), float3(_1531, _1532, _1533)), dot(float3((_1782 * _1768), (_1782 * _1769), (_1782 * _1722)), float3(_1537, _1538, _1539)), dot(float3((_1783 * _1770), (_1783 * _1771), (_1783 * _1723)), float3(_1540, _1541, _1542)))) * 21.0f)) * 4.0f);
  float _1830 = (_1826 * _1826) * (3.0f - (_1826 * 2.0f));
  float _1832 = (_1830 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1854 = saturate(_1148);
  float _1855 = saturate(_1488);
  float _1877 = (((_692 * 1.2000000476837158f) * _697) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_789 * _789) + (_788 * _788)) / ((_1486 * 0.039000000804662704f) + 0.08100000768899918f))) * _1488) + (saturate(11.0f - (sqrt((_784 * _784) + _794) / ((_1146 * 0.039000000804662704f) + 0.08100000768899918f))) * _1148)) + (saturate(11.0f - (sqrt((_801 * _801) + _794) / ((_1830 * 0.039000000804662704f) + 0.08100000768899918f))) * _1832)) + (((((saturate(1.0f - (abs(_785) * 0.8333333134651184f)) * _1854) + (saturate(1.0f - (abs(dot(float2(_788, _789), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1855)) * saturate(_1832)) + ((_1854 * saturate(1.0f - (abs(dot(float2(_784, _785), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1855)) * 0.5f));
  float _1884 = (_1877 * ((_744 * _744) - _706)) + _706;
  float _1885 = (_1877 * ((_745 * _745) - _707)) + _707;
  float _1886 = (_1877 * ((_746 * _746) - _708)) + _708;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1895 = ((_1884 * 0.3930000066757202f) + (_1885 * 0.7689999938011169f)) + (_1886 * 0.1889999955892563f);
    float _1900 = ((_1884 * 0.3490000069141388f) + (_1885 * 0.6859999895095825f)) + (_1886 * 0.1679999977350235f);
    float _1905 = ((_1884 * 0.2720000147819519f) + (_1885 * 0.5339999794960022f)) + (_1886 * 0.13099999725818634f);
    float _1906 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1911 = ((_1884 * 0.2125999927520752f) + (_1885 * 0.7152000069618225f)) + (_1886 * 0.0722000002861023f);
    _1931 = ((((_1895 - _1884) + ((_1911 - _1895) * 0.6499999761581421f)) * _1906) + _1884);
    _1932 = ((((_1900 - _1885) + ((_1911 - _1900) * 0.6499999761581421f)) * _1906) + _1885);
    _1933 = ((((_1905 - _1886) + ((_1911 - _1905) * 0.6499999761581421f)) * _1906) + _1886);
  } else {
    _1931 = _1884;
    _1932 = _1885;
    _1933 = _1886;
  }
  if (!(frame_consts.invert == 0)) {
    _1942 = (1.0f - _1931);
    _1943 = (1.0f - _1932);
    _1944 = (1.0f - _1933);
  } else {
    _1942 = _1931;
    _1943 = _1932;
    _1944 = _1933;
  }
  SV_Target.x = _1942;
  SV_Target.y = _1943;
  SV_Target.z = _1944;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
