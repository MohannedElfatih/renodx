#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _14 = float((int)(frame_consts.vp_dim.x));
  float _15 = float((int)(frame_consts.vp_dim.y));
  float _47;
  float _48;
  float _49;
  float _50;
  float _213;
  float _224;
  float _235;
  float _258;
  float _259;
  float _260;
  float _385;
  float _386;
  float _387;
  float _428;
  float _429;
  float _430;
  float _579;
  float _580;
  float _581;
  float _589;
  float _1857;
  float _1858;
  float _1859;
  float _1868;
  float _1869;
  float _1870;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _22 = abs(O_Uv.x + -0.5f);
    float _23 = abs(O_Uv.y + -0.5f);
    float _27 = (rsqrt(dot(float2(_22, _23), float2(_22, _23))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _28 = _27 * _22;
    float _29 = _27 * _23;
    float4 _32 = tex.SampleLevel(sampler_nearest, float2((_28 + O_Uv.x), (_29 + O_Uv.y)), 0.0f);
    float4 _34 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    float4 _38 = tex.SampleLevel(sampler_nearest, float2((O_Uv.x - _28), (O_Uv.y - _29)), 0.0f);
    _47 = _32.x;
    _48 = _34.y;
    _49 = _38.z;
    _50 = 0.5f;
  } else {
    float4 _41 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    _47 = _41.x;
    _48 = _41.y;
    _49 = _41.z;
    _50 = _41.w;
  }
  float3 untonemapped = float3(_47, _48, _49);

  float3 _51 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _66 = max((((1.0f - (_47 * 0.2125999927520752f)) - (_48 * 0.7152000069618225f)) - (_49 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _70 = (_47 / _66) + (frame_consts.params.bloom.intensity * _51.x);
  float _71 = (_48 / _66) + (frame_consts.params.bloom.intensity * _51.y);
  float _72 = (_49 / _66) + (frame_consts.params.bloom.intensity * _51.z);
  float _78 = (((_70 * 0.2125999927520752f) + 1.0f) + (_71 * 0.7152000069618225f)) + (_72 * 0.0722000002861023f);
  float _82 = saturate(_70 / _78);
  float _83 = saturate(_71 / _78);
  float _84 = saturate(_72 / _78);
  if (!(frame_consts.glitch == 0)) {
    float _92 = float((int)(int((_14 / _15) * 1080.0f)));
    float _93 = _92 * O_Uv.x;
    float _94 = O_Uv.y * 1080.0f;
    float _95 = _92 * 0.5f;
    float _98 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _105 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _111 = ((_105 * 3.0f) * exp2(1.4426950216293335f - (_105 * 4.328084945678711f))) + ((_98 * 5.0f) * exp2(1.4426950216293335f - (_98 * 7.213475227355957f)));
    float _112 = _111 * 15.0f;
    float _113 = _112 + 30.0f;
    float _115 = (_111 * 20.0f) + 80.0f;
    float _119 = abs(_92 * (O_Uv.x + -0.5f));
    float _120 = abs(_94 + -540.0f);
    float _123 = ((_119 - _95) + _113) + _115;
    float _126 = ((_120 + -510.0f) + _112) + _115;
    float _129 = max(_123, 0.0f);
    float _130 = max(_126, 0.0f);
    float _144 = _119 - (_95 - _113);
    float _145 = _120 - (510.0f - _112);
    float _146 = max(_144, 0.0f);
    float _147 = max(_145, 0.0f);
    float _163 = max(max(0.0f, (1.0f - saturate(abs((min(max(_123, _126), 0.0f) - _115) + sqrt((_130 * _130) + (_129 * _129))) + -0.5f))), ((1.0f - saturate(abs(min(max(_144, _145), 0.0f) + sqrt((_147 * _147) + (_146 * _146))) + -0.5f)) * (1.0f - saturate(_111 * 1.6666666269302368f))));
    float _174 = frac((_93 + _94) * 0.0012499999720603228f) + -0.5f;
    float _175 = frac((_94 - _93) * 0.0012499999720603228f) + -0.5f;
    float _187 = saturate((sin((((_93 * 0.0003124999930150807f) + (O_Uv.y * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _191 = (_187 * _187) * (3.0f - (_187 * 2.0f));
    float _193 = saturate(sqrt((_175 * _175) + (_174 * _174)) * 2.0f);
    float _198 = _191 * 0.20000000298023224f;
    float _200 = ((_193 * 0.12156862020492554f) + 0.7450979948043823f) + _198;
    float _201 = ((_193 * 0.3333333134651184f) + 0.34117645025253296f) + _198;
    do {
      if (!(!((_198 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _213 = ((_191 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _213 = exp2(log2((_191 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_200 <= 0.040449999272823334f))) {
          _224 = (_200 * 0.07739938050508499f);
        } else {
          _224 = exp2(log2((_200 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_201 <= 0.040449999272823334f))) {
            _235 = (_201 * 0.07739938050508499f);
          } else {
            _235 = exp2(log2((_201 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _241 = (((_213 * 0.2125999927520752f) + 1.0f) + (_224 * 0.7152000069618225f)) + (_235 * 0.0722000002861023f);
          _258 = (((saturate(_213 / _241) - _82) * _163) + _82);
          _259 = (((saturate(_224 / _241) - _83) * _163) + _83);
          _260 = (((saturate(_235 / _241) - _84) * _163) + _84);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _258 = _82;
    _259 = _83;
    _260 = _84;
  }
  float _266 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _270 = 10000.0f / ((_266.x * 19999.5f) + 0.5f);
  float _275 = (_270 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _277 = (_270 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _278 = -0.0f - _270;
  float _302 = mad((frame_consts.paper_xf[2].z), _278, mad((frame_consts.paper_xf[1].z), _277, (_275 * (frame_consts.paper_xf[0].z))));
  float _303 = mad((frame_consts.paper_xf[2].x), _278, mad((frame_consts.paper_xf[1].x), _277, (_275 * (frame_consts.paper_xf[0].x)))) / _302;
  float _304 = mad((frame_consts.paper_xf[2].y), _278, mad((frame_consts.paper_xf[1].y), _277, (_275 * (frame_consts.paper_xf[0].y)))) / _302;
  float _316 = exp2(round(log2(max(5.0f, (-0.0f - (_302 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _318 = min((1.0f / _316), 0.20000000298023224f);
  float _319 = frame_consts.game_plane_blend.x - _316;
  float _326 = frame_consts.game_plane_blend.x + 10.0f;
  float _334 = exp2(round(log2(max(5.0f, (-0.0f - (_302 - _326)))) * 10.0f) * 0.10000000149011612f);
  float _336 = min((1.0f / _334), 0.20000000298023224f);
  float _337 = _326 - _334;
  float _344 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_319 * _303) + (frame_consts.paper_xf[3].x)) * _318), (((_319 * _304) + (frame_consts.paper_xf[3].y)) * _318)), 0.0f);
  float _347 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_337 * _303) + (frame_consts.paper_xf[3].x)) * _336), (((_337 * _304) + (frame_consts.paper_xf[3].y)) * _336)), 0.0f);
  float _354 = ((1.0f - (_344.x * (1.0f - frame_consts.game_plane_blend.y))) - (_347.x * frame_consts.game_plane_blend.y)) * frame_consts.paper_mult;
  float _358 = _258 - (_354 * _258);
  float _359 = _259 - (_354 * _259);
  float _360 = _260 - (_354 * _260);
  if (!(frame_consts.death_screen == 0)) {
    float _383 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _50), _50);
    _385 = _383;
    _386 = _383;
    _387 = _383;
  } else {
    _385 = (lerp(_358, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _386 = (lerp(_359, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _387 = (lerp(_360, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _395 = _14 * O_Uv.x;
    float _396 = _15 * O_Uv.y;
    float _397 = _395 * 0.06666667014360428f;
    float _398 = _396 * 0.038490019738674164f;
    float _400 = ceil(_397 - _398);
    float _402 = floor(_396 * 0.07698003947734833f);
    float _403 = _402 + 1.0f;
    float _406 = ceil((-0.0f - _397) - _398);
    float _408 = (_400 - _406) * 7.5f;
    float _409 = _400 * 0.28867512941360474f;
    float _410 = _403 * 0.5773502588272095f;
    float _411 = _410 - _409;
    float _412 = _406 * 0.28867512941360474f;
    float _415 = _408 / _14;
    float _416 = ((_411 - _412) * 15.0f) / _15;
    do {
      if (((_403 + _400) + _406) == 2.0f) {
        _428 = (_400 + 1.0f);
        _429 = (_402 + 2.0f);
        _430 = (_406 + 1.0f);
      } else {
        _428 = (_400 + -1.0f);
        _429 = _402;
        _430 = (_406 + -1.0f);
      }
      float _431 = _428 - _406;
      float _434 = _410 - (_428 * 0.28867512941360474f);
      float _435 = _434 - _412;
      float _438 = (_429 * 0.5773502588272095f) - _409;
      float _439 = _438 - _412;
      float _441 = _400 - _430;
      float _444 = _411 - (_430 * 0.28867512941360474f);
      float _448 = (_434 - _438) * 15.0f;
      float _449 = (_428 - _400) * -7.5f;
      float _451 = rsqrt(dot(float2(_448, _449), float2(_448, _449)));
      float _460 = (_439 - _444) * 15.0f;
      float _461 = (_430 - _406) * -7.5f;
      float _463 = rsqrt(dot(float2(_460, _461), float2(_460, _461)));
      float _472 = (_444 - _435) * 15.0f;
      float _473 = (_441 - _431) * -7.5f;
      float _475 = rsqrt(dot(float2(_472, _473), float2(_472, _473)));
      float _488 = _415 + -0.5f;
      float _489 = _416 + -0.5f;
      float _536 = O_Uv.x + -0.5f;
      float _537 = O_Uv.y + -0.5f;
      float _544 = ((frame_consts.time - sqrt((_537 * _537) + (_536 * _536))) + (frac(sin(dot(float2((_415 * 5.0f), (_416 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _548 = frac(abs(_544));
      float _552 = max((select((_544 >= (-0.0f - _544)), _548, (-0.0f - _548)) * 18.0f), 0.0f);
      float _568 = min(max((1.0f - (((((_552 * 1.600000023841858f) * exp2(1.4426950216293335f - (_552 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_489 * _489) + (_488 * _488)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_415 * 3.0f), (_416 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_415, _416), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_415 * 2.0f), (_416 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _574 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_431 * 7.5f) - _395), ((_435 * 15.0f) - _396)), float2((_448 * _451), (_451 * _449))))), abs(dot(float2((_408 - _395), ((_439 * 15.0f) - _396)), float2((_463 * _460), (_463 * _461))))), abs(dot(float2(((_441 * 7.5f) - _395), ((_444 * 15.0f) - _396)), float2((_475 * _472), (_475 * _473))))) * 0.2309400886297226f)) - _568) / ((_568 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _579 = (_574 * _385);
      _580 = (_574 * _386);
      _581 = (_574 * _387);
    } while (false);
  } else {
    _579 = _385;
    _580 = _386;
    _581 = _387;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _589 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _589 = 0.0f;
  }
  float _596 = frame_consts.params.vignette.intensity + _589;
  float _599 = _14 / _15;
  float _611 = exp2(log2(saturate((_596 * abs(O_Uv.x + -0.5f)) * (((_599 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _612 = exp2(log2(saturate(_596 * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _618 = exp2(log2(saturate(1.0f - dot(float2(_611, _612), float2(_611, _612)))) * 6.0f);
  float _623 = 1.0f - _618;
  float _625 = 1.0f - (_623 * 0.8500000238418579f);
  float _632 = (_625 * (_579 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _633 = (_625 * (_580 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _634 = (_625 * (_581 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _638 = _14 * O_Uv.x;
  float _639 = _15 * O_Uv.y;
  float _640 = _638 + _639;
  float _646 = frac(_640 * 0.0033333334140479565f) + -0.5f;
  float _647 = frac((_639 - _638) * 0.0033333334140479565f) + -0.5f;
  float _653 = saturate(sqrt((_647 * _647) + (_646 * _646)) * 2.0f);
  float _664 = saturate((sin((_640 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _669 = ((_664 * _664) * 0.2199999988079071f) * (3.0f - (_664 * 2.0f));
  float _670 = _669 + 0.9777389168739319f;
  float _671 = ((_653 * 0.13274884223937988f) + 0.7175776362419128f) + _669;
  float _672 = ((_653 * 0.3335757553577423f) + 0.30871906876564026f) + _669;
  float _677 = (O_Uv.x * 1080.0f) * _599;
  float _678 = O_Uv.y * 1080.0f;
  float _679 = _677 * 0.04444444552063942f;
  float _680 = O_Uv.y * 27.712812423706055f;
  float _682 = ceil(_679 - _680);
  float _685 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _688 = ceil((-0.0f - _680) - _679);
  float _690 = (_685 + _682) + _688;
  float _692 = (_690 * 22.5f) + -33.75f;
  float _693 = _682 - _688;
  float _695 = _693 * 11.25f;
  float _701 = (((_685 * 0.5773502588272095f) - (_682 * 0.28867512941360474f)) - (_688 * 0.28867512941360474f)) * 22.5f;
  float _704 = _692 + _695;
  float _705 = _701 + (19.485570907592773f - (_690 * 12.990381240844727f));
  float _708 = ((_690 * 25.980762481689453f) + -38.97114181518555f) + _701;
  float _709 = _695 - _692;
  float _710 = _704 - _677;
  float _711 = _705 - _678;
  float _714 = _695 - _677;
  float _715 = _708 - _678;
  float _720 = _711 * _711;
  float _727 = _709 - _677;
  float _731 = _705 * 2.5f;
  float _732 = frame_consts.time * 1.5f;
  float _736 = _705 * 0.004444444552063942f;
  float _737 = frame_consts.time * 0.15000000596046448f;
  float _738 = (_704 * 0.04444444552063942f) - _737;
  float _739 = _736 - _737;
  float _740 = frame_consts.time * 0.02500000037252903f;
  float _741 = dot(float3(_738, _739, _740), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _745 = floor(_741 + _738);
  float _746 = floor(_741 + _739);
  float _747 = floor(_741 + _740);
  float _751 = dot(float3(_745, _746, _747), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _752 = _751 + (_738 - _745);
  float _753 = _751 + (_739 - _746);
  float _754 = (_740 - _747) + _751;
  float _758 = select((_752 < _753), 0.0f, 1.0f);
  float _759 = select((_753 < _754), 0.0f, 1.0f);
  float _760 = select((_754 < _752), 0.0f, 1.0f);
  float _761 = 1.0f - _758;
  float _762 = 1.0f - _759;
  float _763 = 1.0f - _760;
  float _764 = min(_758, _763);
  float _765 = min(_759, _761);
  float _766 = min(_760, _762);
  float _767 = max(_758, _763);
  float _768 = max(_759, _761);
  float _769 = max(_760, _762);
  float _773 = (_752 - _764) + 0.1666666716337204f;
  float _774 = (_753 - _765) + 0.1666666716337204f;
  float _775 = (_754 - _766) + 0.1666666716337204f;
  float _779 = (_752 - _767) + 0.3333333432674408f;
  float _780 = (_753 - _768) + 0.3333333432674408f;
  float _781 = (_754 - _769) + 0.3333333432674408f;
  float _782 = _752 + -0.5f;
  float _783 = _753 + -0.5f;
  float _784 = _754 + -0.5f;
  float _794 = _745 - (floor(_745 * 0.0034602077212184668f) * 289.0f);
  float _795 = _746 - (floor(_746 * 0.0034602077212184668f) * 289.0f);
  float _796 = _747 - (floor(_747 * 0.0034602077212184668f) * 289.0f);
  float _797 = _796 + _766;
  float _798 = _796 + _769;
  float _799 = _796 + 1.0f;
  float _808 = ((_796 * 34.0f) + 1.0f) * _796;
  float _809 = ((_797 * 34.0f) + 1.0f) * _797;
  float _810 = ((_798 * 34.0f) + 1.0f) * _798;
  float _811 = ((_799 * 34.0f) + 1.0f) * _799;
  float _825 = (_808 - (floor(_808 * 0.0034602077212184668f) * 289.0f)) + _795;
  float _828 = ((_795 + _765) - (floor(_809 * 0.0034602077212184668f) * 289.0f)) + _809;
  float _831 = ((_795 + _768) - (floor(_810 * 0.0034602077212184668f) * 289.0f)) + _810;
  float _834 = ((_795 + 1.0f) - (floor(_811 * 0.0034602077212184668f) * 289.0f)) + _811;
  float _843 = ((_825 * 34.0f) + 1.0f) * _825;
  float _844 = ((_828 * 34.0f) + 1.0f) * _828;
  float _845 = ((_831 * 34.0f) + 1.0f) * _831;
  float _846 = ((_834 * 34.0f) + 1.0f) * _834;
  float _860 = (_843 - (floor(_843 * 0.0034602077212184668f) * 289.0f)) + _794;
  float _863 = ((_794 + _764) - (floor(_844 * 0.0034602077212184668f) * 289.0f)) + _844;
  float _866 = ((_794 + _767) - (floor(_845 * 0.0034602077212184668f) * 289.0f)) + _845;
  float _869 = ((_794 + 1.0f) - (floor(_846 * 0.0034602077212184668f) * 289.0f)) + _846;
  float _878 = ((_860 * 34.0f) + 1.0f) * _860;
  float _879 = ((_863 * 34.0f) + 1.0f) * _863;
  float _880 = ((_866 * 34.0f) + 1.0f) * _866;
  float _881 = ((_869 * 34.0f) + 1.0f) * _869;
  float _894 = _878 - (floor(_878 * 0.0034602077212184668f) * 289.0f);
  float _895 = _879 - (floor(_879 * 0.0034602077212184668f) * 289.0f);
  float _896 = _880 - (floor(_880 * 0.0034602077212184668f) * 289.0f);
  float _897 = _881 - (floor(_881 * 0.0034602077212184668f) * 289.0f);
  float _910 = _894 - (floor(_894 * 0.020408164709806442f) * 49.0f);
  float _911 = _895 - (floor(_895 * 0.020408164709806442f) * 49.0f);
  float _912 = _896 - (floor(_896 * 0.020408164709806442f) * 49.0f);
  float _913 = _897 - (floor(_897 * 0.020408164709806442f) * 49.0f);
  float _918 = floor(_910 * 0.1428571492433548f);
  float _919 = floor(_911 * 0.1428571492433548f);
  float _920 = floor(_912 * 0.1428571492433548f);
  float _921 = floor(_913 * 0.1428571492433548f);
  float _938 = (_918 * 0.2857142984867096f) + -0.9285714030265808f;
  float _939 = (_919 * 0.2857142984867096f) + -0.9285714030265808f;
  float _940 = (_920 * 0.2857142984867096f) + -0.9285714030265808f;
  float _941 = (_921 * 0.2857142984867096f) + -0.9285714030265808f;
  float _946 = (floor(_910 - (_918 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _947 = (floor(_911 - (_919 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _948 = (floor(_912 - (_920 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _949 = (floor(_913 - (_921 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _962 = (1.0f - abs(_938)) - abs(_946);
  float _963 = (1.0f - abs(_939)) - abs(_947);
  float _964 = (1.0f - abs(_940)) - abs(_948);
  float _965 = (1.0f - abs(_941)) - abs(_949);
  float _994 = select((_962 > 0.0f), -0.0f, -1.0f);
  float _995 = select((_963 > 0.0f), -0.0f, -1.0f);
  float _996 = select((_964 > 0.0f), -0.0f, -1.0f);
  float _997 = select((_965 > 0.0f), -0.0f, -1.0f);
  float _1002 = (((floor(_938) * 2.0f) + 1.0f) * _994) + _938;
  float _1003 = (((floor(_946) * 2.0f) + 1.0f) * _994) + _946;
  float _1004 = (((floor(_939) * 2.0f) + 1.0f) * _995) + _939;
  float _1005 = (((floor(_947) * 2.0f) + 1.0f) * _995) + _947;
  float _1010 = (((floor(_940) * 2.0f) + 1.0f) * _996) + _940;
  float _1011 = (((floor(_948) * 2.0f) + 1.0f) * _996) + _948;
  float _1012 = (((floor(_941) * 2.0f) + 1.0f) * _997) + _941;
  float _1013 = (((floor(_949) * 2.0f) + 1.0f) * _997) + _949;
  float _1022 = 1.7928400039672852f - (dot(float3(_1002, _1003, _962), float3(_1002, _1003, _962)) * 0.8537350296974182f);
  float _1023 = 1.7928400039672852f - (dot(float3(_1004, _1005, _963), float3(_1004, _1005, _963)) * 0.8537350296974182f);
  float _1024 = 1.7928400039672852f - (dot(float3(_1010, _1011, _964), float3(_1010, _1011, _964)) * 0.8537350296974182f);
  float _1025 = 1.7928400039672852f - (dot(float3(_1012, _1013, _965), float3(_1012, _1013, _965)) * 0.8537350296974182f);
  float _1046 = max((0.6000000238418579f - dot(float3(_752, _753, _754), float3(_752, _753, _754))), 0.0f);
  float _1047 = max((0.6000000238418579f - dot(float3(_773, _774, _775), float3(_773, _774, _775))), 0.0f);
  float _1048 = max((0.6000000238418579f - dot(float3(_779, _780, _781), float3(_779, _780, _781))), 0.0f);
  float _1049 = max((0.6000000238418579f - dot(float3(_782, _783, _784), float3(_782, _783, _784))), 0.0f);
  float _1050 = _1046 * _1046;
  float _1051 = _1047 * _1047;
  float _1052 = _1048 * _1048;
  float _1053 = _1049 * _1049;
  float _1068 = saturate((((sin(_731 - _732) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1050 * _1050), (_1051 * _1051), (_1052 * _1052), (_1053 * _1053)), float4(dot(float3((_1022 * _1002), (_1022 * _1003), (_1022 * _962)), float3(_752, _753, _754)), dot(float3((_1023 * _1004), (_1023 * _1005), (_1023 * _963)), float3(_773, _774, _775)), dot(float3((_1024 * _1010), (_1024 * _1011), (_1024 * _964)), float3(_779, _780, _781)), dot(float3((_1025 * _1012), (_1025 * _1013), (_1025 * _965)), float3(_782, _783, _784)))) * 21.0f)) * 4.0f);
  float _1072 = (_1068 * _1068) * (3.0f - (_1068 * 2.0f));
  float _1074 = (_1072 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1079 = (_693 * 0.5f) - _737;
  float _1080 = (_708 * 0.004444444552063942f) - _737;
  float _1081 = dot(float3(_1079, _1080, _740), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1085 = floor(_1081 + _1079);
  float _1086 = floor(_1081 + _1080);
  float _1087 = floor(_1081 + _740);
  float _1091 = dot(float3(_1085, _1086, _1087), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1092 = _1091 + (_1079 - _1085);
  float _1093 = _1091 + (_1080 - _1086);
  float _1094 = (_740 - _1087) + _1091;
  float _1098 = select((_1092 < _1093), 0.0f, 1.0f);
  float _1099 = select((_1093 < _1094), 0.0f, 1.0f);
  float _1100 = select((_1094 < _1092), 0.0f, 1.0f);
  float _1101 = 1.0f - _1098;
  float _1102 = 1.0f - _1099;
  float _1103 = 1.0f - _1100;
  float _1104 = min(_1098, _1103);
  float _1105 = min(_1099, _1101);
  float _1106 = min(_1100, _1102);
  float _1107 = max(_1098, _1103);
  float _1108 = max(_1099, _1101);
  float _1109 = max(_1100, _1102);
  float _1113 = (_1092 - _1104) + 0.1666666716337204f;
  float _1114 = (_1093 - _1105) + 0.1666666716337204f;
  float _1115 = (_1094 - _1106) + 0.1666666716337204f;
  float _1119 = (_1092 - _1107) + 0.3333333432674408f;
  float _1120 = (_1093 - _1108) + 0.3333333432674408f;
  float _1121 = (_1094 - _1109) + 0.3333333432674408f;
  float _1122 = _1092 + -0.5f;
  float _1123 = _1093 + -0.5f;
  float _1124 = _1094 + -0.5f;
  float _1134 = _1085 - (floor(_1085 * 0.0034602077212184668f) * 289.0f);
  float _1135 = _1086 - (floor(_1086 * 0.0034602077212184668f) * 289.0f);
  float _1136 = _1087 - (floor(_1087 * 0.0034602077212184668f) * 289.0f);
  float _1137 = _1136 + _1106;
  float _1138 = _1136 + _1109;
  float _1139 = _1136 + 1.0f;
  float _1148 = ((_1136 * 34.0f) + 1.0f) * _1136;
  float _1149 = ((_1137 * 34.0f) + 1.0f) * _1137;
  float _1150 = ((_1138 * 34.0f) + 1.0f) * _1138;
  float _1151 = ((_1139 * 34.0f) + 1.0f) * _1139;
  float _1165 = (_1148 - (floor(_1148 * 0.0034602077212184668f) * 289.0f)) + _1135;
  float _1168 = ((_1135 + _1105) - (floor(_1149 * 0.0034602077212184668f) * 289.0f)) + _1149;
  float _1171 = ((_1135 + _1108) - (floor(_1150 * 0.0034602077212184668f) * 289.0f)) + _1150;
  float _1174 = ((_1135 + 1.0f) - (floor(_1151 * 0.0034602077212184668f) * 289.0f)) + _1151;
  float _1183 = ((_1165 * 34.0f) + 1.0f) * _1165;
  float _1184 = ((_1168 * 34.0f) + 1.0f) * _1168;
  float _1185 = ((_1171 * 34.0f) + 1.0f) * _1171;
  float _1186 = ((_1174 * 34.0f) + 1.0f) * _1174;
  float _1200 = (_1183 - (floor(_1183 * 0.0034602077212184668f) * 289.0f)) + _1134;
  float _1203 = ((_1134 + _1104) - (floor(_1184 * 0.0034602077212184668f) * 289.0f)) + _1184;
  float _1206 = ((_1134 + _1107) - (floor(_1185 * 0.0034602077212184668f) * 289.0f)) + _1185;
  float _1209 = ((_1134 + 1.0f) - (floor(_1186 * 0.0034602077212184668f) * 289.0f)) + _1186;
  float _1218 = ((_1200 * 34.0f) + 1.0f) * _1200;
  float _1219 = ((_1203 * 34.0f) + 1.0f) * _1203;
  float _1220 = ((_1206 * 34.0f) + 1.0f) * _1206;
  float _1221 = ((_1209 * 34.0f) + 1.0f) * _1209;
  float _1234 = _1218 - (floor(_1218 * 0.0034602077212184668f) * 289.0f);
  float _1235 = _1219 - (floor(_1219 * 0.0034602077212184668f) * 289.0f);
  float _1236 = _1220 - (floor(_1220 * 0.0034602077212184668f) * 289.0f);
  float _1237 = _1221 - (floor(_1221 * 0.0034602077212184668f) * 289.0f);
  float _1250 = _1234 - (floor(_1234 * 0.020408164709806442f) * 49.0f);
  float _1251 = _1235 - (floor(_1235 * 0.020408164709806442f) * 49.0f);
  float _1252 = _1236 - (floor(_1236 * 0.020408164709806442f) * 49.0f);
  float _1253 = _1237 - (floor(_1237 * 0.020408164709806442f) * 49.0f);
  float _1258 = floor(_1250 * 0.1428571492433548f);
  float _1259 = floor(_1251 * 0.1428571492433548f);
  float _1260 = floor(_1252 * 0.1428571492433548f);
  float _1261 = floor(_1253 * 0.1428571492433548f);
  float _1278 = (_1258 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1279 = (_1259 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1280 = (_1260 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1281 = (_1261 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1286 = (floor(_1250 - (_1258 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1287 = (floor(_1251 - (_1259 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1288 = (floor(_1252 - (_1260 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1289 = (floor(_1253 - (_1261 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1302 = (1.0f - abs(_1278)) - abs(_1286);
  float _1303 = (1.0f - abs(_1279)) - abs(_1287);
  float _1304 = (1.0f - abs(_1280)) - abs(_1288);
  float _1305 = (1.0f - abs(_1281)) - abs(_1289);
  float _1334 = select((_1302 > 0.0f), -0.0f, -1.0f);
  float _1335 = select((_1303 > 0.0f), -0.0f, -1.0f);
  float _1336 = select((_1304 > 0.0f), -0.0f, -1.0f);
  float _1337 = select((_1305 > 0.0f), -0.0f, -1.0f);
  float _1342 = (((floor(_1278) * 2.0f) + 1.0f) * _1334) + _1278;
  float _1343 = (((floor(_1286) * 2.0f) + 1.0f) * _1334) + _1286;
  float _1344 = (((floor(_1279) * 2.0f) + 1.0f) * _1335) + _1279;
  float _1345 = (((floor(_1287) * 2.0f) + 1.0f) * _1335) + _1287;
  float _1350 = (((floor(_1280) * 2.0f) + 1.0f) * _1336) + _1280;
  float _1351 = (((floor(_1288) * 2.0f) + 1.0f) * _1336) + _1288;
  float _1352 = (((floor(_1281) * 2.0f) + 1.0f) * _1337) + _1281;
  float _1353 = (((floor(_1289) * 2.0f) + 1.0f) * _1337) + _1289;
  float _1362 = 1.7928400039672852f - (dot(float3(_1342, _1343, _1302), float3(_1342, _1343, _1302)) * 0.8537350296974182f);
  float _1363 = 1.7928400039672852f - (dot(float3(_1344, _1345, _1303), float3(_1344, _1345, _1303)) * 0.8537350296974182f);
  float _1364 = 1.7928400039672852f - (dot(float3(_1350, _1351, _1304), float3(_1350, _1351, _1304)) * 0.8537350296974182f);
  float _1365 = 1.7928400039672852f - (dot(float3(_1352, _1353, _1305), float3(_1352, _1353, _1305)) * 0.8537350296974182f);
  float _1386 = max((0.6000000238418579f - dot(float3(_1092, _1093, _1094), float3(_1092, _1093, _1094))), 0.0f);
  float _1387 = max((0.6000000238418579f - dot(float3(_1113, _1114, _1115), float3(_1113, _1114, _1115))), 0.0f);
  float _1388 = max((0.6000000238418579f - dot(float3(_1119, _1120, _1121), float3(_1119, _1120, _1121))), 0.0f);
  float _1389 = max((0.6000000238418579f - dot(float3(_1122, _1123, _1124), float3(_1122, _1123, _1124))), 0.0f);
  float _1390 = _1386 * _1386;
  float _1391 = _1387 * _1387;
  float _1392 = _1388 * _1388;
  float _1393 = _1389 * _1389;
  float _1408 = saturate((((sin((_708 * 2.5f) - _732) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1390 * _1390), (_1391 * _1391), (_1392 * _1392), (_1393 * _1393)), float4(dot(float3((_1362 * _1342), (_1362 * _1343), (_1362 * _1302)), float3(_1092, _1093, _1094)), dot(float3((_1363 * _1344), (_1363 * _1345), (_1363 * _1303)), float3(_1113, _1114, _1115)), dot(float3((_1364 * _1350), (_1364 * _1351), (_1364 * _1304)), float3(_1119, _1120, _1121)), dot(float3((_1365 * _1352), (_1365 * _1353), (_1365 * _1305)), float3(_1122, _1123, _1124)))) * 21.0f)) * 4.0f);
  float _1412 = (_1408 * _1408) * (3.0f - (_1408 * 2.0f));
  float _1414 = (_1412 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1421 = frame_consts.time * 0.15000000596046448f;
  float _1422 = (_709 * 0.04444444552063942f) - _1421;
  float _1423 = _736 - _1421;
  float _1424 = frame_consts.time * 0.02500000037252903f;
  float _1425 = dot(float3(_1422, _1423, _1424), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1429 = floor(_1422 + _1425);
  float _1430 = floor(_1423 + _1425);
  float _1431 = floor(_1424 + _1425);
  float _1435 = dot(float3(_1429, _1430, _1431), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1436 = _1435 + (_1422 - _1429);
  float _1437 = _1435 + (_1423 - _1430);
  float _1438 = (_1424 - _1431) + _1435;
  float _1442 = select((_1436 < _1437), 0.0f, 1.0f);
  float _1443 = select((_1437 < _1438), 0.0f, 1.0f);
  float _1444 = select((_1438 < _1436), 0.0f, 1.0f);
  float _1445 = 1.0f - _1442;
  float _1446 = 1.0f - _1443;
  float _1447 = 1.0f - _1444;
  float _1448 = min(_1442, _1447);
  float _1449 = min(_1443, _1445);
  float _1450 = min(_1444, _1446);
  float _1451 = max(_1442, _1447);
  float _1452 = max(_1443, _1445);
  float _1453 = max(_1444, _1446);
  float _1457 = (_1436 - _1448) + 0.1666666716337204f;
  float _1458 = (_1437 - _1449) + 0.1666666716337204f;
  float _1459 = (_1438 - _1450) + 0.1666666716337204f;
  float _1463 = (_1436 - _1451) + 0.3333333432674408f;
  float _1464 = (_1437 - _1452) + 0.3333333432674408f;
  float _1465 = (_1438 - _1453) + 0.3333333432674408f;
  float _1466 = _1436 + -0.5f;
  float _1467 = _1437 + -0.5f;
  float _1468 = _1438 + -0.5f;
  float _1478 = _1429 - (floor(_1429 * 0.0034602077212184668f) * 289.0f);
  float _1479 = _1430 - (floor(_1430 * 0.0034602077212184668f) * 289.0f);
  float _1480 = _1431 - (floor(_1431 * 0.0034602077212184668f) * 289.0f);
  float _1481 = _1480 + _1450;
  float _1482 = _1480 + _1453;
  float _1483 = _1480 + 1.0f;
  float _1492 = ((_1480 * 34.0f) + 1.0f) * _1480;
  float _1493 = ((_1481 * 34.0f) + 1.0f) * _1481;
  float _1494 = ((_1482 * 34.0f) + 1.0f) * _1482;
  float _1495 = ((_1483 * 34.0f) + 1.0f) * _1483;
  float _1509 = (_1492 - (floor(_1492 * 0.0034602077212184668f) * 289.0f)) + _1479;
  float _1512 = ((_1479 + _1449) - (floor(_1493 * 0.0034602077212184668f) * 289.0f)) + _1493;
  float _1515 = ((_1479 + _1452) - (floor(_1494 * 0.0034602077212184668f) * 289.0f)) + _1494;
  float _1518 = ((_1479 + 1.0f) - (floor(_1495 * 0.0034602077212184668f) * 289.0f)) + _1495;
  float _1527 = ((_1509 * 34.0f) + 1.0f) * _1509;
  float _1528 = ((_1512 * 34.0f) + 1.0f) * _1512;
  float _1529 = ((_1515 * 34.0f) + 1.0f) * _1515;
  float _1530 = ((_1518 * 34.0f) + 1.0f) * _1518;
  float _1544 = (_1527 - (floor(_1527 * 0.0034602077212184668f) * 289.0f)) + _1478;
  float _1547 = ((_1478 + _1448) - (floor(_1528 * 0.0034602077212184668f) * 289.0f)) + _1528;
  float _1550 = ((_1478 + _1451) - (floor(_1529 * 0.0034602077212184668f) * 289.0f)) + _1529;
  float _1553 = ((_1478 + 1.0f) - (floor(_1530 * 0.0034602077212184668f) * 289.0f)) + _1530;
  float _1562 = ((_1544 * 34.0f) + 1.0f) * _1544;
  float _1563 = ((_1547 * 34.0f) + 1.0f) * _1547;
  float _1564 = ((_1550 * 34.0f) + 1.0f) * _1550;
  float _1565 = ((_1553 * 34.0f) + 1.0f) * _1553;
  float _1578 = _1562 - (floor(_1562 * 0.0034602077212184668f) * 289.0f);
  float _1579 = _1563 - (floor(_1563 * 0.0034602077212184668f) * 289.0f);
  float _1580 = _1564 - (floor(_1564 * 0.0034602077212184668f) * 289.0f);
  float _1581 = _1565 - (floor(_1565 * 0.0034602077212184668f) * 289.0f);
  float _1594 = _1578 - (floor(_1578 * 0.020408164709806442f) * 49.0f);
  float _1595 = _1579 - (floor(_1579 * 0.020408164709806442f) * 49.0f);
  float _1596 = _1580 - (floor(_1580 * 0.020408164709806442f) * 49.0f);
  float _1597 = _1581 - (floor(_1581 * 0.020408164709806442f) * 49.0f);
  float _1602 = floor(_1594 * 0.1428571492433548f);
  float _1603 = floor(_1595 * 0.1428571492433548f);
  float _1604 = floor(_1596 * 0.1428571492433548f);
  float _1605 = floor(_1597 * 0.1428571492433548f);
  float _1622 = (_1602 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1623 = (_1603 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1624 = (_1604 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1625 = (_1605 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1630 = (floor(_1594 - (_1602 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1631 = (floor(_1595 - (_1603 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1632 = (floor(_1596 - (_1604 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1633 = (floor(_1597 - (_1605 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1646 = (1.0f - abs(_1622)) - abs(_1630);
  float _1647 = (1.0f - abs(_1623)) - abs(_1631);
  float _1648 = (1.0f - abs(_1624)) - abs(_1632);
  float _1649 = (1.0f - abs(_1625)) - abs(_1633);
  float _1678 = select((_1646 > 0.0f), -0.0f, -1.0f);
  float _1679 = select((_1647 > 0.0f), -0.0f, -1.0f);
  float _1680 = select((_1648 > 0.0f), -0.0f, -1.0f);
  float _1681 = select((_1649 > 0.0f), -0.0f, -1.0f);
  float _1686 = (((floor(_1622) * 2.0f) + 1.0f) * _1678) + _1622;
  float _1687 = (((floor(_1630) * 2.0f) + 1.0f) * _1678) + _1630;
  float _1688 = (((floor(_1623) * 2.0f) + 1.0f) * _1679) + _1623;
  float _1689 = (((floor(_1631) * 2.0f) + 1.0f) * _1679) + _1631;
  float _1694 = (((floor(_1624) * 2.0f) + 1.0f) * _1680) + _1624;
  float _1695 = (((floor(_1632) * 2.0f) + 1.0f) * _1680) + _1632;
  float _1696 = (((floor(_1625) * 2.0f) + 1.0f) * _1681) + _1625;
  float _1697 = (((floor(_1633) * 2.0f) + 1.0f) * _1681) + _1633;
  float _1706 = 1.7928400039672852f - (dot(float3(_1686, _1687, _1646), float3(_1686, _1687, _1646)) * 0.8537350296974182f);
  float _1707 = 1.7928400039672852f - (dot(float3(_1688, _1689, _1647), float3(_1688, _1689, _1647)) * 0.8537350296974182f);
  float _1708 = 1.7928400039672852f - (dot(float3(_1694, _1695, _1648), float3(_1694, _1695, _1648)) * 0.8537350296974182f);
  float _1709 = 1.7928400039672852f - (dot(float3(_1696, _1697, _1649), float3(_1696, _1697, _1649)) * 0.8537350296974182f);
  float _1730 = max((0.6000000238418579f - dot(float3(_1436, _1437, _1438), float3(_1436, _1437, _1438))), 0.0f);
  float _1731 = max((0.6000000238418579f - dot(float3(_1457, _1458, _1459), float3(_1457, _1458, _1459))), 0.0f);
  float _1732 = max((0.6000000238418579f - dot(float3(_1463, _1464, _1465), float3(_1463, _1464, _1465))), 0.0f);
  float _1733 = max((0.6000000238418579f - dot(float3(_1466, _1467, _1468), float3(_1466, _1467, _1468))), 0.0f);
  float _1734 = _1730 * _1730;
  float _1735 = _1731 * _1731;
  float _1736 = _1732 * _1732;
  float _1737 = _1733 * _1733;
  float _1752 = saturate((((sin(_731 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1734 * _1734), (_1735 * _1735), (_1736 * _1736), (_1737 * _1737)), float4(dot(float3((_1706 * _1686), (_1706 * _1687), (_1706 * _1646)), float3(_1436, _1437, _1438)), dot(float3((_1707 * _1688), (_1707 * _1689), (_1707 * _1647)), float3(_1457, _1458, _1459)), dot(float3((_1708 * _1694), (_1708 * _1695), (_1708 * _1648)), float3(_1463, _1464, _1465)), dot(float3((_1709 * _1696), (_1709 * _1697), (_1709 * _1649)), float3(_1466, _1467, _1468)))) * 21.0f)) * 4.0f);
  float _1756 = (_1752 * _1752) * (3.0f - (_1752 * 2.0f));
  float _1758 = (_1756 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1780 = saturate(_1074);
  float _1781 = saturate(_1414);
  float _1803 = (((_618 * 1.2000000476837158f) * _623) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_715 * _715) + (_714 * _714)) / ((_1412 * 0.039000000804662704f) + 0.08100000768899918f))) * _1414) + (saturate(11.0f - (sqrt((_710 * _710) + _720) / ((_1072 * 0.039000000804662704f) + 0.08100000768899918f))) * _1074)) + (saturate(11.0f - (sqrt((_727 * _727) + _720) / ((_1756 * 0.039000000804662704f) + 0.08100000768899918f))) * _1758)) + (((((saturate(1.0f - (abs(_711) * 0.8333333134651184f)) * _1780) + (saturate(1.0f - (abs(dot(float2(_714, _715), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1781)) * saturate(_1758)) + ((_1780 * saturate(1.0f - (abs(dot(float2(_710, _711), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1781)) * 0.5f));
  float _1810 = (_1803 * ((_670 * _670) - _632)) + _632;
  float _1811 = (_1803 * ((_671 * _671) - _633)) + _633;
  float _1812 = (_1803 * ((_672 * _672) - _634)) + _634;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1821 = ((_1810 * 0.3930000066757202f) + (_1811 * 0.7689999938011169f)) + (_1812 * 0.1889999955892563f);
    float _1826 = ((_1810 * 0.3490000069141388f) + (_1811 * 0.6859999895095825f)) + (_1812 * 0.1679999977350235f);
    float _1831 = ((_1810 * 0.2720000147819519f) + (_1811 * 0.5339999794960022f)) + (_1812 * 0.13099999725818634f);
    float _1832 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1837 = ((_1810 * 0.2125999927520752f) + (_1811 * 0.7152000069618225f)) + (_1812 * 0.0722000002861023f);
    _1857 = ((((_1821 - _1810) + ((_1837 - _1821) * 0.6499999761581421f)) * _1832) + _1810);
    _1858 = ((((_1826 - _1811) + ((_1837 - _1826) * 0.6499999761581421f)) * _1832) + _1811);
    _1859 = ((((_1831 - _1812) + ((_1837 - _1831) * 0.6499999761581421f)) * _1832) + _1812);
  } else {
    _1857 = _1810;
    _1858 = _1811;
    _1859 = _1812;
  }
  if (!(frame_consts.invert == 0)) {
    _1868 = (1.0f - _1857);
    _1869 = (1.0f - _1858);
    _1870 = (1.0f - _1859);
  } else {
    _1868 = _1857;
    _1869 = _1858;
    _1870 = _1859;
  }
  SV_Target.x = _1868;
  SV_Target.y = _1869;
  SV_Target.z = _1870;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
