#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _14 = float((int)(frame_consts.vp_dim.x));
  float _15 = float((int)(frame_consts.vp_dim.y));
  float4 _16 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float3 _20 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _35 = max((((1.0f - (_16.y * 0.7152000069618225f)) - (_16.x * 0.2125999927520752f)) - (_16.z * 0.0722000002861023f)), 0.0010000000474974513f);
  float _39 = (_16.x / _35) + (frame_consts.params.bloom.intensity * _20.x);
  float _40 = (_16.y / _35) + (frame_consts.params.bloom.intensity * _20.y);
  float _41 = (_16.z / _35) + (frame_consts.params.bloom.intensity * _20.z);
  float _47 = (((_39 * 0.2125999927520752f) + 1.0f) + (_40 * 0.7152000069618225f)) + (_41 * 0.0722000002861023f);
  float _51 = saturate(_39 / _47);
  float _52 = saturate(_40 / _47);
  float _53 = saturate(_41 / _47);
  float _59 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _63 = 10000.0f / ((_59.x * 19999.5f) + 0.5f);
  float _68 = (_63 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _70 = (_63 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _71 = -0.0f - _63;
  float _95 = mad((frame_consts.paper_xf[2].z), _71, mad((frame_consts.paper_xf[1].z), _70, (_68 * (frame_consts.paper_xf[0].z))));
  float _96 = mad((frame_consts.paper_xf[2].x), _71, mad((frame_consts.paper_xf[1].x), _70, (_68 * (frame_consts.paper_xf[0].x)))) / _95;
  float _97 = mad((frame_consts.paper_xf[2].y), _71, mad((frame_consts.paper_xf[1].y), _70, (_68 * (frame_consts.paper_xf[0].y)))) / _95;
  float _109 = exp2(round(log2(max(5.0f, (-0.0f - (_95 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _111 = min((1.0f / _109), 0.20000000298023224f);
  float _112 = frame_consts.game_plane_blend.x - _109;
  float _119 = frame_consts.game_plane_blend.x + 10.0f;
  float _127 = exp2(round(log2(max(5.0f, (-0.0f - (_95 - _119)))) * 10.0f) * 0.10000000149011612f);
  float _129 = min((1.0f / _127), 0.20000000298023224f);
  float _130 = _119 - _127;
  float _137 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_112 * _96) + (frame_consts.paper_xf[3].x)) * _111), (((_112 * _97) + (frame_consts.paper_xf[3].y)) * _111)), 0.0f);
  float _140 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_130 * _96) + (frame_consts.paper_xf[3].x)) * _129), (((_130 * _97) + (frame_consts.paper_xf[3].y)) * _129)), 0.0f);
  float _147 = ((1.0f - (_137.x * (1.0f - frame_consts.game_plane_blend.y))) - (_140.x * frame_consts.game_plane_blend.y)) * frame_consts.paper_mult;
  float _162 = _14 / _15;
  float _174 = exp2(log2(saturate((frame_consts.params.vignette.intensity * abs(O_Uv.x + -0.5f)) * (((_162 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _175 = exp2(log2(saturate(frame_consts.params.vignette.intensity * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _181 = exp2(log2(saturate(1.0f - dot(float2(_174, _175), float2(_174, _175)))) * 6.0f);
  float _186 = 1.0f - _181;
  float _188 = 1.0f - (_186 * 0.8500000238418579f);
  float _195 = (_188 * ((_51 - (_147 * _51)) - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _196 = (_188 * ((_52 - (_147 * _52)) - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _197 = (_188 * ((_53 - (_147 * _53)) - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _201 = _14 * O_Uv.x;
  float _202 = _15 * O_Uv.y;
  float _203 = _201 + _202;
  float _209 = frac(_203 * 0.0033333334140479565f) + -0.5f;
  float _210 = frac((_202 - _201) * 0.0033333334140479565f) + -0.5f;
  float _216 = saturate(sqrt((_210 * _210) + (_209 * _209)) * 2.0f);
  float _227 = saturate((sin((_203 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _232 = ((_227 * _227) * 0.2199999988079071f) * (3.0f - (_227 * 2.0f));
  float _233 = _232 + 0.9777389168739319f;
  float _234 = ((_216 * 0.13274884223937988f) + 0.7175776362419128f) + _232;
  float _235 = ((_216 * 0.3335757553577423f) + 0.30871906876564026f) + _232;
  float _240 = (O_Uv.x * 1080.0f) * _162;
  float _241 = O_Uv.y * 1080.0f;
  float _242 = _240 * 0.04444444552063942f;
  float _243 = O_Uv.y * 27.712812423706055f;
  float _245 = ceil(_242 - _243);
  float _248 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _251 = ceil((-0.0f - _243) - _242);
  float _253 = (_248 + _245) + _251;
  float _255 = (_253 * 22.5f) + -33.75f;
  float _256 = _245 - _251;
  float _258 = _256 * 11.25f;
  float _264 = (((_248 * 0.5773502588272095f) - (_245 * 0.28867512941360474f)) - (_251 * 0.28867512941360474f)) * 22.5f;
  float _267 = _255 + _258;
  float _268 = _264 + (19.485570907592773f - (_253 * 12.990381240844727f));
  float _271 = ((_253 * 25.980762481689453f) + -38.97114181518555f) + _264;
  float _272 = _258 - _255;
  float _273 = _267 - _240;
  float _274 = _268 - _241;
  float _277 = _258 - _240;
  float _278 = _271 - _241;
  float _283 = _274 * _274;
  float _290 = _272 - _240;
  float _294 = _268 * 2.5f;
  float _295 = frame_consts.time * 1.5f;
  float _299 = _268 * 0.004444444552063942f;
  float _300 = frame_consts.time * 0.15000000596046448f;
  float _301 = (_267 * 0.04444444552063942f) - _300;
  float _302 = _299 - _300;
  float _303 = frame_consts.time * 0.02500000037252903f;
  float _304 = dot(float3(_301, _302, _303), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _308 = floor(_304 + _301);
  float _309 = floor(_304 + _302);
  float _310 = floor(_304 + _303);
  float _314 = dot(float3(_308, _309, _310), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _315 = _314 + (_301 - _308);
  float _316 = _314 + (_302 - _309);
  float _317 = (_303 - _310) + _314;
  float _321 = select((_315 < _316), 0.0f, 1.0f);
  float _322 = select((_316 < _317), 0.0f, 1.0f);
  float _323 = select((_317 < _315), 0.0f, 1.0f);
  float _324 = 1.0f - _321;
  float _325 = 1.0f - _322;
  float _326 = 1.0f - _323;
  float _327 = min(_321, _326);
  float _328 = min(_322, _324);
  float _329 = min(_323, _325);
  float _330 = max(_321, _326);
  float _331 = max(_322, _324);
  float _332 = max(_323, _325);
  float _336 = (_315 - _327) + 0.1666666716337204f;
  float _337 = (_316 - _328) + 0.1666666716337204f;
  float _338 = (_317 - _329) + 0.1666666716337204f;
  float _342 = (_315 - _330) + 0.3333333432674408f;
  float _343 = (_316 - _331) + 0.3333333432674408f;
  float _344 = (_317 - _332) + 0.3333333432674408f;
  float _345 = _315 + -0.5f;
  float _346 = _316 + -0.5f;
  float _347 = _317 + -0.5f;
  float _357 = _308 - (floor(_308 * 0.0034602077212184668f) * 289.0f);
  float _358 = _309 - (floor(_309 * 0.0034602077212184668f) * 289.0f);
  float _359 = _310 - (floor(_310 * 0.0034602077212184668f) * 289.0f);
  float _360 = _359 + _329;
  float _361 = _359 + _332;
  float _362 = _359 + 1.0f;
  float _371 = ((_359 * 34.0f) + 1.0f) * _359;
  float _372 = ((_360 * 34.0f) + 1.0f) * _360;
  float _373 = ((_361 * 34.0f) + 1.0f) * _361;
  float _374 = ((_362 * 34.0f) + 1.0f) * _362;
  float _388 = (_371 - (floor(_371 * 0.0034602077212184668f) * 289.0f)) + _358;
  float _391 = ((_358 + _328) - (floor(_372 * 0.0034602077212184668f) * 289.0f)) + _372;
  float _394 = ((_358 + _331) - (floor(_373 * 0.0034602077212184668f) * 289.0f)) + _373;
  float _397 = ((_358 + 1.0f) - (floor(_374 * 0.0034602077212184668f) * 289.0f)) + _374;
  float _406 = ((_388 * 34.0f) + 1.0f) * _388;
  float _407 = ((_391 * 34.0f) + 1.0f) * _391;
  float _408 = ((_394 * 34.0f) + 1.0f) * _394;
  float _409 = ((_397 * 34.0f) + 1.0f) * _397;
  float _423 = (_406 - (floor(_406 * 0.0034602077212184668f) * 289.0f)) + _357;
  float _426 = ((_357 + _327) - (floor(_407 * 0.0034602077212184668f) * 289.0f)) + _407;
  float _429 = ((_357 + _330) - (floor(_408 * 0.0034602077212184668f) * 289.0f)) + _408;
  float _432 = ((_357 + 1.0f) - (floor(_409 * 0.0034602077212184668f) * 289.0f)) + _409;
  float _441 = ((_423 * 34.0f) + 1.0f) * _423;
  float _442 = ((_426 * 34.0f) + 1.0f) * _426;
  float _443 = ((_429 * 34.0f) + 1.0f) * _429;
  float _444 = ((_432 * 34.0f) + 1.0f) * _432;
  float _457 = _441 - (floor(_441 * 0.0034602077212184668f) * 289.0f);
  float _458 = _442 - (floor(_442 * 0.0034602077212184668f) * 289.0f);
  float _459 = _443 - (floor(_443 * 0.0034602077212184668f) * 289.0f);
  float _460 = _444 - (floor(_444 * 0.0034602077212184668f) * 289.0f);
  float _473 = _457 - (floor(_457 * 0.020408164709806442f) * 49.0f);
  float _474 = _458 - (floor(_458 * 0.020408164709806442f) * 49.0f);
  float _475 = _459 - (floor(_459 * 0.020408164709806442f) * 49.0f);
  float _476 = _460 - (floor(_460 * 0.020408164709806442f) * 49.0f);
  float _481 = floor(_473 * 0.1428571492433548f);
  float _482 = floor(_474 * 0.1428571492433548f);
  float _483 = floor(_475 * 0.1428571492433548f);
  float _484 = floor(_476 * 0.1428571492433548f);
  float _501 = (_481 * 0.2857142984867096f) + -0.9285714030265808f;
  float _502 = (_482 * 0.2857142984867096f) + -0.9285714030265808f;
  float _503 = (_483 * 0.2857142984867096f) + -0.9285714030265808f;
  float _504 = (_484 * 0.2857142984867096f) + -0.9285714030265808f;
  float _509 = (floor(_473 - (_481 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _510 = (floor(_474 - (_482 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _511 = (floor(_475 - (_483 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _512 = (floor(_476 - (_484 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _525 = (1.0f - abs(_501)) - abs(_509);
  float _526 = (1.0f - abs(_502)) - abs(_510);
  float _527 = (1.0f - abs(_503)) - abs(_511);
  float _528 = (1.0f - abs(_504)) - abs(_512);
  float _557 = select((_525 > 0.0f), -0.0f, -1.0f);
  float _558 = select((_526 > 0.0f), -0.0f, -1.0f);
  float _559 = select((_527 > 0.0f), -0.0f, -1.0f);
  float _560 = select((_528 > 0.0f), -0.0f, -1.0f);
  float _565 = (((floor(_501) * 2.0f) + 1.0f) * _557) + _501;
  float _566 = (((floor(_509) * 2.0f) + 1.0f) * _557) + _509;
  float _567 = (((floor(_502) * 2.0f) + 1.0f) * _558) + _502;
  float _568 = (((floor(_510) * 2.0f) + 1.0f) * _558) + _510;
  float _573 = (((floor(_503) * 2.0f) + 1.0f) * _559) + _503;
  float _574 = (((floor(_511) * 2.0f) + 1.0f) * _559) + _511;
  float _575 = (((floor(_504) * 2.0f) + 1.0f) * _560) + _504;
  float _576 = (((floor(_512) * 2.0f) + 1.0f) * _560) + _512;
  float _585 = 1.7928400039672852f - (dot(float3(_565, _566, _525), float3(_565, _566, _525)) * 0.8537350296974182f);
  float _586 = 1.7928400039672852f - (dot(float3(_567, _568, _526), float3(_567, _568, _526)) * 0.8537350296974182f);
  float _587 = 1.7928400039672852f - (dot(float3(_573, _574, _527), float3(_573, _574, _527)) * 0.8537350296974182f);
  float _588 = 1.7928400039672852f - (dot(float3(_575, _576, _528), float3(_575, _576, _528)) * 0.8537350296974182f);
  float _609 = max((0.6000000238418579f - dot(float3(_315, _316, _317), float3(_315, _316, _317))), 0.0f);
  float _610 = max((0.6000000238418579f - dot(float3(_336, _337, _338), float3(_336, _337, _338))), 0.0f);
  float _611 = max((0.6000000238418579f - dot(float3(_342, _343, _344), float3(_342, _343, _344))), 0.0f);
  float _612 = max((0.6000000238418579f - dot(float3(_345, _346, _347), float3(_345, _346, _347))), 0.0f);
  float _613 = _609 * _609;
  float _614 = _610 * _610;
  float _615 = _611 * _611;
  float _616 = _612 * _612;
  float _631 = saturate((((sin(_294 - _295) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_613 * _613), (_614 * _614), (_615 * _615), (_616 * _616)), float4(dot(float3((_585 * _565), (_585 * _566), (_585 * _525)), float3(_315, _316, _317)), dot(float3((_586 * _567), (_586 * _568), (_586 * _526)), float3(_336, _337, _338)), dot(float3((_587 * _573), (_587 * _574), (_587 * _527)), float3(_342, _343, _344)), dot(float3((_588 * _575), (_588 * _576), (_588 * _528)), float3(_345, _346, _347)))) * 21.0f)) * 4.0f);
  float _635 = (_631 * _631) * (3.0f - (_631 * 2.0f));
  float _637 = (_635 * 0.6499999761581421f) + 0.3499999940395355f;
  float _642 = (_256 * 0.5f) - _300;
  float _643 = (_271 * 0.004444444552063942f) - _300;
  float _644 = dot(float3(_642, _643, _303), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _648 = floor(_644 + _642);
  float _649 = floor(_644 + _643);
  float _650 = floor(_644 + _303);
  float _654 = dot(float3(_648, _649, _650), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _655 = _654 + (_642 - _648);
  float _656 = _654 + (_643 - _649);
  float _657 = (_303 - _650) + _654;
  float _661 = select((_655 < _656), 0.0f, 1.0f);
  float _662 = select((_656 < _657), 0.0f, 1.0f);
  float _663 = select((_657 < _655), 0.0f, 1.0f);
  float _664 = 1.0f - _661;
  float _665 = 1.0f - _662;
  float _666 = 1.0f - _663;
  float _667 = min(_661, _666);
  float _668 = min(_662, _664);
  float _669 = min(_663, _665);
  float _670 = max(_661, _666);
  float _671 = max(_662, _664);
  float _672 = max(_663, _665);
  float _676 = (_655 - _667) + 0.1666666716337204f;
  float _677 = (_656 - _668) + 0.1666666716337204f;
  float _678 = (_657 - _669) + 0.1666666716337204f;
  float _682 = (_655 - _670) + 0.3333333432674408f;
  float _683 = (_656 - _671) + 0.3333333432674408f;
  float _684 = (_657 - _672) + 0.3333333432674408f;
  float _685 = _655 + -0.5f;
  float _686 = _656 + -0.5f;
  float _687 = _657 + -0.5f;
  float _697 = _648 - (floor(_648 * 0.0034602077212184668f) * 289.0f);
  float _698 = _649 - (floor(_649 * 0.0034602077212184668f) * 289.0f);
  float _699 = _650 - (floor(_650 * 0.0034602077212184668f) * 289.0f);
  float _700 = _699 + _669;
  float _701 = _699 + _672;
  float _702 = _699 + 1.0f;
  float _711 = ((_699 * 34.0f) + 1.0f) * _699;
  float _712 = ((_700 * 34.0f) + 1.0f) * _700;
  float _713 = ((_701 * 34.0f) + 1.0f) * _701;
  float _714 = ((_702 * 34.0f) + 1.0f) * _702;
  float _728 = (_711 - (floor(_711 * 0.0034602077212184668f) * 289.0f)) + _698;
  float _731 = ((_698 + _668) - (floor(_712 * 0.0034602077212184668f) * 289.0f)) + _712;
  float _734 = ((_698 + _671) - (floor(_713 * 0.0034602077212184668f) * 289.0f)) + _713;
  float _737 = ((_698 + 1.0f) - (floor(_714 * 0.0034602077212184668f) * 289.0f)) + _714;
  float _746 = ((_728 * 34.0f) + 1.0f) * _728;
  float _747 = ((_731 * 34.0f) + 1.0f) * _731;
  float _748 = ((_734 * 34.0f) + 1.0f) * _734;
  float _749 = ((_737 * 34.0f) + 1.0f) * _737;
  float _763 = (_746 - (floor(_746 * 0.0034602077212184668f) * 289.0f)) + _697;
  float _766 = ((_697 + _667) - (floor(_747 * 0.0034602077212184668f) * 289.0f)) + _747;
  float _769 = ((_697 + _670) - (floor(_748 * 0.0034602077212184668f) * 289.0f)) + _748;
  float _772 = ((_697 + 1.0f) - (floor(_749 * 0.0034602077212184668f) * 289.0f)) + _749;
  float _781 = ((_763 * 34.0f) + 1.0f) * _763;
  float _782 = ((_766 * 34.0f) + 1.0f) * _766;
  float _783 = ((_769 * 34.0f) + 1.0f) * _769;
  float _784 = ((_772 * 34.0f) + 1.0f) * _772;
  float _797 = _781 - (floor(_781 * 0.0034602077212184668f) * 289.0f);
  float _798 = _782 - (floor(_782 * 0.0034602077212184668f) * 289.0f);
  float _799 = _783 - (floor(_783 * 0.0034602077212184668f) * 289.0f);
  float _800 = _784 - (floor(_784 * 0.0034602077212184668f) * 289.0f);
  float _813 = _797 - (floor(_797 * 0.020408164709806442f) * 49.0f);
  float _814 = _798 - (floor(_798 * 0.020408164709806442f) * 49.0f);
  float _815 = _799 - (floor(_799 * 0.020408164709806442f) * 49.0f);
  float _816 = _800 - (floor(_800 * 0.020408164709806442f) * 49.0f);
  float _821 = floor(_813 * 0.1428571492433548f);
  float _822 = floor(_814 * 0.1428571492433548f);
  float _823 = floor(_815 * 0.1428571492433548f);
  float _824 = floor(_816 * 0.1428571492433548f);
  float _841 = (_821 * 0.2857142984867096f) + -0.9285714030265808f;
  float _842 = (_822 * 0.2857142984867096f) + -0.9285714030265808f;
  float _843 = (_823 * 0.2857142984867096f) + -0.9285714030265808f;
  float _844 = (_824 * 0.2857142984867096f) + -0.9285714030265808f;
  float _849 = (floor(_813 - (_821 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _850 = (floor(_814 - (_822 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _851 = (floor(_815 - (_823 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _852 = (floor(_816 - (_824 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _865 = (1.0f - abs(_841)) - abs(_849);
  float _866 = (1.0f - abs(_842)) - abs(_850);
  float _867 = (1.0f - abs(_843)) - abs(_851);
  float _868 = (1.0f - abs(_844)) - abs(_852);
  float _897 = select((_865 > 0.0f), -0.0f, -1.0f);
  float _898 = select((_866 > 0.0f), -0.0f, -1.0f);
  float _899 = select((_867 > 0.0f), -0.0f, -1.0f);
  float _900 = select((_868 > 0.0f), -0.0f, -1.0f);
  float _905 = (((floor(_841) * 2.0f) + 1.0f) * _897) + _841;
  float _906 = (((floor(_849) * 2.0f) + 1.0f) * _897) + _849;
  float _907 = (((floor(_842) * 2.0f) + 1.0f) * _898) + _842;
  float _908 = (((floor(_850) * 2.0f) + 1.0f) * _898) + _850;
  float _913 = (((floor(_843) * 2.0f) + 1.0f) * _899) + _843;
  float _914 = (((floor(_851) * 2.0f) + 1.0f) * _899) + _851;
  float _915 = (((floor(_844) * 2.0f) + 1.0f) * _900) + _844;
  float _916 = (((floor(_852) * 2.0f) + 1.0f) * _900) + _852;
  float _925 = 1.7928400039672852f - (dot(float3(_905, _906, _865), float3(_905, _906, _865)) * 0.8537350296974182f);
  float _926 = 1.7928400039672852f - (dot(float3(_907, _908, _866), float3(_907, _908, _866)) * 0.8537350296974182f);
  float _927 = 1.7928400039672852f - (dot(float3(_913, _914, _867), float3(_913, _914, _867)) * 0.8537350296974182f);
  float _928 = 1.7928400039672852f - (dot(float3(_915, _916, _868), float3(_915, _916, _868)) * 0.8537350296974182f);
  float _949 = max((0.6000000238418579f - dot(float3(_655, _656, _657), float3(_655, _656, _657))), 0.0f);
  float _950 = max((0.6000000238418579f - dot(float3(_676, _677, _678), float3(_676, _677, _678))), 0.0f);
  float _951 = max((0.6000000238418579f - dot(float3(_682, _683, _684), float3(_682, _683, _684))), 0.0f);
  float _952 = max((0.6000000238418579f - dot(float3(_685, _686, _687), float3(_685, _686, _687))), 0.0f);
  float _953 = _949 * _949;
  float _954 = _950 * _950;
  float _955 = _951 * _951;
  float _956 = _952 * _952;
  float _971 = saturate((((sin((_271 * 2.5f) - _295) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_953 * _953), (_954 * _954), (_955 * _955), (_956 * _956)), float4(dot(float3((_925 * _905), (_925 * _906), (_925 * _865)), float3(_655, _656, _657)), dot(float3((_926 * _907), (_926 * _908), (_926 * _866)), float3(_676, _677, _678)), dot(float3((_927 * _913), (_927 * _914), (_927 * _867)), float3(_682, _683, _684)), dot(float3((_928 * _915), (_928 * _916), (_928 * _868)), float3(_685, _686, _687)))) * 21.0f)) * 4.0f);
  float _975 = (_971 * _971) * (3.0f - (_971 * 2.0f));
  float _977 = (_975 * 0.6499999761581421f) + 0.3499999940395355f;
  float _984 = frame_consts.time * 0.15000000596046448f;
  float _985 = (_272 * 0.04444444552063942f) - _984;
  float _986 = _299 - _984;
  float _987 = frame_consts.time * 0.02500000037252903f;
  float _988 = dot(float3(_985, _986, _987), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _992 = floor(_985 + _988);
  float _993 = floor(_986 + _988);
  float _994 = floor(_987 + _988);
  float _998 = dot(float3(_992, _993, _994), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _999 = _998 + (_985 - _992);
  float _1000 = _998 + (_986 - _993);
  float _1001 = (_987 - _994) + _998;
  float _1005 = select((_999 < _1000), 0.0f, 1.0f);
  float _1006 = select((_1000 < _1001), 0.0f, 1.0f);
  float _1007 = select((_1001 < _999), 0.0f, 1.0f);
  float _1008 = 1.0f - _1005;
  float _1009 = 1.0f - _1006;
  float _1010 = 1.0f - _1007;
  float _1011 = min(_1005, _1010);
  float _1012 = min(_1006, _1008);
  float _1013 = min(_1007, _1009);
  float _1014 = max(_1005, _1010);
  float _1015 = max(_1006, _1008);
  float _1016 = max(_1007, _1009);
  float _1020 = (_999 - _1011) + 0.1666666716337204f;
  float _1021 = (_1000 - _1012) + 0.1666666716337204f;
  float _1022 = (_1001 - _1013) + 0.1666666716337204f;
  float _1026 = (_999 - _1014) + 0.3333333432674408f;
  float _1027 = (_1000 - _1015) + 0.3333333432674408f;
  float _1028 = (_1001 - _1016) + 0.3333333432674408f;
  float _1029 = _999 + -0.5f;
  float _1030 = _1000 + -0.5f;
  float _1031 = _1001 + -0.5f;
  float _1041 = _992 - (floor(_992 * 0.0034602077212184668f) * 289.0f);
  float _1042 = _993 - (floor(_993 * 0.0034602077212184668f) * 289.0f);
  float _1043 = _994 - (floor(_994 * 0.0034602077212184668f) * 289.0f);
  float _1044 = _1043 + _1013;
  float _1045 = _1043 + _1016;
  float _1046 = _1043 + 1.0f;
  float _1055 = ((_1043 * 34.0f) + 1.0f) * _1043;
  float _1056 = ((_1044 * 34.0f) + 1.0f) * _1044;
  float _1057 = ((_1045 * 34.0f) + 1.0f) * _1045;
  float _1058 = ((_1046 * 34.0f) + 1.0f) * _1046;
  float _1072 = (_1055 - (floor(_1055 * 0.0034602077212184668f) * 289.0f)) + _1042;
  float _1075 = ((_1042 + _1012) - (floor(_1056 * 0.0034602077212184668f) * 289.0f)) + _1056;
  float _1078 = ((_1042 + _1015) - (floor(_1057 * 0.0034602077212184668f) * 289.0f)) + _1057;
  float _1081 = ((_1042 + 1.0f) - (floor(_1058 * 0.0034602077212184668f) * 289.0f)) + _1058;
  float _1090 = ((_1072 * 34.0f) + 1.0f) * _1072;
  float _1091 = ((_1075 * 34.0f) + 1.0f) * _1075;
  float _1092 = ((_1078 * 34.0f) + 1.0f) * _1078;
  float _1093 = ((_1081 * 34.0f) + 1.0f) * _1081;
  float _1107 = (_1090 - (floor(_1090 * 0.0034602077212184668f) * 289.0f)) + _1041;
  float _1110 = ((_1041 + _1011) - (floor(_1091 * 0.0034602077212184668f) * 289.0f)) + _1091;
  float _1113 = ((_1041 + _1014) - (floor(_1092 * 0.0034602077212184668f) * 289.0f)) + _1092;
  float _1116 = ((_1041 + 1.0f) - (floor(_1093 * 0.0034602077212184668f) * 289.0f)) + _1093;
  float _1125 = ((_1107 * 34.0f) + 1.0f) * _1107;
  float _1126 = ((_1110 * 34.0f) + 1.0f) * _1110;
  float _1127 = ((_1113 * 34.0f) + 1.0f) * _1113;
  float _1128 = ((_1116 * 34.0f) + 1.0f) * _1116;
  float _1141 = _1125 - (floor(_1125 * 0.0034602077212184668f) * 289.0f);
  float _1142 = _1126 - (floor(_1126 * 0.0034602077212184668f) * 289.0f);
  float _1143 = _1127 - (floor(_1127 * 0.0034602077212184668f) * 289.0f);
  float _1144 = _1128 - (floor(_1128 * 0.0034602077212184668f) * 289.0f);
  float _1157 = _1141 - (floor(_1141 * 0.020408164709806442f) * 49.0f);
  float _1158 = _1142 - (floor(_1142 * 0.020408164709806442f) * 49.0f);
  float _1159 = _1143 - (floor(_1143 * 0.020408164709806442f) * 49.0f);
  float _1160 = _1144 - (floor(_1144 * 0.020408164709806442f) * 49.0f);
  float _1165 = floor(_1157 * 0.1428571492433548f);
  float _1166 = floor(_1158 * 0.1428571492433548f);
  float _1167 = floor(_1159 * 0.1428571492433548f);
  float _1168 = floor(_1160 * 0.1428571492433548f);
  float _1185 = (_1165 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1186 = (_1166 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1187 = (_1167 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1188 = (_1168 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1193 = (floor(_1157 - (_1165 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1194 = (floor(_1158 - (_1166 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1195 = (floor(_1159 - (_1167 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1196 = (floor(_1160 - (_1168 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1209 = (1.0f - abs(_1185)) - abs(_1193);
  float _1210 = (1.0f - abs(_1186)) - abs(_1194);
  float _1211 = (1.0f - abs(_1187)) - abs(_1195);
  float _1212 = (1.0f - abs(_1188)) - abs(_1196);
  float _1241 = select((_1209 > 0.0f), -0.0f, -1.0f);
  float _1242 = select((_1210 > 0.0f), -0.0f, -1.0f);
  float _1243 = select((_1211 > 0.0f), -0.0f, -1.0f);
  float _1244 = select((_1212 > 0.0f), -0.0f, -1.0f);
  float _1249 = (((floor(_1185) * 2.0f) + 1.0f) * _1241) + _1185;
  float _1250 = (((floor(_1193) * 2.0f) + 1.0f) * _1241) + _1193;
  float _1251 = (((floor(_1186) * 2.0f) + 1.0f) * _1242) + _1186;
  float _1252 = (((floor(_1194) * 2.0f) + 1.0f) * _1242) + _1194;
  float _1257 = (((floor(_1187) * 2.0f) + 1.0f) * _1243) + _1187;
  float _1258 = (((floor(_1195) * 2.0f) + 1.0f) * _1243) + _1195;
  float _1259 = (((floor(_1188) * 2.0f) + 1.0f) * _1244) + _1188;
  float _1260 = (((floor(_1196) * 2.0f) + 1.0f) * _1244) + _1196;
  float _1269 = 1.7928400039672852f - (dot(float3(_1249, _1250, _1209), float3(_1249, _1250, _1209)) * 0.8537350296974182f);
  float _1270 = 1.7928400039672852f - (dot(float3(_1251, _1252, _1210), float3(_1251, _1252, _1210)) * 0.8537350296974182f);
  float _1271 = 1.7928400039672852f - (dot(float3(_1257, _1258, _1211), float3(_1257, _1258, _1211)) * 0.8537350296974182f);
  float _1272 = 1.7928400039672852f - (dot(float3(_1259, _1260, _1212), float3(_1259, _1260, _1212)) * 0.8537350296974182f);
  float _1293 = max((0.6000000238418579f - dot(float3(_999, _1000, _1001), float3(_999, _1000, _1001))), 0.0f);
  float _1294 = max((0.6000000238418579f - dot(float3(_1020, _1021, _1022), float3(_1020, _1021, _1022))), 0.0f);
  float _1295 = max((0.6000000238418579f - dot(float3(_1026, _1027, _1028), float3(_1026, _1027, _1028))), 0.0f);
  float _1296 = max((0.6000000238418579f - dot(float3(_1029, _1030, _1031), float3(_1029, _1030, _1031))), 0.0f);
  float _1297 = _1293 * _1293;
  float _1298 = _1294 * _1294;
  float _1299 = _1295 * _1295;
  float _1300 = _1296 * _1296;
  float _1315 = saturate((((sin(_294 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1297 * _1297), (_1298 * _1298), (_1299 * _1299), (_1300 * _1300)), float4(dot(float3((_1269 * _1249), (_1269 * _1250), (_1269 * _1209)), float3(_999, _1000, _1001)), dot(float3((_1270 * _1251), (_1270 * _1252), (_1270 * _1210)), float3(_1020, _1021, _1022)), dot(float3((_1271 * _1257), (_1271 * _1258), (_1271 * _1211)), float3(_1026, _1027, _1028)), dot(float3((_1272 * _1259), (_1272 * _1260), (_1272 * _1212)), float3(_1029, _1030, _1031)))) * 21.0f)) * 4.0f);
  float _1319 = (_1315 * _1315) * (3.0f - (_1315 * 2.0f));
  float _1321 = (_1319 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1343 = saturate(_637);
  float _1344 = saturate(_977);
  float _1366 = (((_181 * 1.2000000476837158f) * _186) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_278 * _278) + (_277 * _277)) / ((_975 * 0.039000000804662704f) + 0.08100000768899918f))) * _977) + (saturate(11.0f - (sqrt((_273 * _273) + _283) / ((_635 * 0.039000000804662704f) + 0.08100000768899918f))) * _637)) + (saturate(11.0f - (sqrt((_290 * _290) + _283) / ((_1319 * 0.039000000804662704f) + 0.08100000768899918f))) * _1321)) + (((((saturate(1.0f - (abs(_274) * 0.8333333134651184f)) * _1343) + (saturate(1.0f - (abs(dot(float2(_277, _278), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1344)) * saturate(_1321)) + ((_1343 * saturate(1.0f - (abs(dot(float2(_273, _274), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1344)) * 0.5f));
  SV_Target.x = ((_1366 * ((_233 * _233) - _195)) + _195);
  SV_Target.y = ((_1366 * ((_234 * _234) - _196)) + _196);
  SV_Target.z = ((_1366 * ((_235 * _235) - _197)) + _197);
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(_16.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
