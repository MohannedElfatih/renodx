#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

Texture2D<float3> color_correct_lut : register(t8);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float4 _17 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float3 _21 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _36 = max((((1.0f - (_17.y * 0.7152000069618225f)) - (_17.x * 0.2125999927520752f)) - (_17.z * 0.0722000002861023f)), 0.0010000000474974513f);
  float _40 = (_17.x / _36) + (frame_consts.params.bloom.intensity * _21.x);
  float _41 = (_17.y / _36) + (frame_consts.params.bloom.intensity * _21.y);
  float _42 = (_17.z / _36) + (frame_consts.params.bloom.intensity * _21.z);
  float _48 = (((_40 * 0.2125999927520752f) + 1.0f) + (_41 * 0.7152000069618225f)) + (_42 * 0.0722000002861023f);
  float _52 = saturate(_40 / _48);
  float _53 = saturate(_41 / _48);
  float _54 = saturate(_42 / _48);
  uint2 _55; color_correct_lut.GetDimensions(_55.x, _55.y);
  float _68;
  float _79;
  float _90;
  if (!(!(_52 <= 0.0031308000907301903f))) {
    _68 = (_52 * 12.920000076293945f);
  } else {
    _68 = (((pow(_52, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_53 <= 0.0031308000907301903f))) {
    _79 = (_53 * 12.920000076293945f);
  } else {
    _79 = (((pow(_53, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_54 <= 0.0031308000907301903f))) {
    _90 = (_54 * 12.920000076293945f);
  } else {
    _90 = (((pow(_54, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  float _93 = float((uint)(_55.y + -1u));
  float _96 = _90 * _93;
  float _97 = frac(_96);
  float _99 = float((uint)_55.y);
  float _101 = (_68 * _93) + 0.5f;
  float _104 = float((uint)_55.x);
  float _106 = (lerp(_79, 1.0f, _93)) / _99;
  float3 _107 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((ceil(_96) * _99) + _101) / _104), _106), 0.0f);
  float3 _115 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((floor(_96) * _99) + _101) / _104), _106), 0.0f);
  float _125 = ((_107.x - _115.x) * _97) + _115.x;
  float _126 = ((_107.y - _115.y) * _97) + _115.y;
  float _127 = ((_107.z - _115.z) * _97) + _115.z;
  float _133 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _137 = 10000.0f / ((_133.x * 19999.5f) + 0.5f);
  float _142 = (_137 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _144 = (_137 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _145 = -0.0f - _137;
  float _169 = mad((frame_consts.paper_xf[2].z), _145, mad((frame_consts.paper_xf[1].z), _144, (_142 * (frame_consts.paper_xf[0].z))));
  float _170 = mad((frame_consts.paper_xf[2].x), _145, mad((frame_consts.paper_xf[1].x), _144, (_142 * (frame_consts.paper_xf[0].x)))) / _169;
  float _171 = mad((frame_consts.paper_xf[2].y), _145, mad((frame_consts.paper_xf[1].y), _144, (_142 * (frame_consts.paper_xf[0].y)))) / _169;
  float _178 = log2(max(5.0f, (-0.0f - (_169 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _179 = floor(_178);
  float _180 = _178 - _179;
  float _182 = exp2(_179 * 0.10000000149011612f);
  float _183 = 1.0f / _182;
  float _184 = min(_183, 0.20000000298023224f);
  float _186 = min((_183 * 0.9330329895019531f), 0.20000000298023224f);
  float _187 = frame_consts.game_plane_blend.x - _182;
  float _193 = frame_consts.game_plane_blend.x - (_182 * 1.0717734098434448f);
  float _203 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_187 * _170) + (frame_consts.paper_xf[3].x)) * _184), (((_187 * _171) + (frame_consts.paper_xf[3].y)) * _184)), 0.0f);
  float _206 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_193 * _170) + (frame_consts.paper_xf[3].x)) * _186), (((_193 * _171) + (frame_consts.paper_xf[3].y)) * _186)), 0.0f);
  float _213 = ((1.0f - (_203.x * (1.0f - _180))) - (_206.x * _180)) * frame_consts.paper_mult;
  float _228 = _15 / _16;
  float _240 = exp2(log2(saturate((frame_consts.params.vignette.intensity * abs(O_Uv.x + -0.5f)) * (((_228 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _241 = exp2(log2(saturate(frame_consts.params.vignette.intensity * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _247 = exp2(log2(saturate(1.0f - dot(float2(_240, _241), float2(_240, _241)))) * 6.0f);
  float _252 = 1.0f - _247;
  float _254 = 1.0f - (_252 * 0.8500000238418579f);
  float _261 = (_254 * ((_125 - (_213 * _125)) - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _262 = (_254 * ((_126 - (_213 * _126)) - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _263 = (_254 * ((_127 - (_213 * _127)) - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _267 = _15 * O_Uv.x;
  float _268 = _16 * O_Uv.y;
  float _269 = _267 + _268;
  float _275 = frac(_269 * 0.0033333334140479565f) + -0.5f;
  float _276 = frac((_268 - _267) * 0.0033333334140479565f) + -0.5f;
  float _282 = saturate(sqrt((_276 * _276) + (_275 * _275)) * 2.0f);
  float _293 = saturate((sin((_269 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _298 = ((_293 * _293) * 0.2199999988079071f) * (3.0f - (_293 * 2.0f));
  float _299 = _298 + 0.9777389168739319f;
  float _300 = ((_282 * 0.13274884223937988f) + 0.7175776362419128f) + _298;
  float _301 = ((_282 * 0.3335757553577423f) + 0.30871906876564026f) + _298;
  float _306 = (O_Uv.x * 1080.0f) * _228;
  float _307 = O_Uv.y * 1080.0f;
  float _308 = _306 * 0.04444444552063942f;
  float _309 = O_Uv.y * 27.712812423706055f;
  float _311 = ceil(_308 - _309);
  float _314 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _317 = ceil((-0.0f - _309) - _308);
  float _319 = (_314 + _311) + _317;
  float _321 = (_319 * 22.5f) + -33.75f;
  float _322 = _311 - _317;
  float _324 = _322 * 11.25f;
  float _330 = (((_314 * 0.5773502588272095f) - (_311 * 0.28867512941360474f)) - (_317 * 0.28867512941360474f)) * 22.5f;
  float _333 = _321 + _324;
  float _334 = _330 + (19.485570907592773f - (_319 * 12.990381240844727f));
  float _337 = ((_319 * 25.980762481689453f) + -38.97114181518555f) + _330;
  float _338 = _324 - _321;
  float _339 = _333 - _306;
  float _340 = _334 - _307;
  float _343 = _324 - _306;
  float _344 = _337 - _307;
  float _349 = _340 * _340;
  float _356 = _338 - _306;
  float _360 = _334 * 2.5f;
  float _361 = frame_consts.time * 1.5f;
  float _365 = _334 * 0.004444444552063942f;
  float _366 = frame_consts.time * 0.15000000596046448f;
  float _367 = (_333 * 0.04444444552063942f) - _366;
  float _368 = _365 - _366;
  float _369 = frame_consts.time * 0.02500000037252903f;
  float _370 = dot(float3(_367, _368, _369), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _374 = floor(_370 + _367);
  float _375 = floor(_370 + _368);
  float _376 = floor(_370 + _369);
  float _380 = dot(float3(_374, _375, _376), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _381 = _380 + (_367 - _374);
  float _382 = _380 + (_368 - _375);
  float _383 = (_369 - _376) + _380;
  float _387 = select((_381 < _382), 0.0f, 1.0f);
  float _388 = select((_382 < _383), 0.0f, 1.0f);
  float _389 = select((_383 < _381), 0.0f, 1.0f);
  float _390 = 1.0f - _387;
  float _391 = 1.0f - _388;
  float _392 = 1.0f - _389;
  float _393 = min(_387, _392);
  float _394 = min(_388, _390);
  float _395 = min(_389, _391);
  float _396 = max(_387, _392);
  float _397 = max(_388, _390);
  float _398 = max(_389, _391);
  float _402 = (_381 - _393) + 0.1666666716337204f;
  float _403 = (_382 - _394) + 0.1666666716337204f;
  float _404 = (_383 - _395) + 0.1666666716337204f;
  float _408 = (_381 - _396) + 0.3333333432674408f;
  float _409 = (_382 - _397) + 0.3333333432674408f;
  float _410 = (_383 - _398) + 0.3333333432674408f;
  float _411 = _381 + -0.5f;
  float _412 = _382 + -0.5f;
  float _413 = _383 + -0.5f;
  float _423 = _374 - (floor(_374 * 0.0034602077212184668f) * 289.0f);
  float _424 = _375 - (floor(_375 * 0.0034602077212184668f) * 289.0f);
  float _425 = _376 - (floor(_376 * 0.0034602077212184668f) * 289.0f);
  float _426 = _425 + _395;
  float _427 = _425 + _398;
  float _428 = _425 + 1.0f;
  float _437 = ((_425 * 34.0f) + 1.0f) * _425;
  float _438 = ((_426 * 34.0f) + 1.0f) * _426;
  float _439 = ((_427 * 34.0f) + 1.0f) * _427;
  float _440 = ((_428 * 34.0f) + 1.0f) * _428;
  float _454 = (_437 - (floor(_437 * 0.0034602077212184668f) * 289.0f)) + _424;
  float _457 = ((_424 + _394) - (floor(_438 * 0.0034602077212184668f) * 289.0f)) + _438;
  float _460 = ((_424 + _397) - (floor(_439 * 0.0034602077212184668f) * 289.0f)) + _439;
  float _463 = ((_424 + 1.0f) - (floor(_440 * 0.0034602077212184668f) * 289.0f)) + _440;
  float _472 = ((_454 * 34.0f) + 1.0f) * _454;
  float _473 = ((_457 * 34.0f) + 1.0f) * _457;
  float _474 = ((_460 * 34.0f) + 1.0f) * _460;
  float _475 = ((_463 * 34.0f) + 1.0f) * _463;
  float _489 = (_472 - (floor(_472 * 0.0034602077212184668f) * 289.0f)) + _423;
  float _492 = ((_423 + _393) - (floor(_473 * 0.0034602077212184668f) * 289.0f)) + _473;
  float _495 = ((_423 + _396) - (floor(_474 * 0.0034602077212184668f) * 289.0f)) + _474;
  float _498 = ((_423 + 1.0f) - (floor(_475 * 0.0034602077212184668f) * 289.0f)) + _475;
  float _507 = ((_489 * 34.0f) + 1.0f) * _489;
  float _508 = ((_492 * 34.0f) + 1.0f) * _492;
  float _509 = ((_495 * 34.0f) + 1.0f) * _495;
  float _510 = ((_498 * 34.0f) + 1.0f) * _498;
  float _523 = _507 - (floor(_507 * 0.0034602077212184668f) * 289.0f);
  float _524 = _508 - (floor(_508 * 0.0034602077212184668f) * 289.0f);
  float _525 = _509 - (floor(_509 * 0.0034602077212184668f) * 289.0f);
  float _526 = _510 - (floor(_510 * 0.0034602077212184668f) * 289.0f);
  float _539 = _523 - (floor(_523 * 0.020408164709806442f) * 49.0f);
  float _540 = _524 - (floor(_524 * 0.020408164709806442f) * 49.0f);
  float _541 = _525 - (floor(_525 * 0.020408164709806442f) * 49.0f);
  float _542 = _526 - (floor(_526 * 0.020408164709806442f) * 49.0f);
  float _547 = floor(_539 * 0.1428571492433548f);
  float _548 = floor(_540 * 0.1428571492433548f);
  float _549 = floor(_541 * 0.1428571492433548f);
  float _550 = floor(_542 * 0.1428571492433548f);
  float _567 = (_547 * 0.2857142984867096f) + -0.9285714030265808f;
  float _568 = (_548 * 0.2857142984867096f) + -0.9285714030265808f;
  float _569 = (_549 * 0.2857142984867096f) + -0.9285714030265808f;
  float _570 = (_550 * 0.2857142984867096f) + -0.9285714030265808f;
  float _575 = (floor(_539 - (_547 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _576 = (floor(_540 - (_548 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _577 = (floor(_541 - (_549 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _578 = (floor(_542 - (_550 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _591 = (1.0f - abs(_567)) - abs(_575);
  float _592 = (1.0f - abs(_568)) - abs(_576);
  float _593 = (1.0f - abs(_569)) - abs(_577);
  float _594 = (1.0f - abs(_570)) - abs(_578);
  float _623 = select((_591 > 0.0f), -0.0f, -1.0f);
  float _624 = select((_592 > 0.0f), -0.0f, -1.0f);
  float _625 = select((_593 > 0.0f), -0.0f, -1.0f);
  float _626 = select((_594 > 0.0f), -0.0f, -1.0f);
  float _631 = (((floor(_567) * 2.0f) + 1.0f) * _623) + _567;
  float _632 = (((floor(_575) * 2.0f) + 1.0f) * _623) + _575;
  float _633 = (((floor(_568) * 2.0f) + 1.0f) * _624) + _568;
  float _634 = (((floor(_576) * 2.0f) + 1.0f) * _624) + _576;
  float _639 = (((floor(_569) * 2.0f) + 1.0f) * _625) + _569;
  float _640 = (((floor(_577) * 2.0f) + 1.0f) * _625) + _577;
  float _641 = (((floor(_570) * 2.0f) + 1.0f) * _626) + _570;
  float _642 = (((floor(_578) * 2.0f) + 1.0f) * _626) + _578;
  float _651 = 1.7928400039672852f - (dot(float3(_631, _632, _591), float3(_631, _632, _591)) * 0.8537350296974182f);
  float _652 = 1.7928400039672852f - (dot(float3(_633, _634, _592), float3(_633, _634, _592)) * 0.8537350296974182f);
  float _653 = 1.7928400039672852f - (dot(float3(_639, _640, _593), float3(_639, _640, _593)) * 0.8537350296974182f);
  float _654 = 1.7928400039672852f - (dot(float3(_641, _642, _594), float3(_641, _642, _594)) * 0.8537350296974182f);
  float _675 = max((0.6000000238418579f - dot(float3(_381, _382, _383), float3(_381, _382, _383))), 0.0f);
  float _676 = max((0.6000000238418579f - dot(float3(_402, _403, _404), float3(_402, _403, _404))), 0.0f);
  float _677 = max((0.6000000238418579f - dot(float3(_408, _409, _410), float3(_408, _409, _410))), 0.0f);
  float _678 = max((0.6000000238418579f - dot(float3(_411, _412, _413), float3(_411, _412, _413))), 0.0f);
  float _679 = _675 * _675;
  float _680 = _676 * _676;
  float _681 = _677 * _677;
  float _682 = _678 * _678;
  float _697 = saturate((((sin(_360 - _361) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_679 * _679), (_680 * _680), (_681 * _681), (_682 * _682)), float4(dot(float3((_651 * _631), (_651 * _632), (_651 * _591)), float3(_381, _382, _383)), dot(float3((_652 * _633), (_652 * _634), (_652 * _592)), float3(_402, _403, _404)), dot(float3((_653 * _639), (_653 * _640), (_653 * _593)), float3(_408, _409, _410)), dot(float3((_654 * _641), (_654 * _642), (_654 * _594)), float3(_411, _412, _413)))) * 21.0f)) * 4.0f);
  float _701 = (_697 * _697) * (3.0f - (_697 * 2.0f));
  float _703 = (_701 * 0.6499999761581421f) + 0.3499999940395355f;
  float _708 = (_322 * 0.5f) - _366;
  float _709 = (_337 * 0.004444444552063942f) - _366;
  float _710 = dot(float3(_708, _709, _369), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _714 = floor(_710 + _708);
  float _715 = floor(_710 + _709);
  float _716 = floor(_710 + _369);
  float _720 = dot(float3(_714, _715, _716), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _721 = _720 + (_708 - _714);
  float _722 = _720 + (_709 - _715);
  float _723 = (_369 - _716) + _720;
  float _727 = select((_721 < _722), 0.0f, 1.0f);
  float _728 = select((_722 < _723), 0.0f, 1.0f);
  float _729 = select((_723 < _721), 0.0f, 1.0f);
  float _730 = 1.0f - _727;
  float _731 = 1.0f - _728;
  float _732 = 1.0f - _729;
  float _733 = min(_727, _732);
  float _734 = min(_728, _730);
  float _735 = min(_729, _731);
  float _736 = max(_727, _732);
  float _737 = max(_728, _730);
  float _738 = max(_729, _731);
  float _742 = (_721 - _733) + 0.1666666716337204f;
  float _743 = (_722 - _734) + 0.1666666716337204f;
  float _744 = (_723 - _735) + 0.1666666716337204f;
  float _748 = (_721 - _736) + 0.3333333432674408f;
  float _749 = (_722 - _737) + 0.3333333432674408f;
  float _750 = (_723 - _738) + 0.3333333432674408f;
  float _751 = _721 + -0.5f;
  float _752 = _722 + -0.5f;
  float _753 = _723 + -0.5f;
  float _763 = _714 - (floor(_714 * 0.0034602077212184668f) * 289.0f);
  float _764 = _715 - (floor(_715 * 0.0034602077212184668f) * 289.0f);
  float _765 = _716 - (floor(_716 * 0.0034602077212184668f) * 289.0f);
  float _766 = _765 + _735;
  float _767 = _765 + _738;
  float _768 = _765 + 1.0f;
  float _777 = ((_765 * 34.0f) + 1.0f) * _765;
  float _778 = ((_766 * 34.0f) + 1.0f) * _766;
  float _779 = ((_767 * 34.0f) + 1.0f) * _767;
  float _780 = ((_768 * 34.0f) + 1.0f) * _768;
  float _794 = (_777 - (floor(_777 * 0.0034602077212184668f) * 289.0f)) + _764;
  float _797 = ((_764 + _734) - (floor(_778 * 0.0034602077212184668f) * 289.0f)) + _778;
  float _800 = ((_764 + _737) - (floor(_779 * 0.0034602077212184668f) * 289.0f)) + _779;
  float _803 = ((_764 + 1.0f) - (floor(_780 * 0.0034602077212184668f) * 289.0f)) + _780;
  float _812 = ((_794 * 34.0f) + 1.0f) * _794;
  float _813 = ((_797 * 34.0f) + 1.0f) * _797;
  float _814 = ((_800 * 34.0f) + 1.0f) * _800;
  float _815 = ((_803 * 34.0f) + 1.0f) * _803;
  float _829 = (_812 - (floor(_812 * 0.0034602077212184668f) * 289.0f)) + _763;
  float _832 = ((_763 + _733) - (floor(_813 * 0.0034602077212184668f) * 289.0f)) + _813;
  float _835 = ((_763 + _736) - (floor(_814 * 0.0034602077212184668f) * 289.0f)) + _814;
  float _838 = ((_763 + 1.0f) - (floor(_815 * 0.0034602077212184668f) * 289.0f)) + _815;
  float _847 = ((_829 * 34.0f) + 1.0f) * _829;
  float _848 = ((_832 * 34.0f) + 1.0f) * _832;
  float _849 = ((_835 * 34.0f) + 1.0f) * _835;
  float _850 = ((_838 * 34.0f) + 1.0f) * _838;
  float _863 = _847 - (floor(_847 * 0.0034602077212184668f) * 289.0f);
  float _864 = _848 - (floor(_848 * 0.0034602077212184668f) * 289.0f);
  float _865 = _849 - (floor(_849 * 0.0034602077212184668f) * 289.0f);
  float _866 = _850 - (floor(_850 * 0.0034602077212184668f) * 289.0f);
  float _879 = _863 - (floor(_863 * 0.020408164709806442f) * 49.0f);
  float _880 = _864 - (floor(_864 * 0.020408164709806442f) * 49.0f);
  float _881 = _865 - (floor(_865 * 0.020408164709806442f) * 49.0f);
  float _882 = _866 - (floor(_866 * 0.020408164709806442f) * 49.0f);
  float _887 = floor(_879 * 0.1428571492433548f);
  float _888 = floor(_880 * 0.1428571492433548f);
  float _889 = floor(_881 * 0.1428571492433548f);
  float _890 = floor(_882 * 0.1428571492433548f);
  float _907 = (_887 * 0.2857142984867096f) + -0.9285714030265808f;
  float _908 = (_888 * 0.2857142984867096f) + -0.9285714030265808f;
  float _909 = (_889 * 0.2857142984867096f) + -0.9285714030265808f;
  float _910 = (_890 * 0.2857142984867096f) + -0.9285714030265808f;
  float _915 = (floor(_879 - (_887 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _916 = (floor(_880 - (_888 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _917 = (floor(_881 - (_889 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _918 = (floor(_882 - (_890 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _931 = (1.0f - abs(_907)) - abs(_915);
  float _932 = (1.0f - abs(_908)) - abs(_916);
  float _933 = (1.0f - abs(_909)) - abs(_917);
  float _934 = (1.0f - abs(_910)) - abs(_918);
  float _963 = select((_931 > 0.0f), -0.0f, -1.0f);
  float _964 = select((_932 > 0.0f), -0.0f, -1.0f);
  float _965 = select((_933 > 0.0f), -0.0f, -1.0f);
  float _966 = select((_934 > 0.0f), -0.0f, -1.0f);
  float _971 = (((floor(_907) * 2.0f) + 1.0f) * _963) + _907;
  float _972 = (((floor(_915) * 2.0f) + 1.0f) * _963) + _915;
  float _973 = (((floor(_908) * 2.0f) + 1.0f) * _964) + _908;
  float _974 = (((floor(_916) * 2.0f) + 1.0f) * _964) + _916;
  float _979 = (((floor(_909) * 2.0f) + 1.0f) * _965) + _909;
  float _980 = (((floor(_917) * 2.0f) + 1.0f) * _965) + _917;
  float _981 = (((floor(_910) * 2.0f) + 1.0f) * _966) + _910;
  float _982 = (((floor(_918) * 2.0f) + 1.0f) * _966) + _918;
  float _991 = 1.7928400039672852f - (dot(float3(_971, _972, _931), float3(_971, _972, _931)) * 0.8537350296974182f);
  float _992 = 1.7928400039672852f - (dot(float3(_973, _974, _932), float3(_973, _974, _932)) * 0.8537350296974182f);
  float _993 = 1.7928400039672852f - (dot(float3(_979, _980, _933), float3(_979, _980, _933)) * 0.8537350296974182f);
  float _994 = 1.7928400039672852f - (dot(float3(_981, _982, _934), float3(_981, _982, _934)) * 0.8537350296974182f);
  float _1015 = max((0.6000000238418579f - dot(float3(_721, _722, _723), float3(_721, _722, _723))), 0.0f);
  float _1016 = max((0.6000000238418579f - dot(float3(_742, _743, _744), float3(_742, _743, _744))), 0.0f);
  float _1017 = max((0.6000000238418579f - dot(float3(_748, _749, _750), float3(_748, _749, _750))), 0.0f);
  float _1018 = max((0.6000000238418579f - dot(float3(_751, _752, _753), float3(_751, _752, _753))), 0.0f);
  float _1019 = _1015 * _1015;
  float _1020 = _1016 * _1016;
  float _1021 = _1017 * _1017;
  float _1022 = _1018 * _1018;
  float _1037 = saturate((((sin((_337 * 2.5f) - _361) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1019 * _1019), (_1020 * _1020), (_1021 * _1021), (_1022 * _1022)), float4(dot(float3((_991 * _971), (_991 * _972), (_991 * _931)), float3(_721, _722, _723)), dot(float3((_992 * _973), (_992 * _974), (_992 * _932)), float3(_742, _743, _744)), dot(float3((_993 * _979), (_993 * _980), (_993 * _933)), float3(_748, _749, _750)), dot(float3((_994 * _981), (_994 * _982), (_994 * _934)), float3(_751, _752, _753)))) * 21.0f)) * 4.0f);
  float _1041 = (_1037 * _1037) * (3.0f - (_1037 * 2.0f));
  float _1043 = (_1041 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1050 = frame_consts.time * 0.15000000596046448f;
  float _1051 = (_338 * 0.04444444552063942f) - _1050;
  float _1052 = _365 - _1050;
  float _1053 = frame_consts.time * 0.02500000037252903f;
  float _1054 = dot(float3(_1051, _1052, _1053), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1058 = floor(_1051 + _1054);
  float _1059 = floor(_1052 + _1054);
  float _1060 = floor(_1053 + _1054);
  float _1064 = dot(float3(_1058, _1059, _1060), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1065 = _1064 + (_1051 - _1058);
  float _1066 = _1064 + (_1052 - _1059);
  float _1067 = (_1053 - _1060) + _1064;
  float _1071 = select((_1065 < _1066), 0.0f, 1.0f);
  float _1072 = select((_1066 < _1067), 0.0f, 1.0f);
  float _1073 = select((_1067 < _1065), 0.0f, 1.0f);
  float _1074 = 1.0f - _1071;
  float _1075 = 1.0f - _1072;
  float _1076 = 1.0f - _1073;
  float _1077 = min(_1071, _1076);
  float _1078 = min(_1072, _1074);
  float _1079 = min(_1073, _1075);
  float _1080 = max(_1071, _1076);
  float _1081 = max(_1072, _1074);
  float _1082 = max(_1073, _1075);
  float _1086 = (_1065 - _1077) + 0.1666666716337204f;
  float _1087 = (_1066 - _1078) + 0.1666666716337204f;
  float _1088 = (_1067 - _1079) + 0.1666666716337204f;
  float _1092 = (_1065 - _1080) + 0.3333333432674408f;
  float _1093 = (_1066 - _1081) + 0.3333333432674408f;
  float _1094 = (_1067 - _1082) + 0.3333333432674408f;
  float _1095 = _1065 + -0.5f;
  float _1096 = _1066 + -0.5f;
  float _1097 = _1067 + -0.5f;
  float _1107 = _1058 - (floor(_1058 * 0.0034602077212184668f) * 289.0f);
  float _1108 = _1059 - (floor(_1059 * 0.0034602077212184668f) * 289.0f);
  float _1109 = _1060 - (floor(_1060 * 0.0034602077212184668f) * 289.0f);
  float _1110 = _1109 + _1079;
  float _1111 = _1109 + _1082;
  float _1112 = _1109 + 1.0f;
  float _1121 = ((_1109 * 34.0f) + 1.0f) * _1109;
  float _1122 = ((_1110 * 34.0f) + 1.0f) * _1110;
  float _1123 = ((_1111 * 34.0f) + 1.0f) * _1111;
  float _1124 = ((_1112 * 34.0f) + 1.0f) * _1112;
  float _1138 = (_1121 - (floor(_1121 * 0.0034602077212184668f) * 289.0f)) + _1108;
  float _1141 = ((_1108 + _1078) - (floor(_1122 * 0.0034602077212184668f) * 289.0f)) + _1122;
  float _1144 = ((_1108 + _1081) - (floor(_1123 * 0.0034602077212184668f) * 289.0f)) + _1123;
  float _1147 = ((_1108 + 1.0f) - (floor(_1124 * 0.0034602077212184668f) * 289.0f)) + _1124;
  float _1156 = ((_1138 * 34.0f) + 1.0f) * _1138;
  float _1157 = ((_1141 * 34.0f) + 1.0f) * _1141;
  float _1158 = ((_1144 * 34.0f) + 1.0f) * _1144;
  float _1159 = ((_1147 * 34.0f) + 1.0f) * _1147;
  float _1173 = (_1156 - (floor(_1156 * 0.0034602077212184668f) * 289.0f)) + _1107;
  float _1176 = ((_1107 + _1077) - (floor(_1157 * 0.0034602077212184668f) * 289.0f)) + _1157;
  float _1179 = ((_1107 + _1080) - (floor(_1158 * 0.0034602077212184668f) * 289.0f)) + _1158;
  float _1182 = ((_1107 + 1.0f) - (floor(_1159 * 0.0034602077212184668f) * 289.0f)) + _1159;
  float _1191 = ((_1173 * 34.0f) + 1.0f) * _1173;
  float _1192 = ((_1176 * 34.0f) + 1.0f) * _1176;
  float _1193 = ((_1179 * 34.0f) + 1.0f) * _1179;
  float _1194 = ((_1182 * 34.0f) + 1.0f) * _1182;
  float _1207 = _1191 - (floor(_1191 * 0.0034602077212184668f) * 289.0f);
  float _1208 = _1192 - (floor(_1192 * 0.0034602077212184668f) * 289.0f);
  float _1209 = _1193 - (floor(_1193 * 0.0034602077212184668f) * 289.0f);
  float _1210 = _1194 - (floor(_1194 * 0.0034602077212184668f) * 289.0f);
  float _1223 = _1207 - (floor(_1207 * 0.020408164709806442f) * 49.0f);
  float _1224 = _1208 - (floor(_1208 * 0.020408164709806442f) * 49.0f);
  float _1225 = _1209 - (floor(_1209 * 0.020408164709806442f) * 49.0f);
  float _1226 = _1210 - (floor(_1210 * 0.020408164709806442f) * 49.0f);
  float _1231 = floor(_1223 * 0.1428571492433548f);
  float _1232 = floor(_1224 * 0.1428571492433548f);
  float _1233 = floor(_1225 * 0.1428571492433548f);
  float _1234 = floor(_1226 * 0.1428571492433548f);
  float _1251 = (_1231 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1252 = (_1232 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1253 = (_1233 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1254 = (_1234 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1259 = (floor(_1223 - (_1231 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1260 = (floor(_1224 - (_1232 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1261 = (floor(_1225 - (_1233 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1262 = (floor(_1226 - (_1234 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1275 = (1.0f - abs(_1251)) - abs(_1259);
  float _1276 = (1.0f - abs(_1252)) - abs(_1260);
  float _1277 = (1.0f - abs(_1253)) - abs(_1261);
  float _1278 = (1.0f - abs(_1254)) - abs(_1262);
  float _1307 = select((_1275 > 0.0f), -0.0f, -1.0f);
  float _1308 = select((_1276 > 0.0f), -0.0f, -1.0f);
  float _1309 = select((_1277 > 0.0f), -0.0f, -1.0f);
  float _1310 = select((_1278 > 0.0f), -0.0f, -1.0f);
  float _1315 = (((floor(_1251) * 2.0f) + 1.0f) * _1307) + _1251;
  float _1316 = (((floor(_1259) * 2.0f) + 1.0f) * _1307) + _1259;
  float _1317 = (((floor(_1252) * 2.0f) + 1.0f) * _1308) + _1252;
  float _1318 = (((floor(_1260) * 2.0f) + 1.0f) * _1308) + _1260;
  float _1323 = (((floor(_1253) * 2.0f) + 1.0f) * _1309) + _1253;
  float _1324 = (((floor(_1261) * 2.0f) + 1.0f) * _1309) + _1261;
  float _1325 = (((floor(_1254) * 2.0f) + 1.0f) * _1310) + _1254;
  float _1326 = (((floor(_1262) * 2.0f) + 1.0f) * _1310) + _1262;
  float _1335 = 1.7928400039672852f - (dot(float3(_1315, _1316, _1275), float3(_1315, _1316, _1275)) * 0.8537350296974182f);
  float _1336 = 1.7928400039672852f - (dot(float3(_1317, _1318, _1276), float3(_1317, _1318, _1276)) * 0.8537350296974182f);
  float _1337 = 1.7928400039672852f - (dot(float3(_1323, _1324, _1277), float3(_1323, _1324, _1277)) * 0.8537350296974182f);
  float _1338 = 1.7928400039672852f - (dot(float3(_1325, _1326, _1278), float3(_1325, _1326, _1278)) * 0.8537350296974182f);
  float _1359 = max((0.6000000238418579f - dot(float3(_1065, _1066, _1067), float3(_1065, _1066, _1067))), 0.0f);
  float _1360 = max((0.6000000238418579f - dot(float3(_1086, _1087, _1088), float3(_1086, _1087, _1088))), 0.0f);
  float _1361 = max((0.6000000238418579f - dot(float3(_1092, _1093, _1094), float3(_1092, _1093, _1094))), 0.0f);
  float _1362 = max((0.6000000238418579f - dot(float3(_1095, _1096, _1097), float3(_1095, _1096, _1097))), 0.0f);
  float _1363 = _1359 * _1359;
  float _1364 = _1360 * _1360;
  float _1365 = _1361 * _1361;
  float _1366 = _1362 * _1362;
  float _1381 = saturate((((sin(_360 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1363 * _1363), (_1364 * _1364), (_1365 * _1365), (_1366 * _1366)), float4(dot(float3((_1335 * _1315), (_1335 * _1316), (_1335 * _1275)), float3(_1065, _1066, _1067)), dot(float3((_1336 * _1317), (_1336 * _1318), (_1336 * _1276)), float3(_1086, _1087, _1088)), dot(float3((_1337 * _1323), (_1337 * _1324), (_1337 * _1277)), float3(_1092, _1093, _1094)), dot(float3((_1338 * _1325), (_1338 * _1326), (_1338 * _1278)), float3(_1095, _1096, _1097)))) * 21.0f)) * 4.0f);
  float _1385 = (_1381 * _1381) * (3.0f - (_1381 * 2.0f));
  float _1387 = (_1385 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1409 = saturate(_703);
  float _1410 = saturate(_1043);
  float _1432 = (((_247 * 1.2000000476837158f) * _252) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_344 * _344) + (_343 * _343)) / ((_1041 * 0.039000000804662704f) + 0.08100000768899918f))) * _1043) + (saturate(11.0f - (sqrt((_339 * _339) + _349) / ((_701 * 0.039000000804662704f) + 0.08100000768899918f))) * _703)) + (saturate(11.0f - (sqrt((_356 * _356) + _349) / ((_1385 * 0.039000000804662704f) + 0.08100000768899918f))) * _1387)) + (((((saturate(1.0f - (abs(_340) * 0.8333333134651184f)) * _1409) + (saturate(1.0f - (abs(dot(float2(_343, _344), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1410)) * saturate(_1387)) + ((_1409 * saturate(1.0f - (abs(dot(float2(_339, _340), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1410)) * 0.5f));
  SV_Target.x = ((_1432 * ((_299 * _299) - _261)) + _261);
  SV_Target.y = ((_1432 * ((_300 * _300) - _262)) + _262);
  SV_Target.z = ((_1432 * ((_301 * _301) - _263)) + _263);
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(_17.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
