#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float2> distortion : register(t4);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

Texture2D<float3> color_correct_lut : register(t8);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _16 = float((int)(frame_consts.vp_dim.x));
  float _17 = float((int)(frame_consts.vp_dim.y));
  float2 _18 = distortion.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _21 = _17 / _16;
  float _26 = saturate((_18.x * _21) + O_Uv.x);
  float _27 = saturate((_18.y * _21) + O_Uv.y);
  float _59;
  float _60;
  float _61;
  float _62;
  float _110;
  float _121;
  float _132;
  float _298;
  float _309;
  float _320;
  float _343;
  float _344;
  float _345;
  float _462;
  float _463;
  float _464;
  float _505;
  float _506;
  float _507;
  float _656;
  float _657;
  float _658;
  float _666;
  float _1934;
  float _1935;
  float _1936;
  float _1945;
  float _1946;
  float _1947;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _34 = abs(_26 + -0.5f);
    float _35 = abs(_27 + -0.5f);
    float _39 = (rsqrt(dot(float2(_34, _35), float2(_34, _35))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _40 = _39 * _34;
    float _41 = _39 * _35;
    float4 _44 = tex.SampleLevel(sampler_nearest, float2((_40 + _26), (_41 + _27)), 0.0f);
    float4 _46 = tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
    float4 _50 = tex.SampleLevel(sampler_nearest, float2((_26 - _40), (_27 - _41)), 0.0f);
    _59 = _44.x;
    _60 = _46.y;
    _61 = _50.z;
    _62 = 0.5f;
  } else {
    float4 _53 = tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
    _59 = _53.x;
    _60 = _53.y;
    _61 = _53.z;
    _62 = _53.w;
  }
  float3 untonemapped = float3(_59, _60, _61);

  float3 _63 = bloom_tex.SampleLevel(sampler_bilinear, float2(_26, _27), 0.0f);
  float _78 = max((((1.0f - (_59 * 0.2125999927520752f)) - (_60 * 0.7152000069618225f)) - (_61 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _82 = (_59 / _78) + (frame_consts.params.bloom.intensity * _63.x);
  float _83 = (_60 / _78) + (frame_consts.params.bloom.intensity * _63.y);
  float _84 = (_61 / _78) + (frame_consts.params.bloom.intensity * _63.z);
  float _90 = (((_82 * 0.2125999927520752f) + 1.0f) + (_83 * 0.7152000069618225f)) + (_84 * 0.0722000002861023f);
  float _94 = saturate(_82 / _90);
  float _95 = saturate(_83 / _90);
  float _96 = saturate(_84 / _90);
  uint2 _97; color_correct_lut.GetDimensions(_97.x, _97.y);
  if (!(!(_94 <= 0.0031308000907301903f))) {
    _110 = (_94 * 12.920000076293945f);
  } else {
    _110 = (((pow(_94, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_95 <= 0.0031308000907301903f))) {
    _121 = (_95 * 12.920000076293945f);
  } else {
    _121 = (((pow(_95, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_96 <= 0.0031308000907301903f))) {
    _132 = (_96 * 12.920000076293945f);
  } else {
    _132 = (((pow(_96, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  float _135 = float((uint)(_97.y + -1u));
  float _138 = _132 * _135;
  float _139 = frac(_138);
  float _141 = float((uint)_97.y);
  float _143 = (_110 * _135) + 0.5f;
  float _146 = float((uint)_97.x);
  float _148 = (lerp(_121, 1.0f, _135)) / _141;
  float3 _149 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((ceil(_138) * _141) + _143) / _146), _148), 0.0f);
  float3 _157 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((floor(_138) * _141) + _143) / _146), _148), 0.0f);
  float _167 = ((_149.x - _157.x) * _139) + _157.x;
  float _168 = ((_149.y - _157.y) * _139) + _157.y;
  float _169 = ((_149.z - _157.z) * _139) + _157.z;
  if (!(frame_consts.glitch == 0)) {
    float _177 = float((int)(int((_16 / _17) * 1080.0f)));
    float _178 = _177 * _26;
    float _179 = _27 * 1080.0f;
    float _180 = _177 * 0.5f;
    float _183 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _190 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _196 = ((_190 * 3.0f) * exp2(1.4426950216293335f - (_190 * 4.328084945678711f))) + ((_183 * 5.0f) * exp2(1.4426950216293335f - (_183 * 7.213475227355957f)));
    float _197 = _196 * 15.0f;
    float _198 = _197 + 30.0f;
    float _200 = (_196 * 20.0f) + 80.0f;
    float _204 = abs(_177 * (_26 + -0.5f));
    float _205 = abs(_179 + -540.0f);
    float _208 = ((_204 - _180) + _198) + _200;
    float _211 = ((_205 + -510.0f) + _197) + _200;
    float _214 = max(_208, 0.0f);
    float _215 = max(_211, 0.0f);
    float _229 = _204 - (_180 - _198);
    float _230 = _205 - (510.0f - _197);
    float _231 = max(_229, 0.0f);
    float _232 = max(_230, 0.0f);
    float _248 = max(max(0.0f, (1.0f - saturate(abs((min(max(_208, _211), 0.0f) - _200) + sqrt((_215 * _215) + (_214 * _214))) + -0.5f))), ((1.0f - saturate(abs(min(max(_229, _230), 0.0f) + sqrt((_232 * _232) + (_231 * _231))) + -0.5f)) * (1.0f - saturate(_196 * 1.6666666269302368f))));
    float _259 = frac((_178 + _179) * 0.0012499999720603228f) + -0.5f;
    float _260 = frac((_179 - _178) * 0.0012499999720603228f) + -0.5f;
    float _272 = saturate((sin((((_178 * 0.0003124999930150807f) + (_27 * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _276 = (_272 * _272) * (3.0f - (_272 * 2.0f));
    float _278 = saturate(sqrt((_260 * _260) + (_259 * _259)) * 2.0f);
    float _283 = _276 * 0.20000000298023224f;
    float _285 = ((_278 * 0.12156862020492554f) + 0.7450979948043823f) + _283;
    float _286 = ((_278 * 0.3333333134651184f) + 0.34117645025253296f) + _283;
    do {
      if (!(!((_283 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _298 = ((_276 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _298 = exp2(log2((_276 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_285 <= 0.040449999272823334f))) {
          _309 = (_285 * 0.07739938050508499f);
        } else {
          _309 = exp2(log2((_285 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_286 <= 0.040449999272823334f))) {
            _320 = (_286 * 0.07739938050508499f);
          } else {
            _320 = exp2(log2((_286 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _326 = (((_298 * 0.2125999927520752f) + 1.0f) + (_309 * 0.7152000069618225f)) + (_320 * 0.0722000002861023f);
          _343 = (((saturate(_298 / _326) - _167) * _248) + _167);
          _344 = (((saturate(_309 / _326) - _168) * _248) + _168);
          _345 = (((saturate(_320 / _326) - _169) * _248) + _169);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _343 = _167;
    _344 = _168;
    _345 = _169;
  }
  float _351 = depth_tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
  float _355 = 10000.0f / ((_351.x * 19999.5f) + 0.5f);
  float _360 = (_355 * ((_26 * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _362 = (_355 * (((1.0f - _27) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _363 = -0.0f - _355;
  float _387 = mad((frame_consts.paper_xf[2].z), _363, mad((frame_consts.paper_xf[1].z), _362, (_360 * (frame_consts.paper_xf[0].z))));
  float _388 = mad((frame_consts.paper_xf[2].x), _363, mad((frame_consts.paper_xf[1].x), _362, (_360 * (frame_consts.paper_xf[0].x)))) / _387;
  float _389 = mad((frame_consts.paper_xf[2].y), _363, mad((frame_consts.paper_xf[1].y), _362, (_360 * (frame_consts.paper_xf[0].y)))) / _387;
  float _396 = log2(max(5.0f, (-0.0f - (_387 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _397 = floor(_396);
  float _398 = _396 - _397;
  float _400 = exp2(_397 * 0.10000000149011612f);
  float _401 = 1.0f / _400;
  float _402 = min(_401, 0.20000000298023224f);
  float _404 = min((_401 * 0.9330329895019531f), 0.20000000298023224f);
  float _405 = frame_consts.game_plane_blend.x - _400;
  float _411 = frame_consts.game_plane_blend.x - (_400 * 1.0717734098434448f);
  float _421 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_405 * _388) + (frame_consts.paper_xf[3].x)) * _402), (((_405 * _389) + (frame_consts.paper_xf[3].y)) * _402)), 0.0f);
  float _424 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_411 * _388) + (frame_consts.paper_xf[3].x)) * _404), (((_411 * _389) + (frame_consts.paper_xf[3].y)) * _404)), 0.0f);
  float _431 = ((1.0f - (_421.x * (1.0f - _398))) - (_424.x * _398)) * frame_consts.paper_mult;
  float _435 = _343 - (_431 * _343);
  float _436 = _344 - (_431 * _344);
  float _437 = _345 - (_431 * _345);
  if (!(frame_consts.death_screen == 0)) {
    float _460 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _62), _62);
    _462 = _460;
    _463 = _460;
    _464 = _460;
  } else {
    _462 = (lerp(_435, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _463 = (lerp(_436, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _464 = (lerp(_437, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _472 = _26 * _16;
    float _473 = _27 * _17;
    float _474 = _472 * 0.06666667014360428f;
    float _475 = _473 * 0.038490019738674164f;
    float _477 = ceil(_474 - _475);
    float _479 = floor(_473 * 0.07698003947734833f);
    float _480 = _479 + 1.0f;
    float _483 = ceil((-0.0f - _474) - _475);
    float _485 = (_477 - _483) * 7.5f;
    float _486 = _477 * 0.28867512941360474f;
    float _487 = _480 * 0.5773502588272095f;
    float _488 = _487 - _486;
    float _489 = _483 * 0.28867512941360474f;
    float _492 = _485 / _16;
    float _493 = ((_488 - _489) * 15.0f) / _17;
    do {
      if (((_480 + _477) + _483) == 2.0f) {
        _505 = (_477 + 1.0f);
        _506 = (_479 + 2.0f);
        _507 = (_483 + 1.0f);
      } else {
        _505 = (_477 + -1.0f);
        _506 = _479;
        _507 = (_483 + -1.0f);
      }
      float _508 = _505 - _483;
      float _511 = _487 - (_505 * 0.28867512941360474f);
      float _512 = _511 - _489;
      float _515 = (_506 * 0.5773502588272095f) - _486;
      float _516 = _515 - _489;
      float _518 = _477 - _507;
      float _521 = _488 - (_507 * 0.28867512941360474f);
      float _525 = (_511 - _515) * 15.0f;
      float _526 = (_505 - _477) * -7.5f;
      float _528 = rsqrt(dot(float2(_525, _526), float2(_525, _526)));
      float _537 = (_516 - _521) * 15.0f;
      float _538 = (_507 - _483) * -7.5f;
      float _540 = rsqrt(dot(float2(_537, _538), float2(_537, _538)));
      float _549 = (_521 - _512) * 15.0f;
      float _550 = (_518 - _508) * -7.5f;
      float _552 = rsqrt(dot(float2(_549, _550), float2(_549, _550)));
      float _565 = _492 + -0.5f;
      float _566 = _493 + -0.5f;
      float _613 = _26 + -0.5f;
      float _614 = _27 + -0.5f;
      float _621 = ((frame_consts.time - sqrt((_614 * _614) + (_613 * _613))) + (frac(sin(dot(float2((_492 * 5.0f), (_493 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _625 = frac(abs(_621));
      float _629 = max((select((_621 >= (-0.0f - _621)), _625, (-0.0f - _625)) * 18.0f), 0.0f);
      float _645 = min(max((1.0f - (((((_629 * 1.600000023841858f) * exp2(1.4426950216293335f - (_629 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_566 * _566) + (_565 * _565)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_492 * 3.0f), (_493 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_492, _493), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_492 * 2.0f), (_493 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _651 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_508 * 7.5f) - _472), ((_512 * 15.0f) - _473)), float2((_525 * _528), (_528 * _526))))), abs(dot(float2((_485 - _472), ((_516 * 15.0f) - _473)), float2((_540 * _537), (_540 * _538))))), abs(dot(float2(((_518 * 7.5f) - _472), ((_521 * 15.0f) - _473)), float2((_552 * _549), (_552 * _550))))) * 0.2309400886297226f)) - _645) / ((_645 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _656 = (_651 * _462);
      _657 = (_651 * _463);
      _658 = (_651 * _464);
    } while (false);
  } else {
    _656 = _462;
    _657 = _463;
    _658 = _464;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _666 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _666 = 0.0f;
  }
  float _673 = frame_consts.params.vignette.intensity + _666;
  float _676 = _16 / _17;
  float _688 = exp2(log2(saturate((_673 * abs(_26 + -0.5f)) * (((_676 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _689 = exp2(log2(saturate(_673 * abs(_27 + -0.5f))) * 5.0f);
  float _695 = exp2(log2(saturate(1.0f - dot(float2(_688, _689), float2(_688, _689)))) * 6.0f);
  float _700 = 1.0f - _695;
  float _702 = 1.0f - (_700 * 0.8500000238418579f);
  float _709 = (_702 * (_656 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _710 = (_702 * (_657 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _711 = (_702 * (_658 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _715 = _26 * _16;
  float _716 = _27 * _17;
  float _717 = _716 + _715;
  float _723 = frac(_717 * 0.0033333334140479565f) + -0.5f;
  float _724 = frac((_716 - _715) * 0.0033333334140479565f) + -0.5f;
  float _730 = saturate(sqrt((_724 * _724) + (_723 * _723)) * 2.0f);
  float _741 = saturate((sin((_717 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _746 = ((_741 * _741) * 0.2199999988079071f) * (3.0f - (_741 * 2.0f));
  float _747 = _746 + 0.9777389168739319f;
  float _748 = ((_730 * 0.13274884223937988f) + 0.7175776362419128f) + _746;
  float _749 = ((_730 * 0.3335757553577423f) + 0.30871906876564026f) + _746;
  float _754 = (_26 * 1080.0f) * _676;
  float _755 = _27 * 1080.0f;
  float _756 = _754 * 0.04444444552063942f;
  float _757 = _27 * 27.712812423706055f;
  float _759 = ceil(_756 - _757);
  float _762 = floor(_27 * 55.42562484741211f) + 1.0f;
  float _765 = ceil((-0.0f - _757) - _756);
  float _767 = (_762 + _759) + _765;
  float _769 = (_767 * 22.5f) + -33.75f;
  float _770 = _759 - _765;
  float _772 = _770 * 11.25f;
  float _778 = (((_762 * 0.5773502588272095f) - (_759 * 0.28867512941360474f)) - (_765 * 0.28867512941360474f)) * 22.5f;
  float _781 = _769 + _772;
  float _782 = _778 + (19.485570907592773f - (_767 * 12.990381240844727f));
  float _785 = ((_767 * 25.980762481689453f) + -38.97114181518555f) + _778;
  float _786 = _772 - _769;
  float _787 = _781 - _754;
  float _788 = _782 - _755;
  float _791 = _772 - _754;
  float _792 = _785 - _755;
  float _797 = _788 * _788;
  float _804 = _786 - _754;
  float _808 = _782 * 2.5f;
  float _809 = frame_consts.time * 1.5f;
  float _813 = _782 * 0.004444444552063942f;
  float _814 = frame_consts.time * 0.15000000596046448f;
  float _815 = (_781 * 0.04444444552063942f) - _814;
  float _816 = _813 - _814;
  float _817 = frame_consts.time * 0.02500000037252903f;
  float _818 = dot(float3(_815, _816, _817), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _822 = floor(_818 + _815);
  float _823 = floor(_818 + _816);
  float _824 = floor(_818 + _817);
  float _828 = dot(float3(_822, _823, _824), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _829 = _828 + (_815 - _822);
  float _830 = _828 + (_816 - _823);
  float _831 = (_817 - _824) + _828;
  float _835 = select((_829 < _830), 0.0f, 1.0f);
  float _836 = select((_830 < _831), 0.0f, 1.0f);
  float _837 = select((_831 < _829), 0.0f, 1.0f);
  float _838 = 1.0f - _835;
  float _839 = 1.0f - _836;
  float _840 = 1.0f - _837;
  float _841 = min(_835, _840);
  float _842 = min(_836, _838);
  float _843 = min(_837, _839);
  float _844 = max(_835, _840);
  float _845 = max(_836, _838);
  float _846 = max(_837, _839);
  float _850 = (_829 - _841) + 0.1666666716337204f;
  float _851 = (_830 - _842) + 0.1666666716337204f;
  float _852 = (_831 - _843) + 0.1666666716337204f;
  float _856 = (_829 - _844) + 0.3333333432674408f;
  float _857 = (_830 - _845) + 0.3333333432674408f;
  float _858 = (_831 - _846) + 0.3333333432674408f;
  float _859 = _829 + -0.5f;
  float _860 = _830 + -0.5f;
  float _861 = _831 + -0.5f;
  float _871 = _822 - (floor(_822 * 0.0034602077212184668f) * 289.0f);
  float _872 = _823 - (floor(_823 * 0.0034602077212184668f) * 289.0f);
  float _873 = _824 - (floor(_824 * 0.0034602077212184668f) * 289.0f);
  float _874 = _873 + _843;
  float _875 = _873 + _846;
  float _876 = _873 + 1.0f;
  float _885 = ((_873 * 34.0f) + 1.0f) * _873;
  float _886 = ((_874 * 34.0f) + 1.0f) * _874;
  float _887 = ((_875 * 34.0f) + 1.0f) * _875;
  float _888 = ((_876 * 34.0f) + 1.0f) * _876;
  float _902 = (_885 - (floor(_885 * 0.0034602077212184668f) * 289.0f)) + _872;
  float _905 = ((_872 + _842) - (floor(_886 * 0.0034602077212184668f) * 289.0f)) + _886;
  float _908 = ((_872 + _845) - (floor(_887 * 0.0034602077212184668f) * 289.0f)) + _887;
  float _911 = ((_872 + 1.0f) - (floor(_888 * 0.0034602077212184668f) * 289.0f)) + _888;
  float _920 = ((_902 * 34.0f) + 1.0f) * _902;
  float _921 = ((_905 * 34.0f) + 1.0f) * _905;
  float _922 = ((_908 * 34.0f) + 1.0f) * _908;
  float _923 = ((_911 * 34.0f) + 1.0f) * _911;
  float _937 = (_920 - (floor(_920 * 0.0034602077212184668f) * 289.0f)) + _871;
  float _940 = ((_871 + _841) - (floor(_921 * 0.0034602077212184668f) * 289.0f)) + _921;
  float _943 = ((_871 + _844) - (floor(_922 * 0.0034602077212184668f) * 289.0f)) + _922;
  float _946 = ((_871 + 1.0f) - (floor(_923 * 0.0034602077212184668f) * 289.0f)) + _923;
  float _955 = ((_937 * 34.0f) + 1.0f) * _937;
  float _956 = ((_940 * 34.0f) + 1.0f) * _940;
  float _957 = ((_943 * 34.0f) + 1.0f) * _943;
  float _958 = ((_946 * 34.0f) + 1.0f) * _946;
  float _971 = _955 - (floor(_955 * 0.0034602077212184668f) * 289.0f);
  float _972 = _956 - (floor(_956 * 0.0034602077212184668f) * 289.0f);
  float _973 = _957 - (floor(_957 * 0.0034602077212184668f) * 289.0f);
  float _974 = _958 - (floor(_958 * 0.0034602077212184668f) * 289.0f);
  float _987 = _971 - (floor(_971 * 0.020408164709806442f) * 49.0f);
  float _988 = _972 - (floor(_972 * 0.020408164709806442f) * 49.0f);
  float _989 = _973 - (floor(_973 * 0.020408164709806442f) * 49.0f);
  float _990 = _974 - (floor(_974 * 0.020408164709806442f) * 49.0f);
  float _995 = floor(_987 * 0.1428571492433548f);
  float _996 = floor(_988 * 0.1428571492433548f);
  float _997 = floor(_989 * 0.1428571492433548f);
  float _998 = floor(_990 * 0.1428571492433548f);
  float _1015 = (_995 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1016 = (_996 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1017 = (_997 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1018 = (_998 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1023 = (floor(_987 - (_995 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1024 = (floor(_988 - (_996 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1025 = (floor(_989 - (_997 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1026 = (floor(_990 - (_998 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1039 = (1.0f - abs(_1015)) - abs(_1023);
  float _1040 = (1.0f - abs(_1016)) - abs(_1024);
  float _1041 = (1.0f - abs(_1017)) - abs(_1025);
  float _1042 = (1.0f - abs(_1018)) - abs(_1026);
  float _1071 = select((_1039 > 0.0f), -0.0f, -1.0f);
  float _1072 = select((_1040 > 0.0f), -0.0f, -1.0f);
  float _1073 = select((_1041 > 0.0f), -0.0f, -1.0f);
  float _1074 = select((_1042 > 0.0f), -0.0f, -1.0f);
  float _1079 = (((floor(_1015) * 2.0f) + 1.0f) * _1071) + _1015;
  float _1080 = (((floor(_1023) * 2.0f) + 1.0f) * _1071) + _1023;
  float _1081 = (((floor(_1016) * 2.0f) + 1.0f) * _1072) + _1016;
  float _1082 = (((floor(_1024) * 2.0f) + 1.0f) * _1072) + _1024;
  float _1087 = (((floor(_1017) * 2.0f) + 1.0f) * _1073) + _1017;
  float _1088 = (((floor(_1025) * 2.0f) + 1.0f) * _1073) + _1025;
  float _1089 = (((floor(_1018) * 2.0f) + 1.0f) * _1074) + _1018;
  float _1090 = (((floor(_1026) * 2.0f) + 1.0f) * _1074) + _1026;
  float _1099 = 1.7928400039672852f - (dot(float3(_1079, _1080, _1039), float3(_1079, _1080, _1039)) * 0.8537350296974182f);
  float _1100 = 1.7928400039672852f - (dot(float3(_1081, _1082, _1040), float3(_1081, _1082, _1040)) * 0.8537350296974182f);
  float _1101 = 1.7928400039672852f - (dot(float3(_1087, _1088, _1041), float3(_1087, _1088, _1041)) * 0.8537350296974182f);
  float _1102 = 1.7928400039672852f - (dot(float3(_1089, _1090, _1042), float3(_1089, _1090, _1042)) * 0.8537350296974182f);
  float _1123 = max((0.6000000238418579f - dot(float3(_829, _830, _831), float3(_829, _830, _831))), 0.0f);
  float _1124 = max((0.6000000238418579f - dot(float3(_850, _851, _852), float3(_850, _851, _852))), 0.0f);
  float _1125 = max((0.6000000238418579f - dot(float3(_856, _857, _858), float3(_856, _857, _858))), 0.0f);
  float _1126 = max((0.6000000238418579f - dot(float3(_859, _860, _861), float3(_859, _860, _861))), 0.0f);
  float _1127 = _1123 * _1123;
  float _1128 = _1124 * _1124;
  float _1129 = _1125 * _1125;
  float _1130 = _1126 * _1126;
  float _1145 = saturate((((sin(_808 - _809) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1127 * _1127), (_1128 * _1128), (_1129 * _1129), (_1130 * _1130)), float4(dot(float3((_1099 * _1079), (_1099 * _1080), (_1099 * _1039)), float3(_829, _830, _831)), dot(float3((_1100 * _1081), (_1100 * _1082), (_1100 * _1040)), float3(_850, _851, _852)), dot(float3((_1101 * _1087), (_1101 * _1088), (_1101 * _1041)), float3(_856, _857, _858)), dot(float3((_1102 * _1089), (_1102 * _1090), (_1102 * _1042)), float3(_859, _860, _861)))) * 21.0f)) * 4.0f);
  float _1149 = (_1145 * _1145) * (3.0f - (_1145 * 2.0f));
  float _1151 = (_1149 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1156 = (_770 * 0.5f) - _814;
  float _1157 = (_785 * 0.004444444552063942f) - _814;
  float _1158 = dot(float3(_1156, _1157, _817), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1162 = floor(_1158 + _1156);
  float _1163 = floor(_1158 + _1157);
  float _1164 = floor(_1158 + _817);
  float _1168 = dot(float3(_1162, _1163, _1164), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1169 = _1168 + (_1156 - _1162);
  float _1170 = _1168 + (_1157 - _1163);
  float _1171 = (_817 - _1164) + _1168;
  float _1175 = select((_1169 < _1170), 0.0f, 1.0f);
  float _1176 = select((_1170 < _1171), 0.0f, 1.0f);
  float _1177 = select((_1171 < _1169), 0.0f, 1.0f);
  float _1178 = 1.0f - _1175;
  float _1179 = 1.0f - _1176;
  float _1180 = 1.0f - _1177;
  float _1181 = min(_1175, _1180);
  float _1182 = min(_1176, _1178);
  float _1183 = min(_1177, _1179);
  float _1184 = max(_1175, _1180);
  float _1185 = max(_1176, _1178);
  float _1186 = max(_1177, _1179);
  float _1190 = (_1169 - _1181) + 0.1666666716337204f;
  float _1191 = (_1170 - _1182) + 0.1666666716337204f;
  float _1192 = (_1171 - _1183) + 0.1666666716337204f;
  float _1196 = (_1169 - _1184) + 0.3333333432674408f;
  float _1197 = (_1170 - _1185) + 0.3333333432674408f;
  float _1198 = (_1171 - _1186) + 0.3333333432674408f;
  float _1199 = _1169 + -0.5f;
  float _1200 = _1170 + -0.5f;
  float _1201 = _1171 + -0.5f;
  float _1211 = _1162 - (floor(_1162 * 0.0034602077212184668f) * 289.0f);
  float _1212 = _1163 - (floor(_1163 * 0.0034602077212184668f) * 289.0f);
  float _1213 = _1164 - (floor(_1164 * 0.0034602077212184668f) * 289.0f);
  float _1214 = _1213 + _1183;
  float _1215 = _1213 + _1186;
  float _1216 = _1213 + 1.0f;
  float _1225 = ((_1213 * 34.0f) + 1.0f) * _1213;
  float _1226 = ((_1214 * 34.0f) + 1.0f) * _1214;
  float _1227 = ((_1215 * 34.0f) + 1.0f) * _1215;
  float _1228 = ((_1216 * 34.0f) + 1.0f) * _1216;
  float _1242 = (_1225 - (floor(_1225 * 0.0034602077212184668f) * 289.0f)) + _1212;
  float _1245 = ((_1212 + _1182) - (floor(_1226 * 0.0034602077212184668f) * 289.0f)) + _1226;
  float _1248 = ((_1212 + _1185) - (floor(_1227 * 0.0034602077212184668f) * 289.0f)) + _1227;
  float _1251 = ((_1212 + 1.0f) - (floor(_1228 * 0.0034602077212184668f) * 289.0f)) + _1228;
  float _1260 = ((_1242 * 34.0f) + 1.0f) * _1242;
  float _1261 = ((_1245 * 34.0f) + 1.0f) * _1245;
  float _1262 = ((_1248 * 34.0f) + 1.0f) * _1248;
  float _1263 = ((_1251 * 34.0f) + 1.0f) * _1251;
  float _1277 = (_1260 - (floor(_1260 * 0.0034602077212184668f) * 289.0f)) + _1211;
  float _1280 = ((_1211 + _1181) - (floor(_1261 * 0.0034602077212184668f) * 289.0f)) + _1261;
  float _1283 = ((_1211 + _1184) - (floor(_1262 * 0.0034602077212184668f) * 289.0f)) + _1262;
  float _1286 = ((_1211 + 1.0f) - (floor(_1263 * 0.0034602077212184668f) * 289.0f)) + _1263;
  float _1295 = ((_1277 * 34.0f) + 1.0f) * _1277;
  float _1296 = ((_1280 * 34.0f) + 1.0f) * _1280;
  float _1297 = ((_1283 * 34.0f) + 1.0f) * _1283;
  float _1298 = ((_1286 * 34.0f) + 1.0f) * _1286;
  float _1311 = _1295 - (floor(_1295 * 0.0034602077212184668f) * 289.0f);
  float _1312 = _1296 - (floor(_1296 * 0.0034602077212184668f) * 289.0f);
  float _1313 = _1297 - (floor(_1297 * 0.0034602077212184668f) * 289.0f);
  float _1314 = _1298 - (floor(_1298 * 0.0034602077212184668f) * 289.0f);
  float _1327 = _1311 - (floor(_1311 * 0.020408164709806442f) * 49.0f);
  float _1328 = _1312 - (floor(_1312 * 0.020408164709806442f) * 49.0f);
  float _1329 = _1313 - (floor(_1313 * 0.020408164709806442f) * 49.0f);
  float _1330 = _1314 - (floor(_1314 * 0.020408164709806442f) * 49.0f);
  float _1335 = floor(_1327 * 0.1428571492433548f);
  float _1336 = floor(_1328 * 0.1428571492433548f);
  float _1337 = floor(_1329 * 0.1428571492433548f);
  float _1338 = floor(_1330 * 0.1428571492433548f);
  float _1355 = (_1335 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1356 = (_1336 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1357 = (_1337 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1358 = (_1338 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1363 = (floor(_1327 - (_1335 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1364 = (floor(_1328 - (_1336 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1365 = (floor(_1329 - (_1337 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1366 = (floor(_1330 - (_1338 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1379 = (1.0f - abs(_1355)) - abs(_1363);
  float _1380 = (1.0f - abs(_1356)) - abs(_1364);
  float _1381 = (1.0f - abs(_1357)) - abs(_1365);
  float _1382 = (1.0f - abs(_1358)) - abs(_1366);
  float _1411 = select((_1379 > 0.0f), -0.0f, -1.0f);
  float _1412 = select((_1380 > 0.0f), -0.0f, -1.0f);
  float _1413 = select((_1381 > 0.0f), -0.0f, -1.0f);
  float _1414 = select((_1382 > 0.0f), -0.0f, -1.0f);
  float _1419 = (((floor(_1355) * 2.0f) + 1.0f) * _1411) + _1355;
  float _1420 = (((floor(_1363) * 2.0f) + 1.0f) * _1411) + _1363;
  float _1421 = (((floor(_1356) * 2.0f) + 1.0f) * _1412) + _1356;
  float _1422 = (((floor(_1364) * 2.0f) + 1.0f) * _1412) + _1364;
  float _1427 = (((floor(_1357) * 2.0f) + 1.0f) * _1413) + _1357;
  float _1428 = (((floor(_1365) * 2.0f) + 1.0f) * _1413) + _1365;
  float _1429 = (((floor(_1358) * 2.0f) + 1.0f) * _1414) + _1358;
  float _1430 = (((floor(_1366) * 2.0f) + 1.0f) * _1414) + _1366;
  float _1439 = 1.7928400039672852f - (dot(float3(_1419, _1420, _1379), float3(_1419, _1420, _1379)) * 0.8537350296974182f);
  float _1440 = 1.7928400039672852f - (dot(float3(_1421, _1422, _1380), float3(_1421, _1422, _1380)) * 0.8537350296974182f);
  float _1441 = 1.7928400039672852f - (dot(float3(_1427, _1428, _1381), float3(_1427, _1428, _1381)) * 0.8537350296974182f);
  float _1442 = 1.7928400039672852f - (dot(float3(_1429, _1430, _1382), float3(_1429, _1430, _1382)) * 0.8537350296974182f);
  float _1463 = max((0.6000000238418579f - dot(float3(_1169, _1170, _1171), float3(_1169, _1170, _1171))), 0.0f);
  float _1464 = max((0.6000000238418579f - dot(float3(_1190, _1191, _1192), float3(_1190, _1191, _1192))), 0.0f);
  float _1465 = max((0.6000000238418579f - dot(float3(_1196, _1197, _1198), float3(_1196, _1197, _1198))), 0.0f);
  float _1466 = max((0.6000000238418579f - dot(float3(_1199, _1200, _1201), float3(_1199, _1200, _1201))), 0.0f);
  float _1467 = _1463 * _1463;
  float _1468 = _1464 * _1464;
  float _1469 = _1465 * _1465;
  float _1470 = _1466 * _1466;
  float _1485 = saturate((((sin((_785 * 2.5f) - _809) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1467 * _1467), (_1468 * _1468), (_1469 * _1469), (_1470 * _1470)), float4(dot(float3((_1439 * _1419), (_1439 * _1420), (_1439 * _1379)), float3(_1169, _1170, _1171)), dot(float3((_1440 * _1421), (_1440 * _1422), (_1440 * _1380)), float3(_1190, _1191, _1192)), dot(float3((_1441 * _1427), (_1441 * _1428), (_1441 * _1381)), float3(_1196, _1197, _1198)), dot(float3((_1442 * _1429), (_1442 * _1430), (_1442 * _1382)), float3(_1199, _1200, _1201)))) * 21.0f)) * 4.0f);
  float _1489 = (_1485 * _1485) * (3.0f - (_1485 * 2.0f));
  float _1491 = (_1489 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1498 = frame_consts.time * 0.15000000596046448f;
  float _1499 = (_786 * 0.04444444552063942f) - _1498;
  float _1500 = _813 - _1498;
  float _1501 = frame_consts.time * 0.02500000037252903f;
  float _1502 = dot(float3(_1499, _1500, _1501), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1506 = floor(_1499 + _1502);
  float _1507 = floor(_1500 + _1502);
  float _1508 = floor(_1501 + _1502);
  float _1512 = dot(float3(_1506, _1507, _1508), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1513 = _1512 + (_1499 - _1506);
  float _1514 = _1512 + (_1500 - _1507);
  float _1515 = (_1501 - _1508) + _1512;
  float _1519 = select((_1513 < _1514), 0.0f, 1.0f);
  float _1520 = select((_1514 < _1515), 0.0f, 1.0f);
  float _1521 = select((_1515 < _1513), 0.0f, 1.0f);
  float _1522 = 1.0f - _1519;
  float _1523 = 1.0f - _1520;
  float _1524 = 1.0f - _1521;
  float _1525 = min(_1519, _1524);
  float _1526 = min(_1520, _1522);
  float _1527 = min(_1521, _1523);
  float _1528 = max(_1519, _1524);
  float _1529 = max(_1520, _1522);
  float _1530 = max(_1521, _1523);
  float _1534 = (_1513 - _1525) + 0.1666666716337204f;
  float _1535 = (_1514 - _1526) + 0.1666666716337204f;
  float _1536 = (_1515 - _1527) + 0.1666666716337204f;
  float _1540 = (_1513 - _1528) + 0.3333333432674408f;
  float _1541 = (_1514 - _1529) + 0.3333333432674408f;
  float _1542 = (_1515 - _1530) + 0.3333333432674408f;
  float _1543 = _1513 + -0.5f;
  float _1544 = _1514 + -0.5f;
  float _1545 = _1515 + -0.5f;
  float _1555 = _1506 - (floor(_1506 * 0.0034602077212184668f) * 289.0f);
  float _1556 = _1507 - (floor(_1507 * 0.0034602077212184668f) * 289.0f);
  float _1557 = _1508 - (floor(_1508 * 0.0034602077212184668f) * 289.0f);
  float _1558 = _1557 + _1527;
  float _1559 = _1557 + _1530;
  float _1560 = _1557 + 1.0f;
  float _1569 = ((_1557 * 34.0f) + 1.0f) * _1557;
  float _1570 = ((_1558 * 34.0f) + 1.0f) * _1558;
  float _1571 = ((_1559 * 34.0f) + 1.0f) * _1559;
  float _1572 = ((_1560 * 34.0f) + 1.0f) * _1560;
  float _1586 = (_1569 - (floor(_1569 * 0.0034602077212184668f) * 289.0f)) + _1556;
  float _1589 = ((_1556 + _1526) - (floor(_1570 * 0.0034602077212184668f) * 289.0f)) + _1570;
  float _1592 = ((_1556 + _1529) - (floor(_1571 * 0.0034602077212184668f) * 289.0f)) + _1571;
  float _1595 = ((_1556 + 1.0f) - (floor(_1572 * 0.0034602077212184668f) * 289.0f)) + _1572;
  float _1604 = ((_1586 * 34.0f) + 1.0f) * _1586;
  float _1605 = ((_1589 * 34.0f) + 1.0f) * _1589;
  float _1606 = ((_1592 * 34.0f) + 1.0f) * _1592;
  float _1607 = ((_1595 * 34.0f) + 1.0f) * _1595;
  float _1621 = (_1604 - (floor(_1604 * 0.0034602077212184668f) * 289.0f)) + _1555;
  float _1624 = ((_1555 + _1525) - (floor(_1605 * 0.0034602077212184668f) * 289.0f)) + _1605;
  float _1627 = ((_1555 + _1528) - (floor(_1606 * 0.0034602077212184668f) * 289.0f)) + _1606;
  float _1630 = ((_1555 + 1.0f) - (floor(_1607 * 0.0034602077212184668f) * 289.0f)) + _1607;
  float _1639 = ((_1621 * 34.0f) + 1.0f) * _1621;
  float _1640 = ((_1624 * 34.0f) + 1.0f) * _1624;
  float _1641 = ((_1627 * 34.0f) + 1.0f) * _1627;
  float _1642 = ((_1630 * 34.0f) + 1.0f) * _1630;
  float _1655 = _1639 - (floor(_1639 * 0.0034602077212184668f) * 289.0f);
  float _1656 = _1640 - (floor(_1640 * 0.0034602077212184668f) * 289.0f);
  float _1657 = _1641 - (floor(_1641 * 0.0034602077212184668f) * 289.0f);
  float _1658 = _1642 - (floor(_1642 * 0.0034602077212184668f) * 289.0f);
  float _1671 = _1655 - (floor(_1655 * 0.020408164709806442f) * 49.0f);
  float _1672 = _1656 - (floor(_1656 * 0.020408164709806442f) * 49.0f);
  float _1673 = _1657 - (floor(_1657 * 0.020408164709806442f) * 49.0f);
  float _1674 = _1658 - (floor(_1658 * 0.020408164709806442f) * 49.0f);
  float _1679 = floor(_1671 * 0.1428571492433548f);
  float _1680 = floor(_1672 * 0.1428571492433548f);
  float _1681 = floor(_1673 * 0.1428571492433548f);
  float _1682 = floor(_1674 * 0.1428571492433548f);
  float _1699 = (_1679 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1700 = (_1680 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1701 = (_1681 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1702 = (_1682 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1707 = (floor(_1671 - (_1679 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1708 = (floor(_1672 - (_1680 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1709 = (floor(_1673 - (_1681 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1710 = (floor(_1674 - (_1682 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1723 = (1.0f - abs(_1699)) - abs(_1707);
  float _1724 = (1.0f - abs(_1700)) - abs(_1708);
  float _1725 = (1.0f - abs(_1701)) - abs(_1709);
  float _1726 = (1.0f - abs(_1702)) - abs(_1710);
  float _1755 = select((_1723 > 0.0f), -0.0f, -1.0f);
  float _1756 = select((_1724 > 0.0f), -0.0f, -1.0f);
  float _1757 = select((_1725 > 0.0f), -0.0f, -1.0f);
  float _1758 = select((_1726 > 0.0f), -0.0f, -1.0f);
  float _1763 = (((floor(_1699) * 2.0f) + 1.0f) * _1755) + _1699;
  float _1764 = (((floor(_1707) * 2.0f) + 1.0f) * _1755) + _1707;
  float _1765 = (((floor(_1700) * 2.0f) + 1.0f) * _1756) + _1700;
  float _1766 = (((floor(_1708) * 2.0f) + 1.0f) * _1756) + _1708;
  float _1771 = (((floor(_1701) * 2.0f) + 1.0f) * _1757) + _1701;
  float _1772 = (((floor(_1709) * 2.0f) + 1.0f) * _1757) + _1709;
  float _1773 = (((floor(_1702) * 2.0f) + 1.0f) * _1758) + _1702;
  float _1774 = (((floor(_1710) * 2.0f) + 1.0f) * _1758) + _1710;
  float _1783 = 1.7928400039672852f - (dot(float3(_1763, _1764, _1723), float3(_1763, _1764, _1723)) * 0.8537350296974182f);
  float _1784 = 1.7928400039672852f - (dot(float3(_1765, _1766, _1724), float3(_1765, _1766, _1724)) * 0.8537350296974182f);
  float _1785 = 1.7928400039672852f - (dot(float3(_1771, _1772, _1725), float3(_1771, _1772, _1725)) * 0.8537350296974182f);
  float _1786 = 1.7928400039672852f - (dot(float3(_1773, _1774, _1726), float3(_1773, _1774, _1726)) * 0.8537350296974182f);
  float _1807 = max((0.6000000238418579f - dot(float3(_1513, _1514, _1515), float3(_1513, _1514, _1515))), 0.0f);
  float _1808 = max((0.6000000238418579f - dot(float3(_1534, _1535, _1536), float3(_1534, _1535, _1536))), 0.0f);
  float _1809 = max((0.6000000238418579f - dot(float3(_1540, _1541, _1542), float3(_1540, _1541, _1542))), 0.0f);
  float _1810 = max((0.6000000238418579f - dot(float3(_1543, _1544, _1545), float3(_1543, _1544, _1545))), 0.0f);
  float _1811 = _1807 * _1807;
  float _1812 = _1808 * _1808;
  float _1813 = _1809 * _1809;
  float _1814 = _1810 * _1810;
  float _1829 = saturate((((sin(_808 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1811 * _1811), (_1812 * _1812), (_1813 * _1813), (_1814 * _1814)), float4(dot(float3((_1783 * _1763), (_1783 * _1764), (_1783 * _1723)), float3(_1513, _1514, _1515)), dot(float3((_1784 * _1765), (_1784 * _1766), (_1784 * _1724)), float3(_1534, _1535, _1536)), dot(float3((_1785 * _1771), (_1785 * _1772), (_1785 * _1725)), float3(_1540, _1541, _1542)), dot(float3((_1786 * _1773), (_1786 * _1774), (_1786 * _1726)), float3(_1543, _1544, _1545)))) * 21.0f)) * 4.0f);
  float _1833 = (_1829 * _1829) * (3.0f - (_1829 * 2.0f));
  float _1835 = (_1833 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1857 = saturate(_1151);
  float _1858 = saturate(_1491);
  float _1880 = (((_695 * 1.2000000476837158f) * _700) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_792 * _792) + (_791 * _791)) / ((_1489 * 0.039000000804662704f) + 0.08100000768899918f))) * _1491) + (saturate(11.0f - (sqrt((_787 * _787) + _797) / ((_1149 * 0.039000000804662704f) + 0.08100000768899918f))) * _1151)) + (saturate(11.0f - (sqrt((_804 * _804) + _797) / ((_1833 * 0.039000000804662704f) + 0.08100000768899918f))) * _1835)) + (((((saturate(1.0f - (abs(_788) * 0.8333333134651184f)) * _1857) + (saturate(1.0f - (abs(dot(float2(_791, _792), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1858)) * saturate(_1835)) + ((_1857 * saturate(1.0f - (abs(dot(float2(_787, _788), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1858)) * 0.5f));
  float _1887 = (_1880 * ((_747 * _747) - _709)) + _709;
  float _1888 = (_1880 * ((_748 * _748) - _710)) + _710;
  float _1889 = (_1880 * ((_749 * _749) - _711)) + _711;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1898 = ((_1887 * 0.3930000066757202f) + (_1888 * 0.7689999938011169f)) + (_1889 * 0.1889999955892563f);
    float _1903 = ((_1887 * 0.3490000069141388f) + (_1888 * 0.6859999895095825f)) + (_1889 * 0.1679999977350235f);
    float _1908 = ((_1887 * 0.2720000147819519f) + (_1888 * 0.5339999794960022f)) + (_1889 * 0.13099999725818634f);
    float _1909 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1914 = ((_1887 * 0.2125999927520752f) + (_1888 * 0.7152000069618225f)) + (_1889 * 0.0722000002861023f);
    _1934 = ((((_1898 - _1887) + ((_1914 - _1898) * 0.6499999761581421f)) * _1909) + _1887);
    _1935 = ((((_1903 - _1888) + ((_1914 - _1903) * 0.6499999761581421f)) * _1909) + _1888);
    _1936 = ((((_1908 - _1889) + ((_1914 - _1908) * 0.6499999761581421f)) * _1909) + _1889);
  } else {
    _1934 = _1887;
    _1935 = _1888;
    _1936 = _1889;
  }
  if (!(frame_consts.invert == 0)) {
    _1945 = (1.0f - _1934);
    _1946 = (1.0f - _1935);
    _1947 = (1.0f - _1936);
  } else {
    _1945 = _1934;
    _1946 = _1935;
    _1947 = _1936;
  }
  SV_Target.x = _1945;
  SV_Target.y = _1946;
  SV_Target.z = _1947;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
