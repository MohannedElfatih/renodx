#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float2> distortion : register(t4);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float2 _17 = distortion.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _20 = _16 / _15;
  float _25 = saturate((_17.x * _20) + O_Uv.x);
  float _26 = saturate((_17.y * _20) + O_Uv.y);
  float _58;
  float _59;
  float _60;
  float _61;
  float _224;
  float _235;
  float _246;
  float _269;
  float _270;
  float _271;
  float _371;
  float _372;
  float _373;
  float _414;
  float _415;
  float _416;
  float _565;
  float _566;
  float _567;
  float _575;
  float _1843;
  float _1844;
  float _1845;
  float _1854;
  float _1855;
  float _1856;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _33 = abs(_25 + -0.5f);
    float _34 = abs(_26 + -0.5f);
    float _38 = (rsqrt(dot(float2(_33, _34), float2(_33, _34))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _39 = _38 * _33;
    float _40 = _38 * _34;
    float4 _43 = tex.SampleLevel(sampler_nearest, float2((_39 + _25), (_40 + _26)), 0.0f);
    float4 _45 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    float4 _49 = tex.SampleLevel(sampler_nearest, float2((_25 - _39), (_26 - _40)), 0.0f);
    _58 = _43.x;
    _59 = _45.y;
    _60 = _49.z;
    _61 = 0.5f;
  } else {
    float4 _52 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    _58 = _52.x;
    _59 = _52.y;
    _60 = _52.z;
    _61 = _52.w;
  }
  float3 untonemapped = float3(_58, _59, _60);

  float3 _62 = bloom_tex.SampleLevel(sampler_bilinear, float2(_25, _26), 0.0f);
  float _77 = max((((1.0f - (_58 * 0.2125999927520752f)) - (_59 * 0.7152000069618225f)) - (_60 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _81 = (_58 / _77) + (frame_consts.params.bloom.intensity * _62.x);
  float _82 = (_59 / _77) + (frame_consts.params.bloom.intensity * _62.y);
  float _83 = (_60 / _77) + (frame_consts.params.bloom.intensity * _62.z);
  float _89 = (((_81 * 0.2125999927520752f) + 1.0f) + (_82 * 0.7152000069618225f)) + (_83 * 0.0722000002861023f);
  float _93 = saturate(_81 / _89);
  float _94 = saturate(_82 / _89);
  float _95 = saturate(_83 / _89);
  if (!(frame_consts.glitch == 0)) {
    float _103 = float((int)(int((_15 / _16) * 1080.0f)));
    float _104 = _103 * _25;
    float _105 = _26 * 1080.0f;
    float _106 = _103 * 0.5f;
    float _109 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _116 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _122 = ((_116 * 3.0f) * exp2(1.4426950216293335f - (_116 * 4.328084945678711f))) + ((_109 * 5.0f) * exp2(1.4426950216293335f - (_109 * 7.213475227355957f)));
    float _123 = _122 * 15.0f;
    float _124 = _123 + 30.0f;
    float _126 = (_122 * 20.0f) + 80.0f;
    float _130 = abs(_103 * (_25 + -0.5f));
    float _131 = abs(_105 + -540.0f);
    float _134 = ((_130 - _106) + _124) + _126;
    float _137 = ((_131 + -510.0f) + _123) + _126;
    float _140 = max(_134, 0.0f);
    float _141 = max(_137, 0.0f);
    float _155 = _130 - (_106 - _124);
    float _156 = _131 - (510.0f - _123);
    float _157 = max(_155, 0.0f);
    float _158 = max(_156, 0.0f);
    float _174 = max(max(0.0f, (1.0f - saturate(abs((min(max(_134, _137), 0.0f) - _126) + sqrt((_141 * _141) + (_140 * _140))) + -0.5f))), ((1.0f - saturate(abs(min(max(_155, _156), 0.0f) + sqrt((_158 * _158) + (_157 * _157))) + -0.5f)) * (1.0f - saturate(_122 * 1.6666666269302368f))));
    float _185 = frac((_104 + _105) * 0.0012499999720603228f) + -0.5f;
    float _186 = frac((_105 - _104) * 0.0012499999720603228f) + -0.5f;
    float _198 = saturate((sin((((_104 * 0.0003124999930150807f) + (_26 * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _202 = (_198 * _198) * (3.0f - (_198 * 2.0f));
    float _204 = saturate(sqrt((_186 * _186) + (_185 * _185)) * 2.0f);
    float _209 = _202 * 0.20000000298023224f;
    float _211 = ((_204 * 0.12156862020492554f) + 0.7450979948043823f) + _209;
    float _212 = ((_204 * 0.3333333134651184f) + 0.34117645025253296f) + _209;
    do {
      if (!(!((_209 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _224 = ((_202 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _224 = exp2(log2((_202 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_211 <= 0.040449999272823334f))) {
          _235 = (_211 * 0.07739938050508499f);
        } else {
          _235 = exp2(log2((_211 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_212 <= 0.040449999272823334f))) {
            _246 = (_212 * 0.07739938050508499f);
          } else {
            _246 = exp2(log2((_212 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _252 = (((_224 * 0.2125999927520752f) + 1.0f) + (_235 * 0.7152000069618225f)) + (_246 * 0.0722000002861023f);
          _269 = (((saturate(_224 / _252) - _93) * _174) + _93);
          _270 = (((saturate(_235 / _252) - _94) * _174) + _94);
          _271 = (((saturate(_246 / _252) - _95) * _174) + _95);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _269 = _93;
    _270 = _94;
    _271 = _95;
  }
  float _277 = depth_tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
  float _281 = 10000.0f / ((_277.x * 19999.5f) + 0.5f);
  float _286 = (_281 * ((_25 * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _288 = (_281 * (((1.0f - _26) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _289 = -0.0f - _281;
  float _313 = mad((frame_consts.paper_xf[2].z), _289, mad((frame_consts.paper_xf[1].z), _288, (_286 * (frame_consts.paper_xf[0].z))));
  float _325 = exp2(round(log2(max(5.0f, (-0.0f - (_313 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _327 = min((1.0f / _325), 0.20000000298023224f);
  float _328 = frame_consts.game_plane_blend.x - _325;
  float _335 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_328 * (mad((frame_consts.paper_xf[2].x), _289, mad((frame_consts.paper_xf[1].x), _288, (_286 * (frame_consts.paper_xf[0].x)))) / _313)) + (frame_consts.paper_xf[3].x)) * _327), (((_328 * (mad((frame_consts.paper_xf[2].y), _289, mad((frame_consts.paper_xf[1].y), _288, (_286 * (frame_consts.paper_xf[0].y)))) / _313)) + (frame_consts.paper_xf[3].y)) * _327)), 0.0f);
  float _340 = (1.0f - _335.x) * frame_consts.paper_mult;
  float _344 = _269 - (_340 * _269);
  float _345 = _270 - (_340 * _270);
  float _346 = _271 - (_340 * _271);
  if (!(frame_consts.death_screen == 0)) {
    float _369 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _61), _61);
    _371 = _369;
    _372 = _369;
    _373 = _369;
  } else {
    _371 = (lerp(_344, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _372 = (lerp(_345, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _373 = (lerp(_346, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _381 = _25 * _15;
    float _382 = _26 * _16;
    float _383 = _381 * 0.06666667014360428f;
    float _384 = _382 * 0.038490019738674164f;
    float _386 = ceil(_383 - _384);
    float _388 = floor(_382 * 0.07698003947734833f);
    float _389 = _388 + 1.0f;
    float _392 = ceil((-0.0f - _383) - _384);
    float _394 = (_386 - _392) * 7.5f;
    float _395 = _386 * 0.28867512941360474f;
    float _396 = _389 * 0.5773502588272095f;
    float _397 = _396 - _395;
    float _398 = _392 * 0.28867512941360474f;
    float _401 = _394 / _15;
    float _402 = ((_397 - _398) * 15.0f) / _16;
    do {
      if (((_389 + _386) + _392) == 2.0f) {
        _414 = (_386 + 1.0f);
        _415 = (_388 + 2.0f);
        _416 = (_392 + 1.0f);
      } else {
        _414 = (_386 + -1.0f);
        _415 = _388;
        _416 = (_392 + -1.0f);
      }
      float _417 = _414 - _392;
      float _420 = _396 - (_414 * 0.28867512941360474f);
      float _421 = _420 - _398;
      float _424 = (_415 * 0.5773502588272095f) - _395;
      float _425 = _424 - _398;
      float _427 = _386 - _416;
      float _430 = _397 - (_416 * 0.28867512941360474f);
      float _434 = (_420 - _424) * 15.0f;
      float _435 = (_414 - _386) * -7.5f;
      float _437 = rsqrt(dot(float2(_434, _435), float2(_434, _435)));
      float _446 = (_425 - _430) * 15.0f;
      float _447 = (_416 - _392) * -7.5f;
      float _449 = rsqrt(dot(float2(_446, _447), float2(_446, _447)));
      float _458 = (_430 - _421) * 15.0f;
      float _459 = (_427 - _417) * -7.5f;
      float _461 = rsqrt(dot(float2(_458, _459), float2(_458, _459)));
      float _474 = _401 + -0.5f;
      float _475 = _402 + -0.5f;
      float _522 = _25 + -0.5f;
      float _523 = _26 + -0.5f;
      float _530 = ((frame_consts.time - sqrt((_523 * _523) + (_522 * _522))) + (frac(sin(dot(float2((_401 * 5.0f), (_402 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _534 = frac(abs(_530));
      float _538 = max((select((_530 >= (-0.0f - _530)), _534, (-0.0f - _534)) * 18.0f), 0.0f);
      float _554 = min(max((1.0f - (((((_538 * 1.600000023841858f) * exp2(1.4426950216293335f - (_538 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_475 * _475) + (_474 * _474)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_401 * 3.0f), (_402 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_401, _402), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_401 * 2.0f), (_402 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _560 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_417 * 7.5f) - _381), ((_421 * 15.0f) - _382)), float2((_434 * _437), (_437 * _435))))), abs(dot(float2((_394 - _381), ((_425 * 15.0f) - _382)), float2((_449 * _446), (_449 * _447))))), abs(dot(float2(((_427 * 7.5f) - _381), ((_430 * 15.0f) - _382)), float2((_461 * _458), (_461 * _459))))) * 0.2309400886297226f)) - _554) / ((_554 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _565 = (_560 * _371);
      _566 = (_560 * _372);
      _567 = (_560 * _373);
    } while (false);
  } else {
    _565 = _371;
    _566 = _372;
    _567 = _373;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _575 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _575 = 0.0f;
  }
  float _582 = frame_consts.params.vignette.intensity + _575;
  float _585 = _15 / _16;
  float _597 = exp2(log2(saturate((_582 * abs(_25 + -0.5f)) * (((_585 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _598 = exp2(log2(saturate(_582 * abs(_26 + -0.5f))) * 5.0f);
  float _604 = exp2(log2(saturate(1.0f - dot(float2(_597, _598), float2(_597, _598)))) * 6.0f);
  float _609 = 1.0f - _604;
  float _611 = 1.0f - (_609 * 0.8500000238418579f);
  float _618 = (_611 * (_565 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _619 = (_611 * (_566 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _620 = (_611 * (_567 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _624 = _25 * _15;
  float _625 = _26 * _16;
  float _626 = _625 + _624;
  float _632 = frac(_626 * 0.0033333334140479565f) + -0.5f;
  float _633 = frac((_625 - _624) * 0.0033333334140479565f) + -0.5f;
  float _639 = saturate(sqrt((_633 * _633) + (_632 * _632)) * 2.0f);
  float _650 = saturate((sin((_626 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _655 = ((_650 * _650) * 0.2199999988079071f) * (3.0f - (_650 * 2.0f));
  float _656 = _655 + 0.9777389168739319f;
  float _657 = ((_639 * 0.13274884223937988f) + 0.7175776362419128f) + _655;
  float _658 = ((_639 * 0.3335757553577423f) + 0.30871906876564026f) + _655;
  float _663 = (_25 * 1080.0f) * _585;
  float _664 = _26 * 1080.0f;
  float _665 = _663 * 0.04444444552063942f;
  float _666 = _26 * 27.712812423706055f;
  float _668 = ceil(_665 - _666);
  float _671 = floor(_26 * 55.42562484741211f) + 1.0f;
  float _674 = ceil((-0.0f - _666) - _665);
  float _676 = (_671 + _668) + _674;
  float _678 = (_676 * 22.5f) + -33.75f;
  float _679 = _668 - _674;
  float _681 = _679 * 11.25f;
  float _687 = (((_671 * 0.5773502588272095f) - (_668 * 0.28867512941360474f)) - (_674 * 0.28867512941360474f)) * 22.5f;
  float _690 = _678 + _681;
  float _691 = _687 + (19.485570907592773f - (_676 * 12.990381240844727f));
  float _694 = ((_676 * 25.980762481689453f) + -38.97114181518555f) + _687;
  float _695 = _681 - _678;
  float _696 = _690 - _663;
  float _697 = _691 - _664;
  float _700 = _681 - _663;
  float _701 = _694 - _664;
  float _706 = _697 * _697;
  float _713 = _695 - _663;
  float _717 = _691 * 2.5f;
  float _718 = frame_consts.time * 1.5f;
  float _722 = _691 * 0.004444444552063942f;
  float _723 = frame_consts.time * 0.15000000596046448f;
  float _724 = (_690 * 0.04444444552063942f) - _723;
  float _725 = _722 - _723;
  float _726 = frame_consts.time * 0.02500000037252903f;
  float _727 = dot(float3(_724, _725, _726), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _731 = floor(_727 + _724);
  float _732 = floor(_727 + _725);
  float _733 = floor(_727 + _726);
  float _737 = dot(float3(_731, _732, _733), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _738 = _737 + (_724 - _731);
  float _739 = _737 + (_725 - _732);
  float _740 = (_726 - _733) + _737;
  float _744 = select((_738 < _739), 0.0f, 1.0f);
  float _745 = select((_739 < _740), 0.0f, 1.0f);
  float _746 = select((_740 < _738), 0.0f, 1.0f);
  float _747 = 1.0f - _744;
  float _748 = 1.0f - _745;
  float _749 = 1.0f - _746;
  float _750 = min(_744, _749);
  float _751 = min(_745, _747);
  float _752 = min(_746, _748);
  float _753 = max(_744, _749);
  float _754 = max(_745, _747);
  float _755 = max(_746, _748);
  float _759 = (_738 - _750) + 0.1666666716337204f;
  float _760 = (_739 - _751) + 0.1666666716337204f;
  float _761 = (_740 - _752) + 0.1666666716337204f;
  float _765 = (_738 - _753) + 0.3333333432674408f;
  float _766 = (_739 - _754) + 0.3333333432674408f;
  float _767 = (_740 - _755) + 0.3333333432674408f;
  float _768 = _738 + -0.5f;
  float _769 = _739 + -0.5f;
  float _770 = _740 + -0.5f;
  float _780 = _731 - (floor(_731 * 0.0034602077212184668f) * 289.0f);
  float _781 = _732 - (floor(_732 * 0.0034602077212184668f) * 289.0f);
  float _782 = _733 - (floor(_733 * 0.0034602077212184668f) * 289.0f);
  float _783 = _782 + _752;
  float _784 = _782 + _755;
  float _785 = _782 + 1.0f;
  float _794 = ((_782 * 34.0f) + 1.0f) * _782;
  float _795 = ((_783 * 34.0f) + 1.0f) * _783;
  float _796 = ((_784 * 34.0f) + 1.0f) * _784;
  float _797 = ((_785 * 34.0f) + 1.0f) * _785;
  float _811 = (_794 - (floor(_794 * 0.0034602077212184668f) * 289.0f)) + _781;
  float _814 = ((_781 + _751) - (floor(_795 * 0.0034602077212184668f) * 289.0f)) + _795;
  float _817 = ((_781 + _754) - (floor(_796 * 0.0034602077212184668f) * 289.0f)) + _796;
  float _820 = ((_781 + 1.0f) - (floor(_797 * 0.0034602077212184668f) * 289.0f)) + _797;
  float _829 = ((_811 * 34.0f) + 1.0f) * _811;
  float _830 = ((_814 * 34.0f) + 1.0f) * _814;
  float _831 = ((_817 * 34.0f) + 1.0f) * _817;
  float _832 = ((_820 * 34.0f) + 1.0f) * _820;
  float _846 = (_829 - (floor(_829 * 0.0034602077212184668f) * 289.0f)) + _780;
  float _849 = ((_780 + _750) - (floor(_830 * 0.0034602077212184668f) * 289.0f)) + _830;
  float _852 = ((_780 + _753) - (floor(_831 * 0.0034602077212184668f) * 289.0f)) + _831;
  float _855 = ((_780 + 1.0f) - (floor(_832 * 0.0034602077212184668f) * 289.0f)) + _832;
  float _864 = ((_846 * 34.0f) + 1.0f) * _846;
  float _865 = ((_849 * 34.0f) + 1.0f) * _849;
  float _866 = ((_852 * 34.0f) + 1.0f) * _852;
  float _867 = ((_855 * 34.0f) + 1.0f) * _855;
  float _880 = _864 - (floor(_864 * 0.0034602077212184668f) * 289.0f);
  float _881 = _865 - (floor(_865 * 0.0034602077212184668f) * 289.0f);
  float _882 = _866 - (floor(_866 * 0.0034602077212184668f) * 289.0f);
  float _883 = _867 - (floor(_867 * 0.0034602077212184668f) * 289.0f);
  float _896 = _880 - (floor(_880 * 0.020408164709806442f) * 49.0f);
  float _897 = _881 - (floor(_881 * 0.020408164709806442f) * 49.0f);
  float _898 = _882 - (floor(_882 * 0.020408164709806442f) * 49.0f);
  float _899 = _883 - (floor(_883 * 0.020408164709806442f) * 49.0f);
  float _904 = floor(_896 * 0.1428571492433548f);
  float _905 = floor(_897 * 0.1428571492433548f);
  float _906 = floor(_898 * 0.1428571492433548f);
  float _907 = floor(_899 * 0.1428571492433548f);
  float _924 = (_904 * 0.2857142984867096f) + -0.9285714030265808f;
  float _925 = (_905 * 0.2857142984867096f) + -0.9285714030265808f;
  float _926 = (_906 * 0.2857142984867096f) + -0.9285714030265808f;
  float _927 = (_907 * 0.2857142984867096f) + -0.9285714030265808f;
  float _932 = (floor(_896 - (_904 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _933 = (floor(_897 - (_905 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _934 = (floor(_898 - (_906 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _935 = (floor(_899 - (_907 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _948 = (1.0f - abs(_924)) - abs(_932);
  float _949 = (1.0f - abs(_925)) - abs(_933);
  float _950 = (1.0f - abs(_926)) - abs(_934);
  float _951 = (1.0f - abs(_927)) - abs(_935);
  float _980 = select((_948 > 0.0f), -0.0f, -1.0f);
  float _981 = select((_949 > 0.0f), -0.0f, -1.0f);
  float _982 = select((_950 > 0.0f), -0.0f, -1.0f);
  float _983 = select((_951 > 0.0f), -0.0f, -1.0f);
  float _988 = (((floor(_924) * 2.0f) + 1.0f) * _980) + _924;
  float _989 = (((floor(_932) * 2.0f) + 1.0f) * _980) + _932;
  float _990 = (((floor(_925) * 2.0f) + 1.0f) * _981) + _925;
  float _991 = (((floor(_933) * 2.0f) + 1.0f) * _981) + _933;
  float _996 = (((floor(_926) * 2.0f) + 1.0f) * _982) + _926;
  float _997 = (((floor(_934) * 2.0f) + 1.0f) * _982) + _934;
  float _998 = (((floor(_927) * 2.0f) + 1.0f) * _983) + _927;
  float _999 = (((floor(_935) * 2.0f) + 1.0f) * _983) + _935;
  float _1008 = 1.7928400039672852f - (dot(float3(_988, _989, _948), float3(_988, _989, _948)) * 0.8537350296974182f);
  float _1009 = 1.7928400039672852f - (dot(float3(_990, _991, _949), float3(_990, _991, _949)) * 0.8537350296974182f);
  float _1010 = 1.7928400039672852f - (dot(float3(_996, _997, _950), float3(_996, _997, _950)) * 0.8537350296974182f);
  float _1011 = 1.7928400039672852f - (dot(float3(_998, _999, _951), float3(_998, _999, _951)) * 0.8537350296974182f);
  float _1032 = max((0.6000000238418579f - dot(float3(_738, _739, _740), float3(_738, _739, _740))), 0.0f);
  float _1033 = max((0.6000000238418579f - dot(float3(_759, _760, _761), float3(_759, _760, _761))), 0.0f);
  float _1034 = max((0.6000000238418579f - dot(float3(_765, _766, _767), float3(_765, _766, _767))), 0.0f);
  float _1035 = max((0.6000000238418579f - dot(float3(_768, _769, _770), float3(_768, _769, _770))), 0.0f);
  float _1036 = _1032 * _1032;
  float _1037 = _1033 * _1033;
  float _1038 = _1034 * _1034;
  float _1039 = _1035 * _1035;
  float _1054 = saturate((((sin(_717 - _718) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1036 * _1036), (_1037 * _1037), (_1038 * _1038), (_1039 * _1039)), float4(dot(float3((_1008 * _988), (_1008 * _989), (_1008 * _948)), float3(_738, _739, _740)), dot(float3((_1009 * _990), (_1009 * _991), (_1009 * _949)), float3(_759, _760, _761)), dot(float3((_1010 * _996), (_1010 * _997), (_1010 * _950)), float3(_765, _766, _767)), dot(float3((_1011 * _998), (_1011 * _999), (_1011 * _951)), float3(_768, _769, _770)))) * 21.0f)) * 4.0f);
  float _1058 = (_1054 * _1054) * (3.0f - (_1054 * 2.0f));
  float _1060 = (_1058 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1065 = (_679 * 0.5f) - _723;
  float _1066 = (_694 * 0.004444444552063942f) - _723;
  float _1067 = dot(float3(_1065, _1066, _726), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1071 = floor(_1067 + _1065);
  float _1072 = floor(_1067 + _1066);
  float _1073 = floor(_1067 + _726);
  float _1077 = dot(float3(_1071, _1072, _1073), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1078 = _1077 + (_1065 - _1071);
  float _1079 = _1077 + (_1066 - _1072);
  float _1080 = (_726 - _1073) + _1077;
  float _1084 = select((_1078 < _1079), 0.0f, 1.0f);
  float _1085 = select((_1079 < _1080), 0.0f, 1.0f);
  float _1086 = select((_1080 < _1078), 0.0f, 1.0f);
  float _1087 = 1.0f - _1084;
  float _1088 = 1.0f - _1085;
  float _1089 = 1.0f - _1086;
  float _1090 = min(_1084, _1089);
  float _1091 = min(_1085, _1087);
  float _1092 = min(_1086, _1088);
  float _1093 = max(_1084, _1089);
  float _1094 = max(_1085, _1087);
  float _1095 = max(_1086, _1088);
  float _1099 = (_1078 - _1090) + 0.1666666716337204f;
  float _1100 = (_1079 - _1091) + 0.1666666716337204f;
  float _1101 = (_1080 - _1092) + 0.1666666716337204f;
  float _1105 = (_1078 - _1093) + 0.3333333432674408f;
  float _1106 = (_1079 - _1094) + 0.3333333432674408f;
  float _1107 = (_1080 - _1095) + 0.3333333432674408f;
  float _1108 = _1078 + -0.5f;
  float _1109 = _1079 + -0.5f;
  float _1110 = _1080 + -0.5f;
  float _1120 = _1071 - (floor(_1071 * 0.0034602077212184668f) * 289.0f);
  float _1121 = _1072 - (floor(_1072 * 0.0034602077212184668f) * 289.0f);
  float _1122 = _1073 - (floor(_1073 * 0.0034602077212184668f) * 289.0f);
  float _1123 = _1122 + _1092;
  float _1124 = _1122 + _1095;
  float _1125 = _1122 + 1.0f;
  float _1134 = ((_1122 * 34.0f) + 1.0f) * _1122;
  float _1135 = ((_1123 * 34.0f) + 1.0f) * _1123;
  float _1136 = ((_1124 * 34.0f) + 1.0f) * _1124;
  float _1137 = ((_1125 * 34.0f) + 1.0f) * _1125;
  float _1151 = (_1134 - (floor(_1134 * 0.0034602077212184668f) * 289.0f)) + _1121;
  float _1154 = ((_1121 + _1091) - (floor(_1135 * 0.0034602077212184668f) * 289.0f)) + _1135;
  float _1157 = ((_1121 + _1094) - (floor(_1136 * 0.0034602077212184668f) * 289.0f)) + _1136;
  float _1160 = ((_1121 + 1.0f) - (floor(_1137 * 0.0034602077212184668f) * 289.0f)) + _1137;
  float _1169 = ((_1151 * 34.0f) + 1.0f) * _1151;
  float _1170 = ((_1154 * 34.0f) + 1.0f) * _1154;
  float _1171 = ((_1157 * 34.0f) + 1.0f) * _1157;
  float _1172 = ((_1160 * 34.0f) + 1.0f) * _1160;
  float _1186 = (_1169 - (floor(_1169 * 0.0034602077212184668f) * 289.0f)) + _1120;
  float _1189 = ((_1120 + _1090) - (floor(_1170 * 0.0034602077212184668f) * 289.0f)) + _1170;
  float _1192 = ((_1120 + _1093) - (floor(_1171 * 0.0034602077212184668f) * 289.0f)) + _1171;
  float _1195 = ((_1120 + 1.0f) - (floor(_1172 * 0.0034602077212184668f) * 289.0f)) + _1172;
  float _1204 = ((_1186 * 34.0f) + 1.0f) * _1186;
  float _1205 = ((_1189 * 34.0f) + 1.0f) * _1189;
  float _1206 = ((_1192 * 34.0f) + 1.0f) * _1192;
  float _1207 = ((_1195 * 34.0f) + 1.0f) * _1195;
  float _1220 = _1204 - (floor(_1204 * 0.0034602077212184668f) * 289.0f);
  float _1221 = _1205 - (floor(_1205 * 0.0034602077212184668f) * 289.0f);
  float _1222 = _1206 - (floor(_1206 * 0.0034602077212184668f) * 289.0f);
  float _1223 = _1207 - (floor(_1207 * 0.0034602077212184668f) * 289.0f);
  float _1236 = _1220 - (floor(_1220 * 0.020408164709806442f) * 49.0f);
  float _1237 = _1221 - (floor(_1221 * 0.020408164709806442f) * 49.0f);
  float _1238 = _1222 - (floor(_1222 * 0.020408164709806442f) * 49.0f);
  float _1239 = _1223 - (floor(_1223 * 0.020408164709806442f) * 49.0f);
  float _1244 = floor(_1236 * 0.1428571492433548f);
  float _1245 = floor(_1237 * 0.1428571492433548f);
  float _1246 = floor(_1238 * 0.1428571492433548f);
  float _1247 = floor(_1239 * 0.1428571492433548f);
  float _1264 = (_1244 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1265 = (_1245 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1266 = (_1246 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1267 = (_1247 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1272 = (floor(_1236 - (_1244 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1273 = (floor(_1237 - (_1245 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1274 = (floor(_1238 - (_1246 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1275 = (floor(_1239 - (_1247 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1288 = (1.0f - abs(_1264)) - abs(_1272);
  float _1289 = (1.0f - abs(_1265)) - abs(_1273);
  float _1290 = (1.0f - abs(_1266)) - abs(_1274);
  float _1291 = (1.0f - abs(_1267)) - abs(_1275);
  float _1320 = select((_1288 > 0.0f), -0.0f, -1.0f);
  float _1321 = select((_1289 > 0.0f), -0.0f, -1.0f);
  float _1322 = select((_1290 > 0.0f), -0.0f, -1.0f);
  float _1323 = select((_1291 > 0.0f), -0.0f, -1.0f);
  float _1328 = (((floor(_1264) * 2.0f) + 1.0f) * _1320) + _1264;
  float _1329 = (((floor(_1272) * 2.0f) + 1.0f) * _1320) + _1272;
  float _1330 = (((floor(_1265) * 2.0f) + 1.0f) * _1321) + _1265;
  float _1331 = (((floor(_1273) * 2.0f) + 1.0f) * _1321) + _1273;
  float _1336 = (((floor(_1266) * 2.0f) + 1.0f) * _1322) + _1266;
  float _1337 = (((floor(_1274) * 2.0f) + 1.0f) * _1322) + _1274;
  float _1338 = (((floor(_1267) * 2.0f) + 1.0f) * _1323) + _1267;
  float _1339 = (((floor(_1275) * 2.0f) + 1.0f) * _1323) + _1275;
  float _1348 = 1.7928400039672852f - (dot(float3(_1328, _1329, _1288), float3(_1328, _1329, _1288)) * 0.8537350296974182f);
  float _1349 = 1.7928400039672852f - (dot(float3(_1330, _1331, _1289), float3(_1330, _1331, _1289)) * 0.8537350296974182f);
  float _1350 = 1.7928400039672852f - (dot(float3(_1336, _1337, _1290), float3(_1336, _1337, _1290)) * 0.8537350296974182f);
  float _1351 = 1.7928400039672852f - (dot(float3(_1338, _1339, _1291), float3(_1338, _1339, _1291)) * 0.8537350296974182f);
  float _1372 = max((0.6000000238418579f - dot(float3(_1078, _1079, _1080), float3(_1078, _1079, _1080))), 0.0f);
  float _1373 = max((0.6000000238418579f - dot(float3(_1099, _1100, _1101), float3(_1099, _1100, _1101))), 0.0f);
  float _1374 = max((0.6000000238418579f - dot(float3(_1105, _1106, _1107), float3(_1105, _1106, _1107))), 0.0f);
  float _1375 = max((0.6000000238418579f - dot(float3(_1108, _1109, _1110), float3(_1108, _1109, _1110))), 0.0f);
  float _1376 = _1372 * _1372;
  float _1377 = _1373 * _1373;
  float _1378 = _1374 * _1374;
  float _1379 = _1375 * _1375;
  float _1394 = saturate((((sin((_694 * 2.5f) - _718) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1376 * _1376), (_1377 * _1377), (_1378 * _1378), (_1379 * _1379)), float4(dot(float3((_1348 * _1328), (_1348 * _1329), (_1348 * _1288)), float3(_1078, _1079, _1080)), dot(float3((_1349 * _1330), (_1349 * _1331), (_1349 * _1289)), float3(_1099, _1100, _1101)), dot(float3((_1350 * _1336), (_1350 * _1337), (_1350 * _1290)), float3(_1105, _1106, _1107)), dot(float3((_1351 * _1338), (_1351 * _1339), (_1351 * _1291)), float3(_1108, _1109, _1110)))) * 21.0f)) * 4.0f);
  float _1398 = (_1394 * _1394) * (3.0f - (_1394 * 2.0f));
  float _1400 = (_1398 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1407 = frame_consts.time * 0.15000000596046448f;
  float _1408 = (_695 * 0.04444444552063942f) - _1407;
  float _1409 = _722 - _1407;
  float _1410 = frame_consts.time * 0.02500000037252903f;
  float _1411 = dot(float3(_1408, _1409, _1410), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1415 = floor(_1408 + _1411);
  float _1416 = floor(_1409 + _1411);
  float _1417 = floor(_1410 + _1411);
  float _1421 = dot(float3(_1415, _1416, _1417), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1422 = _1421 + (_1408 - _1415);
  float _1423 = _1421 + (_1409 - _1416);
  float _1424 = (_1410 - _1417) + _1421;
  float _1428 = select((_1422 < _1423), 0.0f, 1.0f);
  float _1429 = select((_1423 < _1424), 0.0f, 1.0f);
  float _1430 = select((_1424 < _1422), 0.0f, 1.0f);
  float _1431 = 1.0f - _1428;
  float _1432 = 1.0f - _1429;
  float _1433 = 1.0f - _1430;
  float _1434 = min(_1428, _1433);
  float _1435 = min(_1429, _1431);
  float _1436 = min(_1430, _1432);
  float _1437 = max(_1428, _1433);
  float _1438 = max(_1429, _1431);
  float _1439 = max(_1430, _1432);
  float _1443 = (_1422 - _1434) + 0.1666666716337204f;
  float _1444 = (_1423 - _1435) + 0.1666666716337204f;
  float _1445 = (_1424 - _1436) + 0.1666666716337204f;
  float _1449 = (_1422 - _1437) + 0.3333333432674408f;
  float _1450 = (_1423 - _1438) + 0.3333333432674408f;
  float _1451 = (_1424 - _1439) + 0.3333333432674408f;
  float _1452 = _1422 + -0.5f;
  float _1453 = _1423 + -0.5f;
  float _1454 = _1424 + -0.5f;
  float _1464 = _1415 - (floor(_1415 * 0.0034602077212184668f) * 289.0f);
  float _1465 = _1416 - (floor(_1416 * 0.0034602077212184668f) * 289.0f);
  float _1466 = _1417 - (floor(_1417 * 0.0034602077212184668f) * 289.0f);
  float _1467 = _1466 + _1436;
  float _1468 = _1466 + _1439;
  float _1469 = _1466 + 1.0f;
  float _1478 = ((_1466 * 34.0f) + 1.0f) * _1466;
  float _1479 = ((_1467 * 34.0f) + 1.0f) * _1467;
  float _1480 = ((_1468 * 34.0f) + 1.0f) * _1468;
  float _1481 = ((_1469 * 34.0f) + 1.0f) * _1469;
  float _1495 = (_1478 - (floor(_1478 * 0.0034602077212184668f) * 289.0f)) + _1465;
  float _1498 = ((_1465 + _1435) - (floor(_1479 * 0.0034602077212184668f) * 289.0f)) + _1479;
  float _1501 = ((_1465 + _1438) - (floor(_1480 * 0.0034602077212184668f) * 289.0f)) + _1480;
  float _1504 = ((_1465 + 1.0f) - (floor(_1481 * 0.0034602077212184668f) * 289.0f)) + _1481;
  float _1513 = ((_1495 * 34.0f) + 1.0f) * _1495;
  float _1514 = ((_1498 * 34.0f) + 1.0f) * _1498;
  float _1515 = ((_1501 * 34.0f) + 1.0f) * _1501;
  float _1516 = ((_1504 * 34.0f) + 1.0f) * _1504;
  float _1530 = (_1513 - (floor(_1513 * 0.0034602077212184668f) * 289.0f)) + _1464;
  float _1533 = ((_1464 + _1434) - (floor(_1514 * 0.0034602077212184668f) * 289.0f)) + _1514;
  float _1536 = ((_1464 + _1437) - (floor(_1515 * 0.0034602077212184668f) * 289.0f)) + _1515;
  float _1539 = ((_1464 + 1.0f) - (floor(_1516 * 0.0034602077212184668f) * 289.0f)) + _1516;
  float _1548 = ((_1530 * 34.0f) + 1.0f) * _1530;
  float _1549 = ((_1533 * 34.0f) + 1.0f) * _1533;
  float _1550 = ((_1536 * 34.0f) + 1.0f) * _1536;
  float _1551 = ((_1539 * 34.0f) + 1.0f) * _1539;
  float _1564 = _1548 - (floor(_1548 * 0.0034602077212184668f) * 289.0f);
  float _1565 = _1549 - (floor(_1549 * 0.0034602077212184668f) * 289.0f);
  float _1566 = _1550 - (floor(_1550 * 0.0034602077212184668f) * 289.0f);
  float _1567 = _1551 - (floor(_1551 * 0.0034602077212184668f) * 289.0f);
  float _1580 = _1564 - (floor(_1564 * 0.020408164709806442f) * 49.0f);
  float _1581 = _1565 - (floor(_1565 * 0.020408164709806442f) * 49.0f);
  float _1582 = _1566 - (floor(_1566 * 0.020408164709806442f) * 49.0f);
  float _1583 = _1567 - (floor(_1567 * 0.020408164709806442f) * 49.0f);
  float _1588 = floor(_1580 * 0.1428571492433548f);
  float _1589 = floor(_1581 * 0.1428571492433548f);
  float _1590 = floor(_1582 * 0.1428571492433548f);
  float _1591 = floor(_1583 * 0.1428571492433548f);
  float _1608 = (_1588 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1609 = (_1589 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1610 = (_1590 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1611 = (_1591 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1616 = (floor(_1580 - (_1588 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1617 = (floor(_1581 - (_1589 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1618 = (floor(_1582 - (_1590 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1619 = (floor(_1583 - (_1591 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1632 = (1.0f - abs(_1608)) - abs(_1616);
  float _1633 = (1.0f - abs(_1609)) - abs(_1617);
  float _1634 = (1.0f - abs(_1610)) - abs(_1618);
  float _1635 = (1.0f - abs(_1611)) - abs(_1619);
  float _1664 = select((_1632 > 0.0f), -0.0f, -1.0f);
  float _1665 = select((_1633 > 0.0f), -0.0f, -1.0f);
  float _1666 = select((_1634 > 0.0f), -0.0f, -1.0f);
  float _1667 = select((_1635 > 0.0f), -0.0f, -1.0f);
  float _1672 = (((floor(_1608) * 2.0f) + 1.0f) * _1664) + _1608;
  float _1673 = (((floor(_1616) * 2.0f) + 1.0f) * _1664) + _1616;
  float _1674 = (((floor(_1609) * 2.0f) + 1.0f) * _1665) + _1609;
  float _1675 = (((floor(_1617) * 2.0f) + 1.0f) * _1665) + _1617;
  float _1680 = (((floor(_1610) * 2.0f) + 1.0f) * _1666) + _1610;
  float _1681 = (((floor(_1618) * 2.0f) + 1.0f) * _1666) + _1618;
  float _1682 = (((floor(_1611) * 2.0f) + 1.0f) * _1667) + _1611;
  float _1683 = (((floor(_1619) * 2.0f) + 1.0f) * _1667) + _1619;
  float _1692 = 1.7928400039672852f - (dot(float3(_1672, _1673, _1632), float3(_1672, _1673, _1632)) * 0.8537350296974182f);
  float _1693 = 1.7928400039672852f - (dot(float3(_1674, _1675, _1633), float3(_1674, _1675, _1633)) * 0.8537350296974182f);
  float _1694 = 1.7928400039672852f - (dot(float3(_1680, _1681, _1634), float3(_1680, _1681, _1634)) * 0.8537350296974182f);
  float _1695 = 1.7928400039672852f - (dot(float3(_1682, _1683, _1635), float3(_1682, _1683, _1635)) * 0.8537350296974182f);
  float _1716 = max((0.6000000238418579f - dot(float3(_1422, _1423, _1424), float3(_1422, _1423, _1424))), 0.0f);
  float _1717 = max((0.6000000238418579f - dot(float3(_1443, _1444, _1445), float3(_1443, _1444, _1445))), 0.0f);
  float _1718 = max((0.6000000238418579f - dot(float3(_1449, _1450, _1451), float3(_1449, _1450, _1451))), 0.0f);
  float _1719 = max((0.6000000238418579f - dot(float3(_1452, _1453, _1454), float3(_1452, _1453, _1454))), 0.0f);
  float _1720 = _1716 * _1716;
  float _1721 = _1717 * _1717;
  float _1722 = _1718 * _1718;
  float _1723 = _1719 * _1719;
  float _1738 = saturate((((sin(_717 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1720 * _1720), (_1721 * _1721), (_1722 * _1722), (_1723 * _1723)), float4(dot(float3((_1692 * _1672), (_1692 * _1673), (_1692 * _1632)), float3(_1422, _1423, _1424)), dot(float3((_1693 * _1674), (_1693 * _1675), (_1693 * _1633)), float3(_1443, _1444, _1445)), dot(float3((_1694 * _1680), (_1694 * _1681), (_1694 * _1634)), float3(_1449, _1450, _1451)), dot(float3((_1695 * _1682), (_1695 * _1683), (_1695 * _1635)), float3(_1452, _1453, _1454)))) * 21.0f)) * 4.0f);
  float _1742 = (_1738 * _1738) * (3.0f - (_1738 * 2.0f));
  float _1744 = (_1742 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1766 = saturate(_1060);
  float _1767 = saturate(_1400);
  float _1789 = (((_604 * 1.2000000476837158f) * _609) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_701 * _701) + (_700 * _700)) / ((_1398 * 0.039000000804662704f) + 0.08100000768899918f))) * _1400) + (saturate(11.0f - (sqrt((_696 * _696) + _706) / ((_1058 * 0.039000000804662704f) + 0.08100000768899918f))) * _1060)) + (saturate(11.0f - (sqrt((_713 * _713) + _706) / ((_1742 * 0.039000000804662704f) + 0.08100000768899918f))) * _1744)) + (((((saturate(1.0f - (abs(_697) * 0.8333333134651184f)) * _1766) + (saturate(1.0f - (abs(dot(float2(_700, _701), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1767)) * saturate(_1744)) + ((_1766 * saturate(1.0f - (abs(dot(float2(_696, _697), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1767)) * 0.5f));
  float _1796 = (_1789 * ((_656 * _656) - _618)) + _618;
  float _1797 = (_1789 * ((_657 * _657) - _619)) + _619;
  float _1798 = (_1789 * ((_658 * _658) - _620)) + _620;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1807 = ((_1796 * 0.3930000066757202f) + (_1797 * 0.7689999938011169f)) + (_1798 * 0.1889999955892563f);
    float _1812 = ((_1796 * 0.3490000069141388f) + (_1797 * 0.6859999895095825f)) + (_1798 * 0.1679999977350235f);
    float _1817 = ((_1796 * 0.2720000147819519f) + (_1797 * 0.5339999794960022f)) + (_1798 * 0.13099999725818634f);
    float _1818 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1823 = ((_1796 * 0.2125999927520752f) + (_1797 * 0.7152000069618225f)) + (_1798 * 0.0722000002861023f);
    _1843 = ((((_1807 - _1796) + ((_1823 - _1807) * 0.6499999761581421f)) * _1818) + _1796);
    _1844 = ((((_1812 - _1797) + ((_1823 - _1812) * 0.6499999761581421f)) * _1818) + _1797);
    _1845 = ((((_1817 - _1798) + ((_1823 - _1817) * 0.6499999761581421f)) * _1818) + _1798);
  } else {
    _1843 = _1796;
    _1844 = _1797;
    _1845 = _1798;
  }
  if (!(frame_consts.invert == 0)) {
    _1854 = (1.0f - _1843);
    _1855 = (1.0f - _1844);
    _1856 = (1.0f - _1845);
  } else {
    _1854 = _1843;
    _1855 = _1844;
    _1856 = _1845;
  }
  SV_Target.x = _1854;
  SV_Target.y = _1855;
  SV_Target.z = _1856;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
