#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float2> distortion : register(t4);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

Texture2D<float3> color_correct_lut : register(t8);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _16 = float((int)(frame_consts.vp_dim.x));
  float _17 = float((int)(frame_consts.vp_dim.y));
  float2 _18 = distortion.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _21 = _17 / _16;
  float _26 = saturate((_18.x * _21) + O_Uv.x);
  float _27 = saturate((_18.y * _21) + O_Uv.y);
  float _59;
  float _60;
  float _61;
  float _62;
  float _110;
  float _121;
  float _132;
  float _298;
  float _309;
  float _320;
  float _343;
  float _344;
  float _345;
  float _506;
  float _507;
  float _508;
  float _549;
  float _550;
  float _551;
  float _700;
  float _701;
  float _702;
  float _710;
  float _1978;
  float _1979;
  float _1980;
  float _1989;
  float _1990;
  float _1991;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _34 = abs(_26 + -0.5f);
    float _35 = abs(_27 + -0.5f);
    float _39 = (rsqrt(dot(float2(_34, _35), float2(_34, _35))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _40 = _39 * _34;
    float _41 = _39 * _35;
    float4 _44 = tex.SampleLevel(sampler_nearest, float2((_40 + _26), (_41 + _27)), 0.0f);
    float4 _46 = tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
    float4 _50 = tex.SampleLevel(sampler_nearest, float2((_26 - _40), (_27 - _41)), 0.0f);
    _59 = _44.x;
    _60 = _46.y;
    _61 = _50.z;
    _62 = 0.5f;
  } else {
    float4 _53 = tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
    _59 = _53.x;
    _60 = _53.y;
    _61 = _53.z;
    _62 = _53.w;
  }
  float3 untonemapped = float3(_59, _60, _61);

  float3 _63 = bloom_tex.SampleLevel(sampler_bilinear, float2(_26, _27), 0.0f);
  float _78 = max((((1.0f - (_59 * 0.2125999927520752f)) - (_60 * 0.7152000069618225f)) - (_61 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _82 = (_59 / _78) + (frame_consts.params.bloom.intensity * _63.x);
  float _83 = (_60 / _78) + (frame_consts.params.bloom.intensity * _63.y);
  float _84 = (_61 / _78) + (frame_consts.params.bloom.intensity * _63.z);
  float _90 = (((_82 * 0.2125999927520752f) + 1.0f) + (_83 * 0.7152000069618225f)) + (_84 * 0.0722000002861023f);
  float _94 = saturate(_82 / _90);
  float _95 = saturate(_83 / _90);
  float _96 = saturate(_84 / _90);
  uint2 _97; color_correct_lut.GetDimensions(_97.x, _97.y);
  if (!(!(_94 <= 0.0031308000907301903f))) {
    _110 = (_94 * 12.920000076293945f);
  } else {
    _110 = (((pow(_94, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_95 <= 0.0031308000907301903f))) {
    _121 = (_95 * 12.920000076293945f);
  } else {
    _121 = (((pow(_95, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_96 <= 0.0031308000907301903f))) {
    _132 = (_96 * 12.920000076293945f);
  } else {
    _132 = (((pow(_96, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  float _135 = float((uint)(_97.y + -1u));
  float _138 = _132 * _135;
  float _139 = frac(_138);
  float _141 = float((uint)_97.y);
  float _143 = (_110 * _135) + 0.5f;
  float _146 = float((uint)_97.x);
  float _148 = (lerp(_121, 1.0f, _135)) / _141;
  float3 _149 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((ceil(_138) * _141) + _143) / _146), _148), 0.0f);
  float3 _157 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((floor(_138) * _141) + _143) / _146), _148), 0.0f);
  float _167 = ((_149.x - _157.x) * _139) + _157.x;
  float _168 = ((_149.y - _157.y) * _139) + _157.y;
  float _169 = ((_149.z - _157.z) * _139) + _157.z;
  if (!(frame_consts.glitch == 0)) {
    float _177 = float((int)(int((_16 / _17) * 1080.0f)));
    float _178 = _177 * _26;
    float _179 = _27 * 1080.0f;
    float _180 = _177 * 0.5f;
    float _183 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _190 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _196 = ((_190 * 3.0f) * exp2(1.4426950216293335f - (_190 * 4.328084945678711f))) + ((_183 * 5.0f) * exp2(1.4426950216293335f - (_183 * 7.213475227355957f)));
    float _197 = _196 * 15.0f;
    float _198 = _197 + 30.0f;
    float _200 = (_196 * 20.0f) + 80.0f;
    float _204 = abs(_177 * (_26 + -0.5f));
    float _205 = abs(_179 + -540.0f);
    float _208 = ((_204 - _180) + _198) + _200;
    float _211 = ((_205 + -510.0f) + _197) + _200;
    float _214 = max(_208, 0.0f);
    float _215 = max(_211, 0.0f);
    float _229 = _204 - (_180 - _198);
    float _230 = _205 - (510.0f - _197);
    float _231 = max(_229, 0.0f);
    float _232 = max(_230, 0.0f);
    float _248 = max(max(0.0f, (1.0f - saturate(abs((min(max(_208, _211), 0.0f) - _200) + sqrt((_215 * _215) + (_214 * _214))) + -0.5f))), ((1.0f - saturate(abs(min(max(_229, _230), 0.0f) + sqrt((_232 * _232) + (_231 * _231))) + -0.5f)) * (1.0f - saturate(_196 * 1.6666666269302368f))));
    float _259 = frac((_178 + _179) * 0.0012499999720603228f) + -0.5f;
    float _260 = frac((_179 - _178) * 0.0012499999720603228f) + -0.5f;
    float _272 = saturate((sin((((_178 * 0.0003124999930150807f) + (_27 * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _276 = (_272 * _272) * (3.0f - (_272 * 2.0f));
    float _278 = saturate(sqrt((_260 * _260) + (_259 * _259)) * 2.0f);
    float _283 = _276 * 0.20000000298023224f;
    float _285 = ((_278 * 0.12156862020492554f) + 0.7450979948043823f) + _283;
    float _286 = ((_278 * 0.3333333134651184f) + 0.34117645025253296f) + _283;
    do {
      if (!(!((_283 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _298 = ((_276 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _298 = exp2(log2((_276 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_285 <= 0.040449999272823334f))) {
          _309 = (_285 * 0.07739938050508499f);
        } else {
          _309 = exp2(log2((_285 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_286 <= 0.040449999272823334f))) {
            _320 = (_286 * 0.07739938050508499f);
          } else {
            _320 = exp2(log2((_286 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _326 = (((_298 * 0.2125999927520752f) + 1.0f) + (_309 * 0.7152000069618225f)) + (_320 * 0.0722000002861023f);
          _343 = (((saturate(_298 / _326) - _167) * _248) + _167);
          _344 = (((saturate(_309 / _326) - _168) * _248) + _168);
          _345 = (((saturate(_320 / _326) - _169) * _248) + _169);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _343 = _167;
    _344 = _168;
    _345 = _169;
  }
  float _351 = depth_tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
  float _355 = 10000.0f / ((_351.x * 19999.5f) + 0.5f);
  float _360 = (_355 * ((_26 * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _362 = (_355 * (((1.0f - _27) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _363 = -0.0f - _355;
  float _387 = mad((frame_consts.paper_xf[2].z), _363, mad((frame_consts.paper_xf[1].z), _362, (_360 * (frame_consts.paper_xf[0].z))));
  float _388 = mad((frame_consts.paper_xf[2].x), _363, mad((frame_consts.paper_xf[1].x), _362, (_360 * (frame_consts.paper_xf[0].x)))) / _387;
  float _389 = mad((frame_consts.paper_xf[2].y), _363, mad((frame_consts.paper_xf[1].y), _362, (_360 * (frame_consts.paper_xf[0].y)))) / _387;
  float _393 = 1.0f - frame_consts.game_plane_blend.y;
  float _398 = log2(max(5.0f, (-0.0f - (_387 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _399 = floor(_398);
  float _400 = _398 - _399;
  float _402 = exp2(_399 * 0.10000000149011612f);
  float _403 = 1.0f / _402;
  float _404 = min(_403, 0.20000000298023224f);
  float _406 = min((_403 * 0.9330329895019531f), 0.20000000298023224f);
  float _407 = frame_consts.game_plane_blend.x - _402;
  float _413 = frame_consts.game_plane_blend.x - (_402 * 1.0717734098434448f);
  float _425 = frame_consts.game_plane_blend.x + 10.0f;
  float _430 = log2(max(5.0f, (-0.0f - (_387 - _425)))) * 10.0f;
  float _431 = floor(_430);
  float _432 = _430 - _431;
  float _434 = exp2(_431 * 0.10000000149011612f);
  float _435 = 1.0f / _434;
  float _436 = min(_435, 0.20000000298023224f);
  float _438 = min((_435 * 0.9330329895019531f), 0.20000000298023224f);
  float _439 = _425 - _434;
  float _445 = _425 - (_434 * 1.0717734098434448f);
  float _457 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_407 * _388) + (frame_consts.paper_xf[3].x)) * _404), (((_407 * _389) + (frame_consts.paper_xf[3].y)) * _404)), 0.0f);
  float _460 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_413 * _388) + (frame_consts.paper_xf[3].x)) * _406), (((_413 * _389) + (frame_consts.paper_xf[3].y)) * _406)), 0.0f);
  float _463 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_439 * _388) + (frame_consts.paper_xf[3].x)) * _436), (((_439 * _389) + (frame_consts.paper_xf[3].y)) * _436)), 0.0f);
  float _466 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_445 * _388) + (frame_consts.paper_xf[3].x)) * _438), (((_445 * _389) + (frame_consts.paper_xf[3].y)) * _438)), 0.0f);
  float _475 = ((((1.0f - (((1.0f - _400) * _393) * _457.x)) - ((_400 * _393) * _460.x)) - (((1.0f - _432) * frame_consts.game_plane_blend.y) * _463.x)) - ((_432 * frame_consts.game_plane_blend.y) * _466.x)) * frame_consts.paper_mult;
  float _479 = _343 - (_475 * _343);
  float _480 = _344 - (_475 * _344);
  float _481 = _345 - (_475 * _345);
  if (!(frame_consts.death_screen == 0)) {
    float _504 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _62), _62);
    _506 = _504;
    _507 = _504;
    _508 = _504;
  } else {
    _506 = (lerp(_479, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _507 = (lerp(_480, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _508 = (lerp(_481, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _516 = _26 * _16;
    float _517 = _27 * _17;
    float _518 = _516 * 0.06666667014360428f;
    float _519 = _517 * 0.038490019738674164f;
    float _521 = ceil(_518 - _519);
    float _523 = floor(_517 * 0.07698003947734833f);
    float _524 = _523 + 1.0f;
    float _527 = ceil((-0.0f - _518) - _519);
    float _529 = (_521 - _527) * 7.5f;
    float _530 = _521 * 0.28867512941360474f;
    float _531 = _524 * 0.5773502588272095f;
    float _532 = _531 - _530;
    float _533 = _527 * 0.28867512941360474f;
    float _536 = _529 / _16;
    float _537 = ((_532 - _533) * 15.0f) / _17;
    do {
      if (((_524 + _521) + _527) == 2.0f) {
        _549 = (_521 + 1.0f);
        _550 = (_523 + 2.0f);
        _551 = (_527 + 1.0f);
      } else {
        _549 = (_521 + -1.0f);
        _550 = _523;
        _551 = (_527 + -1.0f);
      }
      float _552 = _549 - _527;
      float _555 = _531 - (_549 * 0.28867512941360474f);
      float _556 = _555 - _533;
      float _559 = (_550 * 0.5773502588272095f) - _530;
      float _560 = _559 - _533;
      float _562 = _521 - _551;
      float _565 = _532 - (_551 * 0.28867512941360474f);
      float _569 = (_555 - _559) * 15.0f;
      float _570 = (_549 - _521) * -7.5f;
      float _572 = rsqrt(dot(float2(_569, _570), float2(_569, _570)));
      float _581 = (_560 - _565) * 15.0f;
      float _582 = (_551 - _527) * -7.5f;
      float _584 = rsqrt(dot(float2(_581, _582), float2(_581, _582)));
      float _593 = (_565 - _556) * 15.0f;
      float _594 = (_562 - _552) * -7.5f;
      float _596 = rsqrt(dot(float2(_593, _594), float2(_593, _594)));
      float _609 = _536 + -0.5f;
      float _610 = _537 + -0.5f;
      float _657 = _26 + -0.5f;
      float _658 = _27 + -0.5f;
      float _665 = ((frame_consts.time - sqrt((_658 * _658) + (_657 * _657))) + (frac(sin(dot(float2((_536 * 5.0f), (_537 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _669 = frac(abs(_665));
      float _673 = max((select((_665 >= (-0.0f - _665)), _669, (-0.0f - _669)) * 18.0f), 0.0f);
      float _689 = min(max((1.0f - (((((_673 * 1.600000023841858f) * exp2(1.4426950216293335f - (_673 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_610 * _610) + (_609 * _609)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_536 * 3.0f), (_537 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_536, _537), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_536 * 2.0f), (_537 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _695 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_552 * 7.5f) - _516), ((_556 * 15.0f) - _517)), float2((_569 * _572), (_572 * _570))))), abs(dot(float2((_529 - _516), ((_560 * 15.0f) - _517)), float2((_584 * _581), (_584 * _582))))), abs(dot(float2(((_562 * 7.5f) - _516), ((_565 * 15.0f) - _517)), float2((_596 * _593), (_596 * _594))))) * 0.2309400886297226f)) - _689) / ((_689 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _700 = (_695 * _506);
      _701 = (_695 * _507);
      _702 = (_695 * _508);
    } while (false);
  } else {
    _700 = _506;
    _701 = _507;
    _702 = _508;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _710 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _710 = 0.0f;
  }
  float _717 = frame_consts.params.vignette.intensity + _710;
  float _720 = _16 / _17;
  float _732 = exp2(log2(saturate((_717 * abs(_26 + -0.5f)) * (((_720 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _733 = exp2(log2(saturate(_717 * abs(_27 + -0.5f))) * 5.0f);
  float _739 = exp2(log2(saturate(1.0f - dot(float2(_732, _733), float2(_732, _733)))) * 6.0f);
  float _744 = 1.0f - _739;
  float _746 = 1.0f - (_744 * 0.8500000238418579f);
  float _753 = (_746 * (_700 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _754 = (_746 * (_701 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _755 = (_746 * (_702 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _759 = _26 * _16;
  float _760 = _27 * _17;
  float _761 = _760 + _759;
  float _767 = frac(_761 * 0.0033333334140479565f) + -0.5f;
  float _768 = frac((_760 - _759) * 0.0033333334140479565f) + -0.5f;
  float _774 = saturate(sqrt((_768 * _768) + (_767 * _767)) * 2.0f);
  float _785 = saturate((sin((_761 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _790 = ((_785 * _785) * 0.2199999988079071f) * (3.0f - (_785 * 2.0f));
  float _791 = _790 + 0.9777389168739319f;
  float _792 = ((_774 * 0.13274884223937988f) + 0.7175776362419128f) + _790;
  float _793 = ((_774 * 0.3335757553577423f) + 0.30871906876564026f) + _790;
  float _798 = (_26 * 1080.0f) * _720;
  float _799 = _27 * 1080.0f;
  float _800 = _798 * 0.04444444552063942f;
  float _801 = _27 * 27.712812423706055f;
  float _803 = ceil(_800 - _801);
  float _806 = floor(_27 * 55.42562484741211f) + 1.0f;
  float _809 = ceil((-0.0f - _801) - _800);
  float _811 = (_806 + _803) + _809;
  float _813 = (_811 * 22.5f) + -33.75f;
  float _814 = _803 - _809;
  float _816 = _814 * 11.25f;
  float _822 = (((_806 * 0.5773502588272095f) - (_803 * 0.28867512941360474f)) - (_809 * 0.28867512941360474f)) * 22.5f;
  float _825 = _813 + _816;
  float _826 = _822 + (19.485570907592773f - (_811 * 12.990381240844727f));
  float _829 = ((_811 * 25.980762481689453f) + -38.97114181518555f) + _822;
  float _830 = _816 - _813;
  float _831 = _825 - _798;
  float _832 = _826 - _799;
  float _835 = _816 - _798;
  float _836 = _829 - _799;
  float _841 = _832 * _832;
  float _848 = _830 - _798;
  float _852 = _826 * 2.5f;
  float _853 = frame_consts.time * 1.5f;
  float _857 = _826 * 0.004444444552063942f;
  float _858 = frame_consts.time * 0.15000000596046448f;
  float _859 = (_825 * 0.04444444552063942f) - _858;
  float _860 = _857 - _858;
  float _861 = frame_consts.time * 0.02500000037252903f;
  float _862 = dot(float3(_859, _860, _861), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _866 = floor(_862 + _859);
  float _867 = floor(_862 + _860);
  float _868 = floor(_862 + _861);
  float _872 = dot(float3(_866, _867, _868), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _873 = _872 + (_859 - _866);
  float _874 = _872 + (_860 - _867);
  float _875 = (_861 - _868) + _872;
  float _879 = select((_873 < _874), 0.0f, 1.0f);
  float _880 = select((_874 < _875), 0.0f, 1.0f);
  float _881 = select((_875 < _873), 0.0f, 1.0f);
  float _882 = 1.0f - _879;
  float _883 = 1.0f - _880;
  float _884 = 1.0f - _881;
  float _885 = min(_879, _884);
  float _886 = min(_880, _882);
  float _887 = min(_881, _883);
  float _888 = max(_879, _884);
  float _889 = max(_880, _882);
  float _890 = max(_881, _883);
  float _894 = (_873 - _885) + 0.1666666716337204f;
  float _895 = (_874 - _886) + 0.1666666716337204f;
  float _896 = (_875 - _887) + 0.1666666716337204f;
  float _900 = (_873 - _888) + 0.3333333432674408f;
  float _901 = (_874 - _889) + 0.3333333432674408f;
  float _902 = (_875 - _890) + 0.3333333432674408f;
  float _903 = _873 + -0.5f;
  float _904 = _874 + -0.5f;
  float _905 = _875 + -0.5f;
  float _915 = _866 - (floor(_866 * 0.0034602077212184668f) * 289.0f);
  float _916 = _867 - (floor(_867 * 0.0034602077212184668f) * 289.0f);
  float _917 = _868 - (floor(_868 * 0.0034602077212184668f) * 289.0f);
  float _918 = _917 + _887;
  float _919 = _917 + _890;
  float _920 = _917 + 1.0f;
  float _929 = ((_917 * 34.0f) + 1.0f) * _917;
  float _930 = ((_918 * 34.0f) + 1.0f) * _918;
  float _931 = ((_919 * 34.0f) + 1.0f) * _919;
  float _932 = ((_920 * 34.0f) + 1.0f) * _920;
  float _946 = (_929 - (floor(_929 * 0.0034602077212184668f) * 289.0f)) + _916;
  float _949 = ((_916 + _886) - (floor(_930 * 0.0034602077212184668f) * 289.0f)) + _930;
  float _952 = ((_916 + _889) - (floor(_931 * 0.0034602077212184668f) * 289.0f)) + _931;
  float _955 = ((_916 + 1.0f) - (floor(_932 * 0.0034602077212184668f) * 289.0f)) + _932;
  float _964 = ((_946 * 34.0f) + 1.0f) * _946;
  float _965 = ((_949 * 34.0f) + 1.0f) * _949;
  float _966 = ((_952 * 34.0f) + 1.0f) * _952;
  float _967 = ((_955 * 34.0f) + 1.0f) * _955;
  float _981 = (_964 - (floor(_964 * 0.0034602077212184668f) * 289.0f)) + _915;
  float _984 = ((_915 + _885) - (floor(_965 * 0.0034602077212184668f) * 289.0f)) + _965;
  float _987 = ((_915 + _888) - (floor(_966 * 0.0034602077212184668f) * 289.0f)) + _966;
  float _990 = ((_915 + 1.0f) - (floor(_967 * 0.0034602077212184668f) * 289.0f)) + _967;
  float _999 = ((_981 * 34.0f) + 1.0f) * _981;
  float _1000 = ((_984 * 34.0f) + 1.0f) * _984;
  float _1001 = ((_987 * 34.0f) + 1.0f) * _987;
  float _1002 = ((_990 * 34.0f) + 1.0f) * _990;
  float _1015 = _999 - (floor(_999 * 0.0034602077212184668f) * 289.0f);
  float _1016 = _1000 - (floor(_1000 * 0.0034602077212184668f) * 289.0f);
  float _1017 = _1001 - (floor(_1001 * 0.0034602077212184668f) * 289.0f);
  float _1018 = _1002 - (floor(_1002 * 0.0034602077212184668f) * 289.0f);
  float _1031 = _1015 - (floor(_1015 * 0.020408164709806442f) * 49.0f);
  float _1032 = _1016 - (floor(_1016 * 0.020408164709806442f) * 49.0f);
  float _1033 = _1017 - (floor(_1017 * 0.020408164709806442f) * 49.0f);
  float _1034 = _1018 - (floor(_1018 * 0.020408164709806442f) * 49.0f);
  float _1039 = floor(_1031 * 0.1428571492433548f);
  float _1040 = floor(_1032 * 0.1428571492433548f);
  float _1041 = floor(_1033 * 0.1428571492433548f);
  float _1042 = floor(_1034 * 0.1428571492433548f);
  float _1059 = (_1039 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1060 = (_1040 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1061 = (_1041 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1062 = (_1042 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1067 = (floor(_1031 - (_1039 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1068 = (floor(_1032 - (_1040 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1069 = (floor(_1033 - (_1041 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1070 = (floor(_1034 - (_1042 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1083 = (1.0f - abs(_1059)) - abs(_1067);
  float _1084 = (1.0f - abs(_1060)) - abs(_1068);
  float _1085 = (1.0f - abs(_1061)) - abs(_1069);
  float _1086 = (1.0f - abs(_1062)) - abs(_1070);
  float _1115 = select((_1083 > 0.0f), -0.0f, -1.0f);
  float _1116 = select((_1084 > 0.0f), -0.0f, -1.0f);
  float _1117 = select((_1085 > 0.0f), -0.0f, -1.0f);
  float _1118 = select((_1086 > 0.0f), -0.0f, -1.0f);
  float _1123 = (((floor(_1059) * 2.0f) + 1.0f) * _1115) + _1059;
  float _1124 = (((floor(_1067) * 2.0f) + 1.0f) * _1115) + _1067;
  float _1125 = (((floor(_1060) * 2.0f) + 1.0f) * _1116) + _1060;
  float _1126 = (((floor(_1068) * 2.0f) + 1.0f) * _1116) + _1068;
  float _1131 = (((floor(_1061) * 2.0f) + 1.0f) * _1117) + _1061;
  float _1132 = (((floor(_1069) * 2.0f) + 1.0f) * _1117) + _1069;
  float _1133 = (((floor(_1062) * 2.0f) + 1.0f) * _1118) + _1062;
  float _1134 = (((floor(_1070) * 2.0f) + 1.0f) * _1118) + _1070;
  float _1143 = 1.7928400039672852f - (dot(float3(_1123, _1124, _1083), float3(_1123, _1124, _1083)) * 0.8537350296974182f);
  float _1144 = 1.7928400039672852f - (dot(float3(_1125, _1126, _1084), float3(_1125, _1126, _1084)) * 0.8537350296974182f);
  float _1145 = 1.7928400039672852f - (dot(float3(_1131, _1132, _1085), float3(_1131, _1132, _1085)) * 0.8537350296974182f);
  float _1146 = 1.7928400039672852f - (dot(float3(_1133, _1134, _1086), float3(_1133, _1134, _1086)) * 0.8537350296974182f);
  float _1167 = max((0.6000000238418579f - dot(float3(_873, _874, _875), float3(_873, _874, _875))), 0.0f);
  float _1168 = max((0.6000000238418579f - dot(float3(_894, _895, _896), float3(_894, _895, _896))), 0.0f);
  float _1169 = max((0.6000000238418579f - dot(float3(_900, _901, _902), float3(_900, _901, _902))), 0.0f);
  float _1170 = max((0.6000000238418579f - dot(float3(_903, _904, _905), float3(_903, _904, _905))), 0.0f);
  float _1171 = _1167 * _1167;
  float _1172 = _1168 * _1168;
  float _1173 = _1169 * _1169;
  float _1174 = _1170 * _1170;
  float _1189 = saturate((((sin(_852 - _853) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1171 * _1171), (_1172 * _1172), (_1173 * _1173), (_1174 * _1174)), float4(dot(float3((_1143 * _1123), (_1143 * _1124), (_1143 * _1083)), float3(_873, _874, _875)), dot(float3((_1144 * _1125), (_1144 * _1126), (_1144 * _1084)), float3(_894, _895, _896)), dot(float3((_1145 * _1131), (_1145 * _1132), (_1145 * _1085)), float3(_900, _901, _902)), dot(float3((_1146 * _1133), (_1146 * _1134), (_1146 * _1086)), float3(_903, _904, _905)))) * 21.0f)) * 4.0f);
  float _1193 = (_1189 * _1189) * (3.0f - (_1189 * 2.0f));
  float _1195 = (_1193 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1200 = (_814 * 0.5f) - _858;
  float _1201 = (_829 * 0.004444444552063942f) - _858;
  float _1202 = dot(float3(_1200, _1201, _861), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1206 = floor(_1202 + _1200);
  float _1207 = floor(_1202 + _1201);
  float _1208 = floor(_1202 + _861);
  float _1212 = dot(float3(_1206, _1207, _1208), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1213 = _1212 + (_1200 - _1206);
  float _1214 = _1212 + (_1201 - _1207);
  float _1215 = (_861 - _1208) + _1212;
  float _1219 = select((_1213 < _1214), 0.0f, 1.0f);
  float _1220 = select((_1214 < _1215), 0.0f, 1.0f);
  float _1221 = select((_1215 < _1213), 0.0f, 1.0f);
  float _1222 = 1.0f - _1219;
  float _1223 = 1.0f - _1220;
  float _1224 = 1.0f - _1221;
  float _1225 = min(_1219, _1224);
  float _1226 = min(_1220, _1222);
  float _1227 = min(_1221, _1223);
  float _1228 = max(_1219, _1224);
  float _1229 = max(_1220, _1222);
  float _1230 = max(_1221, _1223);
  float _1234 = (_1213 - _1225) + 0.1666666716337204f;
  float _1235 = (_1214 - _1226) + 0.1666666716337204f;
  float _1236 = (_1215 - _1227) + 0.1666666716337204f;
  float _1240 = (_1213 - _1228) + 0.3333333432674408f;
  float _1241 = (_1214 - _1229) + 0.3333333432674408f;
  float _1242 = (_1215 - _1230) + 0.3333333432674408f;
  float _1243 = _1213 + -0.5f;
  float _1244 = _1214 + -0.5f;
  float _1245 = _1215 + -0.5f;
  float _1255 = _1206 - (floor(_1206 * 0.0034602077212184668f) * 289.0f);
  float _1256 = _1207 - (floor(_1207 * 0.0034602077212184668f) * 289.0f);
  float _1257 = _1208 - (floor(_1208 * 0.0034602077212184668f) * 289.0f);
  float _1258 = _1257 + _1227;
  float _1259 = _1257 + _1230;
  float _1260 = _1257 + 1.0f;
  float _1269 = ((_1257 * 34.0f) + 1.0f) * _1257;
  float _1270 = ((_1258 * 34.0f) + 1.0f) * _1258;
  float _1271 = ((_1259 * 34.0f) + 1.0f) * _1259;
  float _1272 = ((_1260 * 34.0f) + 1.0f) * _1260;
  float _1286 = (_1269 - (floor(_1269 * 0.0034602077212184668f) * 289.0f)) + _1256;
  float _1289 = ((_1256 + _1226) - (floor(_1270 * 0.0034602077212184668f) * 289.0f)) + _1270;
  float _1292 = ((_1256 + _1229) - (floor(_1271 * 0.0034602077212184668f) * 289.0f)) + _1271;
  float _1295 = ((_1256 + 1.0f) - (floor(_1272 * 0.0034602077212184668f) * 289.0f)) + _1272;
  float _1304 = ((_1286 * 34.0f) + 1.0f) * _1286;
  float _1305 = ((_1289 * 34.0f) + 1.0f) * _1289;
  float _1306 = ((_1292 * 34.0f) + 1.0f) * _1292;
  float _1307 = ((_1295 * 34.0f) + 1.0f) * _1295;
  float _1321 = (_1304 - (floor(_1304 * 0.0034602077212184668f) * 289.0f)) + _1255;
  float _1324 = ((_1255 + _1225) - (floor(_1305 * 0.0034602077212184668f) * 289.0f)) + _1305;
  float _1327 = ((_1255 + _1228) - (floor(_1306 * 0.0034602077212184668f) * 289.0f)) + _1306;
  float _1330 = ((_1255 + 1.0f) - (floor(_1307 * 0.0034602077212184668f) * 289.0f)) + _1307;
  float _1339 = ((_1321 * 34.0f) + 1.0f) * _1321;
  float _1340 = ((_1324 * 34.0f) + 1.0f) * _1324;
  float _1341 = ((_1327 * 34.0f) + 1.0f) * _1327;
  float _1342 = ((_1330 * 34.0f) + 1.0f) * _1330;
  float _1355 = _1339 - (floor(_1339 * 0.0034602077212184668f) * 289.0f);
  float _1356 = _1340 - (floor(_1340 * 0.0034602077212184668f) * 289.0f);
  float _1357 = _1341 - (floor(_1341 * 0.0034602077212184668f) * 289.0f);
  float _1358 = _1342 - (floor(_1342 * 0.0034602077212184668f) * 289.0f);
  float _1371 = _1355 - (floor(_1355 * 0.020408164709806442f) * 49.0f);
  float _1372 = _1356 - (floor(_1356 * 0.020408164709806442f) * 49.0f);
  float _1373 = _1357 - (floor(_1357 * 0.020408164709806442f) * 49.0f);
  float _1374 = _1358 - (floor(_1358 * 0.020408164709806442f) * 49.0f);
  float _1379 = floor(_1371 * 0.1428571492433548f);
  float _1380 = floor(_1372 * 0.1428571492433548f);
  float _1381 = floor(_1373 * 0.1428571492433548f);
  float _1382 = floor(_1374 * 0.1428571492433548f);
  float _1399 = (_1379 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1400 = (_1380 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1401 = (_1381 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1402 = (_1382 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1407 = (floor(_1371 - (_1379 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1408 = (floor(_1372 - (_1380 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1409 = (floor(_1373 - (_1381 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1410 = (floor(_1374 - (_1382 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1423 = (1.0f - abs(_1399)) - abs(_1407);
  float _1424 = (1.0f - abs(_1400)) - abs(_1408);
  float _1425 = (1.0f - abs(_1401)) - abs(_1409);
  float _1426 = (1.0f - abs(_1402)) - abs(_1410);
  float _1455 = select((_1423 > 0.0f), -0.0f, -1.0f);
  float _1456 = select((_1424 > 0.0f), -0.0f, -1.0f);
  float _1457 = select((_1425 > 0.0f), -0.0f, -1.0f);
  float _1458 = select((_1426 > 0.0f), -0.0f, -1.0f);
  float _1463 = (((floor(_1399) * 2.0f) + 1.0f) * _1455) + _1399;
  float _1464 = (((floor(_1407) * 2.0f) + 1.0f) * _1455) + _1407;
  float _1465 = (((floor(_1400) * 2.0f) + 1.0f) * _1456) + _1400;
  float _1466 = (((floor(_1408) * 2.0f) + 1.0f) * _1456) + _1408;
  float _1471 = (((floor(_1401) * 2.0f) + 1.0f) * _1457) + _1401;
  float _1472 = (((floor(_1409) * 2.0f) + 1.0f) * _1457) + _1409;
  float _1473 = (((floor(_1402) * 2.0f) + 1.0f) * _1458) + _1402;
  float _1474 = (((floor(_1410) * 2.0f) + 1.0f) * _1458) + _1410;
  float _1483 = 1.7928400039672852f - (dot(float3(_1463, _1464, _1423), float3(_1463, _1464, _1423)) * 0.8537350296974182f);
  float _1484 = 1.7928400039672852f - (dot(float3(_1465, _1466, _1424), float3(_1465, _1466, _1424)) * 0.8537350296974182f);
  float _1485 = 1.7928400039672852f - (dot(float3(_1471, _1472, _1425), float3(_1471, _1472, _1425)) * 0.8537350296974182f);
  float _1486 = 1.7928400039672852f - (dot(float3(_1473, _1474, _1426), float3(_1473, _1474, _1426)) * 0.8537350296974182f);
  float _1507 = max((0.6000000238418579f - dot(float3(_1213, _1214, _1215), float3(_1213, _1214, _1215))), 0.0f);
  float _1508 = max((0.6000000238418579f - dot(float3(_1234, _1235, _1236), float3(_1234, _1235, _1236))), 0.0f);
  float _1509 = max((0.6000000238418579f - dot(float3(_1240, _1241, _1242), float3(_1240, _1241, _1242))), 0.0f);
  float _1510 = max((0.6000000238418579f - dot(float3(_1243, _1244, _1245), float3(_1243, _1244, _1245))), 0.0f);
  float _1511 = _1507 * _1507;
  float _1512 = _1508 * _1508;
  float _1513 = _1509 * _1509;
  float _1514 = _1510 * _1510;
  float _1529 = saturate((((sin((_829 * 2.5f) - _853) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1511 * _1511), (_1512 * _1512), (_1513 * _1513), (_1514 * _1514)), float4(dot(float3((_1483 * _1463), (_1483 * _1464), (_1483 * _1423)), float3(_1213, _1214, _1215)), dot(float3((_1484 * _1465), (_1484 * _1466), (_1484 * _1424)), float3(_1234, _1235, _1236)), dot(float3((_1485 * _1471), (_1485 * _1472), (_1485 * _1425)), float3(_1240, _1241, _1242)), dot(float3((_1486 * _1473), (_1486 * _1474), (_1486 * _1426)), float3(_1243, _1244, _1245)))) * 21.0f)) * 4.0f);
  float _1533 = (_1529 * _1529) * (3.0f - (_1529 * 2.0f));
  float _1535 = (_1533 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1542 = frame_consts.time * 0.15000000596046448f;
  float _1543 = (_830 * 0.04444444552063942f) - _1542;
  float _1544 = _857 - _1542;
  float _1545 = frame_consts.time * 0.02500000037252903f;
  float _1546 = dot(float3(_1543, _1544, _1545), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1550 = floor(_1543 + _1546);
  float _1551 = floor(_1544 + _1546);
  float _1552 = floor(_1545 + _1546);
  float _1556 = dot(float3(_1550, _1551, _1552), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1557 = _1556 + (_1543 - _1550);
  float _1558 = _1556 + (_1544 - _1551);
  float _1559 = (_1545 - _1552) + _1556;
  float _1563 = select((_1557 < _1558), 0.0f, 1.0f);
  float _1564 = select((_1558 < _1559), 0.0f, 1.0f);
  float _1565 = select((_1559 < _1557), 0.0f, 1.0f);
  float _1566 = 1.0f - _1563;
  float _1567 = 1.0f - _1564;
  float _1568 = 1.0f - _1565;
  float _1569 = min(_1563, _1568);
  float _1570 = min(_1564, _1566);
  float _1571 = min(_1565, _1567);
  float _1572 = max(_1563, _1568);
  float _1573 = max(_1564, _1566);
  float _1574 = max(_1565, _1567);
  float _1578 = (_1557 - _1569) + 0.1666666716337204f;
  float _1579 = (_1558 - _1570) + 0.1666666716337204f;
  float _1580 = (_1559 - _1571) + 0.1666666716337204f;
  float _1584 = (_1557 - _1572) + 0.3333333432674408f;
  float _1585 = (_1558 - _1573) + 0.3333333432674408f;
  float _1586 = (_1559 - _1574) + 0.3333333432674408f;
  float _1587 = _1557 + -0.5f;
  float _1588 = _1558 + -0.5f;
  float _1589 = _1559 + -0.5f;
  float _1599 = _1550 - (floor(_1550 * 0.0034602077212184668f) * 289.0f);
  float _1600 = _1551 - (floor(_1551 * 0.0034602077212184668f) * 289.0f);
  float _1601 = _1552 - (floor(_1552 * 0.0034602077212184668f) * 289.0f);
  float _1602 = _1601 + _1571;
  float _1603 = _1601 + _1574;
  float _1604 = _1601 + 1.0f;
  float _1613 = ((_1601 * 34.0f) + 1.0f) * _1601;
  float _1614 = ((_1602 * 34.0f) + 1.0f) * _1602;
  float _1615 = ((_1603 * 34.0f) + 1.0f) * _1603;
  float _1616 = ((_1604 * 34.0f) + 1.0f) * _1604;
  float _1630 = (_1613 - (floor(_1613 * 0.0034602077212184668f) * 289.0f)) + _1600;
  float _1633 = ((_1600 + _1570) - (floor(_1614 * 0.0034602077212184668f) * 289.0f)) + _1614;
  float _1636 = ((_1600 + _1573) - (floor(_1615 * 0.0034602077212184668f) * 289.0f)) + _1615;
  float _1639 = ((_1600 + 1.0f) - (floor(_1616 * 0.0034602077212184668f) * 289.0f)) + _1616;
  float _1648 = ((_1630 * 34.0f) + 1.0f) * _1630;
  float _1649 = ((_1633 * 34.0f) + 1.0f) * _1633;
  float _1650 = ((_1636 * 34.0f) + 1.0f) * _1636;
  float _1651 = ((_1639 * 34.0f) + 1.0f) * _1639;
  float _1665 = (_1648 - (floor(_1648 * 0.0034602077212184668f) * 289.0f)) + _1599;
  float _1668 = ((_1599 + _1569) - (floor(_1649 * 0.0034602077212184668f) * 289.0f)) + _1649;
  float _1671 = ((_1599 + _1572) - (floor(_1650 * 0.0034602077212184668f) * 289.0f)) + _1650;
  float _1674 = ((_1599 + 1.0f) - (floor(_1651 * 0.0034602077212184668f) * 289.0f)) + _1651;
  float _1683 = ((_1665 * 34.0f) + 1.0f) * _1665;
  float _1684 = ((_1668 * 34.0f) + 1.0f) * _1668;
  float _1685 = ((_1671 * 34.0f) + 1.0f) * _1671;
  float _1686 = ((_1674 * 34.0f) + 1.0f) * _1674;
  float _1699 = _1683 - (floor(_1683 * 0.0034602077212184668f) * 289.0f);
  float _1700 = _1684 - (floor(_1684 * 0.0034602077212184668f) * 289.0f);
  float _1701 = _1685 - (floor(_1685 * 0.0034602077212184668f) * 289.0f);
  float _1702 = _1686 - (floor(_1686 * 0.0034602077212184668f) * 289.0f);
  float _1715 = _1699 - (floor(_1699 * 0.020408164709806442f) * 49.0f);
  float _1716 = _1700 - (floor(_1700 * 0.020408164709806442f) * 49.0f);
  float _1717 = _1701 - (floor(_1701 * 0.020408164709806442f) * 49.0f);
  float _1718 = _1702 - (floor(_1702 * 0.020408164709806442f) * 49.0f);
  float _1723 = floor(_1715 * 0.1428571492433548f);
  float _1724 = floor(_1716 * 0.1428571492433548f);
  float _1725 = floor(_1717 * 0.1428571492433548f);
  float _1726 = floor(_1718 * 0.1428571492433548f);
  float _1743 = (_1723 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1744 = (_1724 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1745 = (_1725 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1746 = (_1726 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1751 = (floor(_1715 - (_1723 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1752 = (floor(_1716 - (_1724 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1753 = (floor(_1717 - (_1725 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1754 = (floor(_1718 - (_1726 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1767 = (1.0f - abs(_1743)) - abs(_1751);
  float _1768 = (1.0f - abs(_1744)) - abs(_1752);
  float _1769 = (1.0f - abs(_1745)) - abs(_1753);
  float _1770 = (1.0f - abs(_1746)) - abs(_1754);
  float _1799 = select((_1767 > 0.0f), -0.0f, -1.0f);
  float _1800 = select((_1768 > 0.0f), -0.0f, -1.0f);
  float _1801 = select((_1769 > 0.0f), -0.0f, -1.0f);
  float _1802 = select((_1770 > 0.0f), -0.0f, -1.0f);
  float _1807 = (((floor(_1743) * 2.0f) + 1.0f) * _1799) + _1743;
  float _1808 = (((floor(_1751) * 2.0f) + 1.0f) * _1799) + _1751;
  float _1809 = (((floor(_1744) * 2.0f) + 1.0f) * _1800) + _1744;
  float _1810 = (((floor(_1752) * 2.0f) + 1.0f) * _1800) + _1752;
  float _1815 = (((floor(_1745) * 2.0f) + 1.0f) * _1801) + _1745;
  float _1816 = (((floor(_1753) * 2.0f) + 1.0f) * _1801) + _1753;
  float _1817 = (((floor(_1746) * 2.0f) + 1.0f) * _1802) + _1746;
  float _1818 = (((floor(_1754) * 2.0f) + 1.0f) * _1802) + _1754;
  float _1827 = 1.7928400039672852f - (dot(float3(_1807, _1808, _1767), float3(_1807, _1808, _1767)) * 0.8537350296974182f);
  float _1828 = 1.7928400039672852f - (dot(float3(_1809, _1810, _1768), float3(_1809, _1810, _1768)) * 0.8537350296974182f);
  float _1829 = 1.7928400039672852f - (dot(float3(_1815, _1816, _1769), float3(_1815, _1816, _1769)) * 0.8537350296974182f);
  float _1830 = 1.7928400039672852f - (dot(float3(_1817, _1818, _1770), float3(_1817, _1818, _1770)) * 0.8537350296974182f);
  float _1851 = max((0.6000000238418579f - dot(float3(_1557, _1558, _1559), float3(_1557, _1558, _1559))), 0.0f);
  float _1852 = max((0.6000000238418579f - dot(float3(_1578, _1579, _1580), float3(_1578, _1579, _1580))), 0.0f);
  float _1853 = max((0.6000000238418579f - dot(float3(_1584, _1585, _1586), float3(_1584, _1585, _1586))), 0.0f);
  float _1854 = max((0.6000000238418579f - dot(float3(_1587, _1588, _1589), float3(_1587, _1588, _1589))), 0.0f);
  float _1855 = _1851 * _1851;
  float _1856 = _1852 * _1852;
  float _1857 = _1853 * _1853;
  float _1858 = _1854 * _1854;
  float _1873 = saturate((((sin(_852 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1855 * _1855), (_1856 * _1856), (_1857 * _1857), (_1858 * _1858)), float4(dot(float3((_1827 * _1807), (_1827 * _1808), (_1827 * _1767)), float3(_1557, _1558, _1559)), dot(float3((_1828 * _1809), (_1828 * _1810), (_1828 * _1768)), float3(_1578, _1579, _1580)), dot(float3((_1829 * _1815), (_1829 * _1816), (_1829 * _1769)), float3(_1584, _1585, _1586)), dot(float3((_1830 * _1817), (_1830 * _1818), (_1830 * _1770)), float3(_1587, _1588, _1589)))) * 21.0f)) * 4.0f);
  float _1877 = (_1873 * _1873) * (3.0f - (_1873 * 2.0f));
  float _1879 = (_1877 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1901 = saturate(_1195);
  float _1902 = saturate(_1535);
  float _1924 = (((_739 * 1.2000000476837158f) * _744) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_836 * _836) + (_835 * _835)) / ((_1533 * 0.039000000804662704f) + 0.08100000768899918f))) * _1535) + (saturate(11.0f - (sqrt((_831 * _831) + _841) / ((_1193 * 0.039000000804662704f) + 0.08100000768899918f))) * _1195)) + (saturate(11.0f - (sqrt((_848 * _848) + _841) / ((_1877 * 0.039000000804662704f) + 0.08100000768899918f))) * _1879)) + (((((saturate(1.0f - (abs(_832) * 0.8333333134651184f)) * _1901) + (saturate(1.0f - (abs(dot(float2(_835, _836), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1902)) * saturate(_1879)) + ((_1901 * saturate(1.0f - (abs(dot(float2(_831, _832), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1902)) * 0.5f));
  float _1931 = (_1924 * ((_791 * _791) - _753)) + _753;
  float _1932 = (_1924 * ((_792 * _792) - _754)) + _754;
  float _1933 = (_1924 * ((_793 * _793) - _755)) + _755;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1942 = ((_1931 * 0.3930000066757202f) + (_1932 * 0.7689999938011169f)) + (_1933 * 0.1889999955892563f);
    float _1947 = ((_1931 * 0.3490000069141388f) + (_1932 * 0.6859999895095825f)) + (_1933 * 0.1679999977350235f);
    float _1952 = ((_1931 * 0.2720000147819519f) + (_1932 * 0.5339999794960022f)) + (_1933 * 0.13099999725818634f);
    float _1953 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1958 = ((_1931 * 0.2125999927520752f) + (_1932 * 0.7152000069618225f)) + (_1933 * 0.0722000002861023f);
    _1978 = ((((_1942 - _1931) + ((_1958 - _1942) * 0.6499999761581421f)) * _1953) + _1931);
    _1979 = ((((_1947 - _1932) + ((_1958 - _1947) * 0.6499999761581421f)) * _1953) + _1932);
    _1980 = ((((_1952 - _1933) + ((_1958 - _1952) * 0.6499999761581421f)) * _1953) + _1933);
  } else {
    _1978 = _1931;
    _1979 = _1932;
    _1980 = _1933;
  }
  if (!(frame_consts.invert == 0)) {
    _1989 = (1.0f - _1978);
    _1990 = (1.0f - _1979);
    _1991 = (1.0f - _1980);
  } else {
    _1989 = _1978;
    _1990 = _1979;
    _1991 = _1980;
  }
  SV_Target.x = _1989;
  SV_Target.y = _1990;
  SV_Target.z = _1991;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
