#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _14 = float((int)(frame_consts.vp_dim.x));
  float _15 = float((int)(frame_consts.vp_dim.y));
  float4 _16 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float3 _20 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _35 = max((((1.0f - (_16.y * 0.7152000069618225f)) - (_16.x * 0.2125999927520752f)) - (_16.z * 0.0722000002861023f)), 0.0010000000474974513f);
  float _39 = (_16.x / _35) + (frame_consts.params.bloom.intensity * _20.x);
  float _40 = (_16.y / _35) + (frame_consts.params.bloom.intensity * _20.y);
  float _41 = (_16.z / _35) + (frame_consts.params.bloom.intensity * _20.z);
  float _47 = (((_39 * 0.2125999927520752f) + 1.0f) + (_40 * 0.7152000069618225f)) + (_41 * 0.0722000002861023f);
  float _51 = saturate(_39 / _47);
  float _52 = saturate(_40 / _47);
  float _53 = saturate(_41 / _47);
  float _59 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _63 = 10000.0f / ((_59.x * 19999.5f) + 0.5f);
  float _68 = (_63 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _70 = (_63 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _71 = -0.0f - _63;
  float _95 = mad((frame_consts.paper_xf[2].z), _71, mad((frame_consts.paper_xf[1].z), _70, (_68 * (frame_consts.paper_xf[0].z))));
  float _96 = mad((frame_consts.paper_xf[2].x), _71, mad((frame_consts.paper_xf[1].x), _70, (_68 * (frame_consts.paper_xf[0].x)))) / _95;
  float _97 = mad((frame_consts.paper_xf[2].y), _71, mad((frame_consts.paper_xf[1].y), _70, (_68 * (frame_consts.paper_xf[0].y)))) / _95;
  float _101 = 1.0f - frame_consts.game_plane_blend.y;
  float _106 = log2(max(5.0f, (-0.0f - (_95 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _107 = floor(_106);
  float _108 = _106 - _107;
  float _110 = exp2(_107 * 0.10000000149011612f);
  float _111 = 1.0f / _110;
  float _112 = min(_111, 0.20000000298023224f);
  float _114 = min((_111 * 0.9330329895019531f), 0.20000000298023224f);
  float _115 = frame_consts.game_plane_blend.x - _110;
  float _121 = frame_consts.game_plane_blend.x - (_110 * 1.0717734098434448f);
  float _133 = frame_consts.game_plane_blend.x + 10.0f;
  float _138 = log2(max(5.0f, (-0.0f - (_95 - _133)))) * 10.0f;
  float _139 = floor(_138);
  float _140 = _138 - _139;
  float _142 = exp2(_139 * 0.10000000149011612f);
  float _143 = 1.0f / _142;
  float _144 = min(_143, 0.20000000298023224f);
  float _146 = min((_143 * 0.9330329895019531f), 0.20000000298023224f);
  float _147 = _133 - _142;
  float _153 = _133 - (_142 * 1.0717734098434448f);
  float _165 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_115 * _96) + (frame_consts.paper_xf[3].x)) * _112), (((_115 * _97) + (frame_consts.paper_xf[3].y)) * _112)), 0.0f);
  float _168 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_121 * _96) + (frame_consts.paper_xf[3].x)) * _114), (((_121 * _97) + (frame_consts.paper_xf[3].y)) * _114)), 0.0f);
  float _171 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_147 * _96) + (frame_consts.paper_xf[3].x)) * _144), (((_147 * _97) + (frame_consts.paper_xf[3].y)) * _144)), 0.0f);
  float _174 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_153 * _96) + (frame_consts.paper_xf[3].x)) * _146), (((_153 * _97) + (frame_consts.paper_xf[3].y)) * _146)), 0.0f);
  float _183 = ((((1.0f - (((1.0f - _108) * _101) * _165.x)) - ((_108 * _101) * _168.x)) - (((1.0f - _140) * frame_consts.game_plane_blend.y) * _171.x)) - ((_140 * frame_consts.game_plane_blend.y) * _174.x)) * frame_consts.paper_mult;
  float _198 = _14 / _15;
  float _210 = exp2(log2(saturate((frame_consts.params.vignette.intensity * abs(O_Uv.x + -0.5f)) * (((_198 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _211 = exp2(log2(saturate(frame_consts.params.vignette.intensity * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _217 = exp2(log2(saturate(1.0f - dot(float2(_210, _211), float2(_210, _211)))) * 6.0f);
  float _222 = 1.0f - _217;
  float _224 = 1.0f - (_222 * 0.8500000238418579f);
  float _231 = (_224 * ((_51 - (_183 * _51)) - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _232 = (_224 * ((_52 - (_183 * _52)) - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _233 = (_224 * ((_53 - (_183 * _53)) - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _237 = _14 * O_Uv.x;
  float _238 = _15 * O_Uv.y;
  float _239 = _237 + _238;
  float _245 = frac(_239 * 0.0033333334140479565f) + -0.5f;
  float _246 = frac((_238 - _237) * 0.0033333334140479565f) + -0.5f;
  float _252 = saturate(sqrt((_246 * _246) + (_245 * _245)) * 2.0f);
  float _263 = saturate((sin((_239 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _268 = ((_263 * _263) * 0.2199999988079071f) * (3.0f - (_263 * 2.0f));
  float _269 = _268 + 0.9777389168739319f;
  float _270 = ((_252 * 0.13274884223937988f) + 0.7175776362419128f) + _268;
  float _271 = ((_252 * 0.3335757553577423f) + 0.30871906876564026f) + _268;
  float _276 = (O_Uv.x * 1080.0f) * _198;
  float _277 = O_Uv.y * 1080.0f;
  float _278 = _276 * 0.04444444552063942f;
  float _279 = O_Uv.y * 27.712812423706055f;
  float _281 = ceil(_278 - _279);
  float _284 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _287 = ceil((-0.0f - _279) - _278);
  float _289 = (_284 + _281) + _287;
  float _291 = (_289 * 22.5f) + -33.75f;
  float _292 = _281 - _287;
  float _294 = _292 * 11.25f;
  float _300 = (((_284 * 0.5773502588272095f) - (_281 * 0.28867512941360474f)) - (_287 * 0.28867512941360474f)) * 22.5f;
  float _303 = _291 + _294;
  float _304 = _300 + (19.485570907592773f - (_289 * 12.990381240844727f));
  float _307 = ((_289 * 25.980762481689453f) + -38.97114181518555f) + _300;
  float _308 = _294 - _291;
  float _309 = _303 - _276;
  float _310 = _304 - _277;
  float _313 = _294 - _276;
  float _314 = _307 - _277;
  float _319 = _310 * _310;
  float _326 = _308 - _276;
  float _330 = _304 * 2.5f;
  float _331 = frame_consts.time * 1.5f;
  float _335 = _304 * 0.004444444552063942f;
  float _336 = frame_consts.time * 0.15000000596046448f;
  float _337 = (_303 * 0.04444444552063942f) - _336;
  float _338 = _335 - _336;
  float _339 = frame_consts.time * 0.02500000037252903f;
  float _340 = dot(float3(_337, _338, _339), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _344 = floor(_340 + _337);
  float _345 = floor(_340 + _338);
  float _346 = floor(_340 + _339);
  float _350 = dot(float3(_344, _345, _346), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _351 = _350 + (_337 - _344);
  float _352 = _350 + (_338 - _345);
  float _353 = (_339 - _346) + _350;
  float _357 = select((_351 < _352), 0.0f, 1.0f);
  float _358 = select((_352 < _353), 0.0f, 1.0f);
  float _359 = select((_353 < _351), 0.0f, 1.0f);
  float _360 = 1.0f - _357;
  float _361 = 1.0f - _358;
  float _362 = 1.0f - _359;
  float _363 = min(_357, _362);
  float _364 = min(_358, _360);
  float _365 = min(_359, _361);
  float _366 = max(_357, _362);
  float _367 = max(_358, _360);
  float _368 = max(_359, _361);
  float _372 = (_351 - _363) + 0.1666666716337204f;
  float _373 = (_352 - _364) + 0.1666666716337204f;
  float _374 = (_353 - _365) + 0.1666666716337204f;
  float _378 = (_351 - _366) + 0.3333333432674408f;
  float _379 = (_352 - _367) + 0.3333333432674408f;
  float _380 = (_353 - _368) + 0.3333333432674408f;
  float _381 = _351 + -0.5f;
  float _382 = _352 + -0.5f;
  float _383 = _353 + -0.5f;
  float _393 = _344 - (floor(_344 * 0.0034602077212184668f) * 289.0f);
  float _394 = _345 - (floor(_345 * 0.0034602077212184668f) * 289.0f);
  float _395 = _346 - (floor(_346 * 0.0034602077212184668f) * 289.0f);
  float _396 = _395 + _365;
  float _397 = _395 + _368;
  float _398 = _395 + 1.0f;
  float _407 = ((_395 * 34.0f) + 1.0f) * _395;
  float _408 = ((_396 * 34.0f) + 1.0f) * _396;
  float _409 = ((_397 * 34.0f) + 1.0f) * _397;
  float _410 = ((_398 * 34.0f) + 1.0f) * _398;
  float _424 = (_407 - (floor(_407 * 0.0034602077212184668f) * 289.0f)) + _394;
  float _427 = ((_394 + _364) - (floor(_408 * 0.0034602077212184668f) * 289.0f)) + _408;
  float _430 = ((_394 + _367) - (floor(_409 * 0.0034602077212184668f) * 289.0f)) + _409;
  float _433 = ((_394 + 1.0f) - (floor(_410 * 0.0034602077212184668f) * 289.0f)) + _410;
  float _442 = ((_424 * 34.0f) + 1.0f) * _424;
  float _443 = ((_427 * 34.0f) + 1.0f) * _427;
  float _444 = ((_430 * 34.0f) + 1.0f) * _430;
  float _445 = ((_433 * 34.0f) + 1.0f) * _433;
  float _459 = (_442 - (floor(_442 * 0.0034602077212184668f) * 289.0f)) + _393;
  float _462 = ((_393 + _363) - (floor(_443 * 0.0034602077212184668f) * 289.0f)) + _443;
  float _465 = ((_393 + _366) - (floor(_444 * 0.0034602077212184668f) * 289.0f)) + _444;
  float _468 = ((_393 + 1.0f) - (floor(_445 * 0.0034602077212184668f) * 289.0f)) + _445;
  float _477 = ((_459 * 34.0f) + 1.0f) * _459;
  float _478 = ((_462 * 34.0f) + 1.0f) * _462;
  float _479 = ((_465 * 34.0f) + 1.0f) * _465;
  float _480 = ((_468 * 34.0f) + 1.0f) * _468;
  float _493 = _477 - (floor(_477 * 0.0034602077212184668f) * 289.0f);
  float _494 = _478 - (floor(_478 * 0.0034602077212184668f) * 289.0f);
  float _495 = _479 - (floor(_479 * 0.0034602077212184668f) * 289.0f);
  float _496 = _480 - (floor(_480 * 0.0034602077212184668f) * 289.0f);
  float _509 = _493 - (floor(_493 * 0.020408164709806442f) * 49.0f);
  float _510 = _494 - (floor(_494 * 0.020408164709806442f) * 49.0f);
  float _511 = _495 - (floor(_495 * 0.020408164709806442f) * 49.0f);
  float _512 = _496 - (floor(_496 * 0.020408164709806442f) * 49.0f);
  float _517 = floor(_509 * 0.1428571492433548f);
  float _518 = floor(_510 * 0.1428571492433548f);
  float _519 = floor(_511 * 0.1428571492433548f);
  float _520 = floor(_512 * 0.1428571492433548f);
  float _537 = (_517 * 0.2857142984867096f) + -0.9285714030265808f;
  float _538 = (_518 * 0.2857142984867096f) + -0.9285714030265808f;
  float _539 = (_519 * 0.2857142984867096f) + -0.9285714030265808f;
  float _540 = (_520 * 0.2857142984867096f) + -0.9285714030265808f;
  float _545 = (floor(_509 - (_517 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _546 = (floor(_510 - (_518 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _547 = (floor(_511 - (_519 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _548 = (floor(_512 - (_520 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _561 = (1.0f - abs(_537)) - abs(_545);
  float _562 = (1.0f - abs(_538)) - abs(_546);
  float _563 = (1.0f - abs(_539)) - abs(_547);
  float _564 = (1.0f - abs(_540)) - abs(_548);
  float _593 = select((_561 > 0.0f), -0.0f, -1.0f);
  float _594 = select((_562 > 0.0f), -0.0f, -1.0f);
  float _595 = select((_563 > 0.0f), -0.0f, -1.0f);
  float _596 = select((_564 > 0.0f), -0.0f, -1.0f);
  float _601 = (((floor(_537) * 2.0f) + 1.0f) * _593) + _537;
  float _602 = (((floor(_545) * 2.0f) + 1.0f) * _593) + _545;
  float _603 = (((floor(_538) * 2.0f) + 1.0f) * _594) + _538;
  float _604 = (((floor(_546) * 2.0f) + 1.0f) * _594) + _546;
  float _609 = (((floor(_539) * 2.0f) + 1.0f) * _595) + _539;
  float _610 = (((floor(_547) * 2.0f) + 1.0f) * _595) + _547;
  float _611 = (((floor(_540) * 2.0f) + 1.0f) * _596) + _540;
  float _612 = (((floor(_548) * 2.0f) + 1.0f) * _596) + _548;
  float _621 = 1.7928400039672852f - (dot(float3(_601, _602, _561), float3(_601, _602, _561)) * 0.8537350296974182f);
  float _622 = 1.7928400039672852f - (dot(float3(_603, _604, _562), float3(_603, _604, _562)) * 0.8537350296974182f);
  float _623 = 1.7928400039672852f - (dot(float3(_609, _610, _563), float3(_609, _610, _563)) * 0.8537350296974182f);
  float _624 = 1.7928400039672852f - (dot(float3(_611, _612, _564), float3(_611, _612, _564)) * 0.8537350296974182f);
  float _645 = max((0.6000000238418579f - dot(float3(_351, _352, _353), float3(_351, _352, _353))), 0.0f);
  float _646 = max((0.6000000238418579f - dot(float3(_372, _373, _374), float3(_372, _373, _374))), 0.0f);
  float _647 = max((0.6000000238418579f - dot(float3(_378, _379, _380), float3(_378, _379, _380))), 0.0f);
  float _648 = max((0.6000000238418579f - dot(float3(_381, _382, _383), float3(_381, _382, _383))), 0.0f);
  float _649 = _645 * _645;
  float _650 = _646 * _646;
  float _651 = _647 * _647;
  float _652 = _648 * _648;
  float _667 = saturate((((sin(_330 - _331) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_649 * _649), (_650 * _650), (_651 * _651), (_652 * _652)), float4(dot(float3((_621 * _601), (_621 * _602), (_621 * _561)), float3(_351, _352, _353)), dot(float3((_622 * _603), (_622 * _604), (_622 * _562)), float3(_372, _373, _374)), dot(float3((_623 * _609), (_623 * _610), (_623 * _563)), float3(_378, _379, _380)), dot(float3((_624 * _611), (_624 * _612), (_624 * _564)), float3(_381, _382, _383)))) * 21.0f)) * 4.0f);
  float _671 = (_667 * _667) * (3.0f - (_667 * 2.0f));
  float _673 = (_671 * 0.6499999761581421f) + 0.3499999940395355f;
  float _678 = (_292 * 0.5f) - _336;
  float _679 = (_307 * 0.004444444552063942f) - _336;
  float _680 = dot(float3(_678, _679, _339), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _684 = floor(_680 + _678);
  float _685 = floor(_680 + _679);
  float _686 = floor(_680 + _339);
  float _690 = dot(float3(_684, _685, _686), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _691 = _690 + (_678 - _684);
  float _692 = _690 + (_679 - _685);
  float _693 = (_339 - _686) + _690;
  float _697 = select((_691 < _692), 0.0f, 1.0f);
  float _698 = select((_692 < _693), 0.0f, 1.0f);
  float _699 = select((_693 < _691), 0.0f, 1.0f);
  float _700 = 1.0f - _697;
  float _701 = 1.0f - _698;
  float _702 = 1.0f - _699;
  float _703 = min(_697, _702);
  float _704 = min(_698, _700);
  float _705 = min(_699, _701);
  float _706 = max(_697, _702);
  float _707 = max(_698, _700);
  float _708 = max(_699, _701);
  float _712 = (_691 - _703) + 0.1666666716337204f;
  float _713 = (_692 - _704) + 0.1666666716337204f;
  float _714 = (_693 - _705) + 0.1666666716337204f;
  float _718 = (_691 - _706) + 0.3333333432674408f;
  float _719 = (_692 - _707) + 0.3333333432674408f;
  float _720 = (_693 - _708) + 0.3333333432674408f;
  float _721 = _691 + -0.5f;
  float _722 = _692 + -0.5f;
  float _723 = _693 + -0.5f;
  float _733 = _684 - (floor(_684 * 0.0034602077212184668f) * 289.0f);
  float _734 = _685 - (floor(_685 * 0.0034602077212184668f) * 289.0f);
  float _735 = _686 - (floor(_686 * 0.0034602077212184668f) * 289.0f);
  float _736 = _735 + _705;
  float _737 = _735 + _708;
  float _738 = _735 + 1.0f;
  float _747 = ((_735 * 34.0f) + 1.0f) * _735;
  float _748 = ((_736 * 34.0f) + 1.0f) * _736;
  float _749 = ((_737 * 34.0f) + 1.0f) * _737;
  float _750 = ((_738 * 34.0f) + 1.0f) * _738;
  float _764 = (_747 - (floor(_747 * 0.0034602077212184668f) * 289.0f)) + _734;
  float _767 = ((_734 + _704) - (floor(_748 * 0.0034602077212184668f) * 289.0f)) + _748;
  float _770 = ((_734 + _707) - (floor(_749 * 0.0034602077212184668f) * 289.0f)) + _749;
  float _773 = ((_734 + 1.0f) - (floor(_750 * 0.0034602077212184668f) * 289.0f)) + _750;
  float _782 = ((_764 * 34.0f) + 1.0f) * _764;
  float _783 = ((_767 * 34.0f) + 1.0f) * _767;
  float _784 = ((_770 * 34.0f) + 1.0f) * _770;
  float _785 = ((_773 * 34.0f) + 1.0f) * _773;
  float _799 = (_782 - (floor(_782 * 0.0034602077212184668f) * 289.0f)) + _733;
  float _802 = ((_733 + _703) - (floor(_783 * 0.0034602077212184668f) * 289.0f)) + _783;
  float _805 = ((_733 + _706) - (floor(_784 * 0.0034602077212184668f) * 289.0f)) + _784;
  float _808 = ((_733 + 1.0f) - (floor(_785 * 0.0034602077212184668f) * 289.0f)) + _785;
  float _817 = ((_799 * 34.0f) + 1.0f) * _799;
  float _818 = ((_802 * 34.0f) + 1.0f) * _802;
  float _819 = ((_805 * 34.0f) + 1.0f) * _805;
  float _820 = ((_808 * 34.0f) + 1.0f) * _808;
  float _833 = _817 - (floor(_817 * 0.0034602077212184668f) * 289.0f);
  float _834 = _818 - (floor(_818 * 0.0034602077212184668f) * 289.0f);
  float _835 = _819 - (floor(_819 * 0.0034602077212184668f) * 289.0f);
  float _836 = _820 - (floor(_820 * 0.0034602077212184668f) * 289.0f);
  float _849 = _833 - (floor(_833 * 0.020408164709806442f) * 49.0f);
  float _850 = _834 - (floor(_834 * 0.020408164709806442f) * 49.0f);
  float _851 = _835 - (floor(_835 * 0.020408164709806442f) * 49.0f);
  float _852 = _836 - (floor(_836 * 0.020408164709806442f) * 49.0f);
  float _857 = floor(_849 * 0.1428571492433548f);
  float _858 = floor(_850 * 0.1428571492433548f);
  float _859 = floor(_851 * 0.1428571492433548f);
  float _860 = floor(_852 * 0.1428571492433548f);
  float _877 = (_857 * 0.2857142984867096f) + -0.9285714030265808f;
  float _878 = (_858 * 0.2857142984867096f) + -0.9285714030265808f;
  float _879 = (_859 * 0.2857142984867096f) + -0.9285714030265808f;
  float _880 = (_860 * 0.2857142984867096f) + -0.9285714030265808f;
  float _885 = (floor(_849 - (_857 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _886 = (floor(_850 - (_858 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _887 = (floor(_851 - (_859 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _888 = (floor(_852 - (_860 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _901 = (1.0f - abs(_877)) - abs(_885);
  float _902 = (1.0f - abs(_878)) - abs(_886);
  float _903 = (1.0f - abs(_879)) - abs(_887);
  float _904 = (1.0f - abs(_880)) - abs(_888);
  float _933 = select((_901 > 0.0f), -0.0f, -1.0f);
  float _934 = select((_902 > 0.0f), -0.0f, -1.0f);
  float _935 = select((_903 > 0.0f), -0.0f, -1.0f);
  float _936 = select((_904 > 0.0f), -0.0f, -1.0f);
  float _941 = (((floor(_877) * 2.0f) + 1.0f) * _933) + _877;
  float _942 = (((floor(_885) * 2.0f) + 1.0f) * _933) + _885;
  float _943 = (((floor(_878) * 2.0f) + 1.0f) * _934) + _878;
  float _944 = (((floor(_886) * 2.0f) + 1.0f) * _934) + _886;
  float _949 = (((floor(_879) * 2.0f) + 1.0f) * _935) + _879;
  float _950 = (((floor(_887) * 2.0f) + 1.0f) * _935) + _887;
  float _951 = (((floor(_880) * 2.0f) + 1.0f) * _936) + _880;
  float _952 = (((floor(_888) * 2.0f) + 1.0f) * _936) + _888;
  float _961 = 1.7928400039672852f - (dot(float3(_941, _942, _901), float3(_941, _942, _901)) * 0.8537350296974182f);
  float _962 = 1.7928400039672852f - (dot(float3(_943, _944, _902), float3(_943, _944, _902)) * 0.8537350296974182f);
  float _963 = 1.7928400039672852f - (dot(float3(_949, _950, _903), float3(_949, _950, _903)) * 0.8537350296974182f);
  float _964 = 1.7928400039672852f - (dot(float3(_951, _952, _904), float3(_951, _952, _904)) * 0.8537350296974182f);
  float _985 = max((0.6000000238418579f - dot(float3(_691, _692, _693), float3(_691, _692, _693))), 0.0f);
  float _986 = max((0.6000000238418579f - dot(float3(_712, _713, _714), float3(_712, _713, _714))), 0.0f);
  float _987 = max((0.6000000238418579f - dot(float3(_718, _719, _720), float3(_718, _719, _720))), 0.0f);
  float _988 = max((0.6000000238418579f - dot(float3(_721, _722, _723), float3(_721, _722, _723))), 0.0f);
  float _989 = _985 * _985;
  float _990 = _986 * _986;
  float _991 = _987 * _987;
  float _992 = _988 * _988;
  float _1007 = saturate((((sin((_307 * 2.5f) - _331) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_989 * _989), (_990 * _990), (_991 * _991), (_992 * _992)), float4(dot(float3((_961 * _941), (_961 * _942), (_961 * _901)), float3(_691, _692, _693)), dot(float3((_962 * _943), (_962 * _944), (_962 * _902)), float3(_712, _713, _714)), dot(float3((_963 * _949), (_963 * _950), (_963 * _903)), float3(_718, _719, _720)), dot(float3((_964 * _951), (_964 * _952), (_964 * _904)), float3(_721, _722, _723)))) * 21.0f)) * 4.0f);
  float _1011 = (_1007 * _1007) * (3.0f - (_1007 * 2.0f));
  float _1013 = (_1011 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1020 = frame_consts.time * 0.15000000596046448f;
  float _1021 = (_308 * 0.04444444552063942f) - _1020;
  float _1022 = _335 - _1020;
  float _1023 = frame_consts.time * 0.02500000037252903f;
  float _1024 = dot(float3(_1021, _1022, _1023), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1028 = floor(_1021 + _1024);
  float _1029 = floor(_1022 + _1024);
  float _1030 = floor(_1023 + _1024);
  float _1034 = dot(float3(_1028, _1029, _1030), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1035 = _1034 + (_1021 - _1028);
  float _1036 = _1034 + (_1022 - _1029);
  float _1037 = (_1023 - _1030) + _1034;
  float _1041 = select((_1035 < _1036), 0.0f, 1.0f);
  float _1042 = select((_1036 < _1037), 0.0f, 1.0f);
  float _1043 = select((_1037 < _1035), 0.0f, 1.0f);
  float _1044 = 1.0f - _1041;
  float _1045 = 1.0f - _1042;
  float _1046 = 1.0f - _1043;
  float _1047 = min(_1041, _1046);
  float _1048 = min(_1042, _1044);
  float _1049 = min(_1043, _1045);
  float _1050 = max(_1041, _1046);
  float _1051 = max(_1042, _1044);
  float _1052 = max(_1043, _1045);
  float _1056 = (_1035 - _1047) + 0.1666666716337204f;
  float _1057 = (_1036 - _1048) + 0.1666666716337204f;
  float _1058 = (_1037 - _1049) + 0.1666666716337204f;
  float _1062 = (_1035 - _1050) + 0.3333333432674408f;
  float _1063 = (_1036 - _1051) + 0.3333333432674408f;
  float _1064 = (_1037 - _1052) + 0.3333333432674408f;
  float _1065 = _1035 + -0.5f;
  float _1066 = _1036 + -0.5f;
  float _1067 = _1037 + -0.5f;
  float _1077 = _1028 - (floor(_1028 * 0.0034602077212184668f) * 289.0f);
  float _1078 = _1029 - (floor(_1029 * 0.0034602077212184668f) * 289.0f);
  float _1079 = _1030 - (floor(_1030 * 0.0034602077212184668f) * 289.0f);
  float _1080 = _1079 + _1049;
  float _1081 = _1079 + _1052;
  float _1082 = _1079 + 1.0f;
  float _1091 = ((_1079 * 34.0f) + 1.0f) * _1079;
  float _1092 = ((_1080 * 34.0f) + 1.0f) * _1080;
  float _1093 = ((_1081 * 34.0f) + 1.0f) * _1081;
  float _1094 = ((_1082 * 34.0f) + 1.0f) * _1082;
  float _1108 = (_1091 - (floor(_1091 * 0.0034602077212184668f) * 289.0f)) + _1078;
  float _1111 = ((_1078 + _1048) - (floor(_1092 * 0.0034602077212184668f) * 289.0f)) + _1092;
  float _1114 = ((_1078 + _1051) - (floor(_1093 * 0.0034602077212184668f) * 289.0f)) + _1093;
  float _1117 = ((_1078 + 1.0f) - (floor(_1094 * 0.0034602077212184668f) * 289.0f)) + _1094;
  float _1126 = ((_1108 * 34.0f) + 1.0f) * _1108;
  float _1127 = ((_1111 * 34.0f) + 1.0f) * _1111;
  float _1128 = ((_1114 * 34.0f) + 1.0f) * _1114;
  float _1129 = ((_1117 * 34.0f) + 1.0f) * _1117;
  float _1143 = (_1126 - (floor(_1126 * 0.0034602077212184668f) * 289.0f)) + _1077;
  float _1146 = ((_1077 + _1047) - (floor(_1127 * 0.0034602077212184668f) * 289.0f)) + _1127;
  float _1149 = ((_1077 + _1050) - (floor(_1128 * 0.0034602077212184668f) * 289.0f)) + _1128;
  float _1152 = ((_1077 + 1.0f) - (floor(_1129 * 0.0034602077212184668f) * 289.0f)) + _1129;
  float _1161 = ((_1143 * 34.0f) + 1.0f) * _1143;
  float _1162 = ((_1146 * 34.0f) + 1.0f) * _1146;
  float _1163 = ((_1149 * 34.0f) + 1.0f) * _1149;
  float _1164 = ((_1152 * 34.0f) + 1.0f) * _1152;
  float _1177 = _1161 - (floor(_1161 * 0.0034602077212184668f) * 289.0f);
  float _1178 = _1162 - (floor(_1162 * 0.0034602077212184668f) * 289.0f);
  float _1179 = _1163 - (floor(_1163 * 0.0034602077212184668f) * 289.0f);
  float _1180 = _1164 - (floor(_1164 * 0.0034602077212184668f) * 289.0f);
  float _1193 = _1177 - (floor(_1177 * 0.020408164709806442f) * 49.0f);
  float _1194 = _1178 - (floor(_1178 * 0.020408164709806442f) * 49.0f);
  float _1195 = _1179 - (floor(_1179 * 0.020408164709806442f) * 49.0f);
  float _1196 = _1180 - (floor(_1180 * 0.020408164709806442f) * 49.0f);
  float _1201 = floor(_1193 * 0.1428571492433548f);
  float _1202 = floor(_1194 * 0.1428571492433548f);
  float _1203 = floor(_1195 * 0.1428571492433548f);
  float _1204 = floor(_1196 * 0.1428571492433548f);
  float _1221 = (_1201 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1222 = (_1202 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1223 = (_1203 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1224 = (_1204 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1229 = (floor(_1193 - (_1201 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1230 = (floor(_1194 - (_1202 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1231 = (floor(_1195 - (_1203 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1232 = (floor(_1196 - (_1204 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1245 = (1.0f - abs(_1221)) - abs(_1229);
  float _1246 = (1.0f - abs(_1222)) - abs(_1230);
  float _1247 = (1.0f - abs(_1223)) - abs(_1231);
  float _1248 = (1.0f - abs(_1224)) - abs(_1232);
  float _1277 = select((_1245 > 0.0f), -0.0f, -1.0f);
  float _1278 = select((_1246 > 0.0f), -0.0f, -1.0f);
  float _1279 = select((_1247 > 0.0f), -0.0f, -1.0f);
  float _1280 = select((_1248 > 0.0f), -0.0f, -1.0f);
  float _1285 = (((floor(_1221) * 2.0f) + 1.0f) * _1277) + _1221;
  float _1286 = (((floor(_1229) * 2.0f) + 1.0f) * _1277) + _1229;
  float _1287 = (((floor(_1222) * 2.0f) + 1.0f) * _1278) + _1222;
  float _1288 = (((floor(_1230) * 2.0f) + 1.0f) * _1278) + _1230;
  float _1293 = (((floor(_1223) * 2.0f) + 1.0f) * _1279) + _1223;
  float _1294 = (((floor(_1231) * 2.0f) + 1.0f) * _1279) + _1231;
  float _1295 = (((floor(_1224) * 2.0f) + 1.0f) * _1280) + _1224;
  float _1296 = (((floor(_1232) * 2.0f) + 1.0f) * _1280) + _1232;
  float _1305 = 1.7928400039672852f - (dot(float3(_1285, _1286, _1245), float3(_1285, _1286, _1245)) * 0.8537350296974182f);
  float _1306 = 1.7928400039672852f - (dot(float3(_1287, _1288, _1246), float3(_1287, _1288, _1246)) * 0.8537350296974182f);
  float _1307 = 1.7928400039672852f - (dot(float3(_1293, _1294, _1247), float3(_1293, _1294, _1247)) * 0.8537350296974182f);
  float _1308 = 1.7928400039672852f - (dot(float3(_1295, _1296, _1248), float3(_1295, _1296, _1248)) * 0.8537350296974182f);
  float _1329 = max((0.6000000238418579f - dot(float3(_1035, _1036, _1037), float3(_1035, _1036, _1037))), 0.0f);
  float _1330 = max((0.6000000238418579f - dot(float3(_1056, _1057, _1058), float3(_1056, _1057, _1058))), 0.0f);
  float _1331 = max((0.6000000238418579f - dot(float3(_1062, _1063, _1064), float3(_1062, _1063, _1064))), 0.0f);
  float _1332 = max((0.6000000238418579f - dot(float3(_1065, _1066, _1067), float3(_1065, _1066, _1067))), 0.0f);
  float _1333 = _1329 * _1329;
  float _1334 = _1330 * _1330;
  float _1335 = _1331 * _1331;
  float _1336 = _1332 * _1332;
  float _1351 = saturate((((sin(_330 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1333 * _1333), (_1334 * _1334), (_1335 * _1335), (_1336 * _1336)), float4(dot(float3((_1305 * _1285), (_1305 * _1286), (_1305 * _1245)), float3(_1035, _1036, _1037)), dot(float3((_1306 * _1287), (_1306 * _1288), (_1306 * _1246)), float3(_1056, _1057, _1058)), dot(float3((_1307 * _1293), (_1307 * _1294), (_1307 * _1247)), float3(_1062, _1063, _1064)), dot(float3((_1308 * _1295), (_1308 * _1296), (_1308 * _1248)), float3(_1065, _1066, _1067)))) * 21.0f)) * 4.0f);
  float _1355 = (_1351 * _1351) * (3.0f - (_1351 * 2.0f));
  float _1357 = (_1355 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1379 = saturate(_673);
  float _1380 = saturate(_1013);
  float _1402 = (((_217 * 1.2000000476837158f) * _222) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_314 * _314) + (_313 * _313)) / ((_1011 * 0.039000000804662704f) + 0.08100000768899918f))) * _1013) + (saturate(11.0f - (sqrt((_309 * _309) + _319) / ((_671 * 0.039000000804662704f) + 0.08100000768899918f))) * _673)) + (saturate(11.0f - (sqrt((_326 * _326) + _319) / ((_1355 * 0.039000000804662704f) + 0.08100000768899918f))) * _1357)) + (((((saturate(1.0f - (abs(_310) * 0.8333333134651184f)) * _1379) + (saturate(1.0f - (abs(dot(float2(_313, _314), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1380)) * saturate(_1357)) + ((_1379 * saturate(1.0f - (abs(dot(float2(_309, _310), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1380)) * 0.5f));
  SV_Target.x = ((_1402 * ((_269 * _269) - _231)) + _231);
  SV_Target.y = ((_1402 * ((_270 * _270) - _232)) + _232);
  SV_Target.z = ((_1402 * ((_271 * _271) - _233)) + _233);
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(_16.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
