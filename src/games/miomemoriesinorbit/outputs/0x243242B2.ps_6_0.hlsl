#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float2> distortion : register(t4);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

Texture2D<float3> color_correct_lut : register(t8);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _16 = float((int)(frame_consts.vp_dim.x));
  float _17 = float((int)(frame_consts.vp_dim.y));
  float2 _18 = distortion.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _21 = _17 / _16;
  float _26 = saturate((_18.x * _21) + O_Uv.x);
  float _27 = saturate((_18.y * _21) + O_Uv.y);
  float _59;
  float _60;
  float _61;
  float _62;
  float _110;
  float _121;
  float _132;
  float _298;
  float _309;
  float _320;
  float _343;
  float _344;
  float _345;
  float _470;
  float _471;
  float _472;
  float _513;
  float _514;
  float _515;
  float _664;
  float _665;
  float _666;
  float _674;
  float _1942;
  float _1943;
  float _1944;
  float _1953;
  float _1954;
  float _1955;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _34 = abs(_26 + -0.5f);
    float _35 = abs(_27 + -0.5f);
    float _39 = (rsqrt(dot(float2(_34, _35), float2(_34, _35))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _40 = _39 * _34;
    float _41 = _39 * _35;
    float4 _44 = tex.SampleLevel(sampler_nearest, float2((_40 + _26), (_41 + _27)), 0.0f);
    float4 _46 = tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
    float4 _50 = tex.SampleLevel(sampler_nearest, float2((_26 - _40), (_27 - _41)), 0.0f);
    _59 = _44.x;
    _60 = _46.y;
    _61 = _50.z;
    _62 = 0.5f;
  } else {
    float4 _53 = tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
    _59 = _53.x;
    _60 = _53.y;
    _61 = _53.z;
    _62 = _53.w;
  }
  float3 untonemapped = float3(_59, _60, _61);

  float3 _63 = bloom_tex.SampleLevel(sampler_bilinear, float2(_26, _27), 0.0f);
  float _78 = max((((1.0f - (_59 * 0.2125999927520752f)) - (_60 * 0.7152000069618225f)) - (_61 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _82 = (_59 / _78) + (frame_consts.params.bloom.intensity * _63.x);
  float _83 = (_60 / _78) + (frame_consts.params.bloom.intensity * _63.y);
  float _84 = (_61 / _78) + (frame_consts.params.bloom.intensity * _63.z);
  float _90 = (((_82 * 0.2125999927520752f) + 1.0f) + (_83 * 0.7152000069618225f)) + (_84 * 0.0722000002861023f);
  float _94 = saturate(_82 / _90);
  float _95 = saturate(_83 / _90);
  float _96 = saturate(_84 / _90);
  uint2 _97; color_correct_lut.GetDimensions(_97.x, _97.y);
  if (!(!(_94 <= 0.0031308000907301903f))) {
    _110 = (_94 * 12.920000076293945f);
  } else {
    _110 = (((pow(_94, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_95 <= 0.0031308000907301903f))) {
    _121 = (_95 * 12.920000076293945f);
  } else {
    _121 = (((pow(_95, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_96 <= 0.0031308000907301903f))) {
    _132 = (_96 * 12.920000076293945f);
  } else {
    _132 = (((pow(_96, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  float _135 = float((uint)(_97.y + -1u));
  float _138 = _132 * _135;
  float _139 = frac(_138);
  float _141 = float((uint)_97.y);
  float _143 = (_110 * _135) + 0.5f;
  float _146 = float((uint)_97.x);
  float _148 = (lerp(_121, 1.0f, _135)) / _141;
  float3 _149 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((ceil(_138) * _141) + _143) / _146), _148), 0.0f);
  float3 _157 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((floor(_138) * _141) + _143) / _146), _148), 0.0f);
  float _167 = ((_149.x - _157.x) * _139) + _157.x;
  float _168 = ((_149.y - _157.y) * _139) + _157.y;
  float _169 = ((_149.z - _157.z) * _139) + _157.z;
  if (!(frame_consts.glitch == 0)) {
    float _177 = float((int)(int((_16 / _17) * 1080.0f)));
    float _178 = _177 * _26;
    float _179 = _27 * 1080.0f;
    float _180 = _177 * 0.5f;
    float _183 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _190 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _196 = ((_190 * 3.0f) * exp2(1.4426950216293335f - (_190 * 4.328084945678711f))) + ((_183 * 5.0f) * exp2(1.4426950216293335f - (_183 * 7.213475227355957f)));
    float _197 = _196 * 15.0f;
    float _198 = _197 + 30.0f;
    float _200 = (_196 * 20.0f) + 80.0f;
    float _204 = abs(_177 * (_26 + -0.5f));
    float _205 = abs(_179 + -540.0f);
    float _208 = ((_204 - _180) + _198) + _200;
    float _211 = ((_205 + -510.0f) + _197) + _200;
    float _214 = max(_208, 0.0f);
    float _215 = max(_211, 0.0f);
    float _229 = _204 - (_180 - _198);
    float _230 = _205 - (510.0f - _197);
    float _231 = max(_229, 0.0f);
    float _232 = max(_230, 0.0f);
    float _248 = max(max(0.0f, (1.0f - saturate(abs((min(max(_208, _211), 0.0f) - _200) + sqrt((_215 * _215) + (_214 * _214))) + -0.5f))), ((1.0f - saturate(abs(min(max(_229, _230), 0.0f) + sqrt((_232 * _232) + (_231 * _231))) + -0.5f)) * (1.0f - saturate(_196 * 1.6666666269302368f))));
    float _259 = frac((_178 + _179) * 0.0012499999720603228f) + -0.5f;
    float _260 = frac((_179 - _178) * 0.0012499999720603228f) + -0.5f;
    float _272 = saturate((sin((((_178 * 0.0003124999930150807f) + (_27 * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _276 = (_272 * _272) * (3.0f - (_272 * 2.0f));
    float _278 = saturate(sqrt((_260 * _260) + (_259 * _259)) * 2.0f);
    float _283 = _276 * 0.20000000298023224f;
    float _285 = ((_278 * 0.12156862020492554f) + 0.7450979948043823f) + _283;
    float _286 = ((_278 * 0.3333333134651184f) + 0.34117645025253296f) + _283;
    do {
      if (!(!((_283 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _298 = ((_276 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _298 = exp2(log2((_276 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_285 <= 0.040449999272823334f))) {
          _309 = (_285 * 0.07739938050508499f);
        } else {
          _309 = exp2(log2((_285 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_286 <= 0.040449999272823334f))) {
            _320 = (_286 * 0.07739938050508499f);
          } else {
            _320 = exp2(log2((_286 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _326 = (((_298 * 0.2125999927520752f) + 1.0f) + (_309 * 0.7152000069618225f)) + (_320 * 0.0722000002861023f);
          _343 = (((saturate(_298 / _326) - _167) * _248) + _167);
          _344 = (((saturate(_309 / _326) - _168) * _248) + _168);
          _345 = (((saturate(_320 / _326) - _169) * _248) + _169);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _343 = _167;
    _344 = _168;
    _345 = _169;
  }
  float _351 = depth_tex.SampleLevel(sampler_nearest, float2(_26, _27), 0.0f);
  float _355 = 10000.0f / ((_351.x * 19999.5f) + 0.5f);
  float _360 = (_355 * ((_26 * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _362 = (_355 * (((1.0f - _27) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _363 = -0.0f - _355;
  float _387 = mad((frame_consts.paper_xf[2].z), _363, mad((frame_consts.paper_xf[1].z), _362, (_360 * (frame_consts.paper_xf[0].z))));
  float _388 = mad((frame_consts.paper_xf[2].x), _363, mad((frame_consts.paper_xf[1].x), _362, (_360 * (frame_consts.paper_xf[0].x)))) / _387;
  float _389 = mad((frame_consts.paper_xf[2].y), _363, mad((frame_consts.paper_xf[1].y), _362, (_360 * (frame_consts.paper_xf[0].y)))) / _387;
  float _401 = exp2(round(log2(max(5.0f, (-0.0f - (_387 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _403 = min((1.0f / _401), 0.20000000298023224f);
  float _404 = frame_consts.game_plane_blend.x - _401;
  float _411 = frame_consts.game_plane_blend.x + 10.0f;
  float _419 = exp2(round(log2(max(5.0f, (-0.0f - (_387 - _411)))) * 10.0f) * 0.10000000149011612f);
  float _421 = min((1.0f / _419), 0.20000000298023224f);
  float _422 = _411 - _419;
  float _429 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_404 * _388) + (frame_consts.paper_xf[3].x)) * _403), (((_404 * _389) + (frame_consts.paper_xf[3].y)) * _403)), 0.0f);
  float _432 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_422 * _388) + (frame_consts.paper_xf[3].x)) * _421), (((_422 * _389) + (frame_consts.paper_xf[3].y)) * _421)), 0.0f);
  float _439 = ((1.0f - (_429.x * (1.0f - frame_consts.game_plane_blend.y))) - (_432.x * frame_consts.game_plane_blend.y)) * frame_consts.paper_mult;
  float _443 = _343 - (_439 * _343);
  float _444 = _344 - (_439 * _344);
  float _445 = _345 - (_439 * _345);
  if (!(frame_consts.death_screen == 0)) {
    float _468 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _62), _62);
    _470 = _468;
    _471 = _468;
    _472 = _468;
  } else {
    _470 = (lerp(_443, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _471 = (lerp(_444, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _472 = (lerp(_445, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _480 = _26 * _16;
    float _481 = _27 * _17;
    float _482 = _480 * 0.06666667014360428f;
    float _483 = _481 * 0.038490019738674164f;
    float _485 = ceil(_482 - _483);
    float _487 = floor(_481 * 0.07698003947734833f);
    float _488 = _487 + 1.0f;
    float _491 = ceil((-0.0f - _482) - _483);
    float _493 = (_485 - _491) * 7.5f;
    float _494 = _485 * 0.28867512941360474f;
    float _495 = _488 * 0.5773502588272095f;
    float _496 = _495 - _494;
    float _497 = _491 * 0.28867512941360474f;
    float _500 = _493 / _16;
    float _501 = ((_496 - _497) * 15.0f) / _17;
    do {
      if (((_488 + _485) + _491) == 2.0f) {
        _513 = (_485 + 1.0f);
        _514 = (_487 + 2.0f);
        _515 = (_491 + 1.0f);
      } else {
        _513 = (_485 + -1.0f);
        _514 = _487;
        _515 = (_491 + -1.0f);
      }
      float _516 = _513 - _491;
      float _519 = _495 - (_513 * 0.28867512941360474f);
      float _520 = _519 - _497;
      float _523 = (_514 * 0.5773502588272095f) - _494;
      float _524 = _523 - _497;
      float _526 = _485 - _515;
      float _529 = _496 - (_515 * 0.28867512941360474f);
      float _533 = (_519 - _523) * 15.0f;
      float _534 = (_513 - _485) * -7.5f;
      float _536 = rsqrt(dot(float2(_533, _534), float2(_533, _534)));
      float _545 = (_524 - _529) * 15.0f;
      float _546 = (_515 - _491) * -7.5f;
      float _548 = rsqrt(dot(float2(_545, _546), float2(_545, _546)));
      float _557 = (_529 - _520) * 15.0f;
      float _558 = (_526 - _516) * -7.5f;
      float _560 = rsqrt(dot(float2(_557, _558), float2(_557, _558)));
      float _573 = _500 + -0.5f;
      float _574 = _501 + -0.5f;
      float _621 = _26 + -0.5f;
      float _622 = _27 + -0.5f;
      float _629 = ((frame_consts.time - sqrt((_622 * _622) + (_621 * _621))) + (frac(sin(dot(float2((_500 * 5.0f), (_501 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _633 = frac(abs(_629));
      float _637 = max((select((_629 >= (-0.0f - _629)), _633, (-0.0f - _633)) * 18.0f), 0.0f);
      float _653 = min(max((1.0f - (((((_637 * 1.600000023841858f) * exp2(1.4426950216293335f - (_637 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_574 * _574) + (_573 * _573)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_500 * 3.0f), (_501 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_500, _501), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_500 * 2.0f), (_501 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _659 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_516 * 7.5f) - _480), ((_520 * 15.0f) - _481)), float2((_533 * _536), (_536 * _534))))), abs(dot(float2((_493 - _480), ((_524 * 15.0f) - _481)), float2((_548 * _545), (_548 * _546))))), abs(dot(float2(((_526 * 7.5f) - _480), ((_529 * 15.0f) - _481)), float2((_560 * _557), (_560 * _558))))) * 0.2309400886297226f)) - _653) / ((_653 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _664 = (_659 * _470);
      _665 = (_659 * _471);
      _666 = (_659 * _472);
    } while (false);
  } else {
    _664 = _470;
    _665 = _471;
    _666 = _472;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _674 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _674 = 0.0f;
  }
  float _681 = frame_consts.params.vignette.intensity + _674;
  float _684 = _16 / _17;
  float _696 = exp2(log2(saturate((_681 * abs(_26 + -0.5f)) * (((_684 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _697 = exp2(log2(saturate(_681 * abs(_27 + -0.5f))) * 5.0f);
  float _703 = exp2(log2(saturate(1.0f - dot(float2(_696, _697), float2(_696, _697)))) * 6.0f);
  float _708 = 1.0f - _703;
  float _710 = 1.0f - (_708 * 0.8500000238418579f);
  float _717 = (_710 * (_664 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _718 = (_710 * (_665 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _719 = (_710 * (_666 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _723 = _26 * _16;
  float _724 = _27 * _17;
  float _725 = _724 + _723;
  float _731 = frac(_725 * 0.0033333334140479565f) + -0.5f;
  float _732 = frac((_724 - _723) * 0.0033333334140479565f) + -0.5f;
  float _738 = saturate(sqrt((_732 * _732) + (_731 * _731)) * 2.0f);
  float _749 = saturate((sin((_725 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _754 = ((_749 * _749) * 0.2199999988079071f) * (3.0f - (_749 * 2.0f));
  float _755 = _754 + 0.9777389168739319f;
  float _756 = ((_738 * 0.13274884223937988f) + 0.7175776362419128f) + _754;
  float _757 = ((_738 * 0.3335757553577423f) + 0.30871906876564026f) + _754;
  float _762 = (_26 * 1080.0f) * _684;
  float _763 = _27 * 1080.0f;
  float _764 = _762 * 0.04444444552063942f;
  float _765 = _27 * 27.712812423706055f;
  float _767 = ceil(_764 - _765);
  float _770 = floor(_27 * 55.42562484741211f) + 1.0f;
  float _773 = ceil((-0.0f - _765) - _764);
  float _775 = (_770 + _767) + _773;
  float _777 = (_775 * 22.5f) + -33.75f;
  float _778 = _767 - _773;
  float _780 = _778 * 11.25f;
  float _786 = (((_770 * 0.5773502588272095f) - (_767 * 0.28867512941360474f)) - (_773 * 0.28867512941360474f)) * 22.5f;
  float _789 = _777 + _780;
  float _790 = _786 + (19.485570907592773f - (_775 * 12.990381240844727f));
  float _793 = ((_775 * 25.980762481689453f) + -38.97114181518555f) + _786;
  float _794 = _780 - _777;
  float _795 = _789 - _762;
  float _796 = _790 - _763;
  float _799 = _780 - _762;
  float _800 = _793 - _763;
  float _805 = _796 * _796;
  float _812 = _794 - _762;
  float _816 = _790 * 2.5f;
  float _817 = frame_consts.time * 1.5f;
  float _821 = _790 * 0.004444444552063942f;
  float _822 = frame_consts.time * 0.15000000596046448f;
  float _823 = (_789 * 0.04444444552063942f) - _822;
  float _824 = _821 - _822;
  float _825 = frame_consts.time * 0.02500000037252903f;
  float _826 = dot(float3(_823, _824, _825), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _830 = floor(_826 + _823);
  float _831 = floor(_826 + _824);
  float _832 = floor(_826 + _825);
  float _836 = dot(float3(_830, _831, _832), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _837 = _836 + (_823 - _830);
  float _838 = _836 + (_824 - _831);
  float _839 = (_825 - _832) + _836;
  float _843 = select((_837 < _838), 0.0f, 1.0f);
  float _844 = select((_838 < _839), 0.0f, 1.0f);
  float _845 = select((_839 < _837), 0.0f, 1.0f);
  float _846 = 1.0f - _843;
  float _847 = 1.0f - _844;
  float _848 = 1.0f - _845;
  float _849 = min(_843, _848);
  float _850 = min(_844, _846);
  float _851 = min(_845, _847);
  float _852 = max(_843, _848);
  float _853 = max(_844, _846);
  float _854 = max(_845, _847);
  float _858 = (_837 - _849) + 0.1666666716337204f;
  float _859 = (_838 - _850) + 0.1666666716337204f;
  float _860 = (_839 - _851) + 0.1666666716337204f;
  float _864 = (_837 - _852) + 0.3333333432674408f;
  float _865 = (_838 - _853) + 0.3333333432674408f;
  float _866 = (_839 - _854) + 0.3333333432674408f;
  float _867 = _837 + -0.5f;
  float _868 = _838 + -0.5f;
  float _869 = _839 + -0.5f;
  float _879 = _830 - (floor(_830 * 0.0034602077212184668f) * 289.0f);
  float _880 = _831 - (floor(_831 * 0.0034602077212184668f) * 289.0f);
  float _881 = _832 - (floor(_832 * 0.0034602077212184668f) * 289.0f);
  float _882 = _881 + _851;
  float _883 = _881 + _854;
  float _884 = _881 + 1.0f;
  float _893 = ((_881 * 34.0f) + 1.0f) * _881;
  float _894 = ((_882 * 34.0f) + 1.0f) * _882;
  float _895 = ((_883 * 34.0f) + 1.0f) * _883;
  float _896 = ((_884 * 34.0f) + 1.0f) * _884;
  float _910 = (_893 - (floor(_893 * 0.0034602077212184668f) * 289.0f)) + _880;
  float _913 = ((_880 + _850) - (floor(_894 * 0.0034602077212184668f) * 289.0f)) + _894;
  float _916 = ((_880 + _853) - (floor(_895 * 0.0034602077212184668f) * 289.0f)) + _895;
  float _919 = ((_880 + 1.0f) - (floor(_896 * 0.0034602077212184668f) * 289.0f)) + _896;
  float _928 = ((_910 * 34.0f) + 1.0f) * _910;
  float _929 = ((_913 * 34.0f) + 1.0f) * _913;
  float _930 = ((_916 * 34.0f) + 1.0f) * _916;
  float _931 = ((_919 * 34.0f) + 1.0f) * _919;
  float _945 = (_928 - (floor(_928 * 0.0034602077212184668f) * 289.0f)) + _879;
  float _948 = ((_879 + _849) - (floor(_929 * 0.0034602077212184668f) * 289.0f)) + _929;
  float _951 = ((_879 + _852) - (floor(_930 * 0.0034602077212184668f) * 289.0f)) + _930;
  float _954 = ((_879 + 1.0f) - (floor(_931 * 0.0034602077212184668f) * 289.0f)) + _931;
  float _963 = ((_945 * 34.0f) + 1.0f) * _945;
  float _964 = ((_948 * 34.0f) + 1.0f) * _948;
  float _965 = ((_951 * 34.0f) + 1.0f) * _951;
  float _966 = ((_954 * 34.0f) + 1.0f) * _954;
  float _979 = _963 - (floor(_963 * 0.0034602077212184668f) * 289.0f);
  float _980 = _964 - (floor(_964 * 0.0034602077212184668f) * 289.0f);
  float _981 = _965 - (floor(_965 * 0.0034602077212184668f) * 289.0f);
  float _982 = _966 - (floor(_966 * 0.0034602077212184668f) * 289.0f);
  float _995 = _979 - (floor(_979 * 0.020408164709806442f) * 49.0f);
  float _996 = _980 - (floor(_980 * 0.020408164709806442f) * 49.0f);
  float _997 = _981 - (floor(_981 * 0.020408164709806442f) * 49.0f);
  float _998 = _982 - (floor(_982 * 0.020408164709806442f) * 49.0f);
  float _1003 = floor(_995 * 0.1428571492433548f);
  float _1004 = floor(_996 * 0.1428571492433548f);
  float _1005 = floor(_997 * 0.1428571492433548f);
  float _1006 = floor(_998 * 0.1428571492433548f);
  float _1023 = (_1003 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1024 = (_1004 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1025 = (_1005 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1026 = (_1006 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1031 = (floor(_995 - (_1003 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1032 = (floor(_996 - (_1004 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1033 = (floor(_997 - (_1005 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1034 = (floor(_998 - (_1006 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1047 = (1.0f - abs(_1023)) - abs(_1031);
  float _1048 = (1.0f - abs(_1024)) - abs(_1032);
  float _1049 = (1.0f - abs(_1025)) - abs(_1033);
  float _1050 = (1.0f - abs(_1026)) - abs(_1034);
  float _1079 = select((_1047 > 0.0f), -0.0f, -1.0f);
  float _1080 = select((_1048 > 0.0f), -0.0f, -1.0f);
  float _1081 = select((_1049 > 0.0f), -0.0f, -1.0f);
  float _1082 = select((_1050 > 0.0f), -0.0f, -1.0f);
  float _1087 = (((floor(_1023) * 2.0f) + 1.0f) * _1079) + _1023;
  float _1088 = (((floor(_1031) * 2.0f) + 1.0f) * _1079) + _1031;
  float _1089 = (((floor(_1024) * 2.0f) + 1.0f) * _1080) + _1024;
  float _1090 = (((floor(_1032) * 2.0f) + 1.0f) * _1080) + _1032;
  float _1095 = (((floor(_1025) * 2.0f) + 1.0f) * _1081) + _1025;
  float _1096 = (((floor(_1033) * 2.0f) + 1.0f) * _1081) + _1033;
  float _1097 = (((floor(_1026) * 2.0f) + 1.0f) * _1082) + _1026;
  float _1098 = (((floor(_1034) * 2.0f) + 1.0f) * _1082) + _1034;
  float _1107 = 1.7928400039672852f - (dot(float3(_1087, _1088, _1047), float3(_1087, _1088, _1047)) * 0.8537350296974182f);
  float _1108 = 1.7928400039672852f - (dot(float3(_1089, _1090, _1048), float3(_1089, _1090, _1048)) * 0.8537350296974182f);
  float _1109 = 1.7928400039672852f - (dot(float3(_1095, _1096, _1049), float3(_1095, _1096, _1049)) * 0.8537350296974182f);
  float _1110 = 1.7928400039672852f - (dot(float3(_1097, _1098, _1050), float3(_1097, _1098, _1050)) * 0.8537350296974182f);
  float _1131 = max((0.6000000238418579f - dot(float3(_837, _838, _839), float3(_837, _838, _839))), 0.0f);
  float _1132 = max((0.6000000238418579f - dot(float3(_858, _859, _860), float3(_858, _859, _860))), 0.0f);
  float _1133 = max((0.6000000238418579f - dot(float3(_864, _865, _866), float3(_864, _865, _866))), 0.0f);
  float _1134 = max((0.6000000238418579f - dot(float3(_867, _868, _869), float3(_867, _868, _869))), 0.0f);
  float _1135 = _1131 * _1131;
  float _1136 = _1132 * _1132;
  float _1137 = _1133 * _1133;
  float _1138 = _1134 * _1134;
  float _1153 = saturate((((sin(_816 - _817) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1135 * _1135), (_1136 * _1136), (_1137 * _1137), (_1138 * _1138)), float4(dot(float3((_1107 * _1087), (_1107 * _1088), (_1107 * _1047)), float3(_837, _838, _839)), dot(float3((_1108 * _1089), (_1108 * _1090), (_1108 * _1048)), float3(_858, _859, _860)), dot(float3((_1109 * _1095), (_1109 * _1096), (_1109 * _1049)), float3(_864, _865, _866)), dot(float3((_1110 * _1097), (_1110 * _1098), (_1110 * _1050)), float3(_867, _868, _869)))) * 21.0f)) * 4.0f);
  float _1157 = (_1153 * _1153) * (3.0f - (_1153 * 2.0f));
  float _1159 = (_1157 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1164 = (_778 * 0.5f) - _822;
  float _1165 = (_793 * 0.004444444552063942f) - _822;
  float _1166 = dot(float3(_1164, _1165, _825), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1170 = floor(_1166 + _1164);
  float _1171 = floor(_1166 + _1165);
  float _1172 = floor(_1166 + _825);
  float _1176 = dot(float3(_1170, _1171, _1172), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1177 = _1176 + (_1164 - _1170);
  float _1178 = _1176 + (_1165 - _1171);
  float _1179 = (_825 - _1172) + _1176;
  float _1183 = select((_1177 < _1178), 0.0f, 1.0f);
  float _1184 = select((_1178 < _1179), 0.0f, 1.0f);
  float _1185 = select((_1179 < _1177), 0.0f, 1.0f);
  float _1186 = 1.0f - _1183;
  float _1187 = 1.0f - _1184;
  float _1188 = 1.0f - _1185;
  float _1189 = min(_1183, _1188);
  float _1190 = min(_1184, _1186);
  float _1191 = min(_1185, _1187);
  float _1192 = max(_1183, _1188);
  float _1193 = max(_1184, _1186);
  float _1194 = max(_1185, _1187);
  float _1198 = (_1177 - _1189) + 0.1666666716337204f;
  float _1199 = (_1178 - _1190) + 0.1666666716337204f;
  float _1200 = (_1179 - _1191) + 0.1666666716337204f;
  float _1204 = (_1177 - _1192) + 0.3333333432674408f;
  float _1205 = (_1178 - _1193) + 0.3333333432674408f;
  float _1206 = (_1179 - _1194) + 0.3333333432674408f;
  float _1207 = _1177 + -0.5f;
  float _1208 = _1178 + -0.5f;
  float _1209 = _1179 + -0.5f;
  float _1219 = _1170 - (floor(_1170 * 0.0034602077212184668f) * 289.0f);
  float _1220 = _1171 - (floor(_1171 * 0.0034602077212184668f) * 289.0f);
  float _1221 = _1172 - (floor(_1172 * 0.0034602077212184668f) * 289.0f);
  float _1222 = _1221 + _1191;
  float _1223 = _1221 + _1194;
  float _1224 = _1221 + 1.0f;
  float _1233 = ((_1221 * 34.0f) + 1.0f) * _1221;
  float _1234 = ((_1222 * 34.0f) + 1.0f) * _1222;
  float _1235 = ((_1223 * 34.0f) + 1.0f) * _1223;
  float _1236 = ((_1224 * 34.0f) + 1.0f) * _1224;
  float _1250 = (_1233 - (floor(_1233 * 0.0034602077212184668f) * 289.0f)) + _1220;
  float _1253 = ((_1220 + _1190) - (floor(_1234 * 0.0034602077212184668f) * 289.0f)) + _1234;
  float _1256 = ((_1220 + _1193) - (floor(_1235 * 0.0034602077212184668f) * 289.0f)) + _1235;
  float _1259 = ((_1220 + 1.0f) - (floor(_1236 * 0.0034602077212184668f) * 289.0f)) + _1236;
  float _1268 = ((_1250 * 34.0f) + 1.0f) * _1250;
  float _1269 = ((_1253 * 34.0f) + 1.0f) * _1253;
  float _1270 = ((_1256 * 34.0f) + 1.0f) * _1256;
  float _1271 = ((_1259 * 34.0f) + 1.0f) * _1259;
  float _1285 = (_1268 - (floor(_1268 * 0.0034602077212184668f) * 289.0f)) + _1219;
  float _1288 = ((_1219 + _1189) - (floor(_1269 * 0.0034602077212184668f) * 289.0f)) + _1269;
  float _1291 = ((_1219 + _1192) - (floor(_1270 * 0.0034602077212184668f) * 289.0f)) + _1270;
  float _1294 = ((_1219 + 1.0f) - (floor(_1271 * 0.0034602077212184668f) * 289.0f)) + _1271;
  float _1303 = ((_1285 * 34.0f) + 1.0f) * _1285;
  float _1304 = ((_1288 * 34.0f) + 1.0f) * _1288;
  float _1305 = ((_1291 * 34.0f) + 1.0f) * _1291;
  float _1306 = ((_1294 * 34.0f) + 1.0f) * _1294;
  float _1319 = _1303 - (floor(_1303 * 0.0034602077212184668f) * 289.0f);
  float _1320 = _1304 - (floor(_1304 * 0.0034602077212184668f) * 289.0f);
  float _1321 = _1305 - (floor(_1305 * 0.0034602077212184668f) * 289.0f);
  float _1322 = _1306 - (floor(_1306 * 0.0034602077212184668f) * 289.0f);
  float _1335 = _1319 - (floor(_1319 * 0.020408164709806442f) * 49.0f);
  float _1336 = _1320 - (floor(_1320 * 0.020408164709806442f) * 49.0f);
  float _1337 = _1321 - (floor(_1321 * 0.020408164709806442f) * 49.0f);
  float _1338 = _1322 - (floor(_1322 * 0.020408164709806442f) * 49.0f);
  float _1343 = floor(_1335 * 0.1428571492433548f);
  float _1344 = floor(_1336 * 0.1428571492433548f);
  float _1345 = floor(_1337 * 0.1428571492433548f);
  float _1346 = floor(_1338 * 0.1428571492433548f);
  float _1363 = (_1343 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1364 = (_1344 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1365 = (_1345 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1366 = (_1346 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1371 = (floor(_1335 - (_1343 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1372 = (floor(_1336 - (_1344 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1373 = (floor(_1337 - (_1345 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1374 = (floor(_1338 - (_1346 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1387 = (1.0f - abs(_1363)) - abs(_1371);
  float _1388 = (1.0f - abs(_1364)) - abs(_1372);
  float _1389 = (1.0f - abs(_1365)) - abs(_1373);
  float _1390 = (1.0f - abs(_1366)) - abs(_1374);
  float _1419 = select((_1387 > 0.0f), -0.0f, -1.0f);
  float _1420 = select((_1388 > 0.0f), -0.0f, -1.0f);
  float _1421 = select((_1389 > 0.0f), -0.0f, -1.0f);
  float _1422 = select((_1390 > 0.0f), -0.0f, -1.0f);
  float _1427 = (((floor(_1363) * 2.0f) + 1.0f) * _1419) + _1363;
  float _1428 = (((floor(_1371) * 2.0f) + 1.0f) * _1419) + _1371;
  float _1429 = (((floor(_1364) * 2.0f) + 1.0f) * _1420) + _1364;
  float _1430 = (((floor(_1372) * 2.0f) + 1.0f) * _1420) + _1372;
  float _1435 = (((floor(_1365) * 2.0f) + 1.0f) * _1421) + _1365;
  float _1436 = (((floor(_1373) * 2.0f) + 1.0f) * _1421) + _1373;
  float _1437 = (((floor(_1366) * 2.0f) + 1.0f) * _1422) + _1366;
  float _1438 = (((floor(_1374) * 2.0f) + 1.0f) * _1422) + _1374;
  float _1447 = 1.7928400039672852f - (dot(float3(_1427, _1428, _1387), float3(_1427, _1428, _1387)) * 0.8537350296974182f);
  float _1448 = 1.7928400039672852f - (dot(float3(_1429, _1430, _1388), float3(_1429, _1430, _1388)) * 0.8537350296974182f);
  float _1449 = 1.7928400039672852f - (dot(float3(_1435, _1436, _1389), float3(_1435, _1436, _1389)) * 0.8537350296974182f);
  float _1450 = 1.7928400039672852f - (dot(float3(_1437, _1438, _1390), float3(_1437, _1438, _1390)) * 0.8537350296974182f);
  float _1471 = max((0.6000000238418579f - dot(float3(_1177, _1178, _1179), float3(_1177, _1178, _1179))), 0.0f);
  float _1472 = max((0.6000000238418579f - dot(float3(_1198, _1199, _1200), float3(_1198, _1199, _1200))), 0.0f);
  float _1473 = max((0.6000000238418579f - dot(float3(_1204, _1205, _1206), float3(_1204, _1205, _1206))), 0.0f);
  float _1474 = max((0.6000000238418579f - dot(float3(_1207, _1208, _1209), float3(_1207, _1208, _1209))), 0.0f);
  float _1475 = _1471 * _1471;
  float _1476 = _1472 * _1472;
  float _1477 = _1473 * _1473;
  float _1478 = _1474 * _1474;
  float _1493 = saturate((((sin((_793 * 2.5f) - _817) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1475 * _1475), (_1476 * _1476), (_1477 * _1477), (_1478 * _1478)), float4(dot(float3((_1447 * _1427), (_1447 * _1428), (_1447 * _1387)), float3(_1177, _1178, _1179)), dot(float3((_1448 * _1429), (_1448 * _1430), (_1448 * _1388)), float3(_1198, _1199, _1200)), dot(float3((_1449 * _1435), (_1449 * _1436), (_1449 * _1389)), float3(_1204, _1205, _1206)), dot(float3((_1450 * _1437), (_1450 * _1438), (_1450 * _1390)), float3(_1207, _1208, _1209)))) * 21.0f)) * 4.0f);
  float _1497 = (_1493 * _1493) * (3.0f - (_1493 * 2.0f));
  float _1499 = (_1497 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1506 = frame_consts.time * 0.15000000596046448f;
  float _1507 = (_794 * 0.04444444552063942f) - _1506;
  float _1508 = _821 - _1506;
  float _1509 = frame_consts.time * 0.02500000037252903f;
  float _1510 = dot(float3(_1507, _1508, _1509), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1514 = floor(_1507 + _1510);
  float _1515 = floor(_1508 + _1510);
  float _1516 = floor(_1509 + _1510);
  float _1520 = dot(float3(_1514, _1515, _1516), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1521 = _1520 + (_1507 - _1514);
  float _1522 = _1520 + (_1508 - _1515);
  float _1523 = (_1509 - _1516) + _1520;
  float _1527 = select((_1521 < _1522), 0.0f, 1.0f);
  float _1528 = select((_1522 < _1523), 0.0f, 1.0f);
  float _1529 = select((_1523 < _1521), 0.0f, 1.0f);
  float _1530 = 1.0f - _1527;
  float _1531 = 1.0f - _1528;
  float _1532 = 1.0f - _1529;
  float _1533 = min(_1527, _1532);
  float _1534 = min(_1528, _1530);
  float _1535 = min(_1529, _1531);
  float _1536 = max(_1527, _1532);
  float _1537 = max(_1528, _1530);
  float _1538 = max(_1529, _1531);
  float _1542 = (_1521 - _1533) + 0.1666666716337204f;
  float _1543 = (_1522 - _1534) + 0.1666666716337204f;
  float _1544 = (_1523 - _1535) + 0.1666666716337204f;
  float _1548 = (_1521 - _1536) + 0.3333333432674408f;
  float _1549 = (_1522 - _1537) + 0.3333333432674408f;
  float _1550 = (_1523 - _1538) + 0.3333333432674408f;
  float _1551 = _1521 + -0.5f;
  float _1552 = _1522 + -0.5f;
  float _1553 = _1523 + -0.5f;
  float _1563 = _1514 - (floor(_1514 * 0.0034602077212184668f) * 289.0f);
  float _1564 = _1515 - (floor(_1515 * 0.0034602077212184668f) * 289.0f);
  float _1565 = _1516 - (floor(_1516 * 0.0034602077212184668f) * 289.0f);
  float _1566 = _1565 + _1535;
  float _1567 = _1565 + _1538;
  float _1568 = _1565 + 1.0f;
  float _1577 = ((_1565 * 34.0f) + 1.0f) * _1565;
  float _1578 = ((_1566 * 34.0f) + 1.0f) * _1566;
  float _1579 = ((_1567 * 34.0f) + 1.0f) * _1567;
  float _1580 = ((_1568 * 34.0f) + 1.0f) * _1568;
  float _1594 = (_1577 - (floor(_1577 * 0.0034602077212184668f) * 289.0f)) + _1564;
  float _1597 = ((_1564 + _1534) - (floor(_1578 * 0.0034602077212184668f) * 289.0f)) + _1578;
  float _1600 = ((_1564 + _1537) - (floor(_1579 * 0.0034602077212184668f) * 289.0f)) + _1579;
  float _1603 = ((_1564 + 1.0f) - (floor(_1580 * 0.0034602077212184668f) * 289.0f)) + _1580;
  float _1612 = ((_1594 * 34.0f) + 1.0f) * _1594;
  float _1613 = ((_1597 * 34.0f) + 1.0f) * _1597;
  float _1614 = ((_1600 * 34.0f) + 1.0f) * _1600;
  float _1615 = ((_1603 * 34.0f) + 1.0f) * _1603;
  float _1629 = (_1612 - (floor(_1612 * 0.0034602077212184668f) * 289.0f)) + _1563;
  float _1632 = ((_1563 + _1533) - (floor(_1613 * 0.0034602077212184668f) * 289.0f)) + _1613;
  float _1635 = ((_1563 + _1536) - (floor(_1614 * 0.0034602077212184668f) * 289.0f)) + _1614;
  float _1638 = ((_1563 + 1.0f) - (floor(_1615 * 0.0034602077212184668f) * 289.0f)) + _1615;
  float _1647 = ((_1629 * 34.0f) + 1.0f) * _1629;
  float _1648 = ((_1632 * 34.0f) + 1.0f) * _1632;
  float _1649 = ((_1635 * 34.0f) + 1.0f) * _1635;
  float _1650 = ((_1638 * 34.0f) + 1.0f) * _1638;
  float _1663 = _1647 - (floor(_1647 * 0.0034602077212184668f) * 289.0f);
  float _1664 = _1648 - (floor(_1648 * 0.0034602077212184668f) * 289.0f);
  float _1665 = _1649 - (floor(_1649 * 0.0034602077212184668f) * 289.0f);
  float _1666 = _1650 - (floor(_1650 * 0.0034602077212184668f) * 289.0f);
  float _1679 = _1663 - (floor(_1663 * 0.020408164709806442f) * 49.0f);
  float _1680 = _1664 - (floor(_1664 * 0.020408164709806442f) * 49.0f);
  float _1681 = _1665 - (floor(_1665 * 0.020408164709806442f) * 49.0f);
  float _1682 = _1666 - (floor(_1666 * 0.020408164709806442f) * 49.0f);
  float _1687 = floor(_1679 * 0.1428571492433548f);
  float _1688 = floor(_1680 * 0.1428571492433548f);
  float _1689 = floor(_1681 * 0.1428571492433548f);
  float _1690 = floor(_1682 * 0.1428571492433548f);
  float _1707 = (_1687 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1708 = (_1688 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1709 = (_1689 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1710 = (_1690 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1715 = (floor(_1679 - (_1687 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1716 = (floor(_1680 - (_1688 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1717 = (floor(_1681 - (_1689 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1718 = (floor(_1682 - (_1690 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1731 = (1.0f - abs(_1707)) - abs(_1715);
  float _1732 = (1.0f - abs(_1708)) - abs(_1716);
  float _1733 = (1.0f - abs(_1709)) - abs(_1717);
  float _1734 = (1.0f - abs(_1710)) - abs(_1718);
  float _1763 = select((_1731 > 0.0f), -0.0f, -1.0f);
  float _1764 = select((_1732 > 0.0f), -0.0f, -1.0f);
  float _1765 = select((_1733 > 0.0f), -0.0f, -1.0f);
  float _1766 = select((_1734 > 0.0f), -0.0f, -1.0f);
  float _1771 = (((floor(_1707) * 2.0f) + 1.0f) * _1763) + _1707;
  float _1772 = (((floor(_1715) * 2.0f) + 1.0f) * _1763) + _1715;
  float _1773 = (((floor(_1708) * 2.0f) + 1.0f) * _1764) + _1708;
  float _1774 = (((floor(_1716) * 2.0f) + 1.0f) * _1764) + _1716;
  float _1779 = (((floor(_1709) * 2.0f) + 1.0f) * _1765) + _1709;
  float _1780 = (((floor(_1717) * 2.0f) + 1.0f) * _1765) + _1717;
  float _1781 = (((floor(_1710) * 2.0f) + 1.0f) * _1766) + _1710;
  float _1782 = (((floor(_1718) * 2.0f) + 1.0f) * _1766) + _1718;
  float _1791 = 1.7928400039672852f - (dot(float3(_1771, _1772, _1731), float3(_1771, _1772, _1731)) * 0.8537350296974182f);
  float _1792 = 1.7928400039672852f - (dot(float3(_1773, _1774, _1732), float3(_1773, _1774, _1732)) * 0.8537350296974182f);
  float _1793 = 1.7928400039672852f - (dot(float3(_1779, _1780, _1733), float3(_1779, _1780, _1733)) * 0.8537350296974182f);
  float _1794 = 1.7928400039672852f - (dot(float3(_1781, _1782, _1734), float3(_1781, _1782, _1734)) * 0.8537350296974182f);
  float _1815 = max((0.6000000238418579f - dot(float3(_1521, _1522, _1523), float3(_1521, _1522, _1523))), 0.0f);
  float _1816 = max((0.6000000238418579f - dot(float3(_1542, _1543, _1544), float3(_1542, _1543, _1544))), 0.0f);
  float _1817 = max((0.6000000238418579f - dot(float3(_1548, _1549, _1550), float3(_1548, _1549, _1550))), 0.0f);
  float _1818 = max((0.6000000238418579f - dot(float3(_1551, _1552, _1553), float3(_1551, _1552, _1553))), 0.0f);
  float _1819 = _1815 * _1815;
  float _1820 = _1816 * _1816;
  float _1821 = _1817 * _1817;
  float _1822 = _1818 * _1818;
  float _1837 = saturate((((sin(_816 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1819 * _1819), (_1820 * _1820), (_1821 * _1821), (_1822 * _1822)), float4(dot(float3((_1791 * _1771), (_1791 * _1772), (_1791 * _1731)), float3(_1521, _1522, _1523)), dot(float3((_1792 * _1773), (_1792 * _1774), (_1792 * _1732)), float3(_1542, _1543, _1544)), dot(float3((_1793 * _1779), (_1793 * _1780), (_1793 * _1733)), float3(_1548, _1549, _1550)), dot(float3((_1794 * _1781), (_1794 * _1782), (_1794 * _1734)), float3(_1551, _1552, _1553)))) * 21.0f)) * 4.0f);
  float _1841 = (_1837 * _1837) * (3.0f - (_1837 * 2.0f));
  float _1843 = (_1841 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1865 = saturate(_1159);
  float _1866 = saturate(_1499);
  float _1888 = (((_703 * 1.2000000476837158f) * _708) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_800 * _800) + (_799 * _799)) / ((_1497 * 0.039000000804662704f) + 0.08100000768899918f))) * _1499) + (saturate(11.0f - (sqrt((_795 * _795) + _805) / ((_1157 * 0.039000000804662704f) + 0.08100000768899918f))) * _1159)) + (saturate(11.0f - (sqrt((_812 * _812) + _805) / ((_1841 * 0.039000000804662704f) + 0.08100000768899918f))) * _1843)) + (((((saturate(1.0f - (abs(_796) * 0.8333333134651184f)) * _1865) + (saturate(1.0f - (abs(dot(float2(_799, _800), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1866)) * saturate(_1843)) + ((_1865 * saturate(1.0f - (abs(dot(float2(_795, _796), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1866)) * 0.5f));
  float _1895 = (_1888 * ((_755 * _755) - _717)) + _717;
  float _1896 = (_1888 * ((_756 * _756) - _718)) + _718;
  float _1897 = (_1888 * ((_757 * _757) - _719)) + _719;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1906 = ((_1895 * 0.3930000066757202f) + (_1896 * 0.7689999938011169f)) + (_1897 * 0.1889999955892563f);
    float _1911 = ((_1895 * 0.3490000069141388f) + (_1896 * 0.6859999895095825f)) + (_1897 * 0.1679999977350235f);
    float _1916 = ((_1895 * 0.2720000147819519f) + (_1896 * 0.5339999794960022f)) + (_1897 * 0.13099999725818634f);
    float _1917 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1922 = ((_1895 * 0.2125999927520752f) + (_1896 * 0.7152000069618225f)) + (_1897 * 0.0722000002861023f);
    _1942 = ((((_1906 - _1895) + ((_1922 - _1906) * 0.6499999761581421f)) * _1917) + _1895);
    _1943 = ((((_1911 - _1896) + ((_1922 - _1911) * 0.6499999761581421f)) * _1917) + _1896);
    _1944 = ((((_1916 - _1897) + ((_1922 - _1916) * 0.6499999761581421f)) * _1917) + _1897);
  } else {
    _1942 = _1895;
    _1943 = _1896;
    _1944 = _1897;
  }
  if (!(frame_consts.invert == 0)) {
    _1953 = (1.0f - _1942);
    _1954 = (1.0f - _1943);
    _1955 = (1.0f - _1944);
  } else {
    _1953 = _1942;
    _1954 = _1943;
    _1955 = _1944;
  }
  SV_Target.x = _1953;
  SV_Target.y = _1954;
  SV_Target.z = _1955;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
