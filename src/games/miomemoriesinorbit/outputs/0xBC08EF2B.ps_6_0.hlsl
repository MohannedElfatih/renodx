#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float2> distortion : register(t4);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float2 _17 = distortion.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _20 = _16 / _15;
  float _25 = saturate((_17.x * _20) + O_Uv.x);
  float _26 = saturate((_17.y * _20) + O_Uv.y);
  float _58;
  float _59;
  float _60;
  float _61;
  float _224;
  float _235;
  float _246;
  float _269;
  float _270;
  float _271;
  float _396;
  float _397;
  float _398;
  float _439;
  float _440;
  float _441;
  float _590;
  float _591;
  float _592;
  float _600;
  float _1868;
  float _1869;
  float _1870;
  float _1879;
  float _1880;
  float _1881;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _33 = abs(_25 + -0.5f);
    float _34 = abs(_26 + -0.5f);
    float _38 = (rsqrt(dot(float2(_33, _34), float2(_33, _34))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _39 = _38 * _33;
    float _40 = _38 * _34;
    float4 _43 = tex.SampleLevel(sampler_nearest, float2((_39 + _25), (_40 + _26)), 0.0f);
    float4 _45 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    float4 _49 = tex.SampleLevel(sampler_nearest, float2((_25 - _39), (_26 - _40)), 0.0f);
    _58 = _43.x;
    _59 = _45.y;
    _60 = _49.z;
    _61 = 0.5f;
  } else {
    float4 _52 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    _58 = _52.x;
    _59 = _52.y;
    _60 = _52.z;
    _61 = _52.w;
  }
  float3 untonemapped = float3(_58, _59, _60);

  float3 _62 = bloom_tex.SampleLevel(sampler_bilinear, float2(_25, _26), 0.0f);
  float _77 = max((((1.0f - (_58 * 0.2125999927520752f)) - (_59 * 0.7152000069618225f)) - (_60 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _81 = (_58 / _77) + (frame_consts.params.bloom.intensity * _62.x);
  float _82 = (_59 / _77) + (frame_consts.params.bloom.intensity * _62.y);
  float _83 = (_60 / _77) + (frame_consts.params.bloom.intensity * _62.z);
  float _89 = (((_81 * 0.2125999927520752f) + 1.0f) + (_82 * 0.7152000069618225f)) + (_83 * 0.0722000002861023f);
  float _93 = saturate(_81 / _89);
  float _94 = saturate(_82 / _89);
  float _95 = saturate(_83 / _89);
  if (!(frame_consts.glitch == 0)) {
    float _103 = float((int)(int((_15 / _16) * 1080.0f)));
    float _104 = _103 * _25;
    float _105 = _26 * 1080.0f;
    float _106 = _103 * 0.5f;
    float _109 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _116 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _122 = ((_116 * 3.0f) * exp2(1.4426950216293335f - (_116 * 4.328084945678711f))) + ((_109 * 5.0f) * exp2(1.4426950216293335f - (_109 * 7.213475227355957f)));
    float _123 = _122 * 15.0f;
    float _124 = _123 + 30.0f;
    float _126 = (_122 * 20.0f) + 80.0f;
    float _130 = abs(_103 * (_25 + -0.5f));
    float _131 = abs(_105 + -540.0f);
    float _134 = ((_130 - _106) + _124) + _126;
    float _137 = ((_131 + -510.0f) + _123) + _126;
    float _140 = max(_134, 0.0f);
    float _141 = max(_137, 0.0f);
    float _155 = _130 - (_106 - _124);
    float _156 = _131 - (510.0f - _123);
    float _157 = max(_155, 0.0f);
    float _158 = max(_156, 0.0f);
    float _174 = max(max(0.0f, (1.0f - saturate(abs((min(max(_134, _137), 0.0f) - _126) + sqrt((_141 * _141) + (_140 * _140))) + -0.5f))), ((1.0f - saturate(abs(min(max(_155, _156), 0.0f) + sqrt((_158 * _158) + (_157 * _157))) + -0.5f)) * (1.0f - saturate(_122 * 1.6666666269302368f))));
    float _185 = frac((_104 + _105) * 0.0012499999720603228f) + -0.5f;
    float _186 = frac((_105 - _104) * 0.0012499999720603228f) + -0.5f;
    float _198 = saturate((sin((((_104 * 0.0003124999930150807f) + (_26 * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _202 = (_198 * _198) * (3.0f - (_198 * 2.0f));
    float _204 = saturate(sqrt((_186 * _186) + (_185 * _185)) * 2.0f);
    float _209 = _202 * 0.20000000298023224f;
    float _211 = ((_204 * 0.12156862020492554f) + 0.7450979948043823f) + _209;
    float _212 = ((_204 * 0.3333333134651184f) + 0.34117645025253296f) + _209;
    do {
      if (!(!((_209 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _224 = ((_202 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _224 = exp2(log2((_202 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_211 <= 0.040449999272823334f))) {
          _235 = (_211 * 0.07739938050508499f);
        } else {
          _235 = exp2(log2((_211 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_212 <= 0.040449999272823334f))) {
            _246 = (_212 * 0.07739938050508499f);
          } else {
            _246 = exp2(log2((_212 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _252 = (((_224 * 0.2125999927520752f) + 1.0f) + (_235 * 0.7152000069618225f)) + (_246 * 0.0722000002861023f);
          _269 = (((saturate(_224 / _252) - _93) * _174) + _93);
          _270 = (((saturate(_235 / _252) - _94) * _174) + _94);
          _271 = (((saturate(_246 / _252) - _95) * _174) + _95);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _269 = _93;
    _270 = _94;
    _271 = _95;
  }
  float _277 = depth_tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
  float _281 = 10000.0f / ((_277.x * 19999.5f) + 0.5f);
  float _286 = (_281 * ((_25 * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _288 = (_281 * (((1.0f - _26) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _289 = -0.0f - _281;
  float _313 = mad((frame_consts.paper_xf[2].z), _289, mad((frame_consts.paper_xf[1].z), _288, (_286 * (frame_consts.paper_xf[0].z))));
  float _314 = mad((frame_consts.paper_xf[2].x), _289, mad((frame_consts.paper_xf[1].x), _288, (_286 * (frame_consts.paper_xf[0].x)))) / _313;
  float _315 = mad((frame_consts.paper_xf[2].y), _289, mad((frame_consts.paper_xf[1].y), _288, (_286 * (frame_consts.paper_xf[0].y)))) / _313;
  float _327 = exp2(round(log2(max(5.0f, (-0.0f - (_313 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _329 = min((1.0f / _327), 0.20000000298023224f);
  float _330 = frame_consts.game_plane_blend.x - _327;
  float _337 = frame_consts.game_plane_blend.x + 10.0f;
  float _345 = exp2(round(log2(max(5.0f, (-0.0f - (_313 - _337)))) * 10.0f) * 0.10000000149011612f);
  float _347 = min((1.0f / _345), 0.20000000298023224f);
  float _348 = _337 - _345;
  float _355 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_330 * _314) + (frame_consts.paper_xf[3].x)) * _329), (((_330 * _315) + (frame_consts.paper_xf[3].y)) * _329)), 0.0f);
  float _358 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_348 * _314) + (frame_consts.paper_xf[3].x)) * _347), (((_348 * _315) + (frame_consts.paper_xf[3].y)) * _347)), 0.0f);
  float _365 = ((1.0f - (_355.x * (1.0f - frame_consts.game_plane_blend.y))) - (_358.x * frame_consts.game_plane_blend.y)) * frame_consts.paper_mult;
  float _369 = _269 - (_365 * _269);
  float _370 = _270 - (_365 * _270);
  float _371 = _271 - (_365 * _271);
  if (!(frame_consts.death_screen == 0)) {
    float _394 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _61), _61);
    _396 = _394;
    _397 = _394;
    _398 = _394;
  } else {
    _396 = (lerp(_369, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _397 = (lerp(_370, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _398 = (lerp(_371, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _406 = _25 * _15;
    float _407 = _26 * _16;
    float _408 = _406 * 0.06666667014360428f;
    float _409 = _407 * 0.038490019738674164f;
    float _411 = ceil(_408 - _409);
    float _413 = floor(_407 * 0.07698003947734833f);
    float _414 = _413 + 1.0f;
    float _417 = ceil((-0.0f - _408) - _409);
    float _419 = (_411 - _417) * 7.5f;
    float _420 = _411 * 0.28867512941360474f;
    float _421 = _414 * 0.5773502588272095f;
    float _422 = _421 - _420;
    float _423 = _417 * 0.28867512941360474f;
    float _426 = _419 / _15;
    float _427 = ((_422 - _423) * 15.0f) / _16;
    do {
      if (((_414 + _411) + _417) == 2.0f) {
        _439 = (_411 + 1.0f);
        _440 = (_413 + 2.0f);
        _441 = (_417 + 1.0f);
      } else {
        _439 = (_411 + -1.0f);
        _440 = _413;
        _441 = (_417 + -1.0f);
      }
      float _442 = _439 - _417;
      float _445 = _421 - (_439 * 0.28867512941360474f);
      float _446 = _445 - _423;
      float _449 = (_440 * 0.5773502588272095f) - _420;
      float _450 = _449 - _423;
      float _452 = _411 - _441;
      float _455 = _422 - (_441 * 0.28867512941360474f);
      float _459 = (_445 - _449) * 15.0f;
      float _460 = (_439 - _411) * -7.5f;
      float _462 = rsqrt(dot(float2(_459, _460), float2(_459, _460)));
      float _471 = (_450 - _455) * 15.0f;
      float _472 = (_441 - _417) * -7.5f;
      float _474 = rsqrt(dot(float2(_471, _472), float2(_471, _472)));
      float _483 = (_455 - _446) * 15.0f;
      float _484 = (_452 - _442) * -7.5f;
      float _486 = rsqrt(dot(float2(_483, _484), float2(_483, _484)));
      float _499 = _426 + -0.5f;
      float _500 = _427 + -0.5f;
      float _547 = _25 + -0.5f;
      float _548 = _26 + -0.5f;
      float _555 = ((frame_consts.time - sqrt((_548 * _548) + (_547 * _547))) + (frac(sin(dot(float2((_426 * 5.0f), (_427 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _559 = frac(abs(_555));
      float _563 = max((select((_555 >= (-0.0f - _555)), _559, (-0.0f - _559)) * 18.0f), 0.0f);
      float _579 = min(max((1.0f - (((((_563 * 1.600000023841858f) * exp2(1.4426950216293335f - (_563 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_500 * _500) + (_499 * _499)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_426 * 3.0f), (_427 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_426, _427), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_426 * 2.0f), (_427 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _585 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_442 * 7.5f) - _406), ((_446 * 15.0f) - _407)), float2((_459 * _462), (_462 * _460))))), abs(dot(float2((_419 - _406), ((_450 * 15.0f) - _407)), float2((_474 * _471), (_474 * _472))))), abs(dot(float2(((_452 * 7.5f) - _406), ((_455 * 15.0f) - _407)), float2((_486 * _483), (_486 * _484))))) * 0.2309400886297226f)) - _579) / ((_579 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _590 = (_585 * _396);
      _591 = (_585 * _397);
      _592 = (_585 * _398);
    } while (false);
  } else {
    _590 = _396;
    _591 = _397;
    _592 = _398;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _600 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _600 = 0.0f;
  }
  float _607 = frame_consts.params.vignette.intensity + _600;
  float _610 = _15 / _16;
  float _622 = exp2(log2(saturate((_607 * abs(_25 + -0.5f)) * (((_610 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _623 = exp2(log2(saturate(_607 * abs(_26 + -0.5f))) * 5.0f);
  float _629 = exp2(log2(saturate(1.0f - dot(float2(_622, _623), float2(_622, _623)))) * 6.0f);
  float _634 = 1.0f - _629;
  float _636 = 1.0f - (_634 * 0.8500000238418579f);
  float _643 = (_636 * (_590 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _644 = (_636 * (_591 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _645 = (_636 * (_592 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _649 = _25 * _15;
  float _650 = _26 * _16;
  float _651 = _650 + _649;
  float _657 = frac(_651 * 0.0033333334140479565f) + -0.5f;
  float _658 = frac((_650 - _649) * 0.0033333334140479565f) + -0.5f;
  float _664 = saturate(sqrt((_658 * _658) + (_657 * _657)) * 2.0f);
  float _675 = saturate((sin((_651 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _680 = ((_675 * _675) * 0.2199999988079071f) * (3.0f - (_675 * 2.0f));
  float _681 = _680 + 0.9777389168739319f;
  float _682 = ((_664 * 0.13274884223937988f) + 0.7175776362419128f) + _680;
  float _683 = ((_664 * 0.3335757553577423f) + 0.30871906876564026f) + _680;
  float _688 = (_25 * 1080.0f) * _610;
  float _689 = _26 * 1080.0f;
  float _690 = _688 * 0.04444444552063942f;
  float _691 = _26 * 27.712812423706055f;
  float _693 = ceil(_690 - _691);
  float _696 = floor(_26 * 55.42562484741211f) + 1.0f;
  float _699 = ceil((-0.0f - _691) - _690);
  float _701 = (_696 + _693) + _699;
  float _703 = (_701 * 22.5f) + -33.75f;
  float _704 = _693 - _699;
  float _706 = _704 * 11.25f;
  float _712 = (((_696 * 0.5773502588272095f) - (_693 * 0.28867512941360474f)) - (_699 * 0.28867512941360474f)) * 22.5f;
  float _715 = _703 + _706;
  float _716 = _712 + (19.485570907592773f - (_701 * 12.990381240844727f));
  float _719 = ((_701 * 25.980762481689453f) + -38.97114181518555f) + _712;
  float _720 = _706 - _703;
  float _721 = _715 - _688;
  float _722 = _716 - _689;
  float _725 = _706 - _688;
  float _726 = _719 - _689;
  float _731 = _722 * _722;
  float _738 = _720 - _688;
  float _742 = _716 * 2.5f;
  float _743 = frame_consts.time * 1.5f;
  float _747 = _716 * 0.004444444552063942f;
  float _748 = frame_consts.time * 0.15000000596046448f;
  float _749 = (_715 * 0.04444444552063942f) - _748;
  float _750 = _747 - _748;
  float _751 = frame_consts.time * 0.02500000037252903f;
  float _752 = dot(float3(_749, _750, _751), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _756 = floor(_752 + _749);
  float _757 = floor(_752 + _750);
  float _758 = floor(_752 + _751);
  float _762 = dot(float3(_756, _757, _758), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _763 = _762 + (_749 - _756);
  float _764 = _762 + (_750 - _757);
  float _765 = (_751 - _758) + _762;
  float _769 = select((_763 < _764), 0.0f, 1.0f);
  float _770 = select((_764 < _765), 0.0f, 1.0f);
  float _771 = select((_765 < _763), 0.0f, 1.0f);
  float _772 = 1.0f - _769;
  float _773 = 1.0f - _770;
  float _774 = 1.0f - _771;
  float _775 = min(_769, _774);
  float _776 = min(_770, _772);
  float _777 = min(_771, _773);
  float _778 = max(_769, _774);
  float _779 = max(_770, _772);
  float _780 = max(_771, _773);
  float _784 = (_763 - _775) + 0.1666666716337204f;
  float _785 = (_764 - _776) + 0.1666666716337204f;
  float _786 = (_765 - _777) + 0.1666666716337204f;
  float _790 = (_763 - _778) + 0.3333333432674408f;
  float _791 = (_764 - _779) + 0.3333333432674408f;
  float _792 = (_765 - _780) + 0.3333333432674408f;
  float _793 = _763 + -0.5f;
  float _794 = _764 + -0.5f;
  float _795 = _765 + -0.5f;
  float _805 = _756 - (floor(_756 * 0.0034602077212184668f) * 289.0f);
  float _806 = _757 - (floor(_757 * 0.0034602077212184668f) * 289.0f);
  float _807 = _758 - (floor(_758 * 0.0034602077212184668f) * 289.0f);
  float _808 = _807 + _777;
  float _809 = _807 + _780;
  float _810 = _807 + 1.0f;
  float _819 = ((_807 * 34.0f) + 1.0f) * _807;
  float _820 = ((_808 * 34.0f) + 1.0f) * _808;
  float _821 = ((_809 * 34.0f) + 1.0f) * _809;
  float _822 = ((_810 * 34.0f) + 1.0f) * _810;
  float _836 = (_819 - (floor(_819 * 0.0034602077212184668f) * 289.0f)) + _806;
  float _839 = ((_806 + _776) - (floor(_820 * 0.0034602077212184668f) * 289.0f)) + _820;
  float _842 = ((_806 + _779) - (floor(_821 * 0.0034602077212184668f) * 289.0f)) + _821;
  float _845 = ((_806 + 1.0f) - (floor(_822 * 0.0034602077212184668f) * 289.0f)) + _822;
  float _854 = ((_836 * 34.0f) + 1.0f) * _836;
  float _855 = ((_839 * 34.0f) + 1.0f) * _839;
  float _856 = ((_842 * 34.0f) + 1.0f) * _842;
  float _857 = ((_845 * 34.0f) + 1.0f) * _845;
  float _871 = (_854 - (floor(_854 * 0.0034602077212184668f) * 289.0f)) + _805;
  float _874 = ((_805 + _775) - (floor(_855 * 0.0034602077212184668f) * 289.0f)) + _855;
  float _877 = ((_805 + _778) - (floor(_856 * 0.0034602077212184668f) * 289.0f)) + _856;
  float _880 = ((_805 + 1.0f) - (floor(_857 * 0.0034602077212184668f) * 289.0f)) + _857;
  float _889 = ((_871 * 34.0f) + 1.0f) * _871;
  float _890 = ((_874 * 34.0f) + 1.0f) * _874;
  float _891 = ((_877 * 34.0f) + 1.0f) * _877;
  float _892 = ((_880 * 34.0f) + 1.0f) * _880;
  float _905 = _889 - (floor(_889 * 0.0034602077212184668f) * 289.0f);
  float _906 = _890 - (floor(_890 * 0.0034602077212184668f) * 289.0f);
  float _907 = _891 - (floor(_891 * 0.0034602077212184668f) * 289.0f);
  float _908 = _892 - (floor(_892 * 0.0034602077212184668f) * 289.0f);
  float _921 = _905 - (floor(_905 * 0.020408164709806442f) * 49.0f);
  float _922 = _906 - (floor(_906 * 0.020408164709806442f) * 49.0f);
  float _923 = _907 - (floor(_907 * 0.020408164709806442f) * 49.0f);
  float _924 = _908 - (floor(_908 * 0.020408164709806442f) * 49.0f);
  float _929 = floor(_921 * 0.1428571492433548f);
  float _930 = floor(_922 * 0.1428571492433548f);
  float _931 = floor(_923 * 0.1428571492433548f);
  float _932 = floor(_924 * 0.1428571492433548f);
  float _949 = (_929 * 0.2857142984867096f) + -0.9285714030265808f;
  float _950 = (_930 * 0.2857142984867096f) + -0.9285714030265808f;
  float _951 = (_931 * 0.2857142984867096f) + -0.9285714030265808f;
  float _952 = (_932 * 0.2857142984867096f) + -0.9285714030265808f;
  float _957 = (floor(_921 - (_929 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _958 = (floor(_922 - (_930 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _959 = (floor(_923 - (_931 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _960 = (floor(_924 - (_932 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _973 = (1.0f - abs(_949)) - abs(_957);
  float _974 = (1.0f - abs(_950)) - abs(_958);
  float _975 = (1.0f - abs(_951)) - abs(_959);
  float _976 = (1.0f - abs(_952)) - abs(_960);
  float _1005 = select((_973 > 0.0f), -0.0f, -1.0f);
  float _1006 = select((_974 > 0.0f), -0.0f, -1.0f);
  float _1007 = select((_975 > 0.0f), -0.0f, -1.0f);
  float _1008 = select((_976 > 0.0f), -0.0f, -1.0f);
  float _1013 = (((floor(_949) * 2.0f) + 1.0f) * _1005) + _949;
  float _1014 = (((floor(_957) * 2.0f) + 1.0f) * _1005) + _957;
  float _1015 = (((floor(_950) * 2.0f) + 1.0f) * _1006) + _950;
  float _1016 = (((floor(_958) * 2.0f) + 1.0f) * _1006) + _958;
  float _1021 = (((floor(_951) * 2.0f) + 1.0f) * _1007) + _951;
  float _1022 = (((floor(_959) * 2.0f) + 1.0f) * _1007) + _959;
  float _1023 = (((floor(_952) * 2.0f) + 1.0f) * _1008) + _952;
  float _1024 = (((floor(_960) * 2.0f) + 1.0f) * _1008) + _960;
  float _1033 = 1.7928400039672852f - (dot(float3(_1013, _1014, _973), float3(_1013, _1014, _973)) * 0.8537350296974182f);
  float _1034 = 1.7928400039672852f - (dot(float3(_1015, _1016, _974), float3(_1015, _1016, _974)) * 0.8537350296974182f);
  float _1035 = 1.7928400039672852f - (dot(float3(_1021, _1022, _975), float3(_1021, _1022, _975)) * 0.8537350296974182f);
  float _1036 = 1.7928400039672852f - (dot(float3(_1023, _1024, _976), float3(_1023, _1024, _976)) * 0.8537350296974182f);
  float _1057 = max((0.6000000238418579f - dot(float3(_763, _764, _765), float3(_763, _764, _765))), 0.0f);
  float _1058 = max((0.6000000238418579f - dot(float3(_784, _785, _786), float3(_784, _785, _786))), 0.0f);
  float _1059 = max((0.6000000238418579f - dot(float3(_790, _791, _792), float3(_790, _791, _792))), 0.0f);
  float _1060 = max((0.6000000238418579f - dot(float3(_793, _794, _795), float3(_793, _794, _795))), 0.0f);
  float _1061 = _1057 * _1057;
  float _1062 = _1058 * _1058;
  float _1063 = _1059 * _1059;
  float _1064 = _1060 * _1060;
  float _1079 = saturate((((sin(_742 - _743) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1061 * _1061), (_1062 * _1062), (_1063 * _1063), (_1064 * _1064)), float4(dot(float3((_1033 * _1013), (_1033 * _1014), (_1033 * _973)), float3(_763, _764, _765)), dot(float3((_1034 * _1015), (_1034 * _1016), (_1034 * _974)), float3(_784, _785, _786)), dot(float3((_1035 * _1021), (_1035 * _1022), (_1035 * _975)), float3(_790, _791, _792)), dot(float3((_1036 * _1023), (_1036 * _1024), (_1036 * _976)), float3(_793, _794, _795)))) * 21.0f)) * 4.0f);
  float _1083 = (_1079 * _1079) * (3.0f - (_1079 * 2.0f));
  float _1085 = (_1083 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1090 = (_704 * 0.5f) - _748;
  float _1091 = (_719 * 0.004444444552063942f) - _748;
  float _1092 = dot(float3(_1090, _1091, _751), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1096 = floor(_1092 + _1090);
  float _1097 = floor(_1092 + _1091);
  float _1098 = floor(_1092 + _751);
  float _1102 = dot(float3(_1096, _1097, _1098), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1103 = _1102 + (_1090 - _1096);
  float _1104 = _1102 + (_1091 - _1097);
  float _1105 = (_751 - _1098) + _1102;
  float _1109 = select((_1103 < _1104), 0.0f, 1.0f);
  float _1110 = select((_1104 < _1105), 0.0f, 1.0f);
  float _1111 = select((_1105 < _1103), 0.0f, 1.0f);
  float _1112 = 1.0f - _1109;
  float _1113 = 1.0f - _1110;
  float _1114 = 1.0f - _1111;
  float _1115 = min(_1109, _1114);
  float _1116 = min(_1110, _1112);
  float _1117 = min(_1111, _1113);
  float _1118 = max(_1109, _1114);
  float _1119 = max(_1110, _1112);
  float _1120 = max(_1111, _1113);
  float _1124 = (_1103 - _1115) + 0.1666666716337204f;
  float _1125 = (_1104 - _1116) + 0.1666666716337204f;
  float _1126 = (_1105 - _1117) + 0.1666666716337204f;
  float _1130 = (_1103 - _1118) + 0.3333333432674408f;
  float _1131 = (_1104 - _1119) + 0.3333333432674408f;
  float _1132 = (_1105 - _1120) + 0.3333333432674408f;
  float _1133 = _1103 + -0.5f;
  float _1134 = _1104 + -0.5f;
  float _1135 = _1105 + -0.5f;
  float _1145 = _1096 - (floor(_1096 * 0.0034602077212184668f) * 289.0f);
  float _1146 = _1097 - (floor(_1097 * 0.0034602077212184668f) * 289.0f);
  float _1147 = _1098 - (floor(_1098 * 0.0034602077212184668f) * 289.0f);
  float _1148 = _1147 + _1117;
  float _1149 = _1147 + _1120;
  float _1150 = _1147 + 1.0f;
  float _1159 = ((_1147 * 34.0f) + 1.0f) * _1147;
  float _1160 = ((_1148 * 34.0f) + 1.0f) * _1148;
  float _1161 = ((_1149 * 34.0f) + 1.0f) * _1149;
  float _1162 = ((_1150 * 34.0f) + 1.0f) * _1150;
  float _1176 = (_1159 - (floor(_1159 * 0.0034602077212184668f) * 289.0f)) + _1146;
  float _1179 = ((_1146 + _1116) - (floor(_1160 * 0.0034602077212184668f) * 289.0f)) + _1160;
  float _1182 = ((_1146 + _1119) - (floor(_1161 * 0.0034602077212184668f) * 289.0f)) + _1161;
  float _1185 = ((_1146 + 1.0f) - (floor(_1162 * 0.0034602077212184668f) * 289.0f)) + _1162;
  float _1194 = ((_1176 * 34.0f) + 1.0f) * _1176;
  float _1195 = ((_1179 * 34.0f) + 1.0f) * _1179;
  float _1196 = ((_1182 * 34.0f) + 1.0f) * _1182;
  float _1197 = ((_1185 * 34.0f) + 1.0f) * _1185;
  float _1211 = (_1194 - (floor(_1194 * 0.0034602077212184668f) * 289.0f)) + _1145;
  float _1214 = ((_1145 + _1115) - (floor(_1195 * 0.0034602077212184668f) * 289.0f)) + _1195;
  float _1217 = ((_1145 + _1118) - (floor(_1196 * 0.0034602077212184668f) * 289.0f)) + _1196;
  float _1220 = ((_1145 + 1.0f) - (floor(_1197 * 0.0034602077212184668f) * 289.0f)) + _1197;
  float _1229 = ((_1211 * 34.0f) + 1.0f) * _1211;
  float _1230 = ((_1214 * 34.0f) + 1.0f) * _1214;
  float _1231 = ((_1217 * 34.0f) + 1.0f) * _1217;
  float _1232 = ((_1220 * 34.0f) + 1.0f) * _1220;
  float _1245 = _1229 - (floor(_1229 * 0.0034602077212184668f) * 289.0f);
  float _1246 = _1230 - (floor(_1230 * 0.0034602077212184668f) * 289.0f);
  float _1247 = _1231 - (floor(_1231 * 0.0034602077212184668f) * 289.0f);
  float _1248 = _1232 - (floor(_1232 * 0.0034602077212184668f) * 289.0f);
  float _1261 = _1245 - (floor(_1245 * 0.020408164709806442f) * 49.0f);
  float _1262 = _1246 - (floor(_1246 * 0.020408164709806442f) * 49.0f);
  float _1263 = _1247 - (floor(_1247 * 0.020408164709806442f) * 49.0f);
  float _1264 = _1248 - (floor(_1248 * 0.020408164709806442f) * 49.0f);
  float _1269 = floor(_1261 * 0.1428571492433548f);
  float _1270 = floor(_1262 * 0.1428571492433548f);
  float _1271 = floor(_1263 * 0.1428571492433548f);
  float _1272 = floor(_1264 * 0.1428571492433548f);
  float _1289 = (_1269 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1290 = (_1270 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1291 = (_1271 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1292 = (_1272 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1297 = (floor(_1261 - (_1269 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1298 = (floor(_1262 - (_1270 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1299 = (floor(_1263 - (_1271 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1300 = (floor(_1264 - (_1272 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1313 = (1.0f - abs(_1289)) - abs(_1297);
  float _1314 = (1.0f - abs(_1290)) - abs(_1298);
  float _1315 = (1.0f - abs(_1291)) - abs(_1299);
  float _1316 = (1.0f - abs(_1292)) - abs(_1300);
  float _1345 = select((_1313 > 0.0f), -0.0f, -1.0f);
  float _1346 = select((_1314 > 0.0f), -0.0f, -1.0f);
  float _1347 = select((_1315 > 0.0f), -0.0f, -1.0f);
  float _1348 = select((_1316 > 0.0f), -0.0f, -1.0f);
  float _1353 = (((floor(_1289) * 2.0f) + 1.0f) * _1345) + _1289;
  float _1354 = (((floor(_1297) * 2.0f) + 1.0f) * _1345) + _1297;
  float _1355 = (((floor(_1290) * 2.0f) + 1.0f) * _1346) + _1290;
  float _1356 = (((floor(_1298) * 2.0f) + 1.0f) * _1346) + _1298;
  float _1361 = (((floor(_1291) * 2.0f) + 1.0f) * _1347) + _1291;
  float _1362 = (((floor(_1299) * 2.0f) + 1.0f) * _1347) + _1299;
  float _1363 = (((floor(_1292) * 2.0f) + 1.0f) * _1348) + _1292;
  float _1364 = (((floor(_1300) * 2.0f) + 1.0f) * _1348) + _1300;
  float _1373 = 1.7928400039672852f - (dot(float3(_1353, _1354, _1313), float3(_1353, _1354, _1313)) * 0.8537350296974182f);
  float _1374 = 1.7928400039672852f - (dot(float3(_1355, _1356, _1314), float3(_1355, _1356, _1314)) * 0.8537350296974182f);
  float _1375 = 1.7928400039672852f - (dot(float3(_1361, _1362, _1315), float3(_1361, _1362, _1315)) * 0.8537350296974182f);
  float _1376 = 1.7928400039672852f - (dot(float3(_1363, _1364, _1316), float3(_1363, _1364, _1316)) * 0.8537350296974182f);
  float _1397 = max((0.6000000238418579f - dot(float3(_1103, _1104, _1105), float3(_1103, _1104, _1105))), 0.0f);
  float _1398 = max((0.6000000238418579f - dot(float3(_1124, _1125, _1126), float3(_1124, _1125, _1126))), 0.0f);
  float _1399 = max((0.6000000238418579f - dot(float3(_1130, _1131, _1132), float3(_1130, _1131, _1132))), 0.0f);
  float _1400 = max((0.6000000238418579f - dot(float3(_1133, _1134, _1135), float3(_1133, _1134, _1135))), 0.0f);
  float _1401 = _1397 * _1397;
  float _1402 = _1398 * _1398;
  float _1403 = _1399 * _1399;
  float _1404 = _1400 * _1400;
  float _1419 = saturate((((sin((_719 * 2.5f) - _743) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1401 * _1401), (_1402 * _1402), (_1403 * _1403), (_1404 * _1404)), float4(dot(float3((_1373 * _1353), (_1373 * _1354), (_1373 * _1313)), float3(_1103, _1104, _1105)), dot(float3((_1374 * _1355), (_1374 * _1356), (_1374 * _1314)), float3(_1124, _1125, _1126)), dot(float3((_1375 * _1361), (_1375 * _1362), (_1375 * _1315)), float3(_1130, _1131, _1132)), dot(float3((_1376 * _1363), (_1376 * _1364), (_1376 * _1316)), float3(_1133, _1134, _1135)))) * 21.0f)) * 4.0f);
  float _1423 = (_1419 * _1419) * (3.0f - (_1419 * 2.0f));
  float _1425 = (_1423 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1432 = frame_consts.time * 0.15000000596046448f;
  float _1433 = (_720 * 0.04444444552063942f) - _1432;
  float _1434 = _747 - _1432;
  float _1435 = frame_consts.time * 0.02500000037252903f;
  float _1436 = dot(float3(_1433, _1434, _1435), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1440 = floor(_1433 + _1436);
  float _1441 = floor(_1434 + _1436);
  float _1442 = floor(_1435 + _1436);
  float _1446 = dot(float3(_1440, _1441, _1442), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1447 = _1446 + (_1433 - _1440);
  float _1448 = _1446 + (_1434 - _1441);
  float _1449 = (_1435 - _1442) + _1446;
  float _1453 = select((_1447 < _1448), 0.0f, 1.0f);
  float _1454 = select((_1448 < _1449), 0.0f, 1.0f);
  float _1455 = select((_1449 < _1447), 0.0f, 1.0f);
  float _1456 = 1.0f - _1453;
  float _1457 = 1.0f - _1454;
  float _1458 = 1.0f - _1455;
  float _1459 = min(_1453, _1458);
  float _1460 = min(_1454, _1456);
  float _1461 = min(_1455, _1457);
  float _1462 = max(_1453, _1458);
  float _1463 = max(_1454, _1456);
  float _1464 = max(_1455, _1457);
  float _1468 = (_1447 - _1459) + 0.1666666716337204f;
  float _1469 = (_1448 - _1460) + 0.1666666716337204f;
  float _1470 = (_1449 - _1461) + 0.1666666716337204f;
  float _1474 = (_1447 - _1462) + 0.3333333432674408f;
  float _1475 = (_1448 - _1463) + 0.3333333432674408f;
  float _1476 = (_1449 - _1464) + 0.3333333432674408f;
  float _1477 = _1447 + -0.5f;
  float _1478 = _1448 + -0.5f;
  float _1479 = _1449 + -0.5f;
  float _1489 = _1440 - (floor(_1440 * 0.0034602077212184668f) * 289.0f);
  float _1490 = _1441 - (floor(_1441 * 0.0034602077212184668f) * 289.0f);
  float _1491 = _1442 - (floor(_1442 * 0.0034602077212184668f) * 289.0f);
  float _1492 = _1491 + _1461;
  float _1493 = _1491 + _1464;
  float _1494 = _1491 + 1.0f;
  float _1503 = ((_1491 * 34.0f) + 1.0f) * _1491;
  float _1504 = ((_1492 * 34.0f) + 1.0f) * _1492;
  float _1505 = ((_1493 * 34.0f) + 1.0f) * _1493;
  float _1506 = ((_1494 * 34.0f) + 1.0f) * _1494;
  float _1520 = (_1503 - (floor(_1503 * 0.0034602077212184668f) * 289.0f)) + _1490;
  float _1523 = ((_1490 + _1460) - (floor(_1504 * 0.0034602077212184668f) * 289.0f)) + _1504;
  float _1526 = ((_1490 + _1463) - (floor(_1505 * 0.0034602077212184668f) * 289.0f)) + _1505;
  float _1529 = ((_1490 + 1.0f) - (floor(_1506 * 0.0034602077212184668f) * 289.0f)) + _1506;
  float _1538 = ((_1520 * 34.0f) + 1.0f) * _1520;
  float _1539 = ((_1523 * 34.0f) + 1.0f) * _1523;
  float _1540 = ((_1526 * 34.0f) + 1.0f) * _1526;
  float _1541 = ((_1529 * 34.0f) + 1.0f) * _1529;
  float _1555 = (_1538 - (floor(_1538 * 0.0034602077212184668f) * 289.0f)) + _1489;
  float _1558 = ((_1489 + _1459) - (floor(_1539 * 0.0034602077212184668f) * 289.0f)) + _1539;
  float _1561 = ((_1489 + _1462) - (floor(_1540 * 0.0034602077212184668f) * 289.0f)) + _1540;
  float _1564 = ((_1489 + 1.0f) - (floor(_1541 * 0.0034602077212184668f) * 289.0f)) + _1541;
  float _1573 = ((_1555 * 34.0f) + 1.0f) * _1555;
  float _1574 = ((_1558 * 34.0f) + 1.0f) * _1558;
  float _1575 = ((_1561 * 34.0f) + 1.0f) * _1561;
  float _1576 = ((_1564 * 34.0f) + 1.0f) * _1564;
  float _1589 = _1573 - (floor(_1573 * 0.0034602077212184668f) * 289.0f);
  float _1590 = _1574 - (floor(_1574 * 0.0034602077212184668f) * 289.0f);
  float _1591 = _1575 - (floor(_1575 * 0.0034602077212184668f) * 289.0f);
  float _1592 = _1576 - (floor(_1576 * 0.0034602077212184668f) * 289.0f);
  float _1605 = _1589 - (floor(_1589 * 0.020408164709806442f) * 49.0f);
  float _1606 = _1590 - (floor(_1590 * 0.020408164709806442f) * 49.0f);
  float _1607 = _1591 - (floor(_1591 * 0.020408164709806442f) * 49.0f);
  float _1608 = _1592 - (floor(_1592 * 0.020408164709806442f) * 49.0f);
  float _1613 = floor(_1605 * 0.1428571492433548f);
  float _1614 = floor(_1606 * 0.1428571492433548f);
  float _1615 = floor(_1607 * 0.1428571492433548f);
  float _1616 = floor(_1608 * 0.1428571492433548f);
  float _1633 = (_1613 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1634 = (_1614 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1635 = (_1615 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1636 = (_1616 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1641 = (floor(_1605 - (_1613 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1642 = (floor(_1606 - (_1614 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1643 = (floor(_1607 - (_1615 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1644 = (floor(_1608 - (_1616 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1657 = (1.0f - abs(_1633)) - abs(_1641);
  float _1658 = (1.0f - abs(_1634)) - abs(_1642);
  float _1659 = (1.0f - abs(_1635)) - abs(_1643);
  float _1660 = (1.0f - abs(_1636)) - abs(_1644);
  float _1689 = select((_1657 > 0.0f), -0.0f, -1.0f);
  float _1690 = select((_1658 > 0.0f), -0.0f, -1.0f);
  float _1691 = select((_1659 > 0.0f), -0.0f, -1.0f);
  float _1692 = select((_1660 > 0.0f), -0.0f, -1.0f);
  float _1697 = (((floor(_1633) * 2.0f) + 1.0f) * _1689) + _1633;
  float _1698 = (((floor(_1641) * 2.0f) + 1.0f) * _1689) + _1641;
  float _1699 = (((floor(_1634) * 2.0f) + 1.0f) * _1690) + _1634;
  float _1700 = (((floor(_1642) * 2.0f) + 1.0f) * _1690) + _1642;
  float _1705 = (((floor(_1635) * 2.0f) + 1.0f) * _1691) + _1635;
  float _1706 = (((floor(_1643) * 2.0f) + 1.0f) * _1691) + _1643;
  float _1707 = (((floor(_1636) * 2.0f) + 1.0f) * _1692) + _1636;
  float _1708 = (((floor(_1644) * 2.0f) + 1.0f) * _1692) + _1644;
  float _1717 = 1.7928400039672852f - (dot(float3(_1697, _1698, _1657), float3(_1697, _1698, _1657)) * 0.8537350296974182f);
  float _1718 = 1.7928400039672852f - (dot(float3(_1699, _1700, _1658), float3(_1699, _1700, _1658)) * 0.8537350296974182f);
  float _1719 = 1.7928400039672852f - (dot(float3(_1705, _1706, _1659), float3(_1705, _1706, _1659)) * 0.8537350296974182f);
  float _1720 = 1.7928400039672852f - (dot(float3(_1707, _1708, _1660), float3(_1707, _1708, _1660)) * 0.8537350296974182f);
  float _1741 = max((0.6000000238418579f - dot(float3(_1447, _1448, _1449), float3(_1447, _1448, _1449))), 0.0f);
  float _1742 = max((0.6000000238418579f - dot(float3(_1468, _1469, _1470), float3(_1468, _1469, _1470))), 0.0f);
  float _1743 = max((0.6000000238418579f - dot(float3(_1474, _1475, _1476), float3(_1474, _1475, _1476))), 0.0f);
  float _1744 = max((0.6000000238418579f - dot(float3(_1477, _1478, _1479), float3(_1477, _1478, _1479))), 0.0f);
  float _1745 = _1741 * _1741;
  float _1746 = _1742 * _1742;
  float _1747 = _1743 * _1743;
  float _1748 = _1744 * _1744;
  float _1763 = saturate((((sin(_742 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1745 * _1745), (_1746 * _1746), (_1747 * _1747), (_1748 * _1748)), float4(dot(float3((_1717 * _1697), (_1717 * _1698), (_1717 * _1657)), float3(_1447, _1448, _1449)), dot(float3((_1718 * _1699), (_1718 * _1700), (_1718 * _1658)), float3(_1468, _1469, _1470)), dot(float3((_1719 * _1705), (_1719 * _1706), (_1719 * _1659)), float3(_1474, _1475, _1476)), dot(float3((_1720 * _1707), (_1720 * _1708), (_1720 * _1660)), float3(_1477, _1478, _1479)))) * 21.0f)) * 4.0f);
  float _1767 = (_1763 * _1763) * (3.0f - (_1763 * 2.0f));
  float _1769 = (_1767 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1791 = saturate(_1085);
  float _1792 = saturate(_1425);
  float _1814 = (((_629 * 1.2000000476837158f) * _634) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_726 * _726) + (_725 * _725)) / ((_1423 * 0.039000000804662704f) + 0.08100000768899918f))) * _1425) + (saturate(11.0f - (sqrt((_721 * _721) + _731) / ((_1083 * 0.039000000804662704f) + 0.08100000768899918f))) * _1085)) + (saturate(11.0f - (sqrt((_738 * _738) + _731) / ((_1767 * 0.039000000804662704f) + 0.08100000768899918f))) * _1769)) + (((((saturate(1.0f - (abs(_722) * 0.8333333134651184f)) * _1791) + (saturate(1.0f - (abs(dot(float2(_725, _726), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1792)) * saturate(_1769)) + ((_1791 * saturate(1.0f - (abs(dot(float2(_721, _722), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1792)) * 0.5f));
  float _1821 = (_1814 * ((_681 * _681) - _643)) + _643;
  float _1822 = (_1814 * ((_682 * _682) - _644)) + _644;
  float _1823 = (_1814 * ((_683 * _683) - _645)) + _645;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1832 = ((_1821 * 0.3930000066757202f) + (_1822 * 0.7689999938011169f)) + (_1823 * 0.1889999955892563f);
    float _1837 = ((_1821 * 0.3490000069141388f) + (_1822 * 0.6859999895095825f)) + (_1823 * 0.1679999977350235f);
    float _1842 = ((_1821 * 0.2720000147819519f) + (_1822 * 0.5339999794960022f)) + (_1823 * 0.13099999725818634f);
    float _1843 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1848 = ((_1821 * 0.2125999927520752f) + (_1822 * 0.7152000069618225f)) + (_1823 * 0.0722000002861023f);
    _1868 = ((((_1832 - _1821) + ((_1848 - _1832) * 0.6499999761581421f)) * _1843) + _1821);
    _1869 = ((((_1837 - _1822) + ((_1848 - _1837) * 0.6499999761581421f)) * _1843) + _1822);
    _1870 = ((((_1842 - _1823) + ((_1848 - _1842) * 0.6499999761581421f)) * _1843) + _1823);
  } else {
    _1868 = _1821;
    _1869 = _1822;
    _1870 = _1823;
  }
  if (!(frame_consts.invert == 0)) {
    _1879 = (1.0f - _1868);
    _1880 = (1.0f - _1869);
    _1881 = (1.0f - _1870);
  } else {
    _1879 = _1868;
    _1880 = _1869;
    _1881 = _1870;
  }
  SV_Target.x = _1879;
  SV_Target.y = _1880;
  SV_Target.z = _1881;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
