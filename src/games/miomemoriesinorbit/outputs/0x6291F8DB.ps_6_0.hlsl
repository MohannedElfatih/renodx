#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float2> distortion : register(t4);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float2 _17 = distortion.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _20 = _16 / _15;
  float _25 = saturate((_17.x * _20) + O_Uv.x);
  float _26 = saturate((_17.y * _20) + O_Uv.y);
  float _58;
  float _59;
  float _60;
  float _61;
  float _224;
  float _235;
  float _246;
  float _269;
  float _270;
  float _271;
  float _388;
  float _389;
  float _390;
  float _431;
  float _432;
  float _433;
  float _582;
  float _583;
  float _584;
  float _592;
  float _1860;
  float _1861;
  float _1862;
  float _1871;
  float _1872;
  float _1873;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _33 = abs(_25 + -0.5f);
    float _34 = abs(_26 + -0.5f);
    float _38 = (rsqrt(dot(float2(_33, _34), float2(_33, _34))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _39 = _38 * _33;
    float _40 = _38 * _34;
    float4 _43 = tex.SampleLevel(sampler_nearest, float2((_39 + _25), (_40 + _26)), 0.0f);
    float4 _45 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    float4 _49 = tex.SampleLevel(sampler_nearest, float2((_25 - _39), (_26 - _40)), 0.0f);
    _58 = _43.x;
    _59 = _45.y;
    _60 = _49.z;
    _61 = 0.5f;
  } else {
    float4 _52 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    _58 = _52.x;
    _59 = _52.y;
    _60 = _52.z;
    _61 = _52.w;
  }
  float3 untonemapped = float3(_58, _59, _60);

  float3 _62 = bloom_tex.SampleLevel(sampler_bilinear, float2(_25, _26), 0.0f);
  float _77 = max((((1.0f - (_58 * 0.2125999927520752f)) - (_59 * 0.7152000069618225f)) - (_60 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _81 = (_58 / _77) + (frame_consts.params.bloom.intensity * _62.x);
  float _82 = (_59 / _77) + (frame_consts.params.bloom.intensity * _62.y);
  float _83 = (_60 / _77) + (frame_consts.params.bloom.intensity * _62.z);
  float _89 = (((_81 * 0.2125999927520752f) + 1.0f) + (_82 * 0.7152000069618225f)) + (_83 * 0.0722000002861023f);
  float _93 = saturate(_81 / _89);
  float _94 = saturate(_82 / _89);
  float _95 = saturate(_83 / _89);
  if (!(frame_consts.glitch == 0)) {
    float _103 = float((int)(int((_15 / _16) * 1080.0f)));
    float _104 = _103 * _25;
    float _105 = _26 * 1080.0f;
    float _106 = _103 * 0.5f;
    float _109 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _116 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _122 = ((_116 * 3.0f) * exp2(1.4426950216293335f - (_116 * 4.328084945678711f))) + ((_109 * 5.0f) * exp2(1.4426950216293335f - (_109 * 7.213475227355957f)));
    float _123 = _122 * 15.0f;
    float _124 = _123 + 30.0f;
    float _126 = (_122 * 20.0f) + 80.0f;
    float _130 = abs(_103 * (_25 + -0.5f));
    float _131 = abs(_105 + -540.0f);
    float _134 = ((_130 - _106) + _124) + _126;
    float _137 = ((_131 + -510.0f) + _123) + _126;
    float _140 = max(_134, 0.0f);
    float _141 = max(_137, 0.0f);
    float _155 = _130 - (_106 - _124);
    float _156 = _131 - (510.0f - _123);
    float _157 = max(_155, 0.0f);
    float _158 = max(_156, 0.0f);
    float _174 = max(max(0.0f, (1.0f - saturate(abs((min(max(_134, _137), 0.0f) - _126) + sqrt((_141 * _141) + (_140 * _140))) + -0.5f))), ((1.0f - saturate(abs(min(max(_155, _156), 0.0f) + sqrt((_158 * _158) + (_157 * _157))) + -0.5f)) * (1.0f - saturate(_122 * 1.6666666269302368f))));
    float _185 = frac((_104 + _105) * 0.0012499999720603228f) + -0.5f;
    float _186 = frac((_105 - _104) * 0.0012499999720603228f) + -0.5f;
    float _198 = saturate((sin((((_104 * 0.0003124999930150807f) + (_26 * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _202 = (_198 * _198) * (3.0f - (_198 * 2.0f));
    float _204 = saturate(sqrt((_186 * _186) + (_185 * _185)) * 2.0f);
    float _209 = _202 * 0.20000000298023224f;
    float _211 = ((_204 * 0.12156862020492554f) + 0.7450979948043823f) + _209;
    float _212 = ((_204 * 0.3333333134651184f) + 0.34117645025253296f) + _209;
    do {
      if (!(!((_209 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _224 = ((_202 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _224 = exp2(log2((_202 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_211 <= 0.040449999272823334f))) {
          _235 = (_211 * 0.07739938050508499f);
        } else {
          _235 = exp2(log2((_211 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_212 <= 0.040449999272823334f))) {
            _246 = (_212 * 0.07739938050508499f);
          } else {
            _246 = exp2(log2((_212 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _252 = (((_224 * 0.2125999927520752f) + 1.0f) + (_235 * 0.7152000069618225f)) + (_246 * 0.0722000002861023f);
          _269 = (((saturate(_224 / _252) - _93) * _174) + _93);
          _270 = (((saturate(_235 / _252) - _94) * _174) + _94);
          _271 = (((saturate(_246 / _252) - _95) * _174) + _95);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _269 = _93;
    _270 = _94;
    _271 = _95;
  }
  float _277 = depth_tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
  float _281 = 10000.0f / ((_277.x * 19999.5f) + 0.5f);
  float _286 = (_281 * ((_25 * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _288 = (_281 * (((1.0f - _26) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _289 = -0.0f - _281;
  float _313 = mad((frame_consts.paper_xf[2].z), _289, mad((frame_consts.paper_xf[1].z), _288, (_286 * (frame_consts.paper_xf[0].z))));
  float _314 = mad((frame_consts.paper_xf[2].x), _289, mad((frame_consts.paper_xf[1].x), _288, (_286 * (frame_consts.paper_xf[0].x)))) / _313;
  float _315 = mad((frame_consts.paper_xf[2].y), _289, mad((frame_consts.paper_xf[1].y), _288, (_286 * (frame_consts.paper_xf[0].y)))) / _313;
  float _322 = log2(max(5.0f, (-0.0f - (_313 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _323 = floor(_322);
  float _324 = _322 - _323;
  float _326 = exp2(_323 * 0.10000000149011612f);
  float _327 = 1.0f / _326;
  float _328 = min(_327, 0.20000000298023224f);
  float _330 = min((_327 * 0.9330329895019531f), 0.20000000298023224f);
  float _331 = frame_consts.game_plane_blend.x - _326;
  float _337 = frame_consts.game_plane_blend.x - (_326 * 1.0717734098434448f);
  float _347 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_331 * _314) + (frame_consts.paper_xf[3].x)) * _328), (((_331 * _315) + (frame_consts.paper_xf[3].y)) * _328)), 0.0f);
  float _350 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_337 * _314) + (frame_consts.paper_xf[3].x)) * _330), (((_337 * _315) + (frame_consts.paper_xf[3].y)) * _330)), 0.0f);
  float _357 = ((1.0f - (_347.x * (1.0f - _324))) - (_350.x * _324)) * frame_consts.paper_mult;
  float _361 = _269 - (_357 * _269);
  float _362 = _270 - (_357 * _270);
  float _363 = _271 - (_357 * _271);
  if (!(frame_consts.death_screen == 0)) {
    float _386 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _61), _61);
    _388 = _386;
    _389 = _386;
    _390 = _386;
  } else {
    _388 = (lerp(_361, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _389 = (lerp(_362, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _390 = (lerp(_363, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _398 = _25 * _15;
    float _399 = _26 * _16;
    float _400 = _398 * 0.06666667014360428f;
    float _401 = _399 * 0.038490019738674164f;
    float _403 = ceil(_400 - _401);
    float _405 = floor(_399 * 0.07698003947734833f);
    float _406 = _405 + 1.0f;
    float _409 = ceil((-0.0f - _400) - _401);
    float _411 = (_403 - _409) * 7.5f;
    float _412 = _403 * 0.28867512941360474f;
    float _413 = _406 * 0.5773502588272095f;
    float _414 = _413 - _412;
    float _415 = _409 * 0.28867512941360474f;
    float _418 = _411 / _15;
    float _419 = ((_414 - _415) * 15.0f) / _16;
    do {
      if (((_406 + _403) + _409) == 2.0f) {
        _431 = (_403 + 1.0f);
        _432 = (_405 + 2.0f);
        _433 = (_409 + 1.0f);
      } else {
        _431 = (_403 + -1.0f);
        _432 = _405;
        _433 = (_409 + -1.0f);
      }
      float _434 = _431 - _409;
      float _437 = _413 - (_431 * 0.28867512941360474f);
      float _438 = _437 - _415;
      float _441 = (_432 * 0.5773502588272095f) - _412;
      float _442 = _441 - _415;
      float _444 = _403 - _433;
      float _447 = _414 - (_433 * 0.28867512941360474f);
      float _451 = (_437 - _441) * 15.0f;
      float _452 = (_431 - _403) * -7.5f;
      float _454 = rsqrt(dot(float2(_451, _452), float2(_451, _452)));
      float _463 = (_442 - _447) * 15.0f;
      float _464 = (_433 - _409) * -7.5f;
      float _466 = rsqrt(dot(float2(_463, _464), float2(_463, _464)));
      float _475 = (_447 - _438) * 15.0f;
      float _476 = (_444 - _434) * -7.5f;
      float _478 = rsqrt(dot(float2(_475, _476), float2(_475, _476)));
      float _491 = _418 + -0.5f;
      float _492 = _419 + -0.5f;
      float _539 = _25 + -0.5f;
      float _540 = _26 + -0.5f;
      float _547 = ((frame_consts.time - sqrt((_540 * _540) + (_539 * _539))) + (frac(sin(dot(float2((_418 * 5.0f), (_419 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _551 = frac(abs(_547));
      float _555 = max((select((_547 >= (-0.0f - _547)), _551, (-0.0f - _551)) * 18.0f), 0.0f);
      float _571 = min(max((1.0f - (((((_555 * 1.600000023841858f) * exp2(1.4426950216293335f - (_555 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_492 * _492) + (_491 * _491)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_418 * 3.0f), (_419 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_418, _419), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_418 * 2.0f), (_419 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _577 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_434 * 7.5f) - _398), ((_438 * 15.0f) - _399)), float2((_451 * _454), (_454 * _452))))), abs(dot(float2((_411 - _398), ((_442 * 15.0f) - _399)), float2((_466 * _463), (_466 * _464))))), abs(dot(float2(((_444 * 7.5f) - _398), ((_447 * 15.0f) - _399)), float2((_478 * _475), (_478 * _476))))) * 0.2309400886297226f)) - _571) / ((_571 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _582 = (_577 * _388);
      _583 = (_577 * _389);
      _584 = (_577 * _390);
    } while (false);
  } else {
    _582 = _388;
    _583 = _389;
    _584 = _390;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _592 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _592 = 0.0f;
  }
  float _599 = frame_consts.params.vignette.intensity + _592;
  float _602 = _15 / _16;
  float _614 = exp2(log2(saturate((_599 * abs(_25 + -0.5f)) * (((_602 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _615 = exp2(log2(saturate(_599 * abs(_26 + -0.5f))) * 5.0f);
  float _621 = exp2(log2(saturate(1.0f - dot(float2(_614, _615), float2(_614, _615)))) * 6.0f);
  float _626 = 1.0f - _621;
  float _628 = 1.0f - (_626 * 0.8500000238418579f);
  float _635 = (_628 * (_582 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _636 = (_628 * (_583 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _637 = (_628 * (_584 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _641 = _25 * _15;
  float _642 = _26 * _16;
  float _643 = _642 + _641;
  float _649 = frac(_643 * 0.0033333334140479565f) + -0.5f;
  float _650 = frac((_642 - _641) * 0.0033333334140479565f) + -0.5f;
  float _656 = saturate(sqrt((_650 * _650) + (_649 * _649)) * 2.0f);
  float _667 = saturate((sin((_643 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _672 = ((_667 * _667) * 0.2199999988079071f) * (3.0f - (_667 * 2.0f));
  float _673 = _672 + 0.9777389168739319f;
  float _674 = ((_656 * 0.13274884223937988f) + 0.7175776362419128f) + _672;
  float _675 = ((_656 * 0.3335757553577423f) + 0.30871906876564026f) + _672;
  float _680 = (_25 * 1080.0f) * _602;
  float _681 = _26 * 1080.0f;
  float _682 = _680 * 0.04444444552063942f;
  float _683 = _26 * 27.712812423706055f;
  float _685 = ceil(_682 - _683);
  float _688 = floor(_26 * 55.42562484741211f) + 1.0f;
  float _691 = ceil((-0.0f - _683) - _682);
  float _693 = (_688 + _685) + _691;
  float _695 = (_693 * 22.5f) + -33.75f;
  float _696 = _685 - _691;
  float _698 = _696 * 11.25f;
  float _704 = (((_688 * 0.5773502588272095f) - (_685 * 0.28867512941360474f)) - (_691 * 0.28867512941360474f)) * 22.5f;
  float _707 = _695 + _698;
  float _708 = _704 + (19.485570907592773f - (_693 * 12.990381240844727f));
  float _711 = ((_693 * 25.980762481689453f) + -38.97114181518555f) + _704;
  float _712 = _698 - _695;
  float _713 = _707 - _680;
  float _714 = _708 - _681;
  float _717 = _698 - _680;
  float _718 = _711 - _681;
  float _723 = _714 * _714;
  float _730 = _712 - _680;
  float _734 = _708 * 2.5f;
  float _735 = frame_consts.time * 1.5f;
  float _739 = _708 * 0.004444444552063942f;
  float _740 = frame_consts.time * 0.15000000596046448f;
  float _741 = (_707 * 0.04444444552063942f) - _740;
  float _742 = _739 - _740;
  float _743 = frame_consts.time * 0.02500000037252903f;
  float _744 = dot(float3(_741, _742, _743), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _748 = floor(_744 + _741);
  float _749 = floor(_744 + _742);
  float _750 = floor(_744 + _743);
  float _754 = dot(float3(_748, _749, _750), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _755 = _754 + (_741 - _748);
  float _756 = _754 + (_742 - _749);
  float _757 = (_743 - _750) + _754;
  float _761 = select((_755 < _756), 0.0f, 1.0f);
  float _762 = select((_756 < _757), 0.0f, 1.0f);
  float _763 = select((_757 < _755), 0.0f, 1.0f);
  float _764 = 1.0f - _761;
  float _765 = 1.0f - _762;
  float _766 = 1.0f - _763;
  float _767 = min(_761, _766);
  float _768 = min(_762, _764);
  float _769 = min(_763, _765);
  float _770 = max(_761, _766);
  float _771 = max(_762, _764);
  float _772 = max(_763, _765);
  float _776 = (_755 - _767) + 0.1666666716337204f;
  float _777 = (_756 - _768) + 0.1666666716337204f;
  float _778 = (_757 - _769) + 0.1666666716337204f;
  float _782 = (_755 - _770) + 0.3333333432674408f;
  float _783 = (_756 - _771) + 0.3333333432674408f;
  float _784 = (_757 - _772) + 0.3333333432674408f;
  float _785 = _755 + -0.5f;
  float _786 = _756 + -0.5f;
  float _787 = _757 + -0.5f;
  float _797 = _748 - (floor(_748 * 0.0034602077212184668f) * 289.0f);
  float _798 = _749 - (floor(_749 * 0.0034602077212184668f) * 289.0f);
  float _799 = _750 - (floor(_750 * 0.0034602077212184668f) * 289.0f);
  float _800 = _799 + _769;
  float _801 = _799 + _772;
  float _802 = _799 + 1.0f;
  float _811 = ((_799 * 34.0f) + 1.0f) * _799;
  float _812 = ((_800 * 34.0f) + 1.0f) * _800;
  float _813 = ((_801 * 34.0f) + 1.0f) * _801;
  float _814 = ((_802 * 34.0f) + 1.0f) * _802;
  float _828 = (_811 - (floor(_811 * 0.0034602077212184668f) * 289.0f)) + _798;
  float _831 = ((_798 + _768) - (floor(_812 * 0.0034602077212184668f) * 289.0f)) + _812;
  float _834 = ((_798 + _771) - (floor(_813 * 0.0034602077212184668f) * 289.0f)) + _813;
  float _837 = ((_798 + 1.0f) - (floor(_814 * 0.0034602077212184668f) * 289.0f)) + _814;
  float _846 = ((_828 * 34.0f) + 1.0f) * _828;
  float _847 = ((_831 * 34.0f) + 1.0f) * _831;
  float _848 = ((_834 * 34.0f) + 1.0f) * _834;
  float _849 = ((_837 * 34.0f) + 1.0f) * _837;
  float _863 = (_846 - (floor(_846 * 0.0034602077212184668f) * 289.0f)) + _797;
  float _866 = ((_797 + _767) - (floor(_847 * 0.0034602077212184668f) * 289.0f)) + _847;
  float _869 = ((_797 + _770) - (floor(_848 * 0.0034602077212184668f) * 289.0f)) + _848;
  float _872 = ((_797 + 1.0f) - (floor(_849 * 0.0034602077212184668f) * 289.0f)) + _849;
  float _881 = ((_863 * 34.0f) + 1.0f) * _863;
  float _882 = ((_866 * 34.0f) + 1.0f) * _866;
  float _883 = ((_869 * 34.0f) + 1.0f) * _869;
  float _884 = ((_872 * 34.0f) + 1.0f) * _872;
  float _897 = _881 - (floor(_881 * 0.0034602077212184668f) * 289.0f);
  float _898 = _882 - (floor(_882 * 0.0034602077212184668f) * 289.0f);
  float _899 = _883 - (floor(_883 * 0.0034602077212184668f) * 289.0f);
  float _900 = _884 - (floor(_884 * 0.0034602077212184668f) * 289.0f);
  float _913 = _897 - (floor(_897 * 0.020408164709806442f) * 49.0f);
  float _914 = _898 - (floor(_898 * 0.020408164709806442f) * 49.0f);
  float _915 = _899 - (floor(_899 * 0.020408164709806442f) * 49.0f);
  float _916 = _900 - (floor(_900 * 0.020408164709806442f) * 49.0f);
  float _921 = floor(_913 * 0.1428571492433548f);
  float _922 = floor(_914 * 0.1428571492433548f);
  float _923 = floor(_915 * 0.1428571492433548f);
  float _924 = floor(_916 * 0.1428571492433548f);
  float _941 = (_921 * 0.2857142984867096f) + -0.9285714030265808f;
  float _942 = (_922 * 0.2857142984867096f) + -0.9285714030265808f;
  float _943 = (_923 * 0.2857142984867096f) + -0.9285714030265808f;
  float _944 = (_924 * 0.2857142984867096f) + -0.9285714030265808f;
  float _949 = (floor(_913 - (_921 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _950 = (floor(_914 - (_922 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _951 = (floor(_915 - (_923 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _952 = (floor(_916 - (_924 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _965 = (1.0f - abs(_941)) - abs(_949);
  float _966 = (1.0f - abs(_942)) - abs(_950);
  float _967 = (1.0f - abs(_943)) - abs(_951);
  float _968 = (1.0f - abs(_944)) - abs(_952);
  float _997 = select((_965 > 0.0f), -0.0f, -1.0f);
  float _998 = select((_966 > 0.0f), -0.0f, -1.0f);
  float _999 = select((_967 > 0.0f), -0.0f, -1.0f);
  float _1000 = select((_968 > 0.0f), -0.0f, -1.0f);
  float _1005 = (((floor(_941) * 2.0f) + 1.0f) * _997) + _941;
  float _1006 = (((floor(_949) * 2.0f) + 1.0f) * _997) + _949;
  float _1007 = (((floor(_942) * 2.0f) + 1.0f) * _998) + _942;
  float _1008 = (((floor(_950) * 2.0f) + 1.0f) * _998) + _950;
  float _1013 = (((floor(_943) * 2.0f) + 1.0f) * _999) + _943;
  float _1014 = (((floor(_951) * 2.0f) + 1.0f) * _999) + _951;
  float _1015 = (((floor(_944) * 2.0f) + 1.0f) * _1000) + _944;
  float _1016 = (((floor(_952) * 2.0f) + 1.0f) * _1000) + _952;
  float _1025 = 1.7928400039672852f - (dot(float3(_1005, _1006, _965), float3(_1005, _1006, _965)) * 0.8537350296974182f);
  float _1026 = 1.7928400039672852f - (dot(float3(_1007, _1008, _966), float3(_1007, _1008, _966)) * 0.8537350296974182f);
  float _1027 = 1.7928400039672852f - (dot(float3(_1013, _1014, _967), float3(_1013, _1014, _967)) * 0.8537350296974182f);
  float _1028 = 1.7928400039672852f - (dot(float3(_1015, _1016, _968), float3(_1015, _1016, _968)) * 0.8537350296974182f);
  float _1049 = max((0.6000000238418579f - dot(float3(_755, _756, _757), float3(_755, _756, _757))), 0.0f);
  float _1050 = max((0.6000000238418579f - dot(float3(_776, _777, _778), float3(_776, _777, _778))), 0.0f);
  float _1051 = max((0.6000000238418579f - dot(float3(_782, _783, _784), float3(_782, _783, _784))), 0.0f);
  float _1052 = max((0.6000000238418579f - dot(float3(_785, _786, _787), float3(_785, _786, _787))), 0.0f);
  float _1053 = _1049 * _1049;
  float _1054 = _1050 * _1050;
  float _1055 = _1051 * _1051;
  float _1056 = _1052 * _1052;
  float _1071 = saturate((((sin(_734 - _735) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1053 * _1053), (_1054 * _1054), (_1055 * _1055), (_1056 * _1056)), float4(dot(float3((_1025 * _1005), (_1025 * _1006), (_1025 * _965)), float3(_755, _756, _757)), dot(float3((_1026 * _1007), (_1026 * _1008), (_1026 * _966)), float3(_776, _777, _778)), dot(float3((_1027 * _1013), (_1027 * _1014), (_1027 * _967)), float3(_782, _783, _784)), dot(float3((_1028 * _1015), (_1028 * _1016), (_1028 * _968)), float3(_785, _786, _787)))) * 21.0f)) * 4.0f);
  float _1075 = (_1071 * _1071) * (3.0f - (_1071 * 2.0f));
  float _1077 = (_1075 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1082 = (_696 * 0.5f) - _740;
  float _1083 = (_711 * 0.004444444552063942f) - _740;
  float _1084 = dot(float3(_1082, _1083, _743), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1088 = floor(_1084 + _1082);
  float _1089 = floor(_1084 + _1083);
  float _1090 = floor(_1084 + _743);
  float _1094 = dot(float3(_1088, _1089, _1090), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1095 = _1094 + (_1082 - _1088);
  float _1096 = _1094 + (_1083 - _1089);
  float _1097 = (_743 - _1090) + _1094;
  float _1101 = select((_1095 < _1096), 0.0f, 1.0f);
  float _1102 = select((_1096 < _1097), 0.0f, 1.0f);
  float _1103 = select((_1097 < _1095), 0.0f, 1.0f);
  float _1104 = 1.0f - _1101;
  float _1105 = 1.0f - _1102;
  float _1106 = 1.0f - _1103;
  float _1107 = min(_1101, _1106);
  float _1108 = min(_1102, _1104);
  float _1109 = min(_1103, _1105);
  float _1110 = max(_1101, _1106);
  float _1111 = max(_1102, _1104);
  float _1112 = max(_1103, _1105);
  float _1116 = (_1095 - _1107) + 0.1666666716337204f;
  float _1117 = (_1096 - _1108) + 0.1666666716337204f;
  float _1118 = (_1097 - _1109) + 0.1666666716337204f;
  float _1122 = (_1095 - _1110) + 0.3333333432674408f;
  float _1123 = (_1096 - _1111) + 0.3333333432674408f;
  float _1124 = (_1097 - _1112) + 0.3333333432674408f;
  float _1125 = _1095 + -0.5f;
  float _1126 = _1096 + -0.5f;
  float _1127 = _1097 + -0.5f;
  float _1137 = _1088 - (floor(_1088 * 0.0034602077212184668f) * 289.0f);
  float _1138 = _1089 - (floor(_1089 * 0.0034602077212184668f) * 289.0f);
  float _1139 = _1090 - (floor(_1090 * 0.0034602077212184668f) * 289.0f);
  float _1140 = _1139 + _1109;
  float _1141 = _1139 + _1112;
  float _1142 = _1139 + 1.0f;
  float _1151 = ((_1139 * 34.0f) + 1.0f) * _1139;
  float _1152 = ((_1140 * 34.0f) + 1.0f) * _1140;
  float _1153 = ((_1141 * 34.0f) + 1.0f) * _1141;
  float _1154 = ((_1142 * 34.0f) + 1.0f) * _1142;
  float _1168 = (_1151 - (floor(_1151 * 0.0034602077212184668f) * 289.0f)) + _1138;
  float _1171 = ((_1138 + _1108) - (floor(_1152 * 0.0034602077212184668f) * 289.0f)) + _1152;
  float _1174 = ((_1138 + _1111) - (floor(_1153 * 0.0034602077212184668f) * 289.0f)) + _1153;
  float _1177 = ((_1138 + 1.0f) - (floor(_1154 * 0.0034602077212184668f) * 289.0f)) + _1154;
  float _1186 = ((_1168 * 34.0f) + 1.0f) * _1168;
  float _1187 = ((_1171 * 34.0f) + 1.0f) * _1171;
  float _1188 = ((_1174 * 34.0f) + 1.0f) * _1174;
  float _1189 = ((_1177 * 34.0f) + 1.0f) * _1177;
  float _1203 = (_1186 - (floor(_1186 * 0.0034602077212184668f) * 289.0f)) + _1137;
  float _1206 = ((_1137 + _1107) - (floor(_1187 * 0.0034602077212184668f) * 289.0f)) + _1187;
  float _1209 = ((_1137 + _1110) - (floor(_1188 * 0.0034602077212184668f) * 289.0f)) + _1188;
  float _1212 = ((_1137 + 1.0f) - (floor(_1189 * 0.0034602077212184668f) * 289.0f)) + _1189;
  float _1221 = ((_1203 * 34.0f) + 1.0f) * _1203;
  float _1222 = ((_1206 * 34.0f) + 1.0f) * _1206;
  float _1223 = ((_1209 * 34.0f) + 1.0f) * _1209;
  float _1224 = ((_1212 * 34.0f) + 1.0f) * _1212;
  float _1237 = _1221 - (floor(_1221 * 0.0034602077212184668f) * 289.0f);
  float _1238 = _1222 - (floor(_1222 * 0.0034602077212184668f) * 289.0f);
  float _1239 = _1223 - (floor(_1223 * 0.0034602077212184668f) * 289.0f);
  float _1240 = _1224 - (floor(_1224 * 0.0034602077212184668f) * 289.0f);
  float _1253 = _1237 - (floor(_1237 * 0.020408164709806442f) * 49.0f);
  float _1254 = _1238 - (floor(_1238 * 0.020408164709806442f) * 49.0f);
  float _1255 = _1239 - (floor(_1239 * 0.020408164709806442f) * 49.0f);
  float _1256 = _1240 - (floor(_1240 * 0.020408164709806442f) * 49.0f);
  float _1261 = floor(_1253 * 0.1428571492433548f);
  float _1262 = floor(_1254 * 0.1428571492433548f);
  float _1263 = floor(_1255 * 0.1428571492433548f);
  float _1264 = floor(_1256 * 0.1428571492433548f);
  float _1281 = (_1261 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1282 = (_1262 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1283 = (_1263 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1284 = (_1264 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1289 = (floor(_1253 - (_1261 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1290 = (floor(_1254 - (_1262 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1291 = (floor(_1255 - (_1263 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1292 = (floor(_1256 - (_1264 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1305 = (1.0f - abs(_1281)) - abs(_1289);
  float _1306 = (1.0f - abs(_1282)) - abs(_1290);
  float _1307 = (1.0f - abs(_1283)) - abs(_1291);
  float _1308 = (1.0f - abs(_1284)) - abs(_1292);
  float _1337 = select((_1305 > 0.0f), -0.0f, -1.0f);
  float _1338 = select((_1306 > 0.0f), -0.0f, -1.0f);
  float _1339 = select((_1307 > 0.0f), -0.0f, -1.0f);
  float _1340 = select((_1308 > 0.0f), -0.0f, -1.0f);
  float _1345 = (((floor(_1281) * 2.0f) + 1.0f) * _1337) + _1281;
  float _1346 = (((floor(_1289) * 2.0f) + 1.0f) * _1337) + _1289;
  float _1347 = (((floor(_1282) * 2.0f) + 1.0f) * _1338) + _1282;
  float _1348 = (((floor(_1290) * 2.0f) + 1.0f) * _1338) + _1290;
  float _1353 = (((floor(_1283) * 2.0f) + 1.0f) * _1339) + _1283;
  float _1354 = (((floor(_1291) * 2.0f) + 1.0f) * _1339) + _1291;
  float _1355 = (((floor(_1284) * 2.0f) + 1.0f) * _1340) + _1284;
  float _1356 = (((floor(_1292) * 2.0f) + 1.0f) * _1340) + _1292;
  float _1365 = 1.7928400039672852f - (dot(float3(_1345, _1346, _1305), float3(_1345, _1346, _1305)) * 0.8537350296974182f);
  float _1366 = 1.7928400039672852f - (dot(float3(_1347, _1348, _1306), float3(_1347, _1348, _1306)) * 0.8537350296974182f);
  float _1367 = 1.7928400039672852f - (dot(float3(_1353, _1354, _1307), float3(_1353, _1354, _1307)) * 0.8537350296974182f);
  float _1368 = 1.7928400039672852f - (dot(float3(_1355, _1356, _1308), float3(_1355, _1356, _1308)) * 0.8537350296974182f);
  float _1389 = max((0.6000000238418579f - dot(float3(_1095, _1096, _1097), float3(_1095, _1096, _1097))), 0.0f);
  float _1390 = max((0.6000000238418579f - dot(float3(_1116, _1117, _1118), float3(_1116, _1117, _1118))), 0.0f);
  float _1391 = max((0.6000000238418579f - dot(float3(_1122, _1123, _1124), float3(_1122, _1123, _1124))), 0.0f);
  float _1392 = max((0.6000000238418579f - dot(float3(_1125, _1126, _1127), float3(_1125, _1126, _1127))), 0.0f);
  float _1393 = _1389 * _1389;
  float _1394 = _1390 * _1390;
  float _1395 = _1391 * _1391;
  float _1396 = _1392 * _1392;
  float _1411 = saturate((((sin((_711 * 2.5f) - _735) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1393 * _1393), (_1394 * _1394), (_1395 * _1395), (_1396 * _1396)), float4(dot(float3((_1365 * _1345), (_1365 * _1346), (_1365 * _1305)), float3(_1095, _1096, _1097)), dot(float3((_1366 * _1347), (_1366 * _1348), (_1366 * _1306)), float3(_1116, _1117, _1118)), dot(float3((_1367 * _1353), (_1367 * _1354), (_1367 * _1307)), float3(_1122, _1123, _1124)), dot(float3((_1368 * _1355), (_1368 * _1356), (_1368 * _1308)), float3(_1125, _1126, _1127)))) * 21.0f)) * 4.0f);
  float _1415 = (_1411 * _1411) * (3.0f - (_1411 * 2.0f));
  float _1417 = (_1415 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1424 = frame_consts.time * 0.15000000596046448f;
  float _1425 = (_712 * 0.04444444552063942f) - _1424;
  float _1426 = _739 - _1424;
  float _1427 = frame_consts.time * 0.02500000037252903f;
  float _1428 = dot(float3(_1425, _1426, _1427), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1432 = floor(_1425 + _1428);
  float _1433 = floor(_1426 + _1428);
  float _1434 = floor(_1427 + _1428);
  float _1438 = dot(float3(_1432, _1433, _1434), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1439 = _1438 + (_1425 - _1432);
  float _1440 = _1438 + (_1426 - _1433);
  float _1441 = (_1427 - _1434) + _1438;
  float _1445 = select((_1439 < _1440), 0.0f, 1.0f);
  float _1446 = select((_1440 < _1441), 0.0f, 1.0f);
  float _1447 = select((_1441 < _1439), 0.0f, 1.0f);
  float _1448 = 1.0f - _1445;
  float _1449 = 1.0f - _1446;
  float _1450 = 1.0f - _1447;
  float _1451 = min(_1445, _1450);
  float _1452 = min(_1446, _1448);
  float _1453 = min(_1447, _1449);
  float _1454 = max(_1445, _1450);
  float _1455 = max(_1446, _1448);
  float _1456 = max(_1447, _1449);
  float _1460 = (_1439 - _1451) + 0.1666666716337204f;
  float _1461 = (_1440 - _1452) + 0.1666666716337204f;
  float _1462 = (_1441 - _1453) + 0.1666666716337204f;
  float _1466 = (_1439 - _1454) + 0.3333333432674408f;
  float _1467 = (_1440 - _1455) + 0.3333333432674408f;
  float _1468 = (_1441 - _1456) + 0.3333333432674408f;
  float _1469 = _1439 + -0.5f;
  float _1470 = _1440 + -0.5f;
  float _1471 = _1441 + -0.5f;
  float _1481 = _1432 - (floor(_1432 * 0.0034602077212184668f) * 289.0f);
  float _1482 = _1433 - (floor(_1433 * 0.0034602077212184668f) * 289.0f);
  float _1483 = _1434 - (floor(_1434 * 0.0034602077212184668f) * 289.0f);
  float _1484 = _1483 + _1453;
  float _1485 = _1483 + _1456;
  float _1486 = _1483 + 1.0f;
  float _1495 = ((_1483 * 34.0f) + 1.0f) * _1483;
  float _1496 = ((_1484 * 34.0f) + 1.0f) * _1484;
  float _1497 = ((_1485 * 34.0f) + 1.0f) * _1485;
  float _1498 = ((_1486 * 34.0f) + 1.0f) * _1486;
  float _1512 = (_1495 - (floor(_1495 * 0.0034602077212184668f) * 289.0f)) + _1482;
  float _1515 = ((_1482 + _1452) - (floor(_1496 * 0.0034602077212184668f) * 289.0f)) + _1496;
  float _1518 = ((_1482 + _1455) - (floor(_1497 * 0.0034602077212184668f) * 289.0f)) + _1497;
  float _1521 = ((_1482 + 1.0f) - (floor(_1498 * 0.0034602077212184668f) * 289.0f)) + _1498;
  float _1530 = ((_1512 * 34.0f) + 1.0f) * _1512;
  float _1531 = ((_1515 * 34.0f) + 1.0f) * _1515;
  float _1532 = ((_1518 * 34.0f) + 1.0f) * _1518;
  float _1533 = ((_1521 * 34.0f) + 1.0f) * _1521;
  float _1547 = (_1530 - (floor(_1530 * 0.0034602077212184668f) * 289.0f)) + _1481;
  float _1550 = ((_1481 + _1451) - (floor(_1531 * 0.0034602077212184668f) * 289.0f)) + _1531;
  float _1553 = ((_1481 + _1454) - (floor(_1532 * 0.0034602077212184668f) * 289.0f)) + _1532;
  float _1556 = ((_1481 + 1.0f) - (floor(_1533 * 0.0034602077212184668f) * 289.0f)) + _1533;
  float _1565 = ((_1547 * 34.0f) + 1.0f) * _1547;
  float _1566 = ((_1550 * 34.0f) + 1.0f) * _1550;
  float _1567 = ((_1553 * 34.0f) + 1.0f) * _1553;
  float _1568 = ((_1556 * 34.0f) + 1.0f) * _1556;
  float _1581 = _1565 - (floor(_1565 * 0.0034602077212184668f) * 289.0f);
  float _1582 = _1566 - (floor(_1566 * 0.0034602077212184668f) * 289.0f);
  float _1583 = _1567 - (floor(_1567 * 0.0034602077212184668f) * 289.0f);
  float _1584 = _1568 - (floor(_1568 * 0.0034602077212184668f) * 289.0f);
  float _1597 = _1581 - (floor(_1581 * 0.020408164709806442f) * 49.0f);
  float _1598 = _1582 - (floor(_1582 * 0.020408164709806442f) * 49.0f);
  float _1599 = _1583 - (floor(_1583 * 0.020408164709806442f) * 49.0f);
  float _1600 = _1584 - (floor(_1584 * 0.020408164709806442f) * 49.0f);
  float _1605 = floor(_1597 * 0.1428571492433548f);
  float _1606 = floor(_1598 * 0.1428571492433548f);
  float _1607 = floor(_1599 * 0.1428571492433548f);
  float _1608 = floor(_1600 * 0.1428571492433548f);
  float _1625 = (_1605 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1626 = (_1606 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1627 = (_1607 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1628 = (_1608 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1633 = (floor(_1597 - (_1605 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1634 = (floor(_1598 - (_1606 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1635 = (floor(_1599 - (_1607 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1636 = (floor(_1600 - (_1608 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1649 = (1.0f - abs(_1625)) - abs(_1633);
  float _1650 = (1.0f - abs(_1626)) - abs(_1634);
  float _1651 = (1.0f - abs(_1627)) - abs(_1635);
  float _1652 = (1.0f - abs(_1628)) - abs(_1636);
  float _1681 = select((_1649 > 0.0f), -0.0f, -1.0f);
  float _1682 = select((_1650 > 0.0f), -0.0f, -1.0f);
  float _1683 = select((_1651 > 0.0f), -0.0f, -1.0f);
  float _1684 = select((_1652 > 0.0f), -0.0f, -1.0f);
  float _1689 = (((floor(_1625) * 2.0f) + 1.0f) * _1681) + _1625;
  float _1690 = (((floor(_1633) * 2.0f) + 1.0f) * _1681) + _1633;
  float _1691 = (((floor(_1626) * 2.0f) + 1.0f) * _1682) + _1626;
  float _1692 = (((floor(_1634) * 2.0f) + 1.0f) * _1682) + _1634;
  float _1697 = (((floor(_1627) * 2.0f) + 1.0f) * _1683) + _1627;
  float _1698 = (((floor(_1635) * 2.0f) + 1.0f) * _1683) + _1635;
  float _1699 = (((floor(_1628) * 2.0f) + 1.0f) * _1684) + _1628;
  float _1700 = (((floor(_1636) * 2.0f) + 1.0f) * _1684) + _1636;
  float _1709 = 1.7928400039672852f - (dot(float3(_1689, _1690, _1649), float3(_1689, _1690, _1649)) * 0.8537350296974182f);
  float _1710 = 1.7928400039672852f - (dot(float3(_1691, _1692, _1650), float3(_1691, _1692, _1650)) * 0.8537350296974182f);
  float _1711 = 1.7928400039672852f - (dot(float3(_1697, _1698, _1651), float3(_1697, _1698, _1651)) * 0.8537350296974182f);
  float _1712 = 1.7928400039672852f - (dot(float3(_1699, _1700, _1652), float3(_1699, _1700, _1652)) * 0.8537350296974182f);
  float _1733 = max((0.6000000238418579f - dot(float3(_1439, _1440, _1441), float3(_1439, _1440, _1441))), 0.0f);
  float _1734 = max((0.6000000238418579f - dot(float3(_1460, _1461, _1462), float3(_1460, _1461, _1462))), 0.0f);
  float _1735 = max((0.6000000238418579f - dot(float3(_1466, _1467, _1468), float3(_1466, _1467, _1468))), 0.0f);
  float _1736 = max((0.6000000238418579f - dot(float3(_1469, _1470, _1471), float3(_1469, _1470, _1471))), 0.0f);
  float _1737 = _1733 * _1733;
  float _1738 = _1734 * _1734;
  float _1739 = _1735 * _1735;
  float _1740 = _1736 * _1736;
  float _1755 = saturate((((sin(_734 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1737 * _1737), (_1738 * _1738), (_1739 * _1739), (_1740 * _1740)), float4(dot(float3((_1709 * _1689), (_1709 * _1690), (_1709 * _1649)), float3(_1439, _1440, _1441)), dot(float3((_1710 * _1691), (_1710 * _1692), (_1710 * _1650)), float3(_1460, _1461, _1462)), dot(float3((_1711 * _1697), (_1711 * _1698), (_1711 * _1651)), float3(_1466, _1467, _1468)), dot(float3((_1712 * _1699), (_1712 * _1700), (_1712 * _1652)), float3(_1469, _1470, _1471)))) * 21.0f)) * 4.0f);
  float _1759 = (_1755 * _1755) * (3.0f - (_1755 * 2.0f));
  float _1761 = (_1759 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1783 = saturate(_1077);
  float _1784 = saturate(_1417);
  float _1806 = (((_621 * 1.2000000476837158f) * _626) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_718 * _718) + (_717 * _717)) / ((_1415 * 0.039000000804662704f) + 0.08100000768899918f))) * _1417) + (saturate(11.0f - (sqrt((_713 * _713) + _723) / ((_1075 * 0.039000000804662704f) + 0.08100000768899918f))) * _1077)) + (saturate(11.0f - (sqrt((_730 * _730) + _723) / ((_1759 * 0.039000000804662704f) + 0.08100000768899918f))) * _1761)) + (((((saturate(1.0f - (abs(_714) * 0.8333333134651184f)) * _1783) + (saturate(1.0f - (abs(dot(float2(_717, _718), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1784)) * saturate(_1761)) + ((_1783 * saturate(1.0f - (abs(dot(float2(_713, _714), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1784)) * 0.5f));
  float _1813 = (_1806 * ((_673 * _673) - _635)) + _635;
  float _1814 = (_1806 * ((_674 * _674) - _636)) + _636;
  float _1815 = (_1806 * ((_675 * _675) - _637)) + _637;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1824 = ((_1813 * 0.3930000066757202f) + (_1814 * 0.7689999938011169f)) + (_1815 * 0.1889999955892563f);
    float _1829 = ((_1813 * 0.3490000069141388f) + (_1814 * 0.6859999895095825f)) + (_1815 * 0.1679999977350235f);
    float _1834 = ((_1813 * 0.2720000147819519f) + (_1814 * 0.5339999794960022f)) + (_1815 * 0.13099999725818634f);
    float _1835 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1840 = ((_1813 * 0.2125999927520752f) + (_1814 * 0.7152000069618225f)) + (_1815 * 0.0722000002861023f);
    _1860 = ((((_1824 - _1813) + ((_1840 - _1824) * 0.6499999761581421f)) * _1835) + _1813);
    _1861 = ((((_1829 - _1814) + ((_1840 - _1829) * 0.6499999761581421f)) * _1835) + _1814);
    _1862 = ((((_1834 - _1815) + ((_1840 - _1834) * 0.6499999761581421f)) * _1835) + _1815);
  } else {
    _1860 = _1813;
    _1861 = _1814;
    _1862 = _1815;
  }
  if (!(frame_consts.invert == 0)) {
    _1871 = (1.0f - _1860);
    _1872 = (1.0f - _1861);
    _1873 = (1.0f - _1862);
  } else {
    _1871 = _1860;
    _1872 = _1861;
    _1873 = _1862;
  }
  SV_Target.x = _1871;
  SV_Target.y = _1872;
  SV_Target.z = _1873;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
