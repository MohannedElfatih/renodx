#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _14 = float((int)(frame_consts.vp_dim.x));
  float _15 = float((int)(frame_consts.vp_dim.y));
  float4 _16 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float3 _20 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _35 = max((((1.0f - (_16.y * 0.7152000069618225f)) - (_16.x * 0.2125999927520752f)) - (_16.z * 0.0722000002861023f)), 0.0010000000474974513f);
  float _39 = (_16.x / _35) + (frame_consts.params.bloom.intensity * _20.x);
  float _40 = (_16.y / _35) + (frame_consts.params.bloom.intensity * _20.y);
  float _41 = (_16.z / _35) + (frame_consts.params.bloom.intensity * _20.z);
  float _47 = (((_39 * 0.2125999927520752f) + 1.0f) + (_40 * 0.7152000069618225f)) + (_41 * 0.0722000002861023f);
  float _51 = saturate(_39 / _47);
  float _52 = saturate(_40 / _47);
  float _53 = saturate(_41 / _47);
  float _59 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _63 = 10000.0f / ((_59.x * 19999.5f) + 0.5f);
  float _68 = (_63 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _70 = (_63 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _71 = -0.0f - _63;
  float _95 = mad((frame_consts.paper_xf[2].z), _71, mad((frame_consts.paper_xf[1].z), _70, (_68 * (frame_consts.paper_xf[0].z))));
  float _107 = exp2(round(log2(max(5.0f, (-0.0f - (_95 - frame_consts.game_plane_blend.x)))) * 10.0f) * 0.10000000149011612f);
  float _109 = min((1.0f / _107), 0.20000000298023224f);
  float _110 = frame_consts.game_plane_blend.x - _107;
  float _117 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_110 * (mad((frame_consts.paper_xf[2].x), _71, mad((frame_consts.paper_xf[1].x), _70, (_68 * (frame_consts.paper_xf[0].x)))) / _95)) + (frame_consts.paper_xf[3].x)) * _109), (((_110 * (mad((frame_consts.paper_xf[2].y), _71, mad((frame_consts.paper_xf[1].y), _70, (_68 * (frame_consts.paper_xf[0].y)))) / _95)) + (frame_consts.paper_xf[3].y)) * _109)), 0.0f);
  float _122 = (1.0f - _117.x) * frame_consts.paper_mult;
  float _137 = _14 / _15;
  float _149 = exp2(log2(saturate((frame_consts.params.vignette.intensity * abs(O_Uv.x + -0.5f)) * (((_137 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _150 = exp2(log2(saturate(frame_consts.params.vignette.intensity * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _156 = exp2(log2(saturate(1.0f - dot(float2(_149, _150), float2(_149, _150)))) * 6.0f);
  float _161 = 1.0f - _156;
  float _163 = 1.0f - (_161 * 0.8500000238418579f);
  float _170 = (_163 * ((_51 - (_122 * _51)) - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _171 = (_163 * ((_52 - (_122 * _52)) - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _172 = (_163 * ((_53 - (_122 * _53)) - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _176 = _14 * O_Uv.x;
  float _177 = _15 * O_Uv.y;
  float _178 = _176 + _177;
  float _184 = frac(_178 * 0.0033333334140479565f) + -0.5f;
  float _185 = frac((_177 - _176) * 0.0033333334140479565f) + -0.5f;
  float _191 = saturate(sqrt((_185 * _185) + (_184 * _184)) * 2.0f);
  float _202 = saturate((sin((_178 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _207 = ((_202 * _202) * 0.2199999988079071f) * (3.0f - (_202 * 2.0f));
  float _208 = _207 + 0.9777389168739319f;
  float _209 = ((_191 * 0.13274884223937988f) + 0.7175776362419128f) + _207;
  float _210 = ((_191 * 0.3335757553577423f) + 0.30871906876564026f) + _207;
  float _215 = (O_Uv.x * 1080.0f) * _137;
  float _216 = O_Uv.y * 1080.0f;
  float _217 = _215 * 0.04444444552063942f;
  float _218 = O_Uv.y * 27.712812423706055f;
  float _220 = ceil(_217 - _218);
  float _223 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _226 = ceil((-0.0f - _218) - _217);
  float _228 = (_223 + _220) + _226;
  float _230 = (_228 * 22.5f) + -33.75f;
  float _231 = _220 - _226;
  float _233 = _231 * 11.25f;
  float _239 = (((_223 * 0.5773502588272095f) - (_220 * 0.28867512941360474f)) - (_226 * 0.28867512941360474f)) * 22.5f;
  float _242 = _230 + _233;
  float _243 = _239 + (19.485570907592773f - (_228 * 12.990381240844727f));
  float _246 = ((_228 * 25.980762481689453f) + -38.97114181518555f) + _239;
  float _247 = _233 - _230;
  float _248 = _242 - _215;
  float _249 = _243 - _216;
  float _252 = _233 - _215;
  float _253 = _246 - _216;
  float _258 = _249 * _249;
  float _265 = _247 - _215;
  float _269 = _243 * 2.5f;
  float _270 = frame_consts.time * 1.5f;
  float _274 = _243 * 0.004444444552063942f;
  float _275 = frame_consts.time * 0.15000000596046448f;
  float _276 = (_242 * 0.04444444552063942f) - _275;
  float _277 = _274 - _275;
  float _278 = frame_consts.time * 0.02500000037252903f;
  float _279 = dot(float3(_276, _277, _278), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _283 = floor(_279 + _276);
  float _284 = floor(_279 + _277);
  float _285 = floor(_279 + _278);
  float _289 = dot(float3(_283, _284, _285), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _290 = _289 + (_276 - _283);
  float _291 = _289 + (_277 - _284);
  float _292 = (_278 - _285) + _289;
  float _296 = select((_290 < _291), 0.0f, 1.0f);
  float _297 = select((_291 < _292), 0.0f, 1.0f);
  float _298 = select((_292 < _290), 0.0f, 1.0f);
  float _299 = 1.0f - _296;
  float _300 = 1.0f - _297;
  float _301 = 1.0f - _298;
  float _302 = min(_296, _301);
  float _303 = min(_297, _299);
  float _304 = min(_298, _300);
  float _305 = max(_296, _301);
  float _306 = max(_297, _299);
  float _307 = max(_298, _300);
  float _311 = (_290 - _302) + 0.1666666716337204f;
  float _312 = (_291 - _303) + 0.1666666716337204f;
  float _313 = (_292 - _304) + 0.1666666716337204f;
  float _317 = (_290 - _305) + 0.3333333432674408f;
  float _318 = (_291 - _306) + 0.3333333432674408f;
  float _319 = (_292 - _307) + 0.3333333432674408f;
  float _320 = _290 + -0.5f;
  float _321 = _291 + -0.5f;
  float _322 = _292 + -0.5f;
  float _332 = _283 - (floor(_283 * 0.0034602077212184668f) * 289.0f);
  float _333 = _284 - (floor(_284 * 0.0034602077212184668f) * 289.0f);
  float _334 = _285 - (floor(_285 * 0.0034602077212184668f) * 289.0f);
  float _335 = _334 + _304;
  float _336 = _334 + _307;
  float _337 = _334 + 1.0f;
  float _346 = ((_334 * 34.0f) + 1.0f) * _334;
  float _347 = ((_335 * 34.0f) + 1.0f) * _335;
  float _348 = ((_336 * 34.0f) + 1.0f) * _336;
  float _349 = ((_337 * 34.0f) + 1.0f) * _337;
  float _363 = (_346 - (floor(_346 * 0.0034602077212184668f) * 289.0f)) + _333;
  float _366 = ((_333 + _303) - (floor(_347 * 0.0034602077212184668f) * 289.0f)) + _347;
  float _369 = ((_333 + _306) - (floor(_348 * 0.0034602077212184668f) * 289.0f)) + _348;
  float _372 = ((_333 + 1.0f) - (floor(_349 * 0.0034602077212184668f) * 289.0f)) + _349;
  float _381 = ((_363 * 34.0f) + 1.0f) * _363;
  float _382 = ((_366 * 34.0f) + 1.0f) * _366;
  float _383 = ((_369 * 34.0f) + 1.0f) * _369;
  float _384 = ((_372 * 34.0f) + 1.0f) * _372;
  float _398 = (_381 - (floor(_381 * 0.0034602077212184668f) * 289.0f)) + _332;
  float _401 = ((_332 + _302) - (floor(_382 * 0.0034602077212184668f) * 289.0f)) + _382;
  float _404 = ((_332 + _305) - (floor(_383 * 0.0034602077212184668f) * 289.0f)) + _383;
  float _407 = ((_332 + 1.0f) - (floor(_384 * 0.0034602077212184668f) * 289.0f)) + _384;
  float _416 = ((_398 * 34.0f) + 1.0f) * _398;
  float _417 = ((_401 * 34.0f) + 1.0f) * _401;
  float _418 = ((_404 * 34.0f) + 1.0f) * _404;
  float _419 = ((_407 * 34.0f) + 1.0f) * _407;
  float _432 = _416 - (floor(_416 * 0.0034602077212184668f) * 289.0f);
  float _433 = _417 - (floor(_417 * 0.0034602077212184668f) * 289.0f);
  float _434 = _418 - (floor(_418 * 0.0034602077212184668f) * 289.0f);
  float _435 = _419 - (floor(_419 * 0.0034602077212184668f) * 289.0f);
  float _448 = _432 - (floor(_432 * 0.020408164709806442f) * 49.0f);
  float _449 = _433 - (floor(_433 * 0.020408164709806442f) * 49.0f);
  float _450 = _434 - (floor(_434 * 0.020408164709806442f) * 49.0f);
  float _451 = _435 - (floor(_435 * 0.020408164709806442f) * 49.0f);
  float _456 = floor(_448 * 0.1428571492433548f);
  float _457 = floor(_449 * 0.1428571492433548f);
  float _458 = floor(_450 * 0.1428571492433548f);
  float _459 = floor(_451 * 0.1428571492433548f);
  float _476 = (_456 * 0.2857142984867096f) + -0.9285714030265808f;
  float _477 = (_457 * 0.2857142984867096f) + -0.9285714030265808f;
  float _478 = (_458 * 0.2857142984867096f) + -0.9285714030265808f;
  float _479 = (_459 * 0.2857142984867096f) + -0.9285714030265808f;
  float _484 = (floor(_448 - (_456 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _485 = (floor(_449 - (_457 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _486 = (floor(_450 - (_458 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _487 = (floor(_451 - (_459 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _500 = (1.0f - abs(_476)) - abs(_484);
  float _501 = (1.0f - abs(_477)) - abs(_485);
  float _502 = (1.0f - abs(_478)) - abs(_486);
  float _503 = (1.0f - abs(_479)) - abs(_487);
  float _532 = select((_500 > 0.0f), -0.0f, -1.0f);
  float _533 = select((_501 > 0.0f), -0.0f, -1.0f);
  float _534 = select((_502 > 0.0f), -0.0f, -1.0f);
  float _535 = select((_503 > 0.0f), -0.0f, -1.0f);
  float _540 = (((floor(_476) * 2.0f) + 1.0f) * _532) + _476;
  float _541 = (((floor(_484) * 2.0f) + 1.0f) * _532) + _484;
  float _542 = (((floor(_477) * 2.0f) + 1.0f) * _533) + _477;
  float _543 = (((floor(_485) * 2.0f) + 1.0f) * _533) + _485;
  float _548 = (((floor(_478) * 2.0f) + 1.0f) * _534) + _478;
  float _549 = (((floor(_486) * 2.0f) + 1.0f) * _534) + _486;
  float _550 = (((floor(_479) * 2.0f) + 1.0f) * _535) + _479;
  float _551 = (((floor(_487) * 2.0f) + 1.0f) * _535) + _487;
  float _560 = 1.7928400039672852f - (dot(float3(_540, _541, _500), float3(_540, _541, _500)) * 0.8537350296974182f);
  float _561 = 1.7928400039672852f - (dot(float3(_542, _543, _501), float3(_542, _543, _501)) * 0.8537350296974182f);
  float _562 = 1.7928400039672852f - (dot(float3(_548, _549, _502), float3(_548, _549, _502)) * 0.8537350296974182f);
  float _563 = 1.7928400039672852f - (dot(float3(_550, _551, _503), float3(_550, _551, _503)) * 0.8537350296974182f);
  float _584 = max((0.6000000238418579f - dot(float3(_290, _291, _292), float3(_290, _291, _292))), 0.0f);
  float _585 = max((0.6000000238418579f - dot(float3(_311, _312, _313), float3(_311, _312, _313))), 0.0f);
  float _586 = max((0.6000000238418579f - dot(float3(_317, _318, _319), float3(_317, _318, _319))), 0.0f);
  float _587 = max((0.6000000238418579f - dot(float3(_320, _321, _322), float3(_320, _321, _322))), 0.0f);
  float _588 = _584 * _584;
  float _589 = _585 * _585;
  float _590 = _586 * _586;
  float _591 = _587 * _587;
  float _606 = saturate((((sin(_269 - _270) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_588 * _588), (_589 * _589), (_590 * _590), (_591 * _591)), float4(dot(float3((_560 * _540), (_560 * _541), (_560 * _500)), float3(_290, _291, _292)), dot(float3((_561 * _542), (_561 * _543), (_561 * _501)), float3(_311, _312, _313)), dot(float3((_562 * _548), (_562 * _549), (_562 * _502)), float3(_317, _318, _319)), dot(float3((_563 * _550), (_563 * _551), (_563 * _503)), float3(_320, _321, _322)))) * 21.0f)) * 4.0f);
  float _610 = (_606 * _606) * (3.0f - (_606 * 2.0f));
  float _612 = (_610 * 0.6499999761581421f) + 0.3499999940395355f;
  float _617 = (_231 * 0.5f) - _275;
  float _618 = (_246 * 0.004444444552063942f) - _275;
  float _619 = dot(float3(_617, _618, _278), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _623 = floor(_619 + _617);
  float _624 = floor(_619 + _618);
  float _625 = floor(_619 + _278);
  float _629 = dot(float3(_623, _624, _625), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _630 = _629 + (_617 - _623);
  float _631 = _629 + (_618 - _624);
  float _632 = (_278 - _625) + _629;
  float _636 = select((_630 < _631), 0.0f, 1.0f);
  float _637 = select((_631 < _632), 0.0f, 1.0f);
  float _638 = select((_632 < _630), 0.0f, 1.0f);
  float _639 = 1.0f - _636;
  float _640 = 1.0f - _637;
  float _641 = 1.0f - _638;
  float _642 = min(_636, _641);
  float _643 = min(_637, _639);
  float _644 = min(_638, _640);
  float _645 = max(_636, _641);
  float _646 = max(_637, _639);
  float _647 = max(_638, _640);
  float _651 = (_630 - _642) + 0.1666666716337204f;
  float _652 = (_631 - _643) + 0.1666666716337204f;
  float _653 = (_632 - _644) + 0.1666666716337204f;
  float _657 = (_630 - _645) + 0.3333333432674408f;
  float _658 = (_631 - _646) + 0.3333333432674408f;
  float _659 = (_632 - _647) + 0.3333333432674408f;
  float _660 = _630 + -0.5f;
  float _661 = _631 + -0.5f;
  float _662 = _632 + -0.5f;
  float _672 = _623 - (floor(_623 * 0.0034602077212184668f) * 289.0f);
  float _673 = _624 - (floor(_624 * 0.0034602077212184668f) * 289.0f);
  float _674 = _625 - (floor(_625 * 0.0034602077212184668f) * 289.0f);
  float _675 = _674 + _644;
  float _676 = _674 + _647;
  float _677 = _674 + 1.0f;
  float _686 = ((_674 * 34.0f) + 1.0f) * _674;
  float _687 = ((_675 * 34.0f) + 1.0f) * _675;
  float _688 = ((_676 * 34.0f) + 1.0f) * _676;
  float _689 = ((_677 * 34.0f) + 1.0f) * _677;
  float _703 = (_686 - (floor(_686 * 0.0034602077212184668f) * 289.0f)) + _673;
  float _706 = ((_673 + _643) - (floor(_687 * 0.0034602077212184668f) * 289.0f)) + _687;
  float _709 = ((_673 + _646) - (floor(_688 * 0.0034602077212184668f) * 289.0f)) + _688;
  float _712 = ((_673 + 1.0f) - (floor(_689 * 0.0034602077212184668f) * 289.0f)) + _689;
  float _721 = ((_703 * 34.0f) + 1.0f) * _703;
  float _722 = ((_706 * 34.0f) + 1.0f) * _706;
  float _723 = ((_709 * 34.0f) + 1.0f) * _709;
  float _724 = ((_712 * 34.0f) + 1.0f) * _712;
  float _738 = (_721 - (floor(_721 * 0.0034602077212184668f) * 289.0f)) + _672;
  float _741 = ((_672 + _642) - (floor(_722 * 0.0034602077212184668f) * 289.0f)) + _722;
  float _744 = ((_672 + _645) - (floor(_723 * 0.0034602077212184668f) * 289.0f)) + _723;
  float _747 = ((_672 + 1.0f) - (floor(_724 * 0.0034602077212184668f) * 289.0f)) + _724;
  float _756 = ((_738 * 34.0f) + 1.0f) * _738;
  float _757 = ((_741 * 34.0f) + 1.0f) * _741;
  float _758 = ((_744 * 34.0f) + 1.0f) * _744;
  float _759 = ((_747 * 34.0f) + 1.0f) * _747;
  float _772 = _756 - (floor(_756 * 0.0034602077212184668f) * 289.0f);
  float _773 = _757 - (floor(_757 * 0.0034602077212184668f) * 289.0f);
  float _774 = _758 - (floor(_758 * 0.0034602077212184668f) * 289.0f);
  float _775 = _759 - (floor(_759 * 0.0034602077212184668f) * 289.0f);
  float _788 = _772 - (floor(_772 * 0.020408164709806442f) * 49.0f);
  float _789 = _773 - (floor(_773 * 0.020408164709806442f) * 49.0f);
  float _790 = _774 - (floor(_774 * 0.020408164709806442f) * 49.0f);
  float _791 = _775 - (floor(_775 * 0.020408164709806442f) * 49.0f);
  float _796 = floor(_788 * 0.1428571492433548f);
  float _797 = floor(_789 * 0.1428571492433548f);
  float _798 = floor(_790 * 0.1428571492433548f);
  float _799 = floor(_791 * 0.1428571492433548f);
  float _816 = (_796 * 0.2857142984867096f) + -0.9285714030265808f;
  float _817 = (_797 * 0.2857142984867096f) + -0.9285714030265808f;
  float _818 = (_798 * 0.2857142984867096f) + -0.9285714030265808f;
  float _819 = (_799 * 0.2857142984867096f) + -0.9285714030265808f;
  float _824 = (floor(_788 - (_796 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _825 = (floor(_789 - (_797 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _826 = (floor(_790 - (_798 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _827 = (floor(_791 - (_799 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _840 = (1.0f - abs(_816)) - abs(_824);
  float _841 = (1.0f - abs(_817)) - abs(_825);
  float _842 = (1.0f - abs(_818)) - abs(_826);
  float _843 = (1.0f - abs(_819)) - abs(_827);
  float _872 = select((_840 > 0.0f), -0.0f, -1.0f);
  float _873 = select((_841 > 0.0f), -0.0f, -1.0f);
  float _874 = select((_842 > 0.0f), -0.0f, -1.0f);
  float _875 = select((_843 > 0.0f), -0.0f, -1.0f);
  float _880 = (((floor(_816) * 2.0f) + 1.0f) * _872) + _816;
  float _881 = (((floor(_824) * 2.0f) + 1.0f) * _872) + _824;
  float _882 = (((floor(_817) * 2.0f) + 1.0f) * _873) + _817;
  float _883 = (((floor(_825) * 2.0f) + 1.0f) * _873) + _825;
  float _888 = (((floor(_818) * 2.0f) + 1.0f) * _874) + _818;
  float _889 = (((floor(_826) * 2.0f) + 1.0f) * _874) + _826;
  float _890 = (((floor(_819) * 2.0f) + 1.0f) * _875) + _819;
  float _891 = (((floor(_827) * 2.0f) + 1.0f) * _875) + _827;
  float _900 = 1.7928400039672852f - (dot(float3(_880, _881, _840), float3(_880, _881, _840)) * 0.8537350296974182f);
  float _901 = 1.7928400039672852f - (dot(float3(_882, _883, _841), float3(_882, _883, _841)) * 0.8537350296974182f);
  float _902 = 1.7928400039672852f - (dot(float3(_888, _889, _842), float3(_888, _889, _842)) * 0.8537350296974182f);
  float _903 = 1.7928400039672852f - (dot(float3(_890, _891, _843), float3(_890, _891, _843)) * 0.8537350296974182f);
  float _924 = max((0.6000000238418579f - dot(float3(_630, _631, _632), float3(_630, _631, _632))), 0.0f);
  float _925 = max((0.6000000238418579f - dot(float3(_651, _652, _653), float3(_651, _652, _653))), 0.0f);
  float _926 = max((0.6000000238418579f - dot(float3(_657, _658, _659), float3(_657, _658, _659))), 0.0f);
  float _927 = max((0.6000000238418579f - dot(float3(_660, _661, _662), float3(_660, _661, _662))), 0.0f);
  float _928 = _924 * _924;
  float _929 = _925 * _925;
  float _930 = _926 * _926;
  float _931 = _927 * _927;
  float _946 = saturate((((sin((_246 * 2.5f) - _270) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_928 * _928), (_929 * _929), (_930 * _930), (_931 * _931)), float4(dot(float3((_900 * _880), (_900 * _881), (_900 * _840)), float3(_630, _631, _632)), dot(float3((_901 * _882), (_901 * _883), (_901 * _841)), float3(_651, _652, _653)), dot(float3((_902 * _888), (_902 * _889), (_902 * _842)), float3(_657, _658, _659)), dot(float3((_903 * _890), (_903 * _891), (_903 * _843)), float3(_660, _661, _662)))) * 21.0f)) * 4.0f);
  float _950 = (_946 * _946) * (3.0f - (_946 * 2.0f));
  float _952 = (_950 * 0.6499999761581421f) + 0.3499999940395355f;
  float _959 = frame_consts.time * 0.15000000596046448f;
  float _960 = (_247 * 0.04444444552063942f) - _959;
  float _961 = _274 - _959;
  float _962 = frame_consts.time * 0.02500000037252903f;
  float _963 = dot(float3(_960, _961, _962), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _967 = floor(_960 + _963);
  float _968 = floor(_961 + _963);
  float _969 = floor(_962 + _963);
  float _973 = dot(float3(_967, _968, _969), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _974 = _973 + (_960 - _967);
  float _975 = _973 + (_961 - _968);
  float _976 = (_962 - _969) + _973;
  float _980 = select((_974 < _975), 0.0f, 1.0f);
  float _981 = select((_975 < _976), 0.0f, 1.0f);
  float _982 = select((_976 < _974), 0.0f, 1.0f);
  float _983 = 1.0f - _980;
  float _984 = 1.0f - _981;
  float _985 = 1.0f - _982;
  float _986 = min(_980, _985);
  float _987 = min(_981, _983);
  float _988 = min(_982, _984);
  float _989 = max(_980, _985);
  float _990 = max(_981, _983);
  float _991 = max(_982, _984);
  float _995 = (_974 - _986) + 0.1666666716337204f;
  float _996 = (_975 - _987) + 0.1666666716337204f;
  float _997 = (_976 - _988) + 0.1666666716337204f;
  float _1001 = (_974 - _989) + 0.3333333432674408f;
  float _1002 = (_975 - _990) + 0.3333333432674408f;
  float _1003 = (_976 - _991) + 0.3333333432674408f;
  float _1004 = _974 + -0.5f;
  float _1005 = _975 + -0.5f;
  float _1006 = _976 + -0.5f;
  float _1016 = _967 - (floor(_967 * 0.0034602077212184668f) * 289.0f);
  float _1017 = _968 - (floor(_968 * 0.0034602077212184668f) * 289.0f);
  float _1018 = _969 - (floor(_969 * 0.0034602077212184668f) * 289.0f);
  float _1019 = _1018 + _988;
  float _1020 = _1018 + _991;
  float _1021 = _1018 + 1.0f;
  float _1030 = ((_1018 * 34.0f) + 1.0f) * _1018;
  float _1031 = ((_1019 * 34.0f) + 1.0f) * _1019;
  float _1032 = ((_1020 * 34.0f) + 1.0f) * _1020;
  float _1033 = ((_1021 * 34.0f) + 1.0f) * _1021;
  float _1047 = (_1030 - (floor(_1030 * 0.0034602077212184668f) * 289.0f)) + _1017;
  float _1050 = ((_1017 + _987) - (floor(_1031 * 0.0034602077212184668f) * 289.0f)) + _1031;
  float _1053 = ((_1017 + _990) - (floor(_1032 * 0.0034602077212184668f) * 289.0f)) + _1032;
  float _1056 = ((_1017 + 1.0f) - (floor(_1033 * 0.0034602077212184668f) * 289.0f)) + _1033;
  float _1065 = ((_1047 * 34.0f) + 1.0f) * _1047;
  float _1066 = ((_1050 * 34.0f) + 1.0f) * _1050;
  float _1067 = ((_1053 * 34.0f) + 1.0f) * _1053;
  float _1068 = ((_1056 * 34.0f) + 1.0f) * _1056;
  float _1082 = (_1065 - (floor(_1065 * 0.0034602077212184668f) * 289.0f)) + _1016;
  float _1085 = ((_1016 + _986) - (floor(_1066 * 0.0034602077212184668f) * 289.0f)) + _1066;
  float _1088 = ((_1016 + _989) - (floor(_1067 * 0.0034602077212184668f) * 289.0f)) + _1067;
  float _1091 = ((_1016 + 1.0f) - (floor(_1068 * 0.0034602077212184668f) * 289.0f)) + _1068;
  float _1100 = ((_1082 * 34.0f) + 1.0f) * _1082;
  float _1101 = ((_1085 * 34.0f) + 1.0f) * _1085;
  float _1102 = ((_1088 * 34.0f) + 1.0f) * _1088;
  float _1103 = ((_1091 * 34.0f) + 1.0f) * _1091;
  float _1116 = _1100 - (floor(_1100 * 0.0034602077212184668f) * 289.0f);
  float _1117 = _1101 - (floor(_1101 * 0.0034602077212184668f) * 289.0f);
  float _1118 = _1102 - (floor(_1102 * 0.0034602077212184668f) * 289.0f);
  float _1119 = _1103 - (floor(_1103 * 0.0034602077212184668f) * 289.0f);
  float _1132 = _1116 - (floor(_1116 * 0.020408164709806442f) * 49.0f);
  float _1133 = _1117 - (floor(_1117 * 0.020408164709806442f) * 49.0f);
  float _1134 = _1118 - (floor(_1118 * 0.020408164709806442f) * 49.0f);
  float _1135 = _1119 - (floor(_1119 * 0.020408164709806442f) * 49.0f);
  float _1140 = floor(_1132 * 0.1428571492433548f);
  float _1141 = floor(_1133 * 0.1428571492433548f);
  float _1142 = floor(_1134 * 0.1428571492433548f);
  float _1143 = floor(_1135 * 0.1428571492433548f);
  float _1160 = (_1140 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1161 = (_1141 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1162 = (_1142 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1163 = (_1143 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1168 = (floor(_1132 - (_1140 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1169 = (floor(_1133 - (_1141 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1170 = (floor(_1134 - (_1142 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1171 = (floor(_1135 - (_1143 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1184 = (1.0f - abs(_1160)) - abs(_1168);
  float _1185 = (1.0f - abs(_1161)) - abs(_1169);
  float _1186 = (1.0f - abs(_1162)) - abs(_1170);
  float _1187 = (1.0f - abs(_1163)) - abs(_1171);
  float _1216 = select((_1184 > 0.0f), -0.0f, -1.0f);
  float _1217 = select((_1185 > 0.0f), -0.0f, -1.0f);
  float _1218 = select((_1186 > 0.0f), -0.0f, -1.0f);
  float _1219 = select((_1187 > 0.0f), -0.0f, -1.0f);
  float _1224 = (((floor(_1160) * 2.0f) + 1.0f) * _1216) + _1160;
  float _1225 = (((floor(_1168) * 2.0f) + 1.0f) * _1216) + _1168;
  float _1226 = (((floor(_1161) * 2.0f) + 1.0f) * _1217) + _1161;
  float _1227 = (((floor(_1169) * 2.0f) + 1.0f) * _1217) + _1169;
  float _1232 = (((floor(_1162) * 2.0f) + 1.0f) * _1218) + _1162;
  float _1233 = (((floor(_1170) * 2.0f) + 1.0f) * _1218) + _1170;
  float _1234 = (((floor(_1163) * 2.0f) + 1.0f) * _1219) + _1163;
  float _1235 = (((floor(_1171) * 2.0f) + 1.0f) * _1219) + _1171;
  float _1244 = 1.7928400039672852f - (dot(float3(_1224, _1225, _1184), float3(_1224, _1225, _1184)) * 0.8537350296974182f);
  float _1245 = 1.7928400039672852f - (dot(float3(_1226, _1227, _1185), float3(_1226, _1227, _1185)) * 0.8537350296974182f);
  float _1246 = 1.7928400039672852f - (dot(float3(_1232, _1233, _1186), float3(_1232, _1233, _1186)) * 0.8537350296974182f);
  float _1247 = 1.7928400039672852f - (dot(float3(_1234, _1235, _1187), float3(_1234, _1235, _1187)) * 0.8537350296974182f);
  float _1268 = max((0.6000000238418579f - dot(float3(_974, _975, _976), float3(_974, _975, _976))), 0.0f);
  float _1269 = max((0.6000000238418579f - dot(float3(_995, _996, _997), float3(_995, _996, _997))), 0.0f);
  float _1270 = max((0.6000000238418579f - dot(float3(_1001, _1002, _1003), float3(_1001, _1002, _1003))), 0.0f);
  float _1271 = max((0.6000000238418579f - dot(float3(_1004, _1005, _1006), float3(_1004, _1005, _1006))), 0.0f);
  float _1272 = _1268 * _1268;
  float _1273 = _1269 * _1269;
  float _1274 = _1270 * _1270;
  float _1275 = _1271 * _1271;
  float _1290 = saturate((((sin(_269 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1272 * _1272), (_1273 * _1273), (_1274 * _1274), (_1275 * _1275)), float4(dot(float3((_1244 * _1224), (_1244 * _1225), (_1244 * _1184)), float3(_974, _975, _976)), dot(float3((_1245 * _1226), (_1245 * _1227), (_1245 * _1185)), float3(_995, _996, _997)), dot(float3((_1246 * _1232), (_1246 * _1233), (_1246 * _1186)), float3(_1001, _1002, _1003)), dot(float3((_1247 * _1234), (_1247 * _1235), (_1247 * _1187)), float3(_1004, _1005, _1006)))) * 21.0f)) * 4.0f);
  float _1294 = (_1290 * _1290) * (3.0f - (_1290 * 2.0f));
  float _1296 = (_1294 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1318 = saturate(_612);
  float _1319 = saturate(_952);
  float _1341 = (((_156 * 1.2000000476837158f) * _161) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_253 * _253) + (_252 * _252)) / ((_950 * 0.039000000804662704f) + 0.08100000768899918f))) * _952) + (saturate(11.0f - (sqrt((_248 * _248) + _258) / ((_610 * 0.039000000804662704f) + 0.08100000768899918f))) * _612)) + (saturate(11.0f - (sqrt((_265 * _265) + _258) / ((_1294 * 0.039000000804662704f) + 0.08100000768899918f))) * _1296)) + (((((saturate(1.0f - (abs(_249) * 0.8333333134651184f)) * _1318) + (saturate(1.0f - (abs(dot(float2(_252, _253), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1319)) * saturate(_1296)) + ((_1318 * saturate(1.0f - (abs(dot(float2(_248, _249), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1319)) * 0.5f));
  SV_Target.x = ((_1341 * ((_208 * _208) - _170)) + _170);
  SV_Target.y = ((_1341 * ((_209 * _209) - _171)) + _171);
  SV_Target.z = ((_1341 * ((_210 * _210) - _172)) + _172);
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(_16.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
