#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float2> distortion : register(t4);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float2 _17 = distortion.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _20 = _16 / _15;
  float _25 = saturate((_17.x * _20) + O_Uv.x);
  float _26 = saturate((_17.y * _20) + O_Uv.y);
  float _58;
  float _59;
  float _60;
  float _61;
  float _224;
  float _235;
  float _246;
  float _269;
  float _270;
  float _271;
  float _432;
  float _433;
  float _434;
  float _475;
  float _476;
  float _477;
  float _626;
  float _627;
  float _628;
  float _636;
  float _1904;
  float _1905;
  float _1906;
  float _1915;
  float _1916;
  float _1917;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _33 = abs(_25 + -0.5f);
    float _34 = abs(_26 + -0.5f);
    float _38 = (rsqrt(dot(float2(_33, _34), float2(_33, _34))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _39 = _38 * _33;
    float _40 = _38 * _34;
    float4 _43 = tex.SampleLevel(sampler_nearest, float2((_39 + _25), (_40 + _26)), 0.0f);
    float4 _45 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    float4 _49 = tex.SampleLevel(sampler_nearest, float2((_25 - _39), (_26 - _40)), 0.0f);
    _58 = _43.x;
    _59 = _45.y;
    _60 = _49.z;
    _61 = 0.5f;
  } else {
    float4 _52 = tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
    _58 = _52.x;
    _59 = _52.y;
    _60 = _52.z;
    _61 = _52.w;
  }
  float3 untonemapped = float3(_58, _59, _60);

  float3 _62 = bloom_tex.SampleLevel(sampler_bilinear, float2(_25, _26), 0.0f);
  float _77 = max((((1.0f - (_58 * 0.2125999927520752f)) - (_59 * 0.7152000069618225f)) - (_60 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _81 = (_58 / _77) + (frame_consts.params.bloom.intensity * _62.x);
  float _82 = (_59 / _77) + (frame_consts.params.bloom.intensity * _62.y);
  float _83 = (_60 / _77) + (frame_consts.params.bloom.intensity * _62.z);
  float _89 = (((_81 * 0.2125999927520752f) + 1.0f) + (_82 * 0.7152000069618225f)) + (_83 * 0.0722000002861023f);
  float _93 = saturate(_81 / _89);
  float _94 = saturate(_82 / _89);
  float _95 = saturate(_83 / _89);
  if (!(frame_consts.glitch == 0)) {
    float _103 = float((int)(int((_15 / _16) * 1080.0f)));
    float _104 = _103 * _25;
    float _105 = _26 * 1080.0f;
    float _106 = _103 * 0.5f;
    float _109 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _116 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _122 = ((_116 * 3.0f) * exp2(1.4426950216293335f - (_116 * 4.328084945678711f))) + ((_109 * 5.0f) * exp2(1.4426950216293335f - (_109 * 7.213475227355957f)));
    float _123 = _122 * 15.0f;
    float _124 = _123 + 30.0f;
    float _126 = (_122 * 20.0f) + 80.0f;
    float _130 = abs(_103 * (_25 + -0.5f));
    float _131 = abs(_105 + -540.0f);
    float _134 = ((_130 - _106) + _124) + _126;
    float _137 = ((_131 + -510.0f) + _123) + _126;
    float _140 = max(_134, 0.0f);
    float _141 = max(_137, 0.0f);
    float _155 = _130 - (_106 - _124);
    float _156 = _131 - (510.0f - _123);
    float _157 = max(_155, 0.0f);
    float _158 = max(_156, 0.0f);
    float _174 = max(max(0.0f, (1.0f - saturate(abs((min(max(_134, _137), 0.0f) - _126) + sqrt((_141 * _141) + (_140 * _140))) + -0.5f))), ((1.0f - saturate(abs(min(max(_155, _156), 0.0f) + sqrt((_158 * _158) + (_157 * _157))) + -0.5f)) * (1.0f - saturate(_122 * 1.6666666269302368f))));
    float _185 = frac((_104 + _105) * 0.0012499999720603228f) + -0.5f;
    float _186 = frac((_105 - _104) * 0.0012499999720603228f) + -0.5f;
    float _198 = saturate((sin((((_104 * 0.0003124999930150807f) + (_26 * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _202 = (_198 * _198) * (3.0f - (_198 * 2.0f));
    float _204 = saturate(sqrt((_186 * _186) + (_185 * _185)) * 2.0f);
    float _209 = _202 * 0.20000000298023224f;
    float _211 = ((_204 * 0.12156862020492554f) + 0.7450979948043823f) + _209;
    float _212 = ((_204 * 0.3333333134651184f) + 0.34117645025253296f) + _209;
    do {
      if (!(!((_209 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _224 = ((_202 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _224 = exp2(log2((_202 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_211 <= 0.040449999272823334f))) {
          _235 = (_211 * 0.07739938050508499f);
        } else {
          _235 = exp2(log2((_211 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_212 <= 0.040449999272823334f))) {
            _246 = (_212 * 0.07739938050508499f);
          } else {
            _246 = exp2(log2((_212 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _252 = (((_224 * 0.2125999927520752f) + 1.0f) + (_235 * 0.7152000069618225f)) + (_246 * 0.0722000002861023f);
          _269 = (((saturate(_224 / _252) - _93) * _174) + _93);
          _270 = (((saturate(_235 / _252) - _94) * _174) + _94);
          _271 = (((saturate(_246 / _252) - _95) * _174) + _95);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _269 = _93;
    _270 = _94;
    _271 = _95;
  }
  float _277 = depth_tex.SampleLevel(sampler_nearest, float2(_25, _26), 0.0f);
  float _281 = 10000.0f / ((_277.x * 19999.5f) + 0.5f);
  float _286 = (_281 * ((_25 * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _288 = (_281 * (((1.0f - _26) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _289 = -0.0f - _281;
  float _313 = mad((frame_consts.paper_xf[2].z), _289, mad((frame_consts.paper_xf[1].z), _288, (_286 * (frame_consts.paper_xf[0].z))));
  float _314 = mad((frame_consts.paper_xf[2].x), _289, mad((frame_consts.paper_xf[1].x), _288, (_286 * (frame_consts.paper_xf[0].x)))) / _313;
  float _315 = mad((frame_consts.paper_xf[2].y), _289, mad((frame_consts.paper_xf[1].y), _288, (_286 * (frame_consts.paper_xf[0].y)))) / _313;
  float _319 = 1.0f - frame_consts.game_plane_blend.y;
  float _324 = log2(max(5.0f, (-0.0f - (_313 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _325 = floor(_324);
  float _326 = _324 - _325;
  float _328 = exp2(_325 * 0.10000000149011612f);
  float _329 = 1.0f / _328;
  float _330 = min(_329, 0.20000000298023224f);
  float _332 = min((_329 * 0.9330329895019531f), 0.20000000298023224f);
  float _333 = frame_consts.game_plane_blend.x - _328;
  float _339 = frame_consts.game_plane_blend.x - (_328 * 1.0717734098434448f);
  float _351 = frame_consts.game_plane_blend.x + 10.0f;
  float _356 = log2(max(5.0f, (-0.0f - (_313 - _351)))) * 10.0f;
  float _357 = floor(_356);
  float _358 = _356 - _357;
  float _360 = exp2(_357 * 0.10000000149011612f);
  float _361 = 1.0f / _360;
  float _362 = min(_361, 0.20000000298023224f);
  float _364 = min((_361 * 0.9330329895019531f), 0.20000000298023224f);
  float _365 = _351 - _360;
  float _371 = _351 - (_360 * 1.0717734098434448f);
  float _383 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_333 * _314) + (frame_consts.paper_xf[3].x)) * _330), (((_333 * _315) + (frame_consts.paper_xf[3].y)) * _330)), 0.0f);
  float _386 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_339 * _314) + (frame_consts.paper_xf[3].x)) * _332), (((_339 * _315) + (frame_consts.paper_xf[3].y)) * _332)), 0.0f);
  float _389 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_365 * _314) + (frame_consts.paper_xf[3].x)) * _362), (((_365 * _315) + (frame_consts.paper_xf[3].y)) * _362)), 0.0f);
  float _392 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_371 * _314) + (frame_consts.paper_xf[3].x)) * _364), (((_371 * _315) + (frame_consts.paper_xf[3].y)) * _364)), 0.0f);
  float _401 = ((((1.0f - (((1.0f - _326) * _319) * _383.x)) - ((_326 * _319) * _386.x)) - (((1.0f - _358) * frame_consts.game_plane_blend.y) * _389.x)) - ((_358 * frame_consts.game_plane_blend.y) * _392.x)) * frame_consts.paper_mult;
  float _405 = _269 - (_401 * _269);
  float _406 = _270 - (_401 * _270);
  float _407 = _271 - (_401 * _271);
  if (!(frame_consts.death_screen == 0)) {
    float _430 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _61), _61);
    _432 = _430;
    _433 = _430;
    _434 = _430;
  } else {
    _432 = (lerp(_405, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _433 = (lerp(_406, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _434 = (lerp(_407, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _442 = _25 * _15;
    float _443 = _26 * _16;
    float _444 = _442 * 0.06666667014360428f;
    float _445 = _443 * 0.038490019738674164f;
    float _447 = ceil(_444 - _445);
    float _449 = floor(_443 * 0.07698003947734833f);
    float _450 = _449 + 1.0f;
    float _453 = ceil((-0.0f - _444) - _445);
    float _455 = (_447 - _453) * 7.5f;
    float _456 = _447 * 0.28867512941360474f;
    float _457 = _450 * 0.5773502588272095f;
    float _458 = _457 - _456;
    float _459 = _453 * 0.28867512941360474f;
    float _462 = _455 / _15;
    float _463 = ((_458 - _459) * 15.0f) / _16;
    do {
      if (((_450 + _447) + _453) == 2.0f) {
        _475 = (_447 + 1.0f);
        _476 = (_449 + 2.0f);
        _477 = (_453 + 1.0f);
      } else {
        _475 = (_447 + -1.0f);
        _476 = _449;
        _477 = (_453 + -1.0f);
      }
      float _478 = _475 - _453;
      float _481 = _457 - (_475 * 0.28867512941360474f);
      float _482 = _481 - _459;
      float _485 = (_476 * 0.5773502588272095f) - _456;
      float _486 = _485 - _459;
      float _488 = _447 - _477;
      float _491 = _458 - (_477 * 0.28867512941360474f);
      float _495 = (_481 - _485) * 15.0f;
      float _496 = (_475 - _447) * -7.5f;
      float _498 = rsqrt(dot(float2(_495, _496), float2(_495, _496)));
      float _507 = (_486 - _491) * 15.0f;
      float _508 = (_477 - _453) * -7.5f;
      float _510 = rsqrt(dot(float2(_507, _508), float2(_507, _508)));
      float _519 = (_491 - _482) * 15.0f;
      float _520 = (_488 - _478) * -7.5f;
      float _522 = rsqrt(dot(float2(_519, _520), float2(_519, _520)));
      float _535 = _462 + -0.5f;
      float _536 = _463 + -0.5f;
      float _583 = _25 + -0.5f;
      float _584 = _26 + -0.5f;
      float _591 = ((frame_consts.time - sqrt((_584 * _584) + (_583 * _583))) + (frac(sin(dot(float2((_462 * 5.0f), (_463 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _595 = frac(abs(_591));
      float _599 = max((select((_591 >= (-0.0f - _591)), _595, (-0.0f - _595)) * 18.0f), 0.0f);
      float _615 = min(max((1.0f - (((((_599 * 1.600000023841858f) * exp2(1.4426950216293335f - (_599 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_536 * _536) + (_535 * _535)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_462 * 3.0f), (_463 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_462, _463), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_462 * 2.0f), (_463 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _621 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_478 * 7.5f) - _442), ((_482 * 15.0f) - _443)), float2((_495 * _498), (_498 * _496))))), abs(dot(float2((_455 - _442), ((_486 * 15.0f) - _443)), float2((_510 * _507), (_510 * _508))))), abs(dot(float2(((_488 * 7.5f) - _442), ((_491 * 15.0f) - _443)), float2((_522 * _519), (_522 * _520))))) * 0.2309400886297226f)) - _615) / ((_615 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _626 = (_621 * _432);
      _627 = (_621 * _433);
      _628 = (_621 * _434);
    } while (false);
  } else {
    _626 = _432;
    _627 = _433;
    _628 = _434;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _636 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _636 = 0.0f;
  }
  float _643 = frame_consts.params.vignette.intensity + _636;
  float _646 = _15 / _16;
  float _658 = exp2(log2(saturate((_643 * abs(_25 + -0.5f)) * (((_646 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _659 = exp2(log2(saturate(_643 * abs(_26 + -0.5f))) * 5.0f);
  float _665 = exp2(log2(saturate(1.0f - dot(float2(_658, _659), float2(_658, _659)))) * 6.0f);
  float _670 = 1.0f - _665;
  float _672 = 1.0f - (_670 * 0.8500000238418579f);
  float _679 = (_672 * (_626 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _680 = (_672 * (_627 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _681 = (_672 * (_628 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _685 = _25 * _15;
  float _686 = _26 * _16;
  float _687 = _686 + _685;
  float _693 = frac(_687 * 0.0033333334140479565f) + -0.5f;
  float _694 = frac((_686 - _685) * 0.0033333334140479565f) + -0.5f;
  float _700 = saturate(sqrt((_694 * _694) + (_693 * _693)) * 2.0f);
  float _711 = saturate((sin((_687 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _716 = ((_711 * _711) * 0.2199999988079071f) * (3.0f - (_711 * 2.0f));
  float _717 = _716 + 0.9777389168739319f;
  float _718 = ((_700 * 0.13274884223937988f) + 0.7175776362419128f) + _716;
  float _719 = ((_700 * 0.3335757553577423f) + 0.30871906876564026f) + _716;
  float _724 = (_25 * 1080.0f) * _646;
  float _725 = _26 * 1080.0f;
  float _726 = _724 * 0.04444444552063942f;
  float _727 = _26 * 27.712812423706055f;
  float _729 = ceil(_726 - _727);
  float _732 = floor(_26 * 55.42562484741211f) + 1.0f;
  float _735 = ceil((-0.0f - _727) - _726);
  float _737 = (_732 + _729) + _735;
  float _739 = (_737 * 22.5f) + -33.75f;
  float _740 = _729 - _735;
  float _742 = _740 * 11.25f;
  float _748 = (((_732 * 0.5773502588272095f) - (_729 * 0.28867512941360474f)) - (_735 * 0.28867512941360474f)) * 22.5f;
  float _751 = _739 + _742;
  float _752 = _748 + (19.485570907592773f - (_737 * 12.990381240844727f));
  float _755 = ((_737 * 25.980762481689453f) + -38.97114181518555f) + _748;
  float _756 = _742 - _739;
  float _757 = _751 - _724;
  float _758 = _752 - _725;
  float _761 = _742 - _724;
  float _762 = _755 - _725;
  float _767 = _758 * _758;
  float _774 = _756 - _724;
  float _778 = _752 * 2.5f;
  float _779 = frame_consts.time * 1.5f;
  float _783 = _752 * 0.004444444552063942f;
  float _784 = frame_consts.time * 0.15000000596046448f;
  float _785 = (_751 * 0.04444444552063942f) - _784;
  float _786 = _783 - _784;
  float _787 = frame_consts.time * 0.02500000037252903f;
  float _788 = dot(float3(_785, _786, _787), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _792 = floor(_788 + _785);
  float _793 = floor(_788 + _786);
  float _794 = floor(_788 + _787);
  float _798 = dot(float3(_792, _793, _794), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _799 = _798 + (_785 - _792);
  float _800 = _798 + (_786 - _793);
  float _801 = (_787 - _794) + _798;
  float _805 = select((_799 < _800), 0.0f, 1.0f);
  float _806 = select((_800 < _801), 0.0f, 1.0f);
  float _807 = select((_801 < _799), 0.0f, 1.0f);
  float _808 = 1.0f - _805;
  float _809 = 1.0f - _806;
  float _810 = 1.0f - _807;
  float _811 = min(_805, _810);
  float _812 = min(_806, _808);
  float _813 = min(_807, _809);
  float _814 = max(_805, _810);
  float _815 = max(_806, _808);
  float _816 = max(_807, _809);
  float _820 = (_799 - _811) + 0.1666666716337204f;
  float _821 = (_800 - _812) + 0.1666666716337204f;
  float _822 = (_801 - _813) + 0.1666666716337204f;
  float _826 = (_799 - _814) + 0.3333333432674408f;
  float _827 = (_800 - _815) + 0.3333333432674408f;
  float _828 = (_801 - _816) + 0.3333333432674408f;
  float _829 = _799 + -0.5f;
  float _830 = _800 + -0.5f;
  float _831 = _801 + -0.5f;
  float _841 = _792 - (floor(_792 * 0.0034602077212184668f) * 289.0f);
  float _842 = _793 - (floor(_793 * 0.0034602077212184668f) * 289.0f);
  float _843 = _794 - (floor(_794 * 0.0034602077212184668f) * 289.0f);
  float _844 = _843 + _813;
  float _845 = _843 + _816;
  float _846 = _843 + 1.0f;
  float _855 = ((_843 * 34.0f) + 1.0f) * _843;
  float _856 = ((_844 * 34.0f) + 1.0f) * _844;
  float _857 = ((_845 * 34.0f) + 1.0f) * _845;
  float _858 = ((_846 * 34.0f) + 1.0f) * _846;
  float _872 = (_855 - (floor(_855 * 0.0034602077212184668f) * 289.0f)) + _842;
  float _875 = ((_842 + _812) - (floor(_856 * 0.0034602077212184668f) * 289.0f)) + _856;
  float _878 = ((_842 + _815) - (floor(_857 * 0.0034602077212184668f) * 289.0f)) + _857;
  float _881 = ((_842 + 1.0f) - (floor(_858 * 0.0034602077212184668f) * 289.0f)) + _858;
  float _890 = ((_872 * 34.0f) + 1.0f) * _872;
  float _891 = ((_875 * 34.0f) + 1.0f) * _875;
  float _892 = ((_878 * 34.0f) + 1.0f) * _878;
  float _893 = ((_881 * 34.0f) + 1.0f) * _881;
  float _907 = (_890 - (floor(_890 * 0.0034602077212184668f) * 289.0f)) + _841;
  float _910 = ((_841 + _811) - (floor(_891 * 0.0034602077212184668f) * 289.0f)) + _891;
  float _913 = ((_841 + _814) - (floor(_892 * 0.0034602077212184668f) * 289.0f)) + _892;
  float _916 = ((_841 + 1.0f) - (floor(_893 * 0.0034602077212184668f) * 289.0f)) + _893;
  float _925 = ((_907 * 34.0f) + 1.0f) * _907;
  float _926 = ((_910 * 34.0f) + 1.0f) * _910;
  float _927 = ((_913 * 34.0f) + 1.0f) * _913;
  float _928 = ((_916 * 34.0f) + 1.0f) * _916;
  float _941 = _925 - (floor(_925 * 0.0034602077212184668f) * 289.0f);
  float _942 = _926 - (floor(_926 * 0.0034602077212184668f) * 289.0f);
  float _943 = _927 - (floor(_927 * 0.0034602077212184668f) * 289.0f);
  float _944 = _928 - (floor(_928 * 0.0034602077212184668f) * 289.0f);
  float _957 = _941 - (floor(_941 * 0.020408164709806442f) * 49.0f);
  float _958 = _942 - (floor(_942 * 0.020408164709806442f) * 49.0f);
  float _959 = _943 - (floor(_943 * 0.020408164709806442f) * 49.0f);
  float _960 = _944 - (floor(_944 * 0.020408164709806442f) * 49.0f);
  float _965 = floor(_957 * 0.1428571492433548f);
  float _966 = floor(_958 * 0.1428571492433548f);
  float _967 = floor(_959 * 0.1428571492433548f);
  float _968 = floor(_960 * 0.1428571492433548f);
  float _985 = (_965 * 0.2857142984867096f) + -0.9285714030265808f;
  float _986 = (_966 * 0.2857142984867096f) + -0.9285714030265808f;
  float _987 = (_967 * 0.2857142984867096f) + -0.9285714030265808f;
  float _988 = (_968 * 0.2857142984867096f) + -0.9285714030265808f;
  float _993 = (floor(_957 - (_965 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _994 = (floor(_958 - (_966 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _995 = (floor(_959 - (_967 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _996 = (floor(_960 - (_968 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1009 = (1.0f - abs(_985)) - abs(_993);
  float _1010 = (1.0f - abs(_986)) - abs(_994);
  float _1011 = (1.0f - abs(_987)) - abs(_995);
  float _1012 = (1.0f - abs(_988)) - abs(_996);
  float _1041 = select((_1009 > 0.0f), -0.0f, -1.0f);
  float _1042 = select((_1010 > 0.0f), -0.0f, -1.0f);
  float _1043 = select((_1011 > 0.0f), -0.0f, -1.0f);
  float _1044 = select((_1012 > 0.0f), -0.0f, -1.0f);
  float _1049 = (((floor(_985) * 2.0f) + 1.0f) * _1041) + _985;
  float _1050 = (((floor(_993) * 2.0f) + 1.0f) * _1041) + _993;
  float _1051 = (((floor(_986) * 2.0f) + 1.0f) * _1042) + _986;
  float _1052 = (((floor(_994) * 2.0f) + 1.0f) * _1042) + _994;
  float _1057 = (((floor(_987) * 2.0f) + 1.0f) * _1043) + _987;
  float _1058 = (((floor(_995) * 2.0f) + 1.0f) * _1043) + _995;
  float _1059 = (((floor(_988) * 2.0f) + 1.0f) * _1044) + _988;
  float _1060 = (((floor(_996) * 2.0f) + 1.0f) * _1044) + _996;
  float _1069 = 1.7928400039672852f - (dot(float3(_1049, _1050, _1009), float3(_1049, _1050, _1009)) * 0.8537350296974182f);
  float _1070 = 1.7928400039672852f - (dot(float3(_1051, _1052, _1010), float3(_1051, _1052, _1010)) * 0.8537350296974182f);
  float _1071 = 1.7928400039672852f - (dot(float3(_1057, _1058, _1011), float3(_1057, _1058, _1011)) * 0.8537350296974182f);
  float _1072 = 1.7928400039672852f - (dot(float3(_1059, _1060, _1012), float3(_1059, _1060, _1012)) * 0.8537350296974182f);
  float _1093 = max((0.6000000238418579f - dot(float3(_799, _800, _801), float3(_799, _800, _801))), 0.0f);
  float _1094 = max((0.6000000238418579f - dot(float3(_820, _821, _822), float3(_820, _821, _822))), 0.0f);
  float _1095 = max((0.6000000238418579f - dot(float3(_826, _827, _828), float3(_826, _827, _828))), 0.0f);
  float _1096 = max((0.6000000238418579f - dot(float3(_829, _830, _831), float3(_829, _830, _831))), 0.0f);
  float _1097 = _1093 * _1093;
  float _1098 = _1094 * _1094;
  float _1099 = _1095 * _1095;
  float _1100 = _1096 * _1096;
  float _1115 = saturate((((sin(_778 - _779) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1097 * _1097), (_1098 * _1098), (_1099 * _1099), (_1100 * _1100)), float4(dot(float3((_1069 * _1049), (_1069 * _1050), (_1069 * _1009)), float3(_799, _800, _801)), dot(float3((_1070 * _1051), (_1070 * _1052), (_1070 * _1010)), float3(_820, _821, _822)), dot(float3((_1071 * _1057), (_1071 * _1058), (_1071 * _1011)), float3(_826, _827, _828)), dot(float3((_1072 * _1059), (_1072 * _1060), (_1072 * _1012)), float3(_829, _830, _831)))) * 21.0f)) * 4.0f);
  float _1119 = (_1115 * _1115) * (3.0f - (_1115 * 2.0f));
  float _1121 = (_1119 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1126 = (_740 * 0.5f) - _784;
  float _1127 = (_755 * 0.004444444552063942f) - _784;
  float _1128 = dot(float3(_1126, _1127, _787), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1132 = floor(_1128 + _1126);
  float _1133 = floor(_1128 + _1127);
  float _1134 = floor(_1128 + _787);
  float _1138 = dot(float3(_1132, _1133, _1134), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1139 = _1138 + (_1126 - _1132);
  float _1140 = _1138 + (_1127 - _1133);
  float _1141 = (_787 - _1134) + _1138;
  float _1145 = select((_1139 < _1140), 0.0f, 1.0f);
  float _1146 = select((_1140 < _1141), 0.0f, 1.0f);
  float _1147 = select((_1141 < _1139), 0.0f, 1.0f);
  float _1148 = 1.0f - _1145;
  float _1149 = 1.0f - _1146;
  float _1150 = 1.0f - _1147;
  float _1151 = min(_1145, _1150);
  float _1152 = min(_1146, _1148);
  float _1153 = min(_1147, _1149);
  float _1154 = max(_1145, _1150);
  float _1155 = max(_1146, _1148);
  float _1156 = max(_1147, _1149);
  float _1160 = (_1139 - _1151) + 0.1666666716337204f;
  float _1161 = (_1140 - _1152) + 0.1666666716337204f;
  float _1162 = (_1141 - _1153) + 0.1666666716337204f;
  float _1166 = (_1139 - _1154) + 0.3333333432674408f;
  float _1167 = (_1140 - _1155) + 0.3333333432674408f;
  float _1168 = (_1141 - _1156) + 0.3333333432674408f;
  float _1169 = _1139 + -0.5f;
  float _1170 = _1140 + -0.5f;
  float _1171 = _1141 + -0.5f;
  float _1181 = _1132 - (floor(_1132 * 0.0034602077212184668f) * 289.0f);
  float _1182 = _1133 - (floor(_1133 * 0.0034602077212184668f) * 289.0f);
  float _1183 = _1134 - (floor(_1134 * 0.0034602077212184668f) * 289.0f);
  float _1184 = _1183 + _1153;
  float _1185 = _1183 + _1156;
  float _1186 = _1183 + 1.0f;
  float _1195 = ((_1183 * 34.0f) + 1.0f) * _1183;
  float _1196 = ((_1184 * 34.0f) + 1.0f) * _1184;
  float _1197 = ((_1185 * 34.0f) + 1.0f) * _1185;
  float _1198 = ((_1186 * 34.0f) + 1.0f) * _1186;
  float _1212 = (_1195 - (floor(_1195 * 0.0034602077212184668f) * 289.0f)) + _1182;
  float _1215 = ((_1182 + _1152) - (floor(_1196 * 0.0034602077212184668f) * 289.0f)) + _1196;
  float _1218 = ((_1182 + _1155) - (floor(_1197 * 0.0034602077212184668f) * 289.0f)) + _1197;
  float _1221 = ((_1182 + 1.0f) - (floor(_1198 * 0.0034602077212184668f) * 289.0f)) + _1198;
  float _1230 = ((_1212 * 34.0f) + 1.0f) * _1212;
  float _1231 = ((_1215 * 34.0f) + 1.0f) * _1215;
  float _1232 = ((_1218 * 34.0f) + 1.0f) * _1218;
  float _1233 = ((_1221 * 34.0f) + 1.0f) * _1221;
  float _1247 = (_1230 - (floor(_1230 * 0.0034602077212184668f) * 289.0f)) + _1181;
  float _1250 = ((_1181 + _1151) - (floor(_1231 * 0.0034602077212184668f) * 289.0f)) + _1231;
  float _1253 = ((_1181 + _1154) - (floor(_1232 * 0.0034602077212184668f) * 289.0f)) + _1232;
  float _1256 = ((_1181 + 1.0f) - (floor(_1233 * 0.0034602077212184668f) * 289.0f)) + _1233;
  float _1265 = ((_1247 * 34.0f) + 1.0f) * _1247;
  float _1266 = ((_1250 * 34.0f) + 1.0f) * _1250;
  float _1267 = ((_1253 * 34.0f) + 1.0f) * _1253;
  float _1268 = ((_1256 * 34.0f) + 1.0f) * _1256;
  float _1281 = _1265 - (floor(_1265 * 0.0034602077212184668f) * 289.0f);
  float _1282 = _1266 - (floor(_1266 * 0.0034602077212184668f) * 289.0f);
  float _1283 = _1267 - (floor(_1267 * 0.0034602077212184668f) * 289.0f);
  float _1284 = _1268 - (floor(_1268 * 0.0034602077212184668f) * 289.0f);
  float _1297 = _1281 - (floor(_1281 * 0.020408164709806442f) * 49.0f);
  float _1298 = _1282 - (floor(_1282 * 0.020408164709806442f) * 49.0f);
  float _1299 = _1283 - (floor(_1283 * 0.020408164709806442f) * 49.0f);
  float _1300 = _1284 - (floor(_1284 * 0.020408164709806442f) * 49.0f);
  float _1305 = floor(_1297 * 0.1428571492433548f);
  float _1306 = floor(_1298 * 0.1428571492433548f);
  float _1307 = floor(_1299 * 0.1428571492433548f);
  float _1308 = floor(_1300 * 0.1428571492433548f);
  float _1325 = (_1305 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1326 = (_1306 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1327 = (_1307 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1328 = (_1308 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1333 = (floor(_1297 - (_1305 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1334 = (floor(_1298 - (_1306 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1335 = (floor(_1299 - (_1307 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1336 = (floor(_1300 - (_1308 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1349 = (1.0f - abs(_1325)) - abs(_1333);
  float _1350 = (1.0f - abs(_1326)) - abs(_1334);
  float _1351 = (1.0f - abs(_1327)) - abs(_1335);
  float _1352 = (1.0f - abs(_1328)) - abs(_1336);
  float _1381 = select((_1349 > 0.0f), -0.0f, -1.0f);
  float _1382 = select((_1350 > 0.0f), -0.0f, -1.0f);
  float _1383 = select((_1351 > 0.0f), -0.0f, -1.0f);
  float _1384 = select((_1352 > 0.0f), -0.0f, -1.0f);
  float _1389 = (((floor(_1325) * 2.0f) + 1.0f) * _1381) + _1325;
  float _1390 = (((floor(_1333) * 2.0f) + 1.0f) * _1381) + _1333;
  float _1391 = (((floor(_1326) * 2.0f) + 1.0f) * _1382) + _1326;
  float _1392 = (((floor(_1334) * 2.0f) + 1.0f) * _1382) + _1334;
  float _1397 = (((floor(_1327) * 2.0f) + 1.0f) * _1383) + _1327;
  float _1398 = (((floor(_1335) * 2.0f) + 1.0f) * _1383) + _1335;
  float _1399 = (((floor(_1328) * 2.0f) + 1.0f) * _1384) + _1328;
  float _1400 = (((floor(_1336) * 2.0f) + 1.0f) * _1384) + _1336;
  float _1409 = 1.7928400039672852f - (dot(float3(_1389, _1390, _1349), float3(_1389, _1390, _1349)) * 0.8537350296974182f);
  float _1410 = 1.7928400039672852f - (dot(float3(_1391, _1392, _1350), float3(_1391, _1392, _1350)) * 0.8537350296974182f);
  float _1411 = 1.7928400039672852f - (dot(float3(_1397, _1398, _1351), float3(_1397, _1398, _1351)) * 0.8537350296974182f);
  float _1412 = 1.7928400039672852f - (dot(float3(_1399, _1400, _1352), float3(_1399, _1400, _1352)) * 0.8537350296974182f);
  float _1433 = max((0.6000000238418579f - dot(float3(_1139, _1140, _1141), float3(_1139, _1140, _1141))), 0.0f);
  float _1434 = max((0.6000000238418579f - dot(float3(_1160, _1161, _1162), float3(_1160, _1161, _1162))), 0.0f);
  float _1435 = max((0.6000000238418579f - dot(float3(_1166, _1167, _1168), float3(_1166, _1167, _1168))), 0.0f);
  float _1436 = max((0.6000000238418579f - dot(float3(_1169, _1170, _1171), float3(_1169, _1170, _1171))), 0.0f);
  float _1437 = _1433 * _1433;
  float _1438 = _1434 * _1434;
  float _1439 = _1435 * _1435;
  float _1440 = _1436 * _1436;
  float _1455 = saturate((((sin((_755 * 2.5f) - _779) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1437 * _1437), (_1438 * _1438), (_1439 * _1439), (_1440 * _1440)), float4(dot(float3((_1409 * _1389), (_1409 * _1390), (_1409 * _1349)), float3(_1139, _1140, _1141)), dot(float3((_1410 * _1391), (_1410 * _1392), (_1410 * _1350)), float3(_1160, _1161, _1162)), dot(float3((_1411 * _1397), (_1411 * _1398), (_1411 * _1351)), float3(_1166, _1167, _1168)), dot(float3((_1412 * _1399), (_1412 * _1400), (_1412 * _1352)), float3(_1169, _1170, _1171)))) * 21.0f)) * 4.0f);
  float _1459 = (_1455 * _1455) * (3.0f - (_1455 * 2.0f));
  float _1461 = (_1459 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1468 = frame_consts.time * 0.15000000596046448f;
  float _1469 = (_756 * 0.04444444552063942f) - _1468;
  float _1470 = _783 - _1468;
  float _1471 = frame_consts.time * 0.02500000037252903f;
  float _1472 = dot(float3(_1469, _1470, _1471), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1476 = floor(_1469 + _1472);
  float _1477 = floor(_1470 + _1472);
  float _1478 = floor(_1471 + _1472);
  float _1482 = dot(float3(_1476, _1477, _1478), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1483 = _1482 + (_1469 - _1476);
  float _1484 = _1482 + (_1470 - _1477);
  float _1485 = (_1471 - _1478) + _1482;
  float _1489 = select((_1483 < _1484), 0.0f, 1.0f);
  float _1490 = select((_1484 < _1485), 0.0f, 1.0f);
  float _1491 = select((_1485 < _1483), 0.0f, 1.0f);
  float _1492 = 1.0f - _1489;
  float _1493 = 1.0f - _1490;
  float _1494 = 1.0f - _1491;
  float _1495 = min(_1489, _1494);
  float _1496 = min(_1490, _1492);
  float _1497 = min(_1491, _1493);
  float _1498 = max(_1489, _1494);
  float _1499 = max(_1490, _1492);
  float _1500 = max(_1491, _1493);
  float _1504 = (_1483 - _1495) + 0.1666666716337204f;
  float _1505 = (_1484 - _1496) + 0.1666666716337204f;
  float _1506 = (_1485 - _1497) + 0.1666666716337204f;
  float _1510 = (_1483 - _1498) + 0.3333333432674408f;
  float _1511 = (_1484 - _1499) + 0.3333333432674408f;
  float _1512 = (_1485 - _1500) + 0.3333333432674408f;
  float _1513 = _1483 + -0.5f;
  float _1514 = _1484 + -0.5f;
  float _1515 = _1485 + -0.5f;
  float _1525 = _1476 - (floor(_1476 * 0.0034602077212184668f) * 289.0f);
  float _1526 = _1477 - (floor(_1477 * 0.0034602077212184668f) * 289.0f);
  float _1527 = _1478 - (floor(_1478 * 0.0034602077212184668f) * 289.0f);
  float _1528 = _1527 + _1497;
  float _1529 = _1527 + _1500;
  float _1530 = _1527 + 1.0f;
  float _1539 = ((_1527 * 34.0f) + 1.0f) * _1527;
  float _1540 = ((_1528 * 34.0f) + 1.0f) * _1528;
  float _1541 = ((_1529 * 34.0f) + 1.0f) * _1529;
  float _1542 = ((_1530 * 34.0f) + 1.0f) * _1530;
  float _1556 = (_1539 - (floor(_1539 * 0.0034602077212184668f) * 289.0f)) + _1526;
  float _1559 = ((_1526 + _1496) - (floor(_1540 * 0.0034602077212184668f) * 289.0f)) + _1540;
  float _1562 = ((_1526 + _1499) - (floor(_1541 * 0.0034602077212184668f) * 289.0f)) + _1541;
  float _1565 = ((_1526 + 1.0f) - (floor(_1542 * 0.0034602077212184668f) * 289.0f)) + _1542;
  float _1574 = ((_1556 * 34.0f) + 1.0f) * _1556;
  float _1575 = ((_1559 * 34.0f) + 1.0f) * _1559;
  float _1576 = ((_1562 * 34.0f) + 1.0f) * _1562;
  float _1577 = ((_1565 * 34.0f) + 1.0f) * _1565;
  float _1591 = (_1574 - (floor(_1574 * 0.0034602077212184668f) * 289.0f)) + _1525;
  float _1594 = ((_1525 + _1495) - (floor(_1575 * 0.0034602077212184668f) * 289.0f)) + _1575;
  float _1597 = ((_1525 + _1498) - (floor(_1576 * 0.0034602077212184668f) * 289.0f)) + _1576;
  float _1600 = ((_1525 + 1.0f) - (floor(_1577 * 0.0034602077212184668f) * 289.0f)) + _1577;
  float _1609 = ((_1591 * 34.0f) + 1.0f) * _1591;
  float _1610 = ((_1594 * 34.0f) + 1.0f) * _1594;
  float _1611 = ((_1597 * 34.0f) + 1.0f) * _1597;
  float _1612 = ((_1600 * 34.0f) + 1.0f) * _1600;
  float _1625 = _1609 - (floor(_1609 * 0.0034602077212184668f) * 289.0f);
  float _1626 = _1610 - (floor(_1610 * 0.0034602077212184668f) * 289.0f);
  float _1627 = _1611 - (floor(_1611 * 0.0034602077212184668f) * 289.0f);
  float _1628 = _1612 - (floor(_1612 * 0.0034602077212184668f) * 289.0f);
  float _1641 = _1625 - (floor(_1625 * 0.020408164709806442f) * 49.0f);
  float _1642 = _1626 - (floor(_1626 * 0.020408164709806442f) * 49.0f);
  float _1643 = _1627 - (floor(_1627 * 0.020408164709806442f) * 49.0f);
  float _1644 = _1628 - (floor(_1628 * 0.020408164709806442f) * 49.0f);
  float _1649 = floor(_1641 * 0.1428571492433548f);
  float _1650 = floor(_1642 * 0.1428571492433548f);
  float _1651 = floor(_1643 * 0.1428571492433548f);
  float _1652 = floor(_1644 * 0.1428571492433548f);
  float _1669 = (_1649 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1670 = (_1650 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1671 = (_1651 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1672 = (_1652 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1677 = (floor(_1641 - (_1649 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1678 = (floor(_1642 - (_1650 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1679 = (floor(_1643 - (_1651 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1680 = (floor(_1644 - (_1652 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1693 = (1.0f - abs(_1669)) - abs(_1677);
  float _1694 = (1.0f - abs(_1670)) - abs(_1678);
  float _1695 = (1.0f - abs(_1671)) - abs(_1679);
  float _1696 = (1.0f - abs(_1672)) - abs(_1680);
  float _1725 = select((_1693 > 0.0f), -0.0f, -1.0f);
  float _1726 = select((_1694 > 0.0f), -0.0f, -1.0f);
  float _1727 = select((_1695 > 0.0f), -0.0f, -1.0f);
  float _1728 = select((_1696 > 0.0f), -0.0f, -1.0f);
  float _1733 = (((floor(_1669) * 2.0f) + 1.0f) * _1725) + _1669;
  float _1734 = (((floor(_1677) * 2.0f) + 1.0f) * _1725) + _1677;
  float _1735 = (((floor(_1670) * 2.0f) + 1.0f) * _1726) + _1670;
  float _1736 = (((floor(_1678) * 2.0f) + 1.0f) * _1726) + _1678;
  float _1741 = (((floor(_1671) * 2.0f) + 1.0f) * _1727) + _1671;
  float _1742 = (((floor(_1679) * 2.0f) + 1.0f) * _1727) + _1679;
  float _1743 = (((floor(_1672) * 2.0f) + 1.0f) * _1728) + _1672;
  float _1744 = (((floor(_1680) * 2.0f) + 1.0f) * _1728) + _1680;
  float _1753 = 1.7928400039672852f - (dot(float3(_1733, _1734, _1693), float3(_1733, _1734, _1693)) * 0.8537350296974182f);
  float _1754 = 1.7928400039672852f - (dot(float3(_1735, _1736, _1694), float3(_1735, _1736, _1694)) * 0.8537350296974182f);
  float _1755 = 1.7928400039672852f - (dot(float3(_1741, _1742, _1695), float3(_1741, _1742, _1695)) * 0.8537350296974182f);
  float _1756 = 1.7928400039672852f - (dot(float3(_1743, _1744, _1696), float3(_1743, _1744, _1696)) * 0.8537350296974182f);
  float _1777 = max((0.6000000238418579f - dot(float3(_1483, _1484, _1485), float3(_1483, _1484, _1485))), 0.0f);
  float _1778 = max((0.6000000238418579f - dot(float3(_1504, _1505, _1506), float3(_1504, _1505, _1506))), 0.0f);
  float _1779 = max((0.6000000238418579f - dot(float3(_1510, _1511, _1512), float3(_1510, _1511, _1512))), 0.0f);
  float _1780 = max((0.6000000238418579f - dot(float3(_1513, _1514, _1515), float3(_1513, _1514, _1515))), 0.0f);
  float _1781 = _1777 * _1777;
  float _1782 = _1778 * _1778;
  float _1783 = _1779 * _1779;
  float _1784 = _1780 * _1780;
  float _1799 = saturate((((sin(_778 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1781 * _1781), (_1782 * _1782), (_1783 * _1783), (_1784 * _1784)), float4(dot(float3((_1753 * _1733), (_1753 * _1734), (_1753 * _1693)), float3(_1483, _1484, _1485)), dot(float3((_1754 * _1735), (_1754 * _1736), (_1754 * _1694)), float3(_1504, _1505, _1506)), dot(float3((_1755 * _1741), (_1755 * _1742), (_1755 * _1695)), float3(_1510, _1511, _1512)), dot(float3((_1756 * _1743), (_1756 * _1744), (_1756 * _1696)), float3(_1513, _1514, _1515)))) * 21.0f)) * 4.0f);
  float _1803 = (_1799 * _1799) * (3.0f - (_1799 * 2.0f));
  float _1805 = (_1803 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1827 = saturate(_1121);
  float _1828 = saturate(_1461);
  float _1850 = (((_665 * 1.2000000476837158f) * _670) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_762 * _762) + (_761 * _761)) / ((_1459 * 0.039000000804662704f) + 0.08100000768899918f))) * _1461) + (saturate(11.0f - (sqrt((_757 * _757) + _767) / ((_1119 * 0.039000000804662704f) + 0.08100000768899918f))) * _1121)) + (saturate(11.0f - (sqrt((_774 * _774) + _767) / ((_1803 * 0.039000000804662704f) + 0.08100000768899918f))) * _1805)) + (((((saturate(1.0f - (abs(_758) * 0.8333333134651184f)) * _1827) + (saturate(1.0f - (abs(dot(float2(_761, _762), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1828)) * saturate(_1805)) + ((_1827 * saturate(1.0f - (abs(dot(float2(_757, _758), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1828)) * 0.5f));
  float _1857 = (_1850 * ((_717 * _717) - _679)) + _679;
  float _1858 = (_1850 * ((_718 * _718) - _680)) + _680;
  float _1859 = (_1850 * ((_719 * _719) - _681)) + _681;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1868 = ((_1857 * 0.3930000066757202f) + (_1858 * 0.7689999938011169f)) + (_1859 * 0.1889999955892563f);
    float _1873 = ((_1857 * 0.3490000069141388f) + (_1858 * 0.6859999895095825f)) + (_1859 * 0.1679999977350235f);
    float _1878 = ((_1857 * 0.2720000147819519f) + (_1858 * 0.5339999794960022f)) + (_1859 * 0.13099999725818634f);
    float _1879 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1884 = ((_1857 * 0.2125999927520752f) + (_1858 * 0.7152000069618225f)) + (_1859 * 0.0722000002861023f);
    _1904 = ((((_1868 - _1857) + ((_1884 - _1868) * 0.6499999761581421f)) * _1879) + _1857);
    _1905 = ((((_1873 - _1858) + ((_1884 - _1873) * 0.6499999761581421f)) * _1879) + _1858);
    _1906 = ((((_1878 - _1859) + ((_1884 - _1878) * 0.6499999761581421f)) * _1879) + _1859);
  } else {
    _1904 = _1857;
    _1905 = _1858;
    _1906 = _1859;
  }
  if (!(frame_consts.invert == 0)) {
    _1915 = (1.0f - _1904);
    _1916 = (1.0f - _1905);
    _1917 = (1.0f - _1906);
  } else {
    _1915 = _1904;
    _1916 = _1905;
    _1917 = _1906;
  }
  SV_Target.x = _1915;
  SV_Target.y = _1916;
  SV_Target.z = _1917;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
