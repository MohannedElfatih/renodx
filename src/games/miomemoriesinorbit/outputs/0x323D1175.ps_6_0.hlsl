#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

Texture2D<float3> color_correct_lut : register(t8);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float _48;
  float _49;
  float _50;
  float _51;
  float _99;
  float _110;
  float _121;
  float _287;
  float _298;
  float _309;
  float _332;
  float _333;
  float _334;
  float _451;
  float _452;
  float _453;
  float _494;
  float _495;
  float _496;
  float _645;
  float _646;
  float _647;
  float _655;
  float _1923;
  float _1924;
  float _1925;
  float _1934;
  float _1935;
  float _1936;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _23 = abs(O_Uv.x + -0.5f);
    float _24 = abs(O_Uv.y + -0.5f);
    float _28 = (rsqrt(dot(float2(_23, _24), float2(_23, _24))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _29 = _28 * _23;
    float _30 = _28 * _24;
    float4 _33 = tex.SampleLevel(sampler_nearest, float2((_29 + O_Uv.x), (_30 + O_Uv.y)), 0.0f);
    float4 _35 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    float4 _39 = tex.SampleLevel(sampler_nearest, float2((O_Uv.x - _29), (O_Uv.y - _30)), 0.0f);
    _48 = _33.x;
    _49 = _35.y;
    _50 = _39.z;
    _51 = 0.5f;
  } else {
    float4 _42 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    _48 = _42.x;
    _49 = _42.y;
    _50 = _42.z;
    _51 = _42.w;
  }
  float3 untonemapped = float3(_48, _49, _50);

  float3 _52 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _67 = max((((1.0f - (_48 * 0.2125999927520752f)) - (_49 * 0.7152000069618225f)) - (_50 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _71 = (_48 / _67) + (frame_consts.params.bloom.intensity * _52.x);
  float _72 = (_49 / _67) + (frame_consts.params.bloom.intensity * _52.y);
  float _73 = (_50 / _67) + (frame_consts.params.bloom.intensity * _52.z);
  float _79 = (((_71 * 0.2125999927520752f) + 1.0f) + (_72 * 0.7152000069618225f)) + (_73 * 0.0722000002861023f);
  float _83 = saturate(_71 / _79);
  float _84 = saturate(_72 / _79);
  float _85 = saturate(_73 / _79);
  uint2 _86; color_correct_lut.GetDimensions(_86.x, _86.y);
  if (!(!(_83 <= 0.0031308000907301903f))) {
    _99 = (_83 * 12.920000076293945f);
  } else {
    _99 = (((pow(_83, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_84 <= 0.0031308000907301903f))) {
    _110 = (_84 * 12.920000076293945f);
  } else {
    _110 = (((pow(_84, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_85 <= 0.0031308000907301903f))) {
    _121 = (_85 * 12.920000076293945f);
  } else {
    _121 = (((pow(_85, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  float _124 = float((uint)(_86.y + -1u));
  float _127 = _121 * _124;
  float _128 = frac(_127);
  float _130 = float((uint)_86.y);
  float _132 = (_99 * _124) + 0.5f;
  float _135 = float((uint)_86.x);
  float _137 = (lerp(_110, 1.0f, _124)) / _130;
  float3 _138 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((ceil(_127) * _130) + _132) / _135), _137), 0.0f);
  float3 _146 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((floor(_127) * _130) + _132) / _135), _137), 0.0f);
  float _156 = ((_138.x - _146.x) * _128) + _146.x;
  float _157 = ((_138.y - _146.y) * _128) + _146.y;
  float _158 = ((_138.z - _146.z) * _128) + _146.z;
  if (!(frame_consts.glitch == 0)) {
    float _166 = float((int)(int((_15 / _16) * 1080.0f)));
    float _167 = _166 * O_Uv.x;
    float _168 = O_Uv.y * 1080.0f;
    float _169 = _166 * 0.5f;
    float _172 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _179 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _185 = ((_179 * 3.0f) * exp2(1.4426950216293335f - (_179 * 4.328084945678711f))) + ((_172 * 5.0f) * exp2(1.4426950216293335f - (_172 * 7.213475227355957f)));
    float _186 = _185 * 15.0f;
    float _187 = _186 + 30.0f;
    float _189 = (_185 * 20.0f) + 80.0f;
    float _193 = abs(_166 * (O_Uv.x + -0.5f));
    float _194 = abs(_168 + -540.0f);
    float _197 = ((_193 - _169) + _187) + _189;
    float _200 = ((_194 + -510.0f) + _186) + _189;
    float _203 = max(_197, 0.0f);
    float _204 = max(_200, 0.0f);
    float _218 = _193 - (_169 - _187);
    float _219 = _194 - (510.0f - _186);
    float _220 = max(_218, 0.0f);
    float _221 = max(_219, 0.0f);
    float _237 = max(max(0.0f, (1.0f - saturate(abs((min(max(_197, _200), 0.0f) - _189) + sqrt((_204 * _204) + (_203 * _203))) + -0.5f))), ((1.0f - saturate(abs(min(max(_218, _219), 0.0f) + sqrt((_221 * _221) + (_220 * _220))) + -0.5f)) * (1.0f - saturate(_185 * 1.6666666269302368f))));
    float _248 = frac((_167 + _168) * 0.0012499999720603228f) + -0.5f;
    float _249 = frac((_168 - _167) * 0.0012499999720603228f) + -0.5f;
    float _261 = saturate((sin((((_167 * 0.0003124999930150807f) + (O_Uv.y * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _265 = (_261 * _261) * (3.0f - (_261 * 2.0f));
    float _267 = saturate(sqrt((_249 * _249) + (_248 * _248)) * 2.0f);
    float _272 = _265 * 0.20000000298023224f;
    float _274 = ((_267 * 0.12156862020492554f) + 0.7450979948043823f) + _272;
    float _275 = ((_267 * 0.3333333134651184f) + 0.34117645025253296f) + _272;
    do {
      if (!(!((_272 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _287 = ((_265 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _287 = exp2(log2((_265 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_274 <= 0.040449999272823334f))) {
          _298 = (_274 * 0.07739938050508499f);
        } else {
          _298 = exp2(log2((_274 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_275 <= 0.040449999272823334f))) {
            _309 = (_275 * 0.07739938050508499f);
          } else {
            _309 = exp2(log2((_275 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _315 = (((_287 * 0.2125999927520752f) + 1.0f) + (_298 * 0.7152000069618225f)) + (_309 * 0.0722000002861023f);
          _332 = (((saturate(_287 / _315) - _156) * _237) + _156);
          _333 = (((saturate(_298 / _315) - _157) * _237) + _157);
          _334 = (((saturate(_309 / _315) - _158) * _237) + _158);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _332 = _156;
    _333 = _157;
    _334 = _158;
  }
  float _340 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _344 = 10000.0f / ((_340.x * 19999.5f) + 0.5f);
  float _349 = (_344 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _351 = (_344 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _352 = -0.0f - _344;
  float _376 = mad((frame_consts.paper_xf[2].z), _352, mad((frame_consts.paper_xf[1].z), _351, (_349 * (frame_consts.paper_xf[0].z))));
  float _377 = mad((frame_consts.paper_xf[2].x), _352, mad((frame_consts.paper_xf[1].x), _351, (_349 * (frame_consts.paper_xf[0].x)))) / _376;
  float _378 = mad((frame_consts.paper_xf[2].y), _352, mad((frame_consts.paper_xf[1].y), _351, (_349 * (frame_consts.paper_xf[0].y)))) / _376;
  float _385 = log2(max(5.0f, (-0.0f - (_376 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _386 = floor(_385);
  float _387 = _385 - _386;
  float _389 = exp2(_386 * 0.10000000149011612f);
  float _390 = 1.0f / _389;
  float _391 = min(_390, 0.20000000298023224f);
  float _393 = min((_390 * 0.9330329895019531f), 0.20000000298023224f);
  float _394 = frame_consts.game_plane_blend.x - _389;
  float _400 = frame_consts.game_plane_blend.x - (_389 * 1.0717734098434448f);
  float _410 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_394 * _377) + (frame_consts.paper_xf[3].x)) * _391), (((_394 * _378) + (frame_consts.paper_xf[3].y)) * _391)), 0.0f);
  float _413 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_400 * _377) + (frame_consts.paper_xf[3].x)) * _393), (((_400 * _378) + (frame_consts.paper_xf[3].y)) * _393)), 0.0f);
  float _420 = ((1.0f - (_410.x * (1.0f - _387))) - (_413.x * _387)) * frame_consts.paper_mult;
  float _424 = _332 - (_420 * _332);
  float _425 = _333 - (_420 * _333);
  float _426 = _334 - (_420 * _334);
  if (!(frame_consts.death_screen == 0)) {
    float _449 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _51), _51);
    _451 = _449;
    _452 = _449;
    _453 = _449;
  } else {
    _451 = (lerp(_424, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _452 = (lerp(_425, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _453 = (lerp(_426, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _461 = _15 * O_Uv.x;
    float _462 = _16 * O_Uv.y;
    float _463 = _461 * 0.06666667014360428f;
    float _464 = _462 * 0.038490019738674164f;
    float _466 = ceil(_463 - _464);
    float _468 = floor(_462 * 0.07698003947734833f);
    float _469 = _468 + 1.0f;
    float _472 = ceil((-0.0f - _463) - _464);
    float _474 = (_466 - _472) * 7.5f;
    float _475 = _466 * 0.28867512941360474f;
    float _476 = _469 * 0.5773502588272095f;
    float _477 = _476 - _475;
    float _478 = _472 * 0.28867512941360474f;
    float _481 = _474 / _15;
    float _482 = ((_477 - _478) * 15.0f) / _16;
    do {
      if (((_469 + _466) + _472) == 2.0f) {
        _494 = (_466 + 1.0f);
        _495 = (_468 + 2.0f);
        _496 = (_472 + 1.0f);
      } else {
        _494 = (_466 + -1.0f);
        _495 = _468;
        _496 = (_472 + -1.0f);
      }
      float _497 = _494 - _472;
      float _500 = _476 - (_494 * 0.28867512941360474f);
      float _501 = _500 - _478;
      float _504 = (_495 * 0.5773502588272095f) - _475;
      float _505 = _504 - _478;
      float _507 = _466 - _496;
      float _510 = _477 - (_496 * 0.28867512941360474f);
      float _514 = (_500 - _504) * 15.0f;
      float _515 = (_494 - _466) * -7.5f;
      float _517 = rsqrt(dot(float2(_514, _515), float2(_514, _515)));
      float _526 = (_505 - _510) * 15.0f;
      float _527 = (_496 - _472) * -7.5f;
      float _529 = rsqrt(dot(float2(_526, _527), float2(_526, _527)));
      float _538 = (_510 - _501) * 15.0f;
      float _539 = (_507 - _497) * -7.5f;
      float _541 = rsqrt(dot(float2(_538, _539), float2(_538, _539)));
      float _554 = _481 + -0.5f;
      float _555 = _482 + -0.5f;
      float _602 = O_Uv.x + -0.5f;
      float _603 = O_Uv.y + -0.5f;
      float _610 = ((frame_consts.time - sqrt((_603 * _603) + (_602 * _602))) + (frac(sin(dot(float2((_481 * 5.0f), (_482 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _614 = frac(abs(_610));
      float _618 = max((select((_610 >= (-0.0f - _610)), _614, (-0.0f - _614)) * 18.0f), 0.0f);
      float _634 = min(max((1.0f - (((((_618 * 1.600000023841858f) * exp2(1.4426950216293335f - (_618 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_555 * _555) + (_554 * _554)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_481 * 3.0f), (_482 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_481, _482), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_481 * 2.0f), (_482 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _640 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_497 * 7.5f) - _461), ((_501 * 15.0f) - _462)), float2((_514 * _517), (_517 * _515))))), abs(dot(float2((_474 - _461), ((_505 * 15.0f) - _462)), float2((_529 * _526), (_529 * _527))))), abs(dot(float2(((_507 * 7.5f) - _461), ((_510 * 15.0f) - _462)), float2((_541 * _538), (_541 * _539))))) * 0.2309400886297226f)) - _634) / ((_634 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _645 = (_640 * _451);
      _646 = (_640 * _452);
      _647 = (_640 * _453);
    } while (false);
  } else {
    _645 = _451;
    _646 = _452;
    _647 = _453;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _655 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _655 = 0.0f;
  }
  float _662 = frame_consts.params.vignette.intensity + _655;
  float _665 = _15 / _16;
  float _677 = exp2(log2(saturate((_662 * abs(O_Uv.x + -0.5f)) * (((_665 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _678 = exp2(log2(saturate(_662 * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _684 = exp2(log2(saturate(1.0f - dot(float2(_677, _678), float2(_677, _678)))) * 6.0f);
  float _689 = 1.0f - _684;
  float _691 = 1.0f - (_689 * 0.8500000238418579f);
  float _698 = (_691 * (_645 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _699 = (_691 * (_646 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _700 = (_691 * (_647 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _704 = _15 * O_Uv.x;
  float _705 = _16 * O_Uv.y;
  float _706 = _704 + _705;
  float _712 = frac(_706 * 0.0033333334140479565f) + -0.5f;
  float _713 = frac((_705 - _704) * 0.0033333334140479565f) + -0.5f;
  float _719 = saturate(sqrt((_713 * _713) + (_712 * _712)) * 2.0f);
  float _730 = saturate((sin((_706 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _735 = ((_730 * _730) * 0.2199999988079071f) * (3.0f - (_730 * 2.0f));
  float _736 = _735 + 0.9777389168739319f;
  float _737 = ((_719 * 0.13274884223937988f) + 0.7175776362419128f) + _735;
  float _738 = ((_719 * 0.3335757553577423f) + 0.30871906876564026f) + _735;
  float _743 = (O_Uv.x * 1080.0f) * _665;
  float _744 = O_Uv.y * 1080.0f;
  float _745 = _743 * 0.04444444552063942f;
  float _746 = O_Uv.y * 27.712812423706055f;
  float _748 = ceil(_745 - _746);
  float _751 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _754 = ceil((-0.0f - _746) - _745);
  float _756 = (_751 + _748) + _754;
  float _758 = (_756 * 22.5f) + -33.75f;
  float _759 = _748 - _754;
  float _761 = _759 * 11.25f;
  float _767 = (((_751 * 0.5773502588272095f) - (_748 * 0.28867512941360474f)) - (_754 * 0.28867512941360474f)) * 22.5f;
  float _770 = _758 + _761;
  float _771 = _767 + (19.485570907592773f - (_756 * 12.990381240844727f));
  float _774 = ((_756 * 25.980762481689453f) + -38.97114181518555f) + _767;
  float _775 = _761 - _758;
  float _776 = _770 - _743;
  float _777 = _771 - _744;
  float _780 = _761 - _743;
  float _781 = _774 - _744;
  float _786 = _777 * _777;
  float _793 = _775 - _743;
  float _797 = _771 * 2.5f;
  float _798 = frame_consts.time * 1.5f;
  float _802 = _771 * 0.004444444552063942f;
  float _803 = frame_consts.time * 0.15000000596046448f;
  float _804 = (_770 * 0.04444444552063942f) - _803;
  float _805 = _802 - _803;
  float _806 = frame_consts.time * 0.02500000037252903f;
  float _807 = dot(float3(_804, _805, _806), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _811 = floor(_807 + _804);
  float _812 = floor(_807 + _805);
  float _813 = floor(_807 + _806);
  float _817 = dot(float3(_811, _812, _813), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _818 = _817 + (_804 - _811);
  float _819 = _817 + (_805 - _812);
  float _820 = (_806 - _813) + _817;
  float _824 = select((_818 < _819), 0.0f, 1.0f);
  float _825 = select((_819 < _820), 0.0f, 1.0f);
  float _826 = select((_820 < _818), 0.0f, 1.0f);
  float _827 = 1.0f - _824;
  float _828 = 1.0f - _825;
  float _829 = 1.0f - _826;
  float _830 = min(_824, _829);
  float _831 = min(_825, _827);
  float _832 = min(_826, _828);
  float _833 = max(_824, _829);
  float _834 = max(_825, _827);
  float _835 = max(_826, _828);
  float _839 = (_818 - _830) + 0.1666666716337204f;
  float _840 = (_819 - _831) + 0.1666666716337204f;
  float _841 = (_820 - _832) + 0.1666666716337204f;
  float _845 = (_818 - _833) + 0.3333333432674408f;
  float _846 = (_819 - _834) + 0.3333333432674408f;
  float _847 = (_820 - _835) + 0.3333333432674408f;
  float _848 = _818 + -0.5f;
  float _849 = _819 + -0.5f;
  float _850 = _820 + -0.5f;
  float _860 = _811 - (floor(_811 * 0.0034602077212184668f) * 289.0f);
  float _861 = _812 - (floor(_812 * 0.0034602077212184668f) * 289.0f);
  float _862 = _813 - (floor(_813 * 0.0034602077212184668f) * 289.0f);
  float _863 = _862 + _832;
  float _864 = _862 + _835;
  float _865 = _862 + 1.0f;
  float _874 = ((_862 * 34.0f) + 1.0f) * _862;
  float _875 = ((_863 * 34.0f) + 1.0f) * _863;
  float _876 = ((_864 * 34.0f) + 1.0f) * _864;
  float _877 = ((_865 * 34.0f) + 1.0f) * _865;
  float _891 = (_874 - (floor(_874 * 0.0034602077212184668f) * 289.0f)) + _861;
  float _894 = ((_861 + _831) - (floor(_875 * 0.0034602077212184668f) * 289.0f)) + _875;
  float _897 = ((_861 + _834) - (floor(_876 * 0.0034602077212184668f) * 289.0f)) + _876;
  float _900 = ((_861 + 1.0f) - (floor(_877 * 0.0034602077212184668f) * 289.0f)) + _877;
  float _909 = ((_891 * 34.0f) + 1.0f) * _891;
  float _910 = ((_894 * 34.0f) + 1.0f) * _894;
  float _911 = ((_897 * 34.0f) + 1.0f) * _897;
  float _912 = ((_900 * 34.0f) + 1.0f) * _900;
  float _926 = (_909 - (floor(_909 * 0.0034602077212184668f) * 289.0f)) + _860;
  float _929 = ((_860 + _830) - (floor(_910 * 0.0034602077212184668f) * 289.0f)) + _910;
  float _932 = ((_860 + _833) - (floor(_911 * 0.0034602077212184668f) * 289.0f)) + _911;
  float _935 = ((_860 + 1.0f) - (floor(_912 * 0.0034602077212184668f) * 289.0f)) + _912;
  float _944 = ((_926 * 34.0f) + 1.0f) * _926;
  float _945 = ((_929 * 34.0f) + 1.0f) * _929;
  float _946 = ((_932 * 34.0f) + 1.0f) * _932;
  float _947 = ((_935 * 34.0f) + 1.0f) * _935;
  float _960 = _944 - (floor(_944 * 0.0034602077212184668f) * 289.0f);
  float _961 = _945 - (floor(_945 * 0.0034602077212184668f) * 289.0f);
  float _962 = _946 - (floor(_946 * 0.0034602077212184668f) * 289.0f);
  float _963 = _947 - (floor(_947 * 0.0034602077212184668f) * 289.0f);
  float _976 = _960 - (floor(_960 * 0.020408164709806442f) * 49.0f);
  float _977 = _961 - (floor(_961 * 0.020408164709806442f) * 49.0f);
  float _978 = _962 - (floor(_962 * 0.020408164709806442f) * 49.0f);
  float _979 = _963 - (floor(_963 * 0.020408164709806442f) * 49.0f);
  float _984 = floor(_976 * 0.1428571492433548f);
  float _985 = floor(_977 * 0.1428571492433548f);
  float _986 = floor(_978 * 0.1428571492433548f);
  float _987 = floor(_979 * 0.1428571492433548f);
  float _1004 = (_984 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1005 = (_985 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1006 = (_986 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1007 = (_987 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1012 = (floor(_976 - (_984 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1013 = (floor(_977 - (_985 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1014 = (floor(_978 - (_986 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1015 = (floor(_979 - (_987 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1028 = (1.0f - abs(_1004)) - abs(_1012);
  float _1029 = (1.0f - abs(_1005)) - abs(_1013);
  float _1030 = (1.0f - abs(_1006)) - abs(_1014);
  float _1031 = (1.0f - abs(_1007)) - abs(_1015);
  float _1060 = select((_1028 > 0.0f), -0.0f, -1.0f);
  float _1061 = select((_1029 > 0.0f), -0.0f, -1.0f);
  float _1062 = select((_1030 > 0.0f), -0.0f, -1.0f);
  float _1063 = select((_1031 > 0.0f), -0.0f, -1.0f);
  float _1068 = (((floor(_1004) * 2.0f) + 1.0f) * _1060) + _1004;
  float _1069 = (((floor(_1012) * 2.0f) + 1.0f) * _1060) + _1012;
  float _1070 = (((floor(_1005) * 2.0f) + 1.0f) * _1061) + _1005;
  float _1071 = (((floor(_1013) * 2.0f) + 1.0f) * _1061) + _1013;
  float _1076 = (((floor(_1006) * 2.0f) + 1.0f) * _1062) + _1006;
  float _1077 = (((floor(_1014) * 2.0f) + 1.0f) * _1062) + _1014;
  float _1078 = (((floor(_1007) * 2.0f) + 1.0f) * _1063) + _1007;
  float _1079 = (((floor(_1015) * 2.0f) + 1.0f) * _1063) + _1015;
  float _1088 = 1.7928400039672852f - (dot(float3(_1068, _1069, _1028), float3(_1068, _1069, _1028)) * 0.8537350296974182f);
  float _1089 = 1.7928400039672852f - (dot(float3(_1070, _1071, _1029), float3(_1070, _1071, _1029)) * 0.8537350296974182f);
  float _1090 = 1.7928400039672852f - (dot(float3(_1076, _1077, _1030), float3(_1076, _1077, _1030)) * 0.8537350296974182f);
  float _1091 = 1.7928400039672852f - (dot(float3(_1078, _1079, _1031), float3(_1078, _1079, _1031)) * 0.8537350296974182f);
  float _1112 = max((0.6000000238418579f - dot(float3(_818, _819, _820), float3(_818, _819, _820))), 0.0f);
  float _1113 = max((0.6000000238418579f - dot(float3(_839, _840, _841), float3(_839, _840, _841))), 0.0f);
  float _1114 = max((0.6000000238418579f - dot(float3(_845, _846, _847), float3(_845, _846, _847))), 0.0f);
  float _1115 = max((0.6000000238418579f - dot(float3(_848, _849, _850), float3(_848, _849, _850))), 0.0f);
  float _1116 = _1112 * _1112;
  float _1117 = _1113 * _1113;
  float _1118 = _1114 * _1114;
  float _1119 = _1115 * _1115;
  float _1134 = saturate((((sin(_797 - _798) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1116 * _1116), (_1117 * _1117), (_1118 * _1118), (_1119 * _1119)), float4(dot(float3((_1088 * _1068), (_1088 * _1069), (_1088 * _1028)), float3(_818, _819, _820)), dot(float3((_1089 * _1070), (_1089 * _1071), (_1089 * _1029)), float3(_839, _840, _841)), dot(float3((_1090 * _1076), (_1090 * _1077), (_1090 * _1030)), float3(_845, _846, _847)), dot(float3((_1091 * _1078), (_1091 * _1079), (_1091 * _1031)), float3(_848, _849, _850)))) * 21.0f)) * 4.0f);
  float _1138 = (_1134 * _1134) * (3.0f - (_1134 * 2.0f));
  float _1140 = (_1138 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1145 = (_759 * 0.5f) - _803;
  float _1146 = (_774 * 0.004444444552063942f) - _803;
  float _1147 = dot(float3(_1145, _1146, _806), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1151 = floor(_1147 + _1145);
  float _1152 = floor(_1147 + _1146);
  float _1153 = floor(_1147 + _806);
  float _1157 = dot(float3(_1151, _1152, _1153), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1158 = _1157 + (_1145 - _1151);
  float _1159 = _1157 + (_1146 - _1152);
  float _1160 = (_806 - _1153) + _1157;
  float _1164 = select((_1158 < _1159), 0.0f, 1.0f);
  float _1165 = select((_1159 < _1160), 0.0f, 1.0f);
  float _1166 = select((_1160 < _1158), 0.0f, 1.0f);
  float _1167 = 1.0f - _1164;
  float _1168 = 1.0f - _1165;
  float _1169 = 1.0f - _1166;
  float _1170 = min(_1164, _1169);
  float _1171 = min(_1165, _1167);
  float _1172 = min(_1166, _1168);
  float _1173 = max(_1164, _1169);
  float _1174 = max(_1165, _1167);
  float _1175 = max(_1166, _1168);
  float _1179 = (_1158 - _1170) + 0.1666666716337204f;
  float _1180 = (_1159 - _1171) + 0.1666666716337204f;
  float _1181 = (_1160 - _1172) + 0.1666666716337204f;
  float _1185 = (_1158 - _1173) + 0.3333333432674408f;
  float _1186 = (_1159 - _1174) + 0.3333333432674408f;
  float _1187 = (_1160 - _1175) + 0.3333333432674408f;
  float _1188 = _1158 + -0.5f;
  float _1189 = _1159 + -0.5f;
  float _1190 = _1160 + -0.5f;
  float _1200 = _1151 - (floor(_1151 * 0.0034602077212184668f) * 289.0f);
  float _1201 = _1152 - (floor(_1152 * 0.0034602077212184668f) * 289.0f);
  float _1202 = _1153 - (floor(_1153 * 0.0034602077212184668f) * 289.0f);
  float _1203 = _1202 + _1172;
  float _1204 = _1202 + _1175;
  float _1205 = _1202 + 1.0f;
  float _1214 = ((_1202 * 34.0f) + 1.0f) * _1202;
  float _1215 = ((_1203 * 34.0f) + 1.0f) * _1203;
  float _1216 = ((_1204 * 34.0f) + 1.0f) * _1204;
  float _1217 = ((_1205 * 34.0f) + 1.0f) * _1205;
  float _1231 = (_1214 - (floor(_1214 * 0.0034602077212184668f) * 289.0f)) + _1201;
  float _1234 = ((_1201 + _1171) - (floor(_1215 * 0.0034602077212184668f) * 289.0f)) + _1215;
  float _1237 = ((_1201 + _1174) - (floor(_1216 * 0.0034602077212184668f) * 289.0f)) + _1216;
  float _1240 = ((_1201 + 1.0f) - (floor(_1217 * 0.0034602077212184668f) * 289.0f)) + _1217;
  float _1249 = ((_1231 * 34.0f) + 1.0f) * _1231;
  float _1250 = ((_1234 * 34.0f) + 1.0f) * _1234;
  float _1251 = ((_1237 * 34.0f) + 1.0f) * _1237;
  float _1252 = ((_1240 * 34.0f) + 1.0f) * _1240;
  float _1266 = (_1249 - (floor(_1249 * 0.0034602077212184668f) * 289.0f)) + _1200;
  float _1269 = ((_1200 + _1170) - (floor(_1250 * 0.0034602077212184668f) * 289.0f)) + _1250;
  float _1272 = ((_1200 + _1173) - (floor(_1251 * 0.0034602077212184668f) * 289.0f)) + _1251;
  float _1275 = ((_1200 + 1.0f) - (floor(_1252 * 0.0034602077212184668f) * 289.0f)) + _1252;
  float _1284 = ((_1266 * 34.0f) + 1.0f) * _1266;
  float _1285 = ((_1269 * 34.0f) + 1.0f) * _1269;
  float _1286 = ((_1272 * 34.0f) + 1.0f) * _1272;
  float _1287 = ((_1275 * 34.0f) + 1.0f) * _1275;
  float _1300 = _1284 - (floor(_1284 * 0.0034602077212184668f) * 289.0f);
  float _1301 = _1285 - (floor(_1285 * 0.0034602077212184668f) * 289.0f);
  float _1302 = _1286 - (floor(_1286 * 0.0034602077212184668f) * 289.0f);
  float _1303 = _1287 - (floor(_1287 * 0.0034602077212184668f) * 289.0f);
  float _1316 = _1300 - (floor(_1300 * 0.020408164709806442f) * 49.0f);
  float _1317 = _1301 - (floor(_1301 * 0.020408164709806442f) * 49.0f);
  float _1318 = _1302 - (floor(_1302 * 0.020408164709806442f) * 49.0f);
  float _1319 = _1303 - (floor(_1303 * 0.020408164709806442f) * 49.0f);
  float _1324 = floor(_1316 * 0.1428571492433548f);
  float _1325 = floor(_1317 * 0.1428571492433548f);
  float _1326 = floor(_1318 * 0.1428571492433548f);
  float _1327 = floor(_1319 * 0.1428571492433548f);
  float _1344 = (_1324 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1345 = (_1325 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1346 = (_1326 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1347 = (_1327 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1352 = (floor(_1316 - (_1324 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1353 = (floor(_1317 - (_1325 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1354 = (floor(_1318 - (_1326 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1355 = (floor(_1319 - (_1327 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1368 = (1.0f - abs(_1344)) - abs(_1352);
  float _1369 = (1.0f - abs(_1345)) - abs(_1353);
  float _1370 = (1.0f - abs(_1346)) - abs(_1354);
  float _1371 = (1.0f - abs(_1347)) - abs(_1355);
  float _1400 = select((_1368 > 0.0f), -0.0f, -1.0f);
  float _1401 = select((_1369 > 0.0f), -0.0f, -1.0f);
  float _1402 = select((_1370 > 0.0f), -0.0f, -1.0f);
  float _1403 = select((_1371 > 0.0f), -0.0f, -1.0f);
  float _1408 = (((floor(_1344) * 2.0f) + 1.0f) * _1400) + _1344;
  float _1409 = (((floor(_1352) * 2.0f) + 1.0f) * _1400) + _1352;
  float _1410 = (((floor(_1345) * 2.0f) + 1.0f) * _1401) + _1345;
  float _1411 = (((floor(_1353) * 2.0f) + 1.0f) * _1401) + _1353;
  float _1416 = (((floor(_1346) * 2.0f) + 1.0f) * _1402) + _1346;
  float _1417 = (((floor(_1354) * 2.0f) + 1.0f) * _1402) + _1354;
  float _1418 = (((floor(_1347) * 2.0f) + 1.0f) * _1403) + _1347;
  float _1419 = (((floor(_1355) * 2.0f) + 1.0f) * _1403) + _1355;
  float _1428 = 1.7928400039672852f - (dot(float3(_1408, _1409, _1368), float3(_1408, _1409, _1368)) * 0.8537350296974182f);
  float _1429 = 1.7928400039672852f - (dot(float3(_1410, _1411, _1369), float3(_1410, _1411, _1369)) * 0.8537350296974182f);
  float _1430 = 1.7928400039672852f - (dot(float3(_1416, _1417, _1370), float3(_1416, _1417, _1370)) * 0.8537350296974182f);
  float _1431 = 1.7928400039672852f - (dot(float3(_1418, _1419, _1371), float3(_1418, _1419, _1371)) * 0.8537350296974182f);
  float _1452 = max((0.6000000238418579f - dot(float3(_1158, _1159, _1160), float3(_1158, _1159, _1160))), 0.0f);
  float _1453 = max((0.6000000238418579f - dot(float3(_1179, _1180, _1181), float3(_1179, _1180, _1181))), 0.0f);
  float _1454 = max((0.6000000238418579f - dot(float3(_1185, _1186, _1187), float3(_1185, _1186, _1187))), 0.0f);
  float _1455 = max((0.6000000238418579f - dot(float3(_1188, _1189, _1190), float3(_1188, _1189, _1190))), 0.0f);
  float _1456 = _1452 * _1452;
  float _1457 = _1453 * _1453;
  float _1458 = _1454 * _1454;
  float _1459 = _1455 * _1455;
  float _1474 = saturate((((sin((_774 * 2.5f) - _798) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1456 * _1456), (_1457 * _1457), (_1458 * _1458), (_1459 * _1459)), float4(dot(float3((_1428 * _1408), (_1428 * _1409), (_1428 * _1368)), float3(_1158, _1159, _1160)), dot(float3((_1429 * _1410), (_1429 * _1411), (_1429 * _1369)), float3(_1179, _1180, _1181)), dot(float3((_1430 * _1416), (_1430 * _1417), (_1430 * _1370)), float3(_1185, _1186, _1187)), dot(float3((_1431 * _1418), (_1431 * _1419), (_1431 * _1371)), float3(_1188, _1189, _1190)))) * 21.0f)) * 4.0f);
  float _1478 = (_1474 * _1474) * (3.0f - (_1474 * 2.0f));
  float _1480 = (_1478 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1487 = frame_consts.time * 0.15000000596046448f;
  float _1488 = (_775 * 0.04444444552063942f) - _1487;
  float _1489 = _802 - _1487;
  float _1490 = frame_consts.time * 0.02500000037252903f;
  float _1491 = dot(float3(_1488, _1489, _1490), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1495 = floor(_1488 + _1491);
  float _1496 = floor(_1489 + _1491);
  float _1497 = floor(_1490 + _1491);
  float _1501 = dot(float3(_1495, _1496, _1497), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1502 = _1501 + (_1488 - _1495);
  float _1503 = _1501 + (_1489 - _1496);
  float _1504 = (_1490 - _1497) + _1501;
  float _1508 = select((_1502 < _1503), 0.0f, 1.0f);
  float _1509 = select((_1503 < _1504), 0.0f, 1.0f);
  float _1510 = select((_1504 < _1502), 0.0f, 1.0f);
  float _1511 = 1.0f - _1508;
  float _1512 = 1.0f - _1509;
  float _1513 = 1.0f - _1510;
  float _1514 = min(_1508, _1513);
  float _1515 = min(_1509, _1511);
  float _1516 = min(_1510, _1512);
  float _1517 = max(_1508, _1513);
  float _1518 = max(_1509, _1511);
  float _1519 = max(_1510, _1512);
  float _1523 = (_1502 - _1514) + 0.1666666716337204f;
  float _1524 = (_1503 - _1515) + 0.1666666716337204f;
  float _1525 = (_1504 - _1516) + 0.1666666716337204f;
  float _1529 = (_1502 - _1517) + 0.3333333432674408f;
  float _1530 = (_1503 - _1518) + 0.3333333432674408f;
  float _1531 = (_1504 - _1519) + 0.3333333432674408f;
  float _1532 = _1502 + -0.5f;
  float _1533 = _1503 + -0.5f;
  float _1534 = _1504 + -0.5f;
  float _1544 = _1495 - (floor(_1495 * 0.0034602077212184668f) * 289.0f);
  float _1545 = _1496 - (floor(_1496 * 0.0034602077212184668f) * 289.0f);
  float _1546 = _1497 - (floor(_1497 * 0.0034602077212184668f) * 289.0f);
  float _1547 = _1546 + _1516;
  float _1548 = _1546 + _1519;
  float _1549 = _1546 + 1.0f;
  float _1558 = ((_1546 * 34.0f) + 1.0f) * _1546;
  float _1559 = ((_1547 * 34.0f) + 1.0f) * _1547;
  float _1560 = ((_1548 * 34.0f) + 1.0f) * _1548;
  float _1561 = ((_1549 * 34.0f) + 1.0f) * _1549;
  float _1575 = (_1558 - (floor(_1558 * 0.0034602077212184668f) * 289.0f)) + _1545;
  float _1578 = ((_1545 + _1515) - (floor(_1559 * 0.0034602077212184668f) * 289.0f)) + _1559;
  float _1581 = ((_1545 + _1518) - (floor(_1560 * 0.0034602077212184668f) * 289.0f)) + _1560;
  float _1584 = ((_1545 + 1.0f) - (floor(_1561 * 0.0034602077212184668f) * 289.0f)) + _1561;
  float _1593 = ((_1575 * 34.0f) + 1.0f) * _1575;
  float _1594 = ((_1578 * 34.0f) + 1.0f) * _1578;
  float _1595 = ((_1581 * 34.0f) + 1.0f) * _1581;
  float _1596 = ((_1584 * 34.0f) + 1.0f) * _1584;
  float _1610 = (_1593 - (floor(_1593 * 0.0034602077212184668f) * 289.0f)) + _1544;
  float _1613 = ((_1544 + _1514) - (floor(_1594 * 0.0034602077212184668f) * 289.0f)) + _1594;
  float _1616 = ((_1544 + _1517) - (floor(_1595 * 0.0034602077212184668f) * 289.0f)) + _1595;
  float _1619 = ((_1544 + 1.0f) - (floor(_1596 * 0.0034602077212184668f) * 289.0f)) + _1596;
  float _1628 = ((_1610 * 34.0f) + 1.0f) * _1610;
  float _1629 = ((_1613 * 34.0f) + 1.0f) * _1613;
  float _1630 = ((_1616 * 34.0f) + 1.0f) * _1616;
  float _1631 = ((_1619 * 34.0f) + 1.0f) * _1619;
  float _1644 = _1628 - (floor(_1628 * 0.0034602077212184668f) * 289.0f);
  float _1645 = _1629 - (floor(_1629 * 0.0034602077212184668f) * 289.0f);
  float _1646 = _1630 - (floor(_1630 * 0.0034602077212184668f) * 289.0f);
  float _1647 = _1631 - (floor(_1631 * 0.0034602077212184668f) * 289.0f);
  float _1660 = _1644 - (floor(_1644 * 0.020408164709806442f) * 49.0f);
  float _1661 = _1645 - (floor(_1645 * 0.020408164709806442f) * 49.0f);
  float _1662 = _1646 - (floor(_1646 * 0.020408164709806442f) * 49.0f);
  float _1663 = _1647 - (floor(_1647 * 0.020408164709806442f) * 49.0f);
  float _1668 = floor(_1660 * 0.1428571492433548f);
  float _1669 = floor(_1661 * 0.1428571492433548f);
  float _1670 = floor(_1662 * 0.1428571492433548f);
  float _1671 = floor(_1663 * 0.1428571492433548f);
  float _1688 = (_1668 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1689 = (_1669 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1690 = (_1670 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1691 = (_1671 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1696 = (floor(_1660 - (_1668 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1697 = (floor(_1661 - (_1669 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1698 = (floor(_1662 - (_1670 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1699 = (floor(_1663 - (_1671 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1712 = (1.0f - abs(_1688)) - abs(_1696);
  float _1713 = (1.0f - abs(_1689)) - abs(_1697);
  float _1714 = (1.0f - abs(_1690)) - abs(_1698);
  float _1715 = (1.0f - abs(_1691)) - abs(_1699);
  float _1744 = select((_1712 > 0.0f), -0.0f, -1.0f);
  float _1745 = select((_1713 > 0.0f), -0.0f, -1.0f);
  float _1746 = select((_1714 > 0.0f), -0.0f, -1.0f);
  float _1747 = select((_1715 > 0.0f), -0.0f, -1.0f);
  float _1752 = (((floor(_1688) * 2.0f) + 1.0f) * _1744) + _1688;
  float _1753 = (((floor(_1696) * 2.0f) + 1.0f) * _1744) + _1696;
  float _1754 = (((floor(_1689) * 2.0f) + 1.0f) * _1745) + _1689;
  float _1755 = (((floor(_1697) * 2.0f) + 1.0f) * _1745) + _1697;
  float _1760 = (((floor(_1690) * 2.0f) + 1.0f) * _1746) + _1690;
  float _1761 = (((floor(_1698) * 2.0f) + 1.0f) * _1746) + _1698;
  float _1762 = (((floor(_1691) * 2.0f) + 1.0f) * _1747) + _1691;
  float _1763 = (((floor(_1699) * 2.0f) + 1.0f) * _1747) + _1699;
  float _1772 = 1.7928400039672852f - (dot(float3(_1752, _1753, _1712), float3(_1752, _1753, _1712)) * 0.8537350296974182f);
  float _1773 = 1.7928400039672852f - (dot(float3(_1754, _1755, _1713), float3(_1754, _1755, _1713)) * 0.8537350296974182f);
  float _1774 = 1.7928400039672852f - (dot(float3(_1760, _1761, _1714), float3(_1760, _1761, _1714)) * 0.8537350296974182f);
  float _1775 = 1.7928400039672852f - (dot(float3(_1762, _1763, _1715), float3(_1762, _1763, _1715)) * 0.8537350296974182f);
  float _1796 = max((0.6000000238418579f - dot(float3(_1502, _1503, _1504), float3(_1502, _1503, _1504))), 0.0f);
  float _1797 = max((0.6000000238418579f - dot(float3(_1523, _1524, _1525), float3(_1523, _1524, _1525))), 0.0f);
  float _1798 = max((0.6000000238418579f - dot(float3(_1529, _1530, _1531), float3(_1529, _1530, _1531))), 0.0f);
  float _1799 = max((0.6000000238418579f - dot(float3(_1532, _1533, _1534), float3(_1532, _1533, _1534))), 0.0f);
  float _1800 = _1796 * _1796;
  float _1801 = _1797 * _1797;
  float _1802 = _1798 * _1798;
  float _1803 = _1799 * _1799;
  float _1818 = saturate((((sin(_797 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1800 * _1800), (_1801 * _1801), (_1802 * _1802), (_1803 * _1803)), float4(dot(float3((_1772 * _1752), (_1772 * _1753), (_1772 * _1712)), float3(_1502, _1503, _1504)), dot(float3((_1773 * _1754), (_1773 * _1755), (_1773 * _1713)), float3(_1523, _1524, _1525)), dot(float3((_1774 * _1760), (_1774 * _1761), (_1774 * _1714)), float3(_1529, _1530, _1531)), dot(float3((_1775 * _1762), (_1775 * _1763), (_1775 * _1715)), float3(_1532, _1533, _1534)))) * 21.0f)) * 4.0f);
  float _1822 = (_1818 * _1818) * (3.0f - (_1818 * 2.0f));
  float _1824 = (_1822 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1846 = saturate(_1140);
  float _1847 = saturate(_1480);
  float _1869 = (((_684 * 1.2000000476837158f) * _689) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_781 * _781) + (_780 * _780)) / ((_1478 * 0.039000000804662704f) + 0.08100000768899918f))) * _1480) + (saturate(11.0f - (sqrt((_776 * _776) + _786) / ((_1138 * 0.039000000804662704f) + 0.08100000768899918f))) * _1140)) + (saturate(11.0f - (sqrt((_793 * _793) + _786) / ((_1822 * 0.039000000804662704f) + 0.08100000768899918f))) * _1824)) + (((((saturate(1.0f - (abs(_777) * 0.8333333134651184f)) * _1846) + (saturate(1.0f - (abs(dot(float2(_780, _781), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1847)) * saturate(_1824)) + ((_1846 * saturate(1.0f - (abs(dot(float2(_776, _777), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1847)) * 0.5f));
  float _1876 = (_1869 * ((_736 * _736) - _698)) + _698;
  float _1877 = (_1869 * ((_737 * _737) - _699)) + _699;
  float _1878 = (_1869 * ((_738 * _738) - _700)) + _700;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1887 = ((_1876 * 0.3930000066757202f) + (_1877 * 0.7689999938011169f)) + (_1878 * 0.1889999955892563f);
    float _1892 = ((_1876 * 0.3490000069141388f) + (_1877 * 0.6859999895095825f)) + (_1878 * 0.1679999977350235f);
    float _1897 = ((_1876 * 0.2720000147819519f) + (_1877 * 0.5339999794960022f)) + (_1878 * 0.13099999725818634f);
    float _1898 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1903 = ((_1876 * 0.2125999927520752f) + (_1877 * 0.7152000069618225f)) + (_1878 * 0.0722000002861023f);
    _1923 = ((((_1887 - _1876) + ((_1903 - _1887) * 0.6499999761581421f)) * _1898) + _1876);
    _1924 = ((((_1892 - _1877) + ((_1903 - _1892) * 0.6499999761581421f)) * _1898) + _1877);
    _1925 = ((((_1897 - _1878) + ((_1903 - _1897) * 0.6499999761581421f)) * _1898) + _1878);
  } else {
    _1923 = _1876;
    _1924 = _1877;
    _1925 = _1878;
  }
  if (!(frame_consts.invert == 0)) {
    _1934 = (1.0f - _1923);
    _1935 = (1.0f - _1924);
    _1936 = (1.0f - _1925);
  } else {
    _1934 = _1923;
    _1935 = _1924;
    _1936 = _1925;
  }
  SV_Target.x = _1934;
  SV_Target.y = _1935;
  SV_Target.z = _1936;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
