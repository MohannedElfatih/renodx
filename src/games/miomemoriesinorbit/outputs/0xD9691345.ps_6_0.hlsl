#include "../shared.h"

struct Lod_params {
  struct Lod_brush_params {
    float4 brush_uv[4];
    float base_radius;
    float radius_variation;
    float radius_random;
    float blur;
    float alpha;
    float stretch;
  } brushes;
  struct Lod_noise_params {
    float chaos;
    float freq;
    float brightness;
    float saturation;
    float hue;
  } noise;
  struct Lod_outlines_params {
    float2 thickness;
    float2 softness;
    float2 displacement;
    float2 attenuation;
    float lighting_threshold;
    float lighting_threshold_softness;
    float2 lighting_dark;
    float2 lighting_bright;
    float2 discretion;
    float2 alpha;
  } outlines;
};

struct Frame_constants {
  float3 cam_world_pos;
  float time;
  float2 inv_near_dim;
  float proj_scale;
  uint flags;
  float2 half_vp_dim;
  int2 vp_dim;
  float2 vp_texel_size;
  int2 mouse_pos;
  int2 inspected_pix;
  int2 hi_z_0_dim;
  int supersampling;
  int debug_patches;
  int use_patches;
  int emissive;
  float3 target;
  uint frame_number;
  uint shot_frame_number;
  float dt;
  float4 view_to_world[4];
  float4 world_to_view[4];
  float4 view_ndc[4];
  float4 world_ndc[4];
  float4 prev_world_ndc[4];
  float4 ndc_world[4];
  float4 ndc_to_prev_ndc[4];
  float4 prev_ndc_to_ndc[4];
  float4 view_world_z0;
  float4 pix_to_fog_eq;
  float3 mio_view;
  float3 mio_hair_outline_color;
  float mio_foliage_velocity;
  int show_wireframe;
  int ao;
  int glitch;
  int no_vertex_color;
  float paper_mult;
  int hatching;
  int mio_halo;
  int vol_temporal;
  int heart_attack_active;
  int heart_attack_secondary_target;
  int triangular_dissolve_enabled;
  int color_correct;
  float starfield_effect_amount;
  float starfield_fade_amount;
  float3 starfield_center_view;
  float starfield_glow_amount;
  float starfield_pulse_t;
  float death_anim_t;
  float3 game_plane_world_origin;
  float3 game_plane_world_normal;
  float3 game_plane_world_u;
  float3 game_plane_world_v;
  float4 game_plane_transform[4];
  float4 hatching_xf[4];
  float4 paper_xf[4];
  float2 game_plane_blend;
  float heart_attack_t;
  float heart_attack_duration;
  float heart_attack_pulse;
  float heart_attack_outline_distance;
  float heart_attack_dissolve_distance;
  float3 heart_attack_dissolve_color;
  float heart_attack_dissolve_base;
  float heart_attack_dissolve_mult;
  float3 heart_attack_dissolve_world_center;
  float heart_attack_vertical_dissolve;
  float triangular_dissolve_base_amount;
  float triangular_dissolve_amount;
  float flashback_lut;
  float evil_mio;
  float dead_mio;
  float godlike_mio;
  float khlia_pulse_t;
  float khlia__pulse_t;
  float khlia_pulse_period;
  float3 khlia_world_pos;
  float skydome_rotation_offset;
  float hatch_ambiant_mul;
  float hatch_ambiant_add;
  float glitch_scale;
  uint max_contours;
  uint max_contour_loops;
  int death_screen;
  float death_screen_t;
  int poetic_death_screen;
  float poetic_death_screen_t;
  float tremor_pulse_t;
  int invert;
  float surface_fade;
  struct Postprocess_params {
    struct AO_params {
      float3 color;
      float intensity;
    } ao;
    struct Fog_params {
      float bloom_factor;
      float space;
      float outline_density;
      float outline_attenuation;
    } fog;
    struct Ambient_light_params {
      int undercoat_grad;
      float3 color;
      float intensity;
      float gameplay_intensity;
      float gameplay_width;
      float directional_intensity;
      float directional_shadows;
      float undercoat_noise_freq;
      float undercoat_noise_amplitude;
      float undercoat_noise_threshold;
      float undercoating;
    } ambient_light;
    struct Vignette_params {
      float intensity;
      float rounded;
      float3 color;
      float golden_intensity;
      float golden_color;
    } vignette;
    struct Bloom_params {
      float intensity;
      float threshold_low;
      float threshold_high;
    } bloom;
    struct Mio_params {
      float light_intensity;
      float light_radius;
      float3 light_color;
      float spec_intensity;
      float3 halo_color;
      float halo_intensity;
    } mio;
    struct Particles_params {
      uint count;
      float cam_near;
      float cam_far;
      float fadeoff_near;
      float2 lifetime;
      float fadein_duration;
      float fadeoff_duration;
      float2 alpha;
      float2 scale;
      float2 speed;
      int gradient;
      float circle_attenuation;
    } particles;
    struct Chroma_aberration_params {
      float intensity;
    } chroma_aberration;
    struct Fade_params {
      float intensity;
      float3 color;
    } fade;
    struct Dof_params {
      float plane_01;
      float plane_01_softness;
      float plane_12;
      float plane_12_softness;
      float foreground;
      float foreground_softness;
    } dof;
    Lod_params lod_foreground;
    Lod_params lod_game;
    Lod_params lod_midground;
    Lod_params lod_background;
  } params;
};


Texture2D<float4> tex : register(t0);

Texture2D<float> depth_tex : register(t1);

Texture2D<float> paper_tex : register(t5);

Texture2D<float3> bloom_tex : register(t7);

Texture2D<float3> color_correct_lut : register(t8);

cbuffer frame_consts : register(b0) {
  Frame_constants frame_consts : packoffset(c000.x);
};

SamplerState sampler_nearest : register(s0);

SamplerState sampler_bilinear : register(s1);

SamplerState sampler_bilinear_wrap : register(s2);

float4 main(
  noperspective float4 SV_Position : SV_Position,
  linear float2 O_Uv : O_Uv
) : SV_Target {
  float4 SV_Target;
  float _15 = float((int)(frame_consts.vp_dim.x));
  float _16 = float((int)(frame_consts.vp_dim.y));
  float _48;
  float _49;
  float _50;
  float _51;
  float _99;
  float _110;
  float _121;
  float _287;
  float _298;
  float _309;
  float _332;
  float _333;
  float _334;
  float _495;
  float _496;
  float _497;
  float _538;
  float _539;
  float _540;
  float _689;
  float _690;
  float _691;
  float _699;
  float _1967;
  float _1968;
  float _1969;
  float _1978;
  float _1979;
  float _1980;
  if (frame_consts.params.chroma_aberration.intensity > 0.0f) {
    float _23 = abs(O_Uv.x + -0.5f);
    float _24 = abs(O_Uv.y + -0.5f);
    float _28 = (rsqrt(dot(float2(_23, _24), float2(_23, _24))) * 0.009999999776482582f) * frame_consts.params.chroma_aberration.intensity;
    float _29 = _28 * _23;
    float _30 = _28 * _24;
    float4 _33 = tex.SampleLevel(sampler_nearest, float2((_29 + O_Uv.x), (_30 + O_Uv.y)), 0.0f);
    float4 _35 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    float4 _39 = tex.SampleLevel(sampler_nearest, float2((O_Uv.x - _29), (O_Uv.y - _30)), 0.0f);
    _48 = _33.x;
    _49 = _35.y;
    _50 = _39.z;
    _51 = 0.5f;
  } else {
    float4 _42 = tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
    _48 = _42.x;
    _49 = _42.y;
    _50 = _42.z;
    _51 = _42.w;
  }
  float3 untonemapped = float3(_48, _49, _50);

  float3 _52 = bloom_tex.SampleLevel(sampler_bilinear, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _67 = max((((1.0f - (_48 * 0.2125999927520752f)) - (_49 * 0.7152000069618225f)) - (_50 * 0.0722000002861023f)), 0.0010000000474974513f);
  float _71 = (_48 / _67) + (frame_consts.params.bloom.intensity * _52.x);
  float _72 = (_49 / _67) + (frame_consts.params.bloom.intensity * _52.y);
  float _73 = (_50 / _67) + (frame_consts.params.bloom.intensity * _52.z);
  float _79 = (((_71 * 0.2125999927520752f) + 1.0f) + (_72 * 0.7152000069618225f)) + (_73 * 0.0722000002861023f);
  float _83 = saturate(_71 / _79);
  float _84 = saturate(_72 / _79);
  float _85 = saturate(_73 / _79);
  uint2 _86; color_correct_lut.GetDimensions(_86.x, _86.y);
  if (!(!(_83 <= 0.0031308000907301903f))) {
    _99 = (_83 * 12.920000076293945f);
  } else {
    _99 = (((pow(_83, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_84 <= 0.0031308000907301903f))) {
    _110 = (_84 * 12.920000076293945f);
  } else {
    _110 = (((pow(_84, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  if (!(!(_85 <= 0.0031308000907301903f))) {
    _121 = (_85 * 12.920000076293945f);
  } else {
    _121 = (((pow(_85, 0.4166666567325592f)) * 1.0549999475479126f) + -0.054999999701976776f);
  }
  float _124 = float((uint)(_86.y + -1u));
  float _127 = _121 * _124;
  float _128 = frac(_127);
  float _130 = float((uint)_86.y);
  float _132 = (_99 * _124) + 0.5f;
  float _135 = float((uint)_86.x);
  float _137 = (lerp(_110, 1.0f, _124)) / _130;
  float3 _138 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((ceil(_127) * _130) + _132) / _135), _137), 0.0f);
  float3 _146 = color_correct_lut.SampleLevel(sampler_bilinear, float2((((floor(_127) * _130) + _132) / _135), _137), 0.0f);
  float _156 = ((_138.x - _146.x) * _128) + _146.x;
  float _157 = ((_138.y - _146.y) * _128) + _146.y;
  float _158 = ((_138.z - _146.z) * _128) + _146.z;
  if (!(frame_consts.glitch == 0)) {
    float _166 = float((int)(int((_15 / _16) * 1080.0f)));
    float _167 = _166 * O_Uv.x;
    float _168 = O_Uv.y * 1080.0f;
    float _169 = _166 * 0.5f;
    float _172 = max(frame_consts.khlia_pulse_t, 0.0f);
    float _179 = max((frame_consts.khlia_pulse_t + -0.30000001192092896f), 0.0f);
    float _185 = ((_179 * 3.0f) * exp2(1.4426950216293335f - (_179 * 4.328084945678711f))) + ((_172 * 5.0f) * exp2(1.4426950216293335f - (_172 * 7.213475227355957f)));
    float _186 = _185 * 15.0f;
    float _187 = _186 + 30.0f;
    float _189 = (_185 * 20.0f) + 80.0f;
    float _193 = abs(_166 * (O_Uv.x + -0.5f));
    float _194 = abs(_168 + -540.0f);
    float _197 = ((_193 - _169) + _187) + _189;
    float _200 = ((_194 + -510.0f) + _186) + _189;
    float _203 = max(_197, 0.0f);
    float _204 = max(_200, 0.0f);
    float _218 = _193 - (_169 - _187);
    float _219 = _194 - (510.0f - _186);
    float _220 = max(_218, 0.0f);
    float _221 = max(_219, 0.0f);
    float _237 = max(max(0.0f, (1.0f - saturate(abs((min(max(_197, _200), 0.0f) - _189) + sqrt((_204 * _204) + (_203 * _203))) + -0.5f))), ((1.0f - saturate(abs(min(max(_218, _219), 0.0f) + sqrt((_221 * _221) + (_220 * _220))) + -0.5f)) * (1.0f - saturate(_185 * 1.6666666269302368f))));
    float _248 = frac((_167 + _168) * 0.0012499999720603228f) + -0.5f;
    float _249 = frac((_168 - _167) * 0.0012499999720603228f) + -0.5f;
    float _261 = saturate((sin((((_167 * 0.0003124999930150807f) + (O_Uv.y * 0.3375000059604645f)) * 20.0f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
    float _265 = (_261 * _261) * (3.0f - (_261 * 2.0f));
    float _267 = saturate(sqrt((_249 * _249) + (_248 * _248)) * 2.0f);
    float _272 = _265 * 0.20000000298023224f;
    float _274 = ((_267 * 0.12156862020492554f) + 0.7450979948043823f) + _272;
    float _275 = ((_267 * 0.3333333134651184f) + 0.34117645025253296f) + _272;
    do {
      if (!(!((_272 + 0.9803921580314636f) <= 0.040449999272823334f))) {
        _287 = ((_265 * 0.015479876659810543f) + 0.07588174939155579f);
      } else {
        _287 = exp2(log2((_265 * 0.18957345187664032f) + 0.9814143776893616f) * 2.4000000953674316f);
      }
      do {
        if (!(!(_274 <= 0.040449999272823334f))) {
          _298 = (_274 * 0.07739938050508499f);
        } else {
          _298 = exp2(log2((_274 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
        }
        do {
          if (!(!(_275 <= 0.040449999272823334f))) {
            _309 = (_275 * 0.07739938050508499f);
          } else {
            _309 = exp2(log2((_275 + 0.054999999701976776f) * 0.9478672742843628f) * 2.4000000953674316f);
          }
          float _315 = (((_287 * 0.2125999927520752f) + 1.0f) + (_298 * 0.7152000069618225f)) + (_309 * 0.0722000002861023f);
          _332 = (((saturate(_287 / _315) - _156) * _237) + _156);
          _333 = (((saturate(_298 / _315) - _157) * _237) + _157);
          _334 = (((saturate(_309 / _315) - _158) * _237) + _158);
        } while (false);
      } while (false);
    } while (false);
  } else {
    _332 = _156;
    _333 = _157;
    _334 = _158;
  }
  float _340 = depth_tex.SampleLevel(sampler_nearest, float2(O_Uv.x, O_Uv.y), 0.0f);
  float _344 = 10000.0f / ((_340.x * 19999.5f) + 0.5f);
  float _349 = (_344 * ((O_Uv.x * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.x;
  float _351 = (_344 * (((1.0f - O_Uv.y) * 2.0f) + -1.0f)) * frame_consts.inv_near_dim.y;
  float _352 = -0.0f - _344;
  float _376 = mad((frame_consts.paper_xf[2].z), _352, mad((frame_consts.paper_xf[1].z), _351, (_349 * (frame_consts.paper_xf[0].z))));
  float _377 = mad((frame_consts.paper_xf[2].x), _352, mad((frame_consts.paper_xf[1].x), _351, (_349 * (frame_consts.paper_xf[0].x)))) / _376;
  float _378 = mad((frame_consts.paper_xf[2].y), _352, mad((frame_consts.paper_xf[1].y), _351, (_349 * (frame_consts.paper_xf[0].y)))) / _376;
  float _382 = 1.0f - frame_consts.game_plane_blend.y;
  float _387 = log2(max(5.0f, (-0.0f - (_376 - frame_consts.game_plane_blend.x)))) * 10.0f;
  float _388 = floor(_387);
  float _389 = _387 - _388;
  float _391 = exp2(_388 * 0.10000000149011612f);
  float _392 = 1.0f / _391;
  float _393 = min(_392, 0.20000000298023224f);
  float _395 = min((_392 * 0.9330329895019531f), 0.20000000298023224f);
  float _396 = frame_consts.game_plane_blend.x - _391;
  float _402 = frame_consts.game_plane_blend.x - (_391 * 1.0717734098434448f);
  float _414 = frame_consts.game_plane_blend.x + 10.0f;
  float _419 = log2(max(5.0f, (-0.0f - (_376 - _414)))) * 10.0f;
  float _420 = floor(_419);
  float _421 = _419 - _420;
  float _423 = exp2(_420 * 0.10000000149011612f);
  float _424 = 1.0f / _423;
  float _425 = min(_424, 0.20000000298023224f);
  float _427 = min((_424 * 0.9330329895019531f), 0.20000000298023224f);
  float _428 = _414 - _423;
  float _434 = _414 - (_423 * 1.0717734098434448f);
  float _446 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_396 * _377) + (frame_consts.paper_xf[3].x)) * _393), (((_396 * _378) + (frame_consts.paper_xf[3].y)) * _393)), 0.0f);
  float _449 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_402 * _377) + (frame_consts.paper_xf[3].x)) * _395), (((_402 * _378) + (frame_consts.paper_xf[3].y)) * _395)), 0.0f);
  float _452 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_428 * _377) + (frame_consts.paper_xf[3].x)) * _425), (((_428 * _378) + (frame_consts.paper_xf[3].y)) * _425)), 0.0f);
  float _455 = paper_tex.SampleLevel(sampler_bilinear_wrap, float2((((_434 * _377) + (frame_consts.paper_xf[3].x)) * _427), (((_434 * _378) + (frame_consts.paper_xf[3].y)) * _427)), 0.0f);
  float _464 = ((((1.0f - (((1.0f - _389) * _382) * _446.x)) - ((_389 * _382) * _449.x)) - (((1.0f - _421) * frame_consts.game_plane_blend.y) * _452.x)) - ((_421 * frame_consts.game_plane_blend.y) * _455.x)) * frame_consts.paper_mult;
  float _468 = _332 - (_464 * _332);
  float _469 = _333 - (_464 * _333);
  float _470 = _334 - (_464 * _334);
  if (!(frame_consts.death_screen == 0)) {
    float _493 = select((frame_consts.death_screen_t <= 0.019999999552965164f), (1.0f - _51), _51);
    _495 = _493;
    _496 = _493;
    _497 = _493;
  } else {
    _495 = (lerp(_468, frame_consts.params.fade.color.x, frame_consts.params.fade.intensity));
    _496 = (lerp(_469, frame_consts.params.fade.color.y, frame_consts.params.fade.intensity));
    _497 = (lerp(_470, frame_consts.params.fade.color.z, frame_consts.params.fade.intensity));
  }
  if (!(frame_consts.triangular_dissolve_enabled == 0)) {
    float _505 = _15 * O_Uv.x;
    float _506 = _16 * O_Uv.y;
    float _507 = _505 * 0.06666667014360428f;
    float _508 = _506 * 0.038490019738674164f;
    float _510 = ceil(_507 - _508);
    float _512 = floor(_506 * 0.07698003947734833f);
    float _513 = _512 + 1.0f;
    float _516 = ceil((-0.0f - _507) - _508);
    float _518 = (_510 - _516) * 7.5f;
    float _519 = _510 * 0.28867512941360474f;
    float _520 = _513 * 0.5773502588272095f;
    float _521 = _520 - _519;
    float _522 = _516 * 0.28867512941360474f;
    float _525 = _518 / _15;
    float _526 = ((_521 - _522) * 15.0f) / _16;
    do {
      if (((_513 + _510) + _516) == 2.0f) {
        _538 = (_510 + 1.0f);
        _539 = (_512 + 2.0f);
        _540 = (_516 + 1.0f);
      } else {
        _538 = (_510 + -1.0f);
        _539 = _512;
        _540 = (_516 + -1.0f);
      }
      float _541 = _538 - _516;
      float _544 = _520 - (_538 * 0.28867512941360474f);
      float _545 = _544 - _522;
      float _548 = (_539 * 0.5773502588272095f) - _519;
      float _549 = _548 - _522;
      float _551 = _510 - _540;
      float _554 = _521 - (_540 * 0.28867512941360474f);
      float _558 = (_544 - _548) * 15.0f;
      float _559 = (_538 - _510) * -7.5f;
      float _561 = rsqrt(dot(float2(_558, _559), float2(_558, _559)));
      float _570 = (_549 - _554) * 15.0f;
      float _571 = (_540 - _516) * -7.5f;
      float _573 = rsqrt(dot(float2(_570, _571), float2(_570, _571)));
      float _582 = (_554 - _545) * 15.0f;
      float _583 = (_551 - _541) * -7.5f;
      float _585 = rsqrt(dot(float2(_582, _583), float2(_582, _583)));
      float _598 = _525 + -0.5f;
      float _599 = _526 + -0.5f;
      float _646 = O_Uv.x + -0.5f;
      float _647 = O_Uv.y + -0.5f;
      float _654 = ((frame_consts.time - sqrt((_647 * _647) + (_646 * _646))) + (frac(sin(dot(float2((_525 * 5.0f), (_526 * 5.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.20000000298023224f)) * 0.0555555559694767f;
      float _658 = frac(abs(_654));
      float _662 = max((select((_654 >= (-0.0f - _654)), _658, (-0.0f - _658)) * 18.0f), 0.0f);
      float _678 = min(max((1.0f - (((((_662 * 1.600000023841858f) * exp2(1.4426950216293335f - (_662 * 11.541560173034668f))) + (saturate((((frame_consts.triangular_dissolve_amount + -0.6499999761581421f) + (sqrt((_599 * _599) + (_598 * _598)) * 1.4142135381698608f)) + (frac(sin(dot(float2((_525 * 3.0f), (_526 * 3.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f)) * 4.0f) * ((frame_consts.triangular_dissolve_amount * 4.0f) + 1.0f))) * frame_consts.triangular_dissolve_base_amount) * ((saturate((sin((frac(sin(dot(float2(_525, _526), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 5.0f) + ((frame_consts.time * 1.7999999523162842f) * ((frac(sin(dot(float2((_525 * 2.0f), (_526 * 2.0f)), float2(12.989800453186035f, 78.23300170898438f))) * 43758.5f) * 0.10000000149011612f) + 1.0f))) + 1.0f) * 0.5f) * 0.75f) + 0.25f))), 0.0f), 1.0f);
      float _684 = 1.0f - saturate(((1.0f - saturate(min(min(min(1000.0f, abs(dot(float2(((_541 * 7.5f) - _505), ((_545 * 15.0f) - _506)), float2((_558 * _561), (_561 * _559))))), abs(dot(float2((_518 - _505), ((_549 * 15.0f) - _506)), float2((_573 * _570), (_573 * _571))))), abs(dot(float2(((_551 * 7.5f) - _505), ((_554 * 15.0f) - _506)), float2((_585 * _582), (_585 * _583))))) * 0.2309400886297226f)) - _678) / ((_678 * 0.10000002384185791f) + 9.999999974752427e-07f));
      _689 = (_684 * _495);
      _690 = (_684 * _496);
      _691 = (_684 * _497);
    } while (false);
  } else {
    _689 = _495;
    _690 = _496;
    _691 = _497;
  }
  if (!(frame_consts.heart_attack_active == 0)) {
    _699 = (frame_consts.heart_attack_pulse * 0.10000000149011612f);
  } else {
    _699 = 0.0f;
  }
  float _706 = frame_consts.params.vignette.intensity + _699;
  float _709 = _15 / _16;
  float _721 = exp2(log2(saturate((_706 * abs(O_Uv.x + -0.5f)) * (((_709 + -1.0f) * frame_consts.params.vignette.rounded) + 1.0f))) * 5.0f);
  float _722 = exp2(log2(saturate(_706 * abs(O_Uv.y + -0.5f))) * 5.0f);
  float _728 = exp2(log2(saturate(1.0f - dot(float2(_721, _722), float2(_721, _722)))) * 6.0f);
  float _733 = 1.0f - _728;
  float _735 = 1.0f - (_733 * 0.8500000238418579f);
  float _742 = (_735 * (_689 - frame_consts.params.vignette.color.x)) + frame_consts.params.vignette.color.x;
  float _743 = (_735 * (_690 - frame_consts.params.vignette.color.y)) + frame_consts.params.vignette.color.y;
  float _744 = (_735 * (_691 - frame_consts.params.vignette.color.z)) + frame_consts.params.vignette.color.z;
  float _748 = _15 * O_Uv.x;
  float _749 = _16 * O_Uv.y;
  float _750 = _748 + _749;
  float _756 = frac(_750 * 0.0033333334140479565f) + -0.5f;
  float _757 = frac((_749 - _748) * 0.0033333334140479565f) + -0.5f;
  float _763 = saturate(sqrt((_757 * _757) + (_756 * _756)) * 2.0f);
  float _774 = saturate((sin((_750 * 0.01666666753590107f) - (frame_consts.time * 0.8500000238418579f)) * 1.2500001192092896f) + -0.25000008940696716f);
  float _779 = ((_774 * _774) * 0.2199999988079071f) * (3.0f - (_774 * 2.0f));
  float _780 = _779 + 0.9777389168739319f;
  float _781 = ((_763 * 0.13274884223937988f) + 0.7175776362419128f) + _779;
  float _782 = ((_763 * 0.3335757553577423f) + 0.30871906876564026f) + _779;
  float _787 = (O_Uv.x * 1080.0f) * _709;
  float _788 = O_Uv.y * 1080.0f;
  float _789 = _787 * 0.04444444552063942f;
  float _790 = O_Uv.y * 27.712812423706055f;
  float _792 = ceil(_789 - _790);
  float _795 = floor(O_Uv.y * 55.42562484741211f) + 1.0f;
  float _798 = ceil((-0.0f - _790) - _789);
  float _800 = (_795 + _792) + _798;
  float _802 = (_800 * 22.5f) + -33.75f;
  float _803 = _792 - _798;
  float _805 = _803 * 11.25f;
  float _811 = (((_795 * 0.5773502588272095f) - (_792 * 0.28867512941360474f)) - (_798 * 0.28867512941360474f)) * 22.5f;
  float _814 = _802 + _805;
  float _815 = _811 + (19.485570907592773f - (_800 * 12.990381240844727f));
  float _818 = ((_800 * 25.980762481689453f) + -38.97114181518555f) + _811;
  float _819 = _805 - _802;
  float _820 = _814 - _787;
  float _821 = _815 - _788;
  float _824 = _805 - _787;
  float _825 = _818 - _788;
  float _830 = _821 * _821;
  float _837 = _819 - _787;
  float _841 = _815 * 2.5f;
  float _842 = frame_consts.time * 1.5f;
  float _846 = _815 * 0.004444444552063942f;
  float _847 = frame_consts.time * 0.15000000596046448f;
  float _848 = (_814 * 0.04444444552063942f) - _847;
  float _849 = _846 - _847;
  float _850 = frame_consts.time * 0.02500000037252903f;
  float _851 = dot(float3(_848, _849, _850), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _855 = floor(_851 + _848);
  float _856 = floor(_851 + _849);
  float _857 = floor(_851 + _850);
  float _861 = dot(float3(_855, _856, _857), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _862 = _861 + (_848 - _855);
  float _863 = _861 + (_849 - _856);
  float _864 = (_850 - _857) + _861;
  float _868 = select((_862 < _863), 0.0f, 1.0f);
  float _869 = select((_863 < _864), 0.0f, 1.0f);
  float _870 = select((_864 < _862), 0.0f, 1.0f);
  float _871 = 1.0f - _868;
  float _872 = 1.0f - _869;
  float _873 = 1.0f - _870;
  float _874 = min(_868, _873);
  float _875 = min(_869, _871);
  float _876 = min(_870, _872);
  float _877 = max(_868, _873);
  float _878 = max(_869, _871);
  float _879 = max(_870, _872);
  float _883 = (_862 - _874) + 0.1666666716337204f;
  float _884 = (_863 - _875) + 0.1666666716337204f;
  float _885 = (_864 - _876) + 0.1666666716337204f;
  float _889 = (_862 - _877) + 0.3333333432674408f;
  float _890 = (_863 - _878) + 0.3333333432674408f;
  float _891 = (_864 - _879) + 0.3333333432674408f;
  float _892 = _862 + -0.5f;
  float _893 = _863 + -0.5f;
  float _894 = _864 + -0.5f;
  float _904 = _855 - (floor(_855 * 0.0034602077212184668f) * 289.0f);
  float _905 = _856 - (floor(_856 * 0.0034602077212184668f) * 289.0f);
  float _906 = _857 - (floor(_857 * 0.0034602077212184668f) * 289.0f);
  float _907 = _906 + _876;
  float _908 = _906 + _879;
  float _909 = _906 + 1.0f;
  float _918 = ((_906 * 34.0f) + 1.0f) * _906;
  float _919 = ((_907 * 34.0f) + 1.0f) * _907;
  float _920 = ((_908 * 34.0f) + 1.0f) * _908;
  float _921 = ((_909 * 34.0f) + 1.0f) * _909;
  float _935 = (_918 - (floor(_918 * 0.0034602077212184668f) * 289.0f)) + _905;
  float _938 = ((_905 + _875) - (floor(_919 * 0.0034602077212184668f) * 289.0f)) + _919;
  float _941 = ((_905 + _878) - (floor(_920 * 0.0034602077212184668f) * 289.0f)) + _920;
  float _944 = ((_905 + 1.0f) - (floor(_921 * 0.0034602077212184668f) * 289.0f)) + _921;
  float _953 = ((_935 * 34.0f) + 1.0f) * _935;
  float _954 = ((_938 * 34.0f) + 1.0f) * _938;
  float _955 = ((_941 * 34.0f) + 1.0f) * _941;
  float _956 = ((_944 * 34.0f) + 1.0f) * _944;
  float _970 = (_953 - (floor(_953 * 0.0034602077212184668f) * 289.0f)) + _904;
  float _973 = ((_904 + _874) - (floor(_954 * 0.0034602077212184668f) * 289.0f)) + _954;
  float _976 = ((_904 + _877) - (floor(_955 * 0.0034602077212184668f) * 289.0f)) + _955;
  float _979 = ((_904 + 1.0f) - (floor(_956 * 0.0034602077212184668f) * 289.0f)) + _956;
  float _988 = ((_970 * 34.0f) + 1.0f) * _970;
  float _989 = ((_973 * 34.0f) + 1.0f) * _973;
  float _990 = ((_976 * 34.0f) + 1.0f) * _976;
  float _991 = ((_979 * 34.0f) + 1.0f) * _979;
  float _1004 = _988 - (floor(_988 * 0.0034602077212184668f) * 289.0f);
  float _1005 = _989 - (floor(_989 * 0.0034602077212184668f) * 289.0f);
  float _1006 = _990 - (floor(_990 * 0.0034602077212184668f) * 289.0f);
  float _1007 = _991 - (floor(_991 * 0.0034602077212184668f) * 289.0f);
  float _1020 = _1004 - (floor(_1004 * 0.020408164709806442f) * 49.0f);
  float _1021 = _1005 - (floor(_1005 * 0.020408164709806442f) * 49.0f);
  float _1022 = _1006 - (floor(_1006 * 0.020408164709806442f) * 49.0f);
  float _1023 = _1007 - (floor(_1007 * 0.020408164709806442f) * 49.0f);
  float _1028 = floor(_1020 * 0.1428571492433548f);
  float _1029 = floor(_1021 * 0.1428571492433548f);
  float _1030 = floor(_1022 * 0.1428571492433548f);
  float _1031 = floor(_1023 * 0.1428571492433548f);
  float _1048 = (_1028 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1049 = (_1029 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1050 = (_1030 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1051 = (_1031 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1056 = (floor(_1020 - (_1028 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1057 = (floor(_1021 - (_1029 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1058 = (floor(_1022 - (_1030 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1059 = (floor(_1023 - (_1031 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1072 = (1.0f - abs(_1048)) - abs(_1056);
  float _1073 = (1.0f - abs(_1049)) - abs(_1057);
  float _1074 = (1.0f - abs(_1050)) - abs(_1058);
  float _1075 = (1.0f - abs(_1051)) - abs(_1059);
  float _1104 = select((_1072 > 0.0f), -0.0f, -1.0f);
  float _1105 = select((_1073 > 0.0f), -0.0f, -1.0f);
  float _1106 = select((_1074 > 0.0f), -0.0f, -1.0f);
  float _1107 = select((_1075 > 0.0f), -0.0f, -1.0f);
  float _1112 = (((floor(_1048) * 2.0f) + 1.0f) * _1104) + _1048;
  float _1113 = (((floor(_1056) * 2.0f) + 1.0f) * _1104) + _1056;
  float _1114 = (((floor(_1049) * 2.0f) + 1.0f) * _1105) + _1049;
  float _1115 = (((floor(_1057) * 2.0f) + 1.0f) * _1105) + _1057;
  float _1120 = (((floor(_1050) * 2.0f) + 1.0f) * _1106) + _1050;
  float _1121 = (((floor(_1058) * 2.0f) + 1.0f) * _1106) + _1058;
  float _1122 = (((floor(_1051) * 2.0f) + 1.0f) * _1107) + _1051;
  float _1123 = (((floor(_1059) * 2.0f) + 1.0f) * _1107) + _1059;
  float _1132 = 1.7928400039672852f - (dot(float3(_1112, _1113, _1072), float3(_1112, _1113, _1072)) * 0.8537350296974182f);
  float _1133 = 1.7928400039672852f - (dot(float3(_1114, _1115, _1073), float3(_1114, _1115, _1073)) * 0.8537350296974182f);
  float _1134 = 1.7928400039672852f - (dot(float3(_1120, _1121, _1074), float3(_1120, _1121, _1074)) * 0.8537350296974182f);
  float _1135 = 1.7928400039672852f - (dot(float3(_1122, _1123, _1075), float3(_1122, _1123, _1075)) * 0.8537350296974182f);
  float _1156 = max((0.6000000238418579f - dot(float3(_862, _863, _864), float3(_862, _863, _864))), 0.0f);
  float _1157 = max((0.6000000238418579f - dot(float3(_883, _884, _885), float3(_883, _884, _885))), 0.0f);
  float _1158 = max((0.6000000238418579f - dot(float3(_889, _890, _891), float3(_889, _890, _891))), 0.0f);
  float _1159 = max((0.6000000238418579f - dot(float3(_892, _893, _894), float3(_892, _893, _894))), 0.0f);
  float _1160 = _1156 * _1156;
  float _1161 = _1157 * _1157;
  float _1162 = _1158 * _1158;
  float _1163 = _1159 * _1159;
  float _1178 = saturate((((sin(_841 - _842) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1160 * _1160), (_1161 * _1161), (_1162 * _1162), (_1163 * _1163)), float4(dot(float3((_1132 * _1112), (_1132 * _1113), (_1132 * _1072)), float3(_862, _863, _864)), dot(float3((_1133 * _1114), (_1133 * _1115), (_1133 * _1073)), float3(_883, _884, _885)), dot(float3((_1134 * _1120), (_1134 * _1121), (_1134 * _1074)), float3(_889, _890, _891)), dot(float3((_1135 * _1122), (_1135 * _1123), (_1135 * _1075)), float3(_892, _893, _894)))) * 21.0f)) * 4.0f);
  float _1182 = (_1178 * _1178) * (3.0f - (_1178 * 2.0f));
  float _1184 = (_1182 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1189 = (_803 * 0.5f) - _847;
  float _1190 = (_818 * 0.004444444552063942f) - _847;
  float _1191 = dot(float3(_1189, _1190, _850), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1195 = floor(_1191 + _1189);
  float _1196 = floor(_1191 + _1190);
  float _1197 = floor(_1191 + _850);
  float _1201 = dot(float3(_1195, _1196, _1197), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1202 = _1201 + (_1189 - _1195);
  float _1203 = _1201 + (_1190 - _1196);
  float _1204 = (_850 - _1197) + _1201;
  float _1208 = select((_1202 < _1203), 0.0f, 1.0f);
  float _1209 = select((_1203 < _1204), 0.0f, 1.0f);
  float _1210 = select((_1204 < _1202), 0.0f, 1.0f);
  float _1211 = 1.0f - _1208;
  float _1212 = 1.0f - _1209;
  float _1213 = 1.0f - _1210;
  float _1214 = min(_1208, _1213);
  float _1215 = min(_1209, _1211);
  float _1216 = min(_1210, _1212);
  float _1217 = max(_1208, _1213);
  float _1218 = max(_1209, _1211);
  float _1219 = max(_1210, _1212);
  float _1223 = (_1202 - _1214) + 0.1666666716337204f;
  float _1224 = (_1203 - _1215) + 0.1666666716337204f;
  float _1225 = (_1204 - _1216) + 0.1666666716337204f;
  float _1229 = (_1202 - _1217) + 0.3333333432674408f;
  float _1230 = (_1203 - _1218) + 0.3333333432674408f;
  float _1231 = (_1204 - _1219) + 0.3333333432674408f;
  float _1232 = _1202 + -0.5f;
  float _1233 = _1203 + -0.5f;
  float _1234 = _1204 + -0.5f;
  float _1244 = _1195 - (floor(_1195 * 0.0034602077212184668f) * 289.0f);
  float _1245 = _1196 - (floor(_1196 * 0.0034602077212184668f) * 289.0f);
  float _1246 = _1197 - (floor(_1197 * 0.0034602077212184668f) * 289.0f);
  float _1247 = _1246 + _1216;
  float _1248 = _1246 + _1219;
  float _1249 = _1246 + 1.0f;
  float _1258 = ((_1246 * 34.0f) + 1.0f) * _1246;
  float _1259 = ((_1247 * 34.0f) + 1.0f) * _1247;
  float _1260 = ((_1248 * 34.0f) + 1.0f) * _1248;
  float _1261 = ((_1249 * 34.0f) + 1.0f) * _1249;
  float _1275 = (_1258 - (floor(_1258 * 0.0034602077212184668f) * 289.0f)) + _1245;
  float _1278 = ((_1245 + _1215) - (floor(_1259 * 0.0034602077212184668f) * 289.0f)) + _1259;
  float _1281 = ((_1245 + _1218) - (floor(_1260 * 0.0034602077212184668f) * 289.0f)) + _1260;
  float _1284 = ((_1245 + 1.0f) - (floor(_1261 * 0.0034602077212184668f) * 289.0f)) + _1261;
  float _1293 = ((_1275 * 34.0f) + 1.0f) * _1275;
  float _1294 = ((_1278 * 34.0f) + 1.0f) * _1278;
  float _1295 = ((_1281 * 34.0f) + 1.0f) * _1281;
  float _1296 = ((_1284 * 34.0f) + 1.0f) * _1284;
  float _1310 = (_1293 - (floor(_1293 * 0.0034602077212184668f) * 289.0f)) + _1244;
  float _1313 = ((_1244 + _1214) - (floor(_1294 * 0.0034602077212184668f) * 289.0f)) + _1294;
  float _1316 = ((_1244 + _1217) - (floor(_1295 * 0.0034602077212184668f) * 289.0f)) + _1295;
  float _1319 = ((_1244 + 1.0f) - (floor(_1296 * 0.0034602077212184668f) * 289.0f)) + _1296;
  float _1328 = ((_1310 * 34.0f) + 1.0f) * _1310;
  float _1329 = ((_1313 * 34.0f) + 1.0f) * _1313;
  float _1330 = ((_1316 * 34.0f) + 1.0f) * _1316;
  float _1331 = ((_1319 * 34.0f) + 1.0f) * _1319;
  float _1344 = _1328 - (floor(_1328 * 0.0034602077212184668f) * 289.0f);
  float _1345 = _1329 - (floor(_1329 * 0.0034602077212184668f) * 289.0f);
  float _1346 = _1330 - (floor(_1330 * 0.0034602077212184668f) * 289.0f);
  float _1347 = _1331 - (floor(_1331 * 0.0034602077212184668f) * 289.0f);
  float _1360 = _1344 - (floor(_1344 * 0.020408164709806442f) * 49.0f);
  float _1361 = _1345 - (floor(_1345 * 0.020408164709806442f) * 49.0f);
  float _1362 = _1346 - (floor(_1346 * 0.020408164709806442f) * 49.0f);
  float _1363 = _1347 - (floor(_1347 * 0.020408164709806442f) * 49.0f);
  float _1368 = floor(_1360 * 0.1428571492433548f);
  float _1369 = floor(_1361 * 0.1428571492433548f);
  float _1370 = floor(_1362 * 0.1428571492433548f);
  float _1371 = floor(_1363 * 0.1428571492433548f);
  float _1388 = (_1368 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1389 = (_1369 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1390 = (_1370 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1391 = (_1371 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1396 = (floor(_1360 - (_1368 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1397 = (floor(_1361 - (_1369 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1398 = (floor(_1362 - (_1370 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1399 = (floor(_1363 - (_1371 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1412 = (1.0f - abs(_1388)) - abs(_1396);
  float _1413 = (1.0f - abs(_1389)) - abs(_1397);
  float _1414 = (1.0f - abs(_1390)) - abs(_1398);
  float _1415 = (1.0f - abs(_1391)) - abs(_1399);
  float _1444 = select((_1412 > 0.0f), -0.0f, -1.0f);
  float _1445 = select((_1413 > 0.0f), -0.0f, -1.0f);
  float _1446 = select((_1414 > 0.0f), -0.0f, -1.0f);
  float _1447 = select((_1415 > 0.0f), -0.0f, -1.0f);
  float _1452 = (((floor(_1388) * 2.0f) + 1.0f) * _1444) + _1388;
  float _1453 = (((floor(_1396) * 2.0f) + 1.0f) * _1444) + _1396;
  float _1454 = (((floor(_1389) * 2.0f) + 1.0f) * _1445) + _1389;
  float _1455 = (((floor(_1397) * 2.0f) + 1.0f) * _1445) + _1397;
  float _1460 = (((floor(_1390) * 2.0f) + 1.0f) * _1446) + _1390;
  float _1461 = (((floor(_1398) * 2.0f) + 1.0f) * _1446) + _1398;
  float _1462 = (((floor(_1391) * 2.0f) + 1.0f) * _1447) + _1391;
  float _1463 = (((floor(_1399) * 2.0f) + 1.0f) * _1447) + _1399;
  float _1472 = 1.7928400039672852f - (dot(float3(_1452, _1453, _1412), float3(_1452, _1453, _1412)) * 0.8537350296974182f);
  float _1473 = 1.7928400039672852f - (dot(float3(_1454, _1455, _1413), float3(_1454, _1455, _1413)) * 0.8537350296974182f);
  float _1474 = 1.7928400039672852f - (dot(float3(_1460, _1461, _1414), float3(_1460, _1461, _1414)) * 0.8537350296974182f);
  float _1475 = 1.7928400039672852f - (dot(float3(_1462, _1463, _1415), float3(_1462, _1463, _1415)) * 0.8537350296974182f);
  float _1496 = max((0.6000000238418579f - dot(float3(_1202, _1203, _1204), float3(_1202, _1203, _1204))), 0.0f);
  float _1497 = max((0.6000000238418579f - dot(float3(_1223, _1224, _1225), float3(_1223, _1224, _1225))), 0.0f);
  float _1498 = max((0.6000000238418579f - dot(float3(_1229, _1230, _1231), float3(_1229, _1230, _1231))), 0.0f);
  float _1499 = max((0.6000000238418579f - dot(float3(_1232, _1233, _1234), float3(_1232, _1233, _1234))), 0.0f);
  float _1500 = _1496 * _1496;
  float _1501 = _1497 * _1497;
  float _1502 = _1498 * _1498;
  float _1503 = _1499 * _1499;
  float _1518 = saturate((((sin((_818 * 2.5f) - _842) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1500 * _1500), (_1501 * _1501), (_1502 * _1502), (_1503 * _1503)), float4(dot(float3((_1472 * _1452), (_1472 * _1453), (_1472 * _1412)), float3(_1202, _1203, _1204)), dot(float3((_1473 * _1454), (_1473 * _1455), (_1473 * _1413)), float3(_1223, _1224, _1225)), dot(float3((_1474 * _1460), (_1474 * _1461), (_1474 * _1414)), float3(_1229, _1230, _1231)), dot(float3((_1475 * _1462), (_1475 * _1463), (_1475 * _1415)), float3(_1232, _1233, _1234)))) * 21.0f)) * 4.0f);
  float _1522 = (_1518 * _1518) * (3.0f - (_1518 * 2.0f));
  float _1524 = (_1522 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1531 = frame_consts.time * 0.15000000596046448f;
  float _1532 = (_819 * 0.04444444552063942f) - _1531;
  float _1533 = _846 - _1531;
  float _1534 = frame_consts.time * 0.02500000037252903f;
  float _1535 = dot(float3(_1532, _1533, _1534), float3(0.3333333432674408f, 0.3333333432674408f, 0.3333333432674408f));
  float _1539 = floor(_1532 + _1535);
  float _1540 = floor(_1533 + _1535);
  float _1541 = floor(_1534 + _1535);
  float _1545 = dot(float3(_1539, _1540, _1541), float3(0.1666666716337204f, 0.1666666716337204f, 0.1666666716337204f));
  float _1546 = _1545 + (_1532 - _1539);
  float _1547 = _1545 + (_1533 - _1540);
  float _1548 = (_1534 - _1541) + _1545;
  float _1552 = select((_1546 < _1547), 0.0f, 1.0f);
  float _1553 = select((_1547 < _1548), 0.0f, 1.0f);
  float _1554 = select((_1548 < _1546), 0.0f, 1.0f);
  float _1555 = 1.0f - _1552;
  float _1556 = 1.0f - _1553;
  float _1557 = 1.0f - _1554;
  float _1558 = min(_1552, _1557);
  float _1559 = min(_1553, _1555);
  float _1560 = min(_1554, _1556);
  float _1561 = max(_1552, _1557);
  float _1562 = max(_1553, _1555);
  float _1563 = max(_1554, _1556);
  float _1567 = (_1546 - _1558) + 0.1666666716337204f;
  float _1568 = (_1547 - _1559) + 0.1666666716337204f;
  float _1569 = (_1548 - _1560) + 0.1666666716337204f;
  float _1573 = (_1546 - _1561) + 0.3333333432674408f;
  float _1574 = (_1547 - _1562) + 0.3333333432674408f;
  float _1575 = (_1548 - _1563) + 0.3333333432674408f;
  float _1576 = _1546 + -0.5f;
  float _1577 = _1547 + -0.5f;
  float _1578 = _1548 + -0.5f;
  float _1588 = _1539 - (floor(_1539 * 0.0034602077212184668f) * 289.0f);
  float _1589 = _1540 - (floor(_1540 * 0.0034602077212184668f) * 289.0f);
  float _1590 = _1541 - (floor(_1541 * 0.0034602077212184668f) * 289.0f);
  float _1591 = _1590 + _1560;
  float _1592 = _1590 + _1563;
  float _1593 = _1590 + 1.0f;
  float _1602 = ((_1590 * 34.0f) + 1.0f) * _1590;
  float _1603 = ((_1591 * 34.0f) + 1.0f) * _1591;
  float _1604 = ((_1592 * 34.0f) + 1.0f) * _1592;
  float _1605 = ((_1593 * 34.0f) + 1.0f) * _1593;
  float _1619 = (_1602 - (floor(_1602 * 0.0034602077212184668f) * 289.0f)) + _1589;
  float _1622 = ((_1589 + _1559) - (floor(_1603 * 0.0034602077212184668f) * 289.0f)) + _1603;
  float _1625 = ((_1589 + _1562) - (floor(_1604 * 0.0034602077212184668f) * 289.0f)) + _1604;
  float _1628 = ((_1589 + 1.0f) - (floor(_1605 * 0.0034602077212184668f) * 289.0f)) + _1605;
  float _1637 = ((_1619 * 34.0f) + 1.0f) * _1619;
  float _1638 = ((_1622 * 34.0f) + 1.0f) * _1622;
  float _1639 = ((_1625 * 34.0f) + 1.0f) * _1625;
  float _1640 = ((_1628 * 34.0f) + 1.0f) * _1628;
  float _1654 = (_1637 - (floor(_1637 * 0.0034602077212184668f) * 289.0f)) + _1588;
  float _1657 = ((_1588 + _1558) - (floor(_1638 * 0.0034602077212184668f) * 289.0f)) + _1638;
  float _1660 = ((_1588 + _1561) - (floor(_1639 * 0.0034602077212184668f) * 289.0f)) + _1639;
  float _1663 = ((_1588 + 1.0f) - (floor(_1640 * 0.0034602077212184668f) * 289.0f)) + _1640;
  float _1672 = ((_1654 * 34.0f) + 1.0f) * _1654;
  float _1673 = ((_1657 * 34.0f) + 1.0f) * _1657;
  float _1674 = ((_1660 * 34.0f) + 1.0f) * _1660;
  float _1675 = ((_1663 * 34.0f) + 1.0f) * _1663;
  float _1688 = _1672 - (floor(_1672 * 0.0034602077212184668f) * 289.0f);
  float _1689 = _1673 - (floor(_1673 * 0.0034602077212184668f) * 289.0f);
  float _1690 = _1674 - (floor(_1674 * 0.0034602077212184668f) * 289.0f);
  float _1691 = _1675 - (floor(_1675 * 0.0034602077212184668f) * 289.0f);
  float _1704 = _1688 - (floor(_1688 * 0.020408164709806442f) * 49.0f);
  float _1705 = _1689 - (floor(_1689 * 0.020408164709806442f) * 49.0f);
  float _1706 = _1690 - (floor(_1690 * 0.020408164709806442f) * 49.0f);
  float _1707 = _1691 - (floor(_1691 * 0.020408164709806442f) * 49.0f);
  float _1712 = floor(_1704 * 0.1428571492433548f);
  float _1713 = floor(_1705 * 0.1428571492433548f);
  float _1714 = floor(_1706 * 0.1428571492433548f);
  float _1715 = floor(_1707 * 0.1428571492433548f);
  float _1732 = (_1712 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1733 = (_1713 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1734 = (_1714 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1735 = (_1715 * 0.2857142984867096f) + -0.9285714030265808f;
  float _1740 = (floor(_1704 - (_1712 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1741 = (floor(_1705 - (_1713 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1742 = (floor(_1706 - (_1714 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1743 = (floor(_1707 - (_1715 * 7.0f)) * 0.2857142984867096f) + -0.9285714030265808f;
  float _1756 = (1.0f - abs(_1732)) - abs(_1740);
  float _1757 = (1.0f - abs(_1733)) - abs(_1741);
  float _1758 = (1.0f - abs(_1734)) - abs(_1742);
  float _1759 = (1.0f - abs(_1735)) - abs(_1743);
  float _1788 = select((_1756 > 0.0f), -0.0f, -1.0f);
  float _1789 = select((_1757 > 0.0f), -0.0f, -1.0f);
  float _1790 = select((_1758 > 0.0f), -0.0f, -1.0f);
  float _1791 = select((_1759 > 0.0f), -0.0f, -1.0f);
  float _1796 = (((floor(_1732) * 2.0f) + 1.0f) * _1788) + _1732;
  float _1797 = (((floor(_1740) * 2.0f) + 1.0f) * _1788) + _1740;
  float _1798 = (((floor(_1733) * 2.0f) + 1.0f) * _1789) + _1733;
  float _1799 = (((floor(_1741) * 2.0f) + 1.0f) * _1789) + _1741;
  float _1804 = (((floor(_1734) * 2.0f) + 1.0f) * _1790) + _1734;
  float _1805 = (((floor(_1742) * 2.0f) + 1.0f) * _1790) + _1742;
  float _1806 = (((floor(_1735) * 2.0f) + 1.0f) * _1791) + _1735;
  float _1807 = (((floor(_1743) * 2.0f) + 1.0f) * _1791) + _1743;
  float _1816 = 1.7928400039672852f - (dot(float3(_1796, _1797, _1756), float3(_1796, _1797, _1756)) * 0.8537350296974182f);
  float _1817 = 1.7928400039672852f - (dot(float3(_1798, _1799, _1757), float3(_1798, _1799, _1757)) * 0.8537350296974182f);
  float _1818 = 1.7928400039672852f - (dot(float3(_1804, _1805, _1758), float3(_1804, _1805, _1758)) * 0.8537350296974182f);
  float _1819 = 1.7928400039672852f - (dot(float3(_1806, _1807, _1759), float3(_1806, _1807, _1759)) * 0.8537350296974182f);
  float _1840 = max((0.6000000238418579f - dot(float3(_1546, _1547, _1548), float3(_1546, _1547, _1548))), 0.0f);
  float _1841 = max((0.6000000238418579f - dot(float3(_1567, _1568, _1569), float3(_1567, _1568, _1569))), 0.0f);
  float _1842 = max((0.6000000238418579f - dot(float3(_1573, _1574, _1575), float3(_1573, _1574, _1575))), 0.0f);
  float _1843 = max((0.6000000238418579f - dot(float3(_1576, _1577, _1578), float3(_1576, _1577, _1578))), 0.0f);
  float _1844 = _1840 * _1840;
  float _1845 = _1841 * _1841;
  float _1846 = _1842 * _1842;
  float _1847 = _1843 * _1843;
  float _1862 = saturate((((sin(_841 - (frame_consts.time * 1.5f)) * 0.15000000596046448f) + 0.050000011920928955f) + (dot(float4((_1844 * _1844), (_1845 * _1845), (_1846 * _1846), (_1847 * _1847)), float4(dot(float3((_1816 * _1796), (_1816 * _1797), (_1816 * _1756)), float3(_1546, _1547, _1548)), dot(float3((_1817 * _1798), (_1817 * _1799), (_1817 * _1757)), float3(_1567, _1568, _1569)), dot(float3((_1818 * _1804), (_1818 * _1805), (_1818 * _1758)), float3(_1573, _1574, _1575)), dot(float3((_1819 * _1806), (_1819 * _1807), (_1819 * _1759)), float3(_1576, _1577, _1578)))) * 21.0f)) * 4.0f);
  float _1866 = (_1862 * _1862) * (3.0f - (_1862 * 2.0f));
  float _1868 = (_1866 * 0.6499999761581421f) + 0.3499999940395355f;
  float _1890 = saturate(_1184);
  float _1891 = saturate(_1524);
  float _1913 = (((_728 * 1.2000000476837158f) * _733) * frame_consts.params.vignette.golden_intensity) * ((((saturate(11.0f - (sqrt((_825 * _825) + (_824 * _824)) / ((_1522 * 0.039000000804662704f) + 0.08100000768899918f))) * _1524) + (saturate(11.0f - (sqrt((_820 * _820) + _830) / ((_1182 * 0.039000000804662704f) + 0.08100000768899918f))) * _1184)) + (saturate(11.0f - (sqrt((_837 * _837) + _830) / ((_1866 * 0.039000000804662704f) + 0.08100000768899918f))) * _1868)) + (((((saturate(1.0f - (abs(_821) * 0.8333333134651184f)) * _1890) + (saturate(1.0f - (abs(dot(float2(_824, _825), float2(-0.8660253882408142f, 0.5f))) * 0.8333333134651184f)) * _1891)) * saturate(_1868)) + ((_1890 * saturate(1.0f - (abs(dot(float2(_820, _821), float2(0.8660253882408142f, 0.5f))) * 0.8333333134651184f))) * _1891)) * 0.5f));
  float _1920 = (_1913 * ((_780 * _780) - _742)) + _742;
  float _1921 = (_1913 * ((_781 * _781) - _743)) + _743;
  float _1922 = (_1913 * ((_782 * _782) - _744)) + _744;
  if (frame_consts.flashback_lut > 0.0f) {
    float _1931 = ((_1920 * 0.3930000066757202f) + (_1921 * 0.7689999938011169f)) + (_1922 * 0.1889999955892563f);
    float _1936 = ((_1920 * 0.3490000069141388f) + (_1921 * 0.6859999895095825f)) + (_1922 * 0.1679999977350235f);
    float _1941 = ((_1920 * 0.2720000147819519f) + (_1921 * 0.5339999794960022f)) + (_1922 * 0.13099999725818634f);
    float _1942 = frame_consts.flashback_lut * 0.800000011920929f;
    float _1947 = ((_1920 * 0.2125999927520752f) + (_1921 * 0.7152000069618225f)) + (_1922 * 0.0722000002861023f);
    _1967 = ((((_1931 - _1920) + ((_1947 - _1931) * 0.6499999761581421f)) * _1942) + _1920);
    _1968 = ((((_1936 - _1921) + ((_1947 - _1936) * 0.6499999761581421f)) * _1942) + _1921);
    _1969 = ((((_1941 - _1922) + ((_1947 - _1941) * 0.6499999761581421f)) * _1942) + _1922);
  } else {
    _1967 = _1920;
    _1968 = _1921;
    _1969 = _1922;
  }
  if (!(frame_consts.invert == 0)) {
    _1978 = (1.0f - _1967);
    _1979 = (1.0f - _1968);
    _1980 = (1.0f - _1969);
  } else {
    _1978 = _1967;
    _1979 = _1968;
    _1980 = _1969;
  }
  SV_Target.x = _1978;
  SV_Target.y = _1979;
  SV_Target.z = _1980;
  if (RENODX_TONE_MAP_TYPE) {
    SV_Target.rgb = renodx::draw::ToneMapPass(untonemapped.rgb, SV_Target.rgb);
  } else {
    SV_Target.rgb = saturate(SV_Target.rgb);
  }
  SV_Target.rgb = renodx::draw::RenderIntermediatePass(SV_Target.rgb);

  SV_Target.w = 1.0f;
  return SV_Target;
}
